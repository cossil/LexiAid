(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Eb={exports:{}},ad={},kb={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=Symbol.for("react.element"),WT=Symbol.for("react.portal"),KT=Symbol.for("react.fragment"),GT=Symbol.for("react.strict_mode"),QT=Symbol.for("react.profiler"),YT=Symbol.for("react.provider"),XT=Symbol.for("react.context"),JT=Symbol.for("react.forward_ref"),ZT=Symbol.for("react.suspense"),e2=Symbol.for("react.memo"),t2=Symbol.for("react.lazy"),y0=Symbol.iterator;function n2(t){return t===null||typeof t!="object"?null:(t=y0&&t[y0]||t["@@iterator"],typeof t=="function"?t:null)}var Sb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tb=Object.assign,Cb={};function Po(t,e,n){this.props=t,this.context=e,this.refs=Cb,this.updater=n||Sb}Po.prototype.isReactComponent={};Po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nb(){}Nb.prototype=Po.prototype;function ym(t,e,n){this.props=t,this.context=e,this.refs=Cb,this.updater=n||Sb}var xm=ym.prototype=new Nb;xm.constructor=ym;Tb(xm,Po.prototype);xm.isPureReactComponent=!0;var x0=Array.isArray,Ib=Object.prototype.hasOwnProperty,vm={current:null},Ab={key:!0,ref:!0,__self:!0,__source:!0};function Rb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ib.call(e,r)&&!Ab.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:bl,type:t,key:s,ref:o,props:i,_owner:vm.current}}function r2(t,e){return{$$typeof:bl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wm(t){return typeof t=="object"&&t!==null&&t.$$typeof===bl}function i2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var v0=/\/+/g;function yh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?i2(""+t.key):e.toString(36)}function Ou(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bl:case WT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+yh(o,0):r,x0(i)?(n="",t!=null&&(n=t.replace(v0,"$&/")+"/"),Ou(i,e,n,"",function(d){return d})):i!=null&&(wm(i)&&(i=r2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(v0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",x0(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+yh(s,a);o+=Ou(s,e,n,u,i)}else if(u=n2(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+yh(s,a++),o+=Ou(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function su(t,e,n){if(t==null)return t;var r=[],i=0;return Ou(t,r,"","",function(s){return e.call(n,s,i++)}),r}function s2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Lu={transition:null},o2={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Lu,ReactCurrentOwner:vm};function Pb(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:su,forEach:function(t,e,n){su(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return su(t,function(){e++}),e},toArray:function(t){return su(t,function(e){return e})||[]},only:function(t){if(!wm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=Po;be.Fragment=KT;be.Profiler=QT;be.PureComponent=ym;be.StrictMode=GT;be.Suspense=ZT;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o2;be.act=Pb;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Tb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Ib.call(e,u)&&!Ab.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:bl,type:t.type,key:i,ref:s,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:XT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YT,_context:t},t.Consumer=t};be.createElement=Rb;be.createFactory=function(t){var e=Rb.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:JT,render:t}};be.isValidElement=wm;be.lazy=function(t){return{$$typeof:t2,_payload:{_status:-1,_result:t},_init:s2}};be.memo=function(t,e){return{$$typeof:e2,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Lu.transition;Lu.transition={};try{t()}finally{Lu.transition=e}};be.unstable_act=Pb;be.useCallback=function(t,e){return qt.current.useCallback(t,e)};be.useContext=function(t){return qt.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};be.useEffect=function(t,e){return qt.current.useEffect(t,e)};be.useId=function(){return qt.current.useId()};be.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return qt.current.useMemo(t,e)};be.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};be.useRef=function(t){return qt.current.useRef(t)};be.useState=function(t){return qt.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return qt.current.useTransition()};be.version="18.3.1";kb.exports=be;var k=kb.exports;const a2=gm(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2=k,u2=Symbol.for("react.element"),c2=Symbol.for("react.fragment"),d2=Object.prototype.hasOwnProperty,h2=l2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f2={key:!0,ref:!0,__self:!0,__source:!0};function jb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)d2.call(e,r)&&!f2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:u2,type:t,key:s,ref:o,props:i,_owner:h2.current}}ad.Fragment=c2;ad.jsx=jb;ad.jsxs=jb;Eb.exports=ad;var l=Eb.exports,Db={exports:{}},kn={},Ob={exports:{}},Lb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,H){var O=V.length;V.push(H);e:for(;0<O;){var re=O-1>>>1,ie=V[re];if(0<i(ie,H))V[re]=H,V[O]=ie,O=re;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var H=V[0],O=V.pop();if(O!==H){V[0]=O;e:for(var re=0,ie=V.length,L=ie>>>1;re<L;){var fe=2*(re+1)-1,Ee=V[fe],xe=fe+1,Oe=V[xe];if(0>i(Ee,O))xe<ie&&0>i(Oe,Ee)?(V[re]=Oe,V[xe]=O,re=xe):(V[re]=Ee,V[fe]=O,re=fe);else if(xe<ie&&0>i(Oe,O))V[re]=Oe,V[xe]=O,re=xe;else break e}}return H}function i(V,H){var O=V.sortIndex-H.sortIndex;return O!==0?O:V.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],d=[],h=1,f=null,p=3,m=!1,w=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=V)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function D(V){if(S=!1,b(V),!w)if(n(u)!==null)w=!0,he(M);else{var H=n(d);H!==null&&X(D,H.startTime-V)}}function M(V,H){w=!1,S&&(S=!1,y(_),_=-1),m=!0;var O=p;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||V&&!j());){var re=f.callback;if(typeof re=="function"){f.callback=null,p=f.priorityLevel;var ie=re(f.expirationTime<=H);H=t.unstable_now(),typeof ie=="function"?f.callback=ie:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var L=!0;else{var fe=n(d);fe!==null&&X(D,fe.startTime-H),L=!1}return L}finally{f=null,p=O,m=!1}}var C=!1,E=null,_=-1,N=5,R=-1;function j(){return!(t.unstable_now()-R<N)}function I(){if(E!==null){var V=t.unstable_now();R=V;var H=!0;try{H=E(!0,V)}finally{H?P():(C=!1,E=null)}}else C=!1}var P;if(typeof v=="function")P=function(){v(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Y=B.port2;B.port1.onmessage=I,P=function(){Y.postMessage(null)}}else P=function(){T(I,0)};function he(V){E=V,C||(C=!0,P())}function X(V,H){_=T(function(){V(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,he(M))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var O=p;p=H;try{return V()}finally{p=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,H){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var O=p;p=V;try{return H()}finally{p=O}},t.unstable_scheduleCallback=function(V,H,O){var re=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?re+O:re):O=re,V){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=O+ie,V={id:h++,callback:H,priorityLevel:V,startTime:O,expirationTime:ie,sortIndex:-1},O>re?(V.sortIndex=O,e(d,V),n(u)===null&&V===n(d)&&(S?(y(_),_=-1):S=!0,X(D,O-re))):(V.sortIndex=ie,e(u,V),w||m||(w=!0,he(M))),V},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(V){var H=p;return function(){var O=p;p=H;try{return V.apply(this,arguments)}finally{p=O}}}})(Lb);Ob.exports=Lb;var p2=Ob.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m2=k,En=p2;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mb=new Set,Ka={};function Ts(t,e){yo(t,e),yo(t+"Capture",e)}function yo(t,e){for(Ka[t]=e,t=0;t<e.length;t++)Mb.add(e[t])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wf=Object.prototype.hasOwnProperty,g2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w0={},b0={};function y2(t){return wf.call(b0,t)?!0:wf.call(w0,t)?!1:g2.test(t)?b0[t]=!0:(w0[t]=!0,!1)}function x2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function v2(t,e,n,r){if(e===null||typeof e>"u"||x2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var bm=/[\-:]([a-z])/g;function _m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bm,_m);_t[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bm,_m);_t[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bm,_m);_t[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Em(t,e,n,r){var i=_t.hasOwnProperty(e)?_t[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v2(e,n,i,r)&&(n=null),r||i===null?y2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=m2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ou=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),km=Symbol.for("react.strict_mode"),bf=Symbol.for("react.profiler"),Fb=Symbol.for("react.provider"),Vb=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),_f=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Tm=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),Ub=Symbol.for("react.offscreen"),_0=Symbol.iterator;function aa(t){return t===null||typeof t!="object"?null:(t=_0&&t[_0]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,xh;function wa(t){if(xh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xh=e&&e[1]||""}return`
`+xh+t}var vh=!1;function wh(t,e){if(!t||vh)return"";vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{vh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wa(t):""}function w2(t){switch(t.tag){case 5:return wa(t.type);case 16:return wa("Lazy");case 13:return wa("Suspense");case 19:return wa("SuspenseList");case 0:case 2:case 15:return t=wh(t.type,!1),t;case 11:return t=wh(t.type.render,!1),t;case 1:return t=wh(t.type,!0),t;default:return""}}function kf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hs:return"Fragment";case Bs:return"Portal";case bf:return"Profiler";case km:return"StrictMode";case _f:return"Suspense";case Ef:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Vb:return(t.displayName||"Context")+".Consumer";case Fb:return(t._context.displayName||"Context")+".Provider";case Sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tm:return e=t.displayName||null,e!==null?e:kf(t.type)||"Memo";case ai:e=t._payload,t=t._init;try{return kf(t(e))}catch{}}return null}function b2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kf(e);case 8:return e===km?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _2(t){var e=zb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function au(t){t._valueTracker||(t._valueTracker=_2(t))}function $b(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sf(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function E0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bb(t,e){e=e.checked,e!=null&&Em(t,"checked",e,!1)}function Tf(t,e){Bb(t,e);var n=Pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cf(t,e.type,Pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function k0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cf(t,e,n){(e!=="number"||hc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ba=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(ba(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pi(n)}}function Hb(t,e){var n=Pi(e.value),r=Pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function T0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function If(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lu,Wb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lu=lu||document.createElement("div"),lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E2=["Webkit","ms","Moz","O"];Object.keys(Ia).forEach(function(t){E2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ia[e]=Ia[t]})});function Kb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ia.hasOwnProperty(t)&&Ia[t]?(""+e).trim():e+"px"}function Gb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Kb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var k2=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Af(t,e){if(e){if(k2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Rf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pf=null;function Cm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,no=null,ro=null;function C0(t){if(t=kl(t)){if(typeof jf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=hd(e),jf(t.stateNode,t.type,e))}}function Qb(t){no?ro?ro.push(t):ro=[t]:no=t}function Yb(){if(no){var t=no,e=ro;if(ro=no=null,C0(t),e)for(t=0;t<e.length;t++)C0(e[t])}}function Xb(t,e){return t(e)}function Jb(){}var bh=!1;function Zb(t,e,n){if(bh)return t(e,n);bh=!0;try{return Xb(t,e,n)}finally{bh=!1,(no!==null||ro!==null)&&(Jb(),Yb())}}function Qa(t,e){var n=t.stateNode;if(n===null)return null;var r=hd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Df=!1;if(Fr)try{var la={};Object.defineProperty(la,"passive",{get:function(){Df=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{Df=!1}function S2(t,e,n,r,i,s,o,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Aa=!1,fc=null,pc=!1,Of=null,T2={onError:function(t){Aa=!0,fc=t}};function C2(t,e,n,r,i,s,o,a,u){Aa=!1,fc=null,S2.apply(T2,arguments)}function N2(t,e,n,r,i,s,o,a,u){if(C2.apply(this,arguments),Aa){if(Aa){var d=fc;Aa=!1,fc=null}else throw Error(G(198));pc||(pc=!0,Of=d)}}function Cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function e_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function N0(t){if(Cs(t)!==t)throw Error(G(188))}function I2(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return N0(i),t;if(s===r)return N0(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function t_(t){return t=I2(t),t!==null?n_(t):null}function n_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=n_(t);if(e!==null)return e;t=t.sibling}return null}var r_=En.unstable_scheduleCallback,I0=En.unstable_cancelCallback,A2=En.unstable_shouldYield,R2=En.unstable_requestPaint,nt=En.unstable_now,P2=En.unstable_getCurrentPriorityLevel,Nm=En.unstable_ImmediatePriority,i_=En.unstable_UserBlockingPriority,mc=En.unstable_NormalPriority,j2=En.unstable_LowPriority,s_=En.unstable_IdlePriority,ld=null,cr=null;function D2(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(ld,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:M2,O2=Math.log,L2=Math.LN2;function M2(t){return t>>>=0,t===0?32:31-(O2(t)/L2|0)|0}var uu=64,cu=4194304;function _a(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=_a(a):(s&=o,s!==0&&(r=_a(s)))}else o=n&~i,o!==0?r=_a(o):s!==0&&(r=_a(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),i=1<<n,r|=t[n],e&=~i;return r}function F2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Wn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=F2(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Lf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function o_(){var t=uu;return uu<<=1,!(uu&4194240)&&(uu=64),t}function _h(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function U2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Im(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function a_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var l_,Am,u_,c_,d_,Mf=!1,du=[],wi=null,bi=null,_i=null,Ya=new Map,Xa=new Map,ui=[],z2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A0(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":Ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(e.pointerId)}}function ua(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kl(e),e!==null&&Am(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function $2(t,e,n,r,i){switch(e){case"focusin":return wi=ua(wi,t,e,n,r,i),!0;case"dragenter":return bi=ua(bi,t,e,n,r,i),!0;case"mouseover":return _i=ua(_i,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ya.set(s,ua(Ya.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xa.set(s,ua(Xa.get(s)||null,t,e,n,r,i)),!0}return!1}function h_(t){var e=ns(t.target);if(e!==null){var n=Cs(e);if(n!==null){if(e=n.tag,e===13){if(e=e_(n),e!==null){t.blockedOn=e,d_(t.priority,function(){u_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ff(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pf=r,n.target.dispatchEvent(r),Pf=null}else return e=kl(n),e!==null&&Am(e),t.blockedOn=n,!1;e.shift()}return!0}function R0(t,e,n){Mu(t)&&n.delete(e)}function B2(){Mf=!1,wi!==null&&Mu(wi)&&(wi=null),bi!==null&&Mu(bi)&&(bi=null),_i!==null&&Mu(_i)&&(_i=null),Ya.forEach(R0),Xa.forEach(R0)}function ca(t,e){t.blockedOn===e&&(t.blockedOn=null,Mf||(Mf=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,B2)))}function Ja(t){function e(i){return ca(i,t)}if(0<du.length){ca(du[0],t);for(var n=1;n<du.length;n++){var r=du[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&ca(wi,t),bi!==null&&ca(bi,t),_i!==null&&ca(_i,t),Ya.forEach(e),Xa.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)h_(n),n.blockedOn===null&&ui.shift()}var io=Qr.ReactCurrentBatchConfig,yc=!0;function H2(t,e,n,r){var i=je,s=io.transition;io.transition=null;try{je=1,Rm(t,e,n,r)}finally{je=i,io.transition=s}}function q2(t,e,n,r){var i=je,s=io.transition;io.transition=null;try{je=4,Rm(t,e,n,r)}finally{je=i,io.transition=s}}function Rm(t,e,n,r){if(yc){var i=Ff(t,e,n,r);if(i===null)Ph(t,e,r,xc,n),A0(t,r);else if($2(i,t,e,n,r))r.stopPropagation();else if(A0(t,r),e&4&&-1<z2.indexOf(t)){for(;i!==null;){var s=kl(i);if(s!==null&&l_(s),s=Ff(t,e,n,r),s===null&&Ph(t,e,r,xc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ph(t,e,r,null,n)}}var xc=null;function Ff(t,e,n,r){if(xc=null,t=Cm(r),t=ns(t),t!==null)if(e=Cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=e_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xc=t,null}function f_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P2()){case Nm:return 1;case i_:return 4;case mc:case j2:return 16;case s_:return 536870912;default:return 16}default:return 16}}var mi=null,Pm=null,Fu=null;function p_(){if(Fu)return Fu;var t,e=Pm,n=e.length,r,i="value"in mi?mi.value:mi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Fu=i.slice(t,1<r?1-r:void 0)}function Vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hu(){return!0}function P0(){return!1}function Sn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hu:P0,this.isPropagationStopped=P0,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hu)},persist:function(){},isPersistent:hu}),e}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jm=Sn(jo),El=Ye({},jo,{view:0,detail:0}),W2=Sn(El),Eh,kh,da,ud=Ye({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(Eh=t.screenX-da.screenX,kh=t.screenY-da.screenY):kh=Eh=0,da=t),Eh)},movementY:function(t){return"movementY"in t?t.movementY:kh}}),j0=Sn(ud),K2=Ye({},ud,{dataTransfer:0}),G2=Sn(K2),Q2=Ye({},El,{relatedTarget:0}),Sh=Sn(Q2),Y2=Ye({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),X2=Sn(Y2),J2=Ye({},jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z2=Sn(J2),eC=Ye({},jo,{data:0}),D0=Sn(eC),tC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rC[t])?!!e[t]:!1}function Dm(){return iC}var sC=Ye({},El,{key:function(t){if(t.key){var e=tC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(t){return t.type==="keypress"?Vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oC=Sn(sC),aC=Ye({},ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O0=Sn(aC),lC=Ye({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),uC=Sn(lC),cC=Ye({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),dC=Sn(cC),hC=Ye({},ud,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fC=Sn(hC),pC=[9,13,27,32],Om=Fr&&"CompositionEvent"in window,Ra=null;Fr&&"documentMode"in document&&(Ra=document.documentMode);var mC=Fr&&"TextEvent"in window&&!Ra,m_=Fr&&(!Om||Ra&&8<Ra&&11>=Ra),L0=" ",M0=!1;function g_(t,e){switch(t){case"keyup":return pC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function gC(t,e){switch(t){case"compositionend":return y_(e);case"keypress":return e.which!==32?null:(M0=!0,L0);case"textInput":return t=e.data,t===L0&&M0?null:t;default:return null}}function yC(t,e){if(qs)return t==="compositionend"||!Om&&g_(t,e)?(t=p_(),Fu=Pm=mi=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m_&&e.locale!=="ko"?null:e.data;default:return null}}var xC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xC[t.type]:e==="textarea"}function x_(t,e,n,r){Qb(r),e=vc(e,"onChange"),0<e.length&&(n=new jm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pa=null,Za=null;function vC(t){I_(t,0)}function cd(t){var e=Gs(t);if($b(e))return t}function wC(t,e){if(t==="change")return e}var v_=!1;if(Fr){var Th;if(Fr){var Ch="oninput"in document;if(!Ch){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),Ch=typeof V0.oninput=="function"}Th=Ch}else Th=!1;v_=Th&&(!document.documentMode||9<document.documentMode)}function U0(){Pa&&(Pa.detachEvent("onpropertychange",w_),Za=Pa=null)}function w_(t){if(t.propertyName==="value"&&cd(Za)){var e=[];x_(e,Za,t,Cm(t)),Zb(vC,e)}}function bC(t,e,n){t==="focusin"?(U0(),Pa=e,Za=n,Pa.attachEvent("onpropertychange",w_)):t==="focusout"&&U0()}function _C(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cd(Za)}function EC(t,e){if(t==="click")return cd(e)}function kC(t,e){if(t==="input"||t==="change")return cd(e)}function SC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:SC;function el(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wf.call(e,i)||!Qn(t[i],e[i]))return!1}return!0}function z0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $0(t,e){var n=z0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=z0(n)}}function b_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?b_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function __(){for(var t=window,e=hc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hc(t.document)}return e}function Lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TC(t){var e=__(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&b_(n.ownerDocument.documentElement,n)){if(r!==null&&Lm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$0(n,s);var o=$0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CC=Fr&&"documentMode"in document&&11>=document.documentMode,Ws=null,Vf=null,ja=null,Uf=!1;function B0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||Ws==null||Ws!==hc(r)||(r=Ws,"selectionStart"in r&&Lm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ja&&el(ja,r)||(ja=r,r=vc(Vf,"onSelect"),0<r.length&&(e=new jm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ws)))}function fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},Nh={},E_={};Fr&&(E_=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function dd(t){if(Nh[t])return Nh[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in E_)return Nh[t]=e[n];return t}var k_=dd("animationend"),S_=dd("animationiteration"),T_=dd("animationstart"),C_=dd("transitionend"),N_=new Map,H0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zi(t,e){N_.set(t,e),Ts(e,[t])}for(var Ih=0;Ih<H0.length;Ih++){var Ah=H0[Ih],NC=Ah.toLowerCase(),IC=Ah[0].toUpperCase()+Ah.slice(1);zi(NC,"on"+IC)}zi(k_,"onAnimationEnd");zi(S_,"onAnimationIteration");zi(T_,"onAnimationStart");zi("dblclick","onDoubleClick");zi("focusin","onFocus");zi("focusout","onBlur");zi(C_,"onTransitionEnd");yo("onMouseEnter",["mouseout","mouseover"]);yo("onMouseLeave",["mouseout","mouseover"]);yo("onPointerEnter",["pointerout","pointerover"]);yo("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function q0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,N2(r,e,void 0,t),t.currentTarget=null}function I_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;q0(i,a,d),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,d=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;q0(i,a,d),s=u}}}if(pc)throw t=Of,pc=!1,Of=null,t}function Be(t,e){var n=e[qf];n===void 0&&(n=e[qf]=new Set);var r=t+"__bubble";n.has(r)||(A_(e,t,2,!1),n.add(r))}function Rh(t,e,n){var r=0;e&&(r|=4),A_(n,t,r,e)}var pu="_reactListening"+Math.random().toString(36).slice(2);function tl(t){if(!t[pu]){t[pu]=!0,Mb.forEach(function(n){n!=="selectionchange"&&(AC.has(n)||Rh(n,!1,t),Rh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pu]||(e[pu]=!0,Rh("selectionchange",!1,e))}}function A_(t,e,n,r){switch(f_(e)){case 1:var i=H2;break;case 4:i=q2;break;default:i=Rm}n=i.bind(null,e,n,t),i=void 0,!Df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ph(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ns(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Zb(function(){var d=s,h=Cm(n),f=[];e:{var p=N_.get(t);if(p!==void 0){var m=jm,w=t;switch(t){case"keypress":if(Vu(n)===0)break e;case"keydown":case"keyup":m=oC;break;case"focusin":w="focus",m=Sh;break;case"focusout":w="blur",m=Sh;break;case"beforeblur":case"afterblur":m=Sh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=j0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=G2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=uC;break;case k_:case S_:case T_:m=X2;break;case C_:m=dC;break;case"scroll":m=W2;break;case"wheel":m=fC;break;case"copy":case"cut":case"paste":m=Z2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O0}var S=(e&4)!==0,T=!S&&t==="scroll",y=S?p!==null?p+"Capture":null:p;S=[];for(var v=d,b;v!==null;){b=v;var D=b.stateNode;if(b.tag===5&&D!==null&&(b=D,y!==null&&(D=Qa(v,y),D!=null&&S.push(nl(v,D,b)))),T)break;v=v.return}0<S.length&&(p=new m(p,w,null,n,h),f.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Pf&&(w=n.relatedTarget||n.fromElement)&&(ns(w)||w[Vr]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=d,w=w?ns(w):null,w!==null&&(T=Cs(w),w!==T||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=d),m!==w)){if(S=j0,D="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(S=O0,D="onPointerLeave",y="onPointerEnter",v="pointer"),T=m==null?p:Gs(m),b=w==null?p:Gs(w),p=new S(D,v+"leave",m,n,h),p.target=T,p.relatedTarget=b,D=null,ns(h)===d&&(S=new S(y,v+"enter",w,n,h),S.target=b,S.relatedTarget=T,D=S),T=D,m&&w)t:{for(S=m,y=w,v=0,b=S;b;b=Ms(b))v++;for(b=0,D=y;D;D=Ms(D))b++;for(;0<v-b;)S=Ms(S),v--;for(;0<b-v;)y=Ms(y),b--;for(;v--;){if(S===y||y!==null&&S===y.alternate)break t;S=Ms(S),y=Ms(y)}S=null}else S=null;m!==null&&W0(f,p,m,S,!1),w!==null&&T!==null&&W0(f,T,w,S,!0)}}e:{if(p=d?Gs(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var M=wC;else if(F0(p))if(v_)M=kC;else{M=_C;var C=bC}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=EC);if(M&&(M=M(t,d))){x_(f,M,n,h);break e}C&&C(t,p,d),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&Cf(p,"number",p.value)}switch(C=d?Gs(d):window,t){case"focusin":(F0(C)||C.contentEditable==="true")&&(Ws=C,Vf=d,ja=null);break;case"focusout":ja=Vf=Ws=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,B0(f,n,h);break;case"selectionchange":if(CC)break;case"keydown":case"keyup":B0(f,n,h)}var E;if(Om)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else qs?g_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(m_&&n.locale!=="ko"&&(qs||_!=="onCompositionStart"?_==="onCompositionEnd"&&qs&&(E=p_()):(mi=h,Pm="value"in mi?mi.value:mi.textContent,qs=!0)),C=vc(d,_),0<C.length&&(_=new D0(_,t,null,n,h),f.push({event:_,listeners:C}),E?_.data=E:(E=y_(n),E!==null&&(_.data=E)))),(E=mC?gC(t,n):yC(t,n))&&(d=vc(d,"onBeforeInput"),0<d.length&&(h=new D0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=E))}I_(f,e)})}function nl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Qa(t,n),s!=null&&r.unshift(nl(t,s,i)),s=Qa(t,e),s!=null&&r.push(nl(t,s,i))),t=t.return}return r}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function W0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,i?(u=Qa(n,s),u!=null&&o.unshift(nl(n,u,a))):i||(u=Qa(n,s),u!=null&&o.push(nl(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var RC=/\r\n?/g,PC=/\u0000|\uFFFD/g;function K0(t){return(typeof t=="string"?t:""+t).replace(RC,`
`).replace(PC,"")}function mu(t,e,n){if(e=K0(e),K0(t)!==e&&n)throw Error(G(425))}function wc(){}var zf=null,$f=null;function Bf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,jC=typeof clearTimeout=="function"?clearTimeout:void 0,G0=typeof Promise=="function"?Promise:void 0,DC=typeof queueMicrotask=="function"?queueMicrotask:typeof G0<"u"?function(t){return G0.resolve(null).then(t).catch(OC)}:Hf;function OC(t){setTimeout(function(){throw t})}function jh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ja(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ja(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Q0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Do=Math.random().toString(36).slice(2),ar="__reactFiber$"+Do,rl="__reactProps$"+Do,Vr="__reactContainer$"+Do,qf="__reactEvents$"+Do,LC="__reactListeners$"+Do,MC="__reactHandles$"+Do;function ns(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Q0(t);t!==null;){if(n=t[ar])return n;t=Q0(t)}return e}t=n,n=t.parentNode}return null}function kl(t){return t=t[ar]||t[Vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function hd(t){return t[rl]||null}var Wf=[],Qs=-1;function $i(t){return{current:t}}function He(t){0>Qs||(t.current=Wf[Qs],Wf[Qs]=null,Qs--)}function Ve(t,e){Qs++,Wf[Qs]=t.current,t.current=e}var ji={},jt=$i(ji),Zt=$i(!1),ps=ji;function xo(t,e){var n=t.type.contextTypes;if(!n)return ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function en(t){return t=t.childContextTypes,t!=null}function bc(){He(Zt),He(jt)}function Y0(t,e,n){if(jt.current!==ji)throw Error(G(168));Ve(jt,e),Ve(Zt,n)}function R_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,b2(t)||"Unknown",i));return Ye({},n,r)}function _c(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ji,ps=jt.current,Ve(jt,t),Ve(Zt,Zt.current),!0}function X0(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=R_(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,He(Zt),He(jt),Ve(jt,t)):He(Zt),Ve(Zt,n)}var Ir=null,fd=!1,Dh=!1;function P_(t){Ir===null?Ir=[t]:Ir.push(t)}function FC(t){fd=!0,P_(t)}function Bi(){if(!Dh&&Ir!==null){Dh=!0;var t=0,e=je;try{var n=Ir;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,fd=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(t+1)),r_(Nm,Bi),i}finally{je=e,Dh=!1}}return null}var Ys=[],Xs=0,Ec=null,kc=0,Nn=[],In=0,ms=null,Rr=1,Pr="";function Ji(t,e){Ys[Xs++]=kc,Ys[Xs++]=Ec,Ec=t,kc=e}function j_(t,e,n){Nn[In++]=Rr,Nn[In++]=Pr,Nn[In++]=ms,ms=t;var r=Rr;t=Pr;var i=32-Wn(r)-1;r&=~(1<<i),n+=1;var s=32-Wn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rr=1<<32-Wn(e)+i|n<<i|r,Pr=s+t}else Rr=1<<s|n<<i|r,Pr=t}function Mm(t){t.return!==null&&(Ji(t,1),j_(t,1,0))}function Fm(t){for(;t===Ec;)Ec=Ys[--Xs],Ys[Xs]=null,kc=Ys[--Xs],Ys[Xs]=null;for(;t===ms;)ms=Nn[--In],Nn[In]=null,Pr=Nn[--In],Nn[In]=null,Rr=Nn[--In],Nn[In]=null}var _n=null,wn=null,qe=!1,Bn=null;function D_(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function J0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,wn=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Rr,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,wn=null,!0):!1;default:return!1}}function Kf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gf(t){if(qe){var e=wn;if(e){var n=e;if(!J0(t,e)){if(Kf(t))throw Error(G(418));e=Ei(n.nextSibling);var r=_n;e&&J0(t,e)?D_(r,n):(t.flags=t.flags&-4097|2,qe=!1,_n=t)}}else{if(Kf(t))throw Error(G(418));t.flags=t.flags&-4097|2,qe=!1,_n=t}}}function Z0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function gu(t){if(t!==_n)return!1;if(!qe)return Z0(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bf(t.type,t.memoizedProps)),e&&(e=wn)){if(Kf(t))throw O_(),Error(G(418));for(;e;)D_(t,e),e=Ei(e.nextSibling)}if(Z0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=_n?Ei(t.stateNode.nextSibling):null;return!0}function O_(){for(var t=wn;t;)t=Ei(t.nextSibling)}function vo(){wn=_n=null,qe=!1}function Vm(t){Bn===null?Bn=[t]:Bn.push(t)}var VC=Qr.ReactCurrentBatchConfig;function ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function yu(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ex(t){var e=t._init;return e(t._payload)}function L_(t){function e(y,v){if(t){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Ci(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,D){return v===null||v.tag!==6?(v=zh(b,y.mode,D),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,D){var M=b.type;return M===Hs?h(y,v,b.props.children,D,b.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ai&&ex(M)===v.type)?(D=i(v,b.props),D.ref=ha(y,v,b),D.return=y,D):(D=Wu(b.type,b.key,b.props,null,y.mode,D),D.ref=ha(y,v,b),D.return=y,D)}function d(y,v,b,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=$h(b,y.mode,D),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function h(y,v,b,D,M){return v===null||v.tag!==7?(v=cs(b,y.mode,D,M),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=zh(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ou:return b=Wu(v.type,v.key,v.props,null,y.mode,b),b.ref=ha(y,null,v),b.return=y,b;case Bs:return v=$h(v,y.mode,b),v.return=y,v;case ai:var D=v._init;return f(y,D(v._payload),b)}if(ba(v)||aa(v))return v=cs(v,y.mode,b,null),v.return=y,v;yu(y,v)}return null}function p(y,v,b,D){var M=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return M!==null?null:a(y,v,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ou:return b.key===M?u(y,v,b,D):null;case Bs:return b.key===M?d(y,v,b,D):null;case ai:return M=b._init,p(y,v,M(b._payload),D)}if(ba(b)||aa(b))return M!==null?null:h(y,v,b,D,null);yu(y,b)}return null}function m(y,v,b,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return y=y.get(b)||null,a(v,y,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ou:return y=y.get(D.key===null?b:D.key)||null,u(v,y,D,M);case Bs:return y=y.get(D.key===null?b:D.key)||null,d(v,y,D,M);case ai:var C=D._init;return m(y,v,b,C(D._payload),M)}if(ba(D)||aa(D))return y=y.get(b)||null,h(v,y,D,M,null);yu(v,D)}return null}function w(y,v,b,D){for(var M=null,C=null,E=v,_=v=0,N=null;E!==null&&_<b.length;_++){E.index>_?(N=E,E=null):N=E.sibling;var R=p(y,E,b[_],D);if(R===null){E===null&&(E=N);break}t&&E&&R.alternate===null&&e(y,E),v=s(R,v,_),C===null?M=R:C.sibling=R,C=R,E=N}if(_===b.length)return n(y,E),qe&&Ji(y,_),M;if(E===null){for(;_<b.length;_++)E=f(y,b[_],D),E!==null&&(v=s(E,v,_),C===null?M=E:C.sibling=E,C=E);return qe&&Ji(y,_),M}for(E=r(y,E);_<b.length;_++)N=m(E,y,_,b[_],D),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?_:N.key),v=s(N,v,_),C===null?M=N:C.sibling=N,C=N);return t&&E.forEach(function(j){return e(y,j)}),qe&&Ji(y,_),M}function S(y,v,b,D){var M=aa(b);if(typeof M!="function")throw Error(G(150));if(b=M.call(b),b==null)throw Error(G(151));for(var C=M=null,E=v,_=v=0,N=null,R=b.next();E!==null&&!R.done;_++,R=b.next()){E.index>_?(N=E,E=null):N=E.sibling;var j=p(y,E,R.value,D);if(j===null){E===null&&(E=N);break}t&&E&&j.alternate===null&&e(y,E),v=s(j,v,_),C===null?M=j:C.sibling=j,C=j,E=N}if(R.done)return n(y,E),qe&&Ji(y,_),M;if(E===null){for(;!R.done;_++,R=b.next())R=f(y,R.value,D),R!==null&&(v=s(R,v,_),C===null?M=R:C.sibling=R,C=R);return qe&&Ji(y,_),M}for(E=r(y,E);!R.done;_++,R=b.next())R=m(E,y,_,R.value,D),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?_:R.key),v=s(R,v,_),C===null?M=R:C.sibling=R,C=R);return t&&E.forEach(function(I){return e(y,I)}),qe&&Ji(y,_),M}function T(y,v,b,D){if(typeof b=="object"&&b!==null&&b.type===Hs&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ou:e:{for(var M=b.key,C=v;C!==null;){if(C.key===M){if(M=b.type,M===Hs){if(C.tag===7){n(y,C.sibling),v=i(C,b.props.children),v.return=y,y=v;break e}}else if(C.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ai&&ex(M)===C.type){n(y,C.sibling),v=i(C,b.props),v.ref=ha(y,C,b),v.return=y,y=v;break e}n(y,C);break}else e(y,C);C=C.sibling}b.type===Hs?(v=cs(b.props.children,y.mode,D,b.key),v.return=y,y=v):(D=Wu(b.type,b.key,b.props,null,y.mode,D),D.ref=ha(y,v,b),D.return=y,y=D)}return o(y);case Bs:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=$h(b,y.mode,D),v.return=y,y=v}return o(y);case ai:return C=b._init,T(y,v,C(b._payload),D)}if(ba(b))return w(y,v,b,D);if(aa(b))return S(y,v,b,D);yu(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=zh(b,y.mode,D),v.return=y,y=v),o(y)):n(y,v)}return T}var wo=L_(!0),M_=L_(!1),Sc=$i(null),Tc=null,Js=null,Um=null;function zm(){Um=Js=Tc=null}function $m(t){var e=Sc.current;He(Sc),t._currentValue=e}function Qf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function so(t,e){Tc=t,Um=Js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jt=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Um!==t)if(t={context:t,memoizedValue:e,next:null},Js===null){if(Tc===null)throw Error(G(308));Js=t,Tc.dependencies={lanes:0,firstContext:t}}else Js=Js.next=t;return e}var rs=null;function Bm(t){rs===null?rs=[t]:rs.push(t)}function F_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var li=!1;function Hm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ki(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ur(t,n)}return i=r.interleaved,i===null?(e.next=e,Bm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ur(t,n)}function Uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Im(t,n)}}function tx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cc(t,e,n,r){var i=t.updateQueue;li=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=d=u=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,S=a;switch(p=e,m=n,S.tag){case 1:if(w=S.payload,typeof w=="function"){f=w.call(m,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,p=typeof w=="function"?w.call(m,f,p):w,p==null)break e;f=Ye({},f,p);break e;case 2:li=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=m,u=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=f}}function nx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Sl={},dr=$i(Sl),il=$i(Sl),sl=$i(Sl);function is(t){if(t===Sl)throw Error(G(174));return t}function qm(t,e){switch(Ve(sl,e),Ve(il,t),Ve(dr,Sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:If(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=If(e,t)}He(dr),Ve(dr,e)}function bo(){He(dr),He(il),He(sl)}function U_(t){is(sl.current);var e=is(dr.current),n=If(e,t.type);e!==n&&(Ve(il,t),Ve(dr,n))}function Wm(t){il.current===t&&(He(dr),He(il))}var Ke=$i(0);function Nc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oh=[];function Km(){for(var t=0;t<Oh.length;t++)Oh[t]._workInProgressVersionPrimary=null;Oh.length=0}var zu=Qr.ReactCurrentDispatcher,Lh=Qr.ReactCurrentBatchConfig,gs=0,Ge=null,dt=null,gt=null,Ic=!1,Da=!1,ol=0,UC=0;function Tt(){throw Error(G(321))}function Gm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function Qm(t,e,n,r,i,s){if(gs=s,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zu.current=t===null||t.memoizedState===null?HC:qC,t=n(r,i),Da){s=0;do{if(Da=!1,ol=0,25<=s)throw Error(G(301));s+=1,gt=dt=null,e.updateQueue=null,zu.current=WC,t=n(r,i)}while(Da)}if(zu.current=Ac,e=dt!==null&&dt.next!==null,gs=0,gt=dt=Ge=null,Ic=!1,e)throw Error(G(300));return t}function Ym(){var t=ol!==0;return ol=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ge.memoizedState=gt=t:gt=gt.next=t,gt}function On(){if(dt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=gt===null?Ge.memoizedState:gt.next;if(e!==null)gt=e,dt=t;else{if(t===null)throw Error(G(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},gt===null?Ge.memoizedState=gt=t:gt=gt.next=t}return gt}function al(t,e){return typeof e=="function"?e(t):e}function Mh(t){var e=On(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,d=s;do{var h=d.lane;if((gs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ge.lanes|=h,ys|=h}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=a,Qn(r,e.memoizedState)||(Jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ge.lanes|=s,ys|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fh(t){var e=On(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Qn(s,e.memoizedState)||(Jt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function z_(){}function $_(t,e){var n=Ge,r=On(),i=e(),s=!Qn(r.memoizedState,i);if(s&&(r.memoizedState=i,Jt=!0),r=r.queue,Xm(q_.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,ll(9,H_.bind(null,n,r,i,e),void 0,null),yt===null)throw Error(G(349));gs&30||B_(n,e,i)}return i}function B_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H_(t,e,n,r){e.value=n,e.getSnapshot=r,W_(e)&&K_(t)}function q_(t,e,n){return n(function(){W_(e)&&K_(t)})}function W_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function K_(t){var e=Ur(t,1);e!==null&&Kn(e,t,1,-1)}function rx(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:t},e.queue=t,t=t.dispatch=BC.bind(null,Ge,t),[e.memoizedState,t]}function ll(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function G_(){return On().memoizedState}function $u(t,e,n,r){var i=ir();Ge.flags|=t,i.memoizedState=ll(1|e,n,void 0,r===void 0?null:r)}function pd(t,e,n,r){var i=On();r=r===void 0?null:r;var s=void 0;if(dt!==null){var o=dt.memoizedState;if(s=o.destroy,r!==null&&Gm(r,o.deps)){i.memoizedState=ll(e,n,s,r);return}}Ge.flags|=t,i.memoizedState=ll(1|e,n,s,r)}function ix(t,e){return $u(8390656,8,t,e)}function Xm(t,e){return pd(2048,8,t,e)}function Q_(t,e){return pd(4,2,t,e)}function Y_(t,e){return pd(4,4,t,e)}function X_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J_(t,e,n){return n=n!=null?n.concat([t]):null,pd(4,4,X_.bind(null,e,t),n)}function Jm(){}function Z_(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e1(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t1(t,e,n){return gs&21?(Qn(n,e)||(n=o_(),Ge.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jt=!0),t.memoizedState=n)}function zC(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Lh.transition;Lh.transition={};try{t(!1),e()}finally{je=n,Lh.transition=r}}function n1(){return On().memoizedState}function $C(t,e,n){var r=Ti(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r1(t))i1(e,n);else if(n=F_(t,e,n,r),n!==null){var i=Bt();Kn(n,t,r,i),s1(n,e,r)}}function BC(t,e,n){var r=Ti(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r1(t))i1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,o)){var u=e.interleaved;u===null?(i.next=i,Bm(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=F_(t,e,i,r),n!==null&&(i=Bt(),Kn(n,t,r,i),s1(n,e,r))}}function r1(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function i1(t,e){Da=Ic=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Im(t,n)}}var Ac={readContext:Dn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},HC={readContext:Dn,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:ix,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$u(4194308,4,X_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $u(4194308,4,t,e)},useInsertionEffect:function(t,e){return $u(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$C.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:rx,useDebugValue:Jm,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=rx(!1),e=t[0];return t=zC.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,i=ir();if(qe){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),yt===null)throw Error(G(349));gs&30||B_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ix(q_.bind(null,r,s,t),[t]),r.flags|=2048,ll(9,H_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ir(),e=yt.identifierPrefix;if(qe){var n=Pr,r=Rr;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ol++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qC={readContext:Dn,useCallback:Z_,useContext:Dn,useEffect:Xm,useImperativeHandle:J_,useInsertionEffect:Q_,useLayoutEffect:Y_,useMemo:e1,useReducer:Mh,useRef:G_,useState:function(){return Mh(al)},useDebugValue:Jm,useDeferredValue:function(t){var e=On();return t1(e,dt.memoizedState,t)},useTransition:function(){var t=Mh(al)[0],e=On().memoizedState;return[t,e]},useMutableSource:z_,useSyncExternalStore:$_,useId:n1,unstable_isNewReconciler:!1},WC={readContext:Dn,useCallback:Z_,useContext:Dn,useEffect:Xm,useImperativeHandle:J_,useInsertionEffect:Q_,useLayoutEffect:Y_,useMemo:e1,useReducer:Fh,useRef:G_,useState:function(){return Fh(al)},useDebugValue:Jm,useDeferredValue:function(t){var e=On();return dt===null?e.memoizedState=t:t1(e,dt.memoizedState,t)},useTransition:function(){var t=Fh(al)[0],e=On().memoizedState;return[t,e]},useMutableSource:z_,useSyncExternalStore:$_,useId:n1,unstable_isNewReconciler:!1};function zn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var md={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=Ti(t),s=Or(r,i);s.payload=e,n!=null&&(s.callback=n),e=ki(t,s,i),e!==null&&(Kn(e,t,i,r),Uu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=Ti(t),s=Or(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ki(t,s,i),e!==null&&(Kn(e,t,i,r),Uu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=Ti(t),i=Or(n,r);i.tag=2,e!=null&&(i.callback=e),e=ki(t,i,r),e!==null&&(Kn(e,t,r,n),Uu(e,t,r))}};function sx(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!el(n,r)||!el(i,s):!0}function o1(t,e,n){var r=!1,i=ji,s=e.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(i=en(e)?ps:jt.current,r=e.contextTypes,s=(r=r!=null)?xo(t,i):ji),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=md,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ox(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&md.enqueueReplaceState(e,e.state,null)}function Xf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Hm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dn(s):(s=en(e)?ps:jt.current,i.context=xo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&md.enqueueReplaceState(i,i.state,null),Cc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _o(t,e){try{var n="",r=e;do n+=w2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KC=typeof WeakMap=="function"?WeakMap:Map;function a1(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pc||(Pc=!0,lp=r),Jf(t,e)},n}function l1(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jf(t,e),typeof r!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ax(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new KC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aN.bind(null,t,e,n),e.then(t,t))}function lx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ux(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,ki(n,e,1))),n.lanes|=1),t)}var GC=Qr.ReactCurrentOwner,Jt=!1;function zt(t,e,n,r){e.child=t===null?M_(e,null,n,r):wo(e,t.child,n,r)}function cx(t,e,n,r,i){n=n.render;var s=e.ref;return so(e,i),r=Qm(t,e,n,r,s,i),n=Ym(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(qe&&n&&Mm(e),e.flags|=1,zt(t,e,r,i),e.child)}function dx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!og(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,u1(t,e,s,r,i)):(t=Wu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(o,r)&&t.ref===e.ref)return zr(t,e,i)}return e.flags|=1,t=Ci(s,r),t.ref=e.ref,t.return=e,e.child=t}function u1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(el(s,r)&&t.ref===e.ref)if(Jt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Jt=!0);else return e.lanes=t.lanes,zr(t,e,i)}return Zf(t,e,n,r,i)}function c1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(eo,gn),gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(eo,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(eo,gn),gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ve(eo,gn),gn|=r;return zt(t,e,i,n),e.child}function d1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zf(t,e,n,r,i){var s=en(n)?ps:jt.current;return s=xo(e,s),so(e,i),n=Qm(t,e,n,r,s,i),r=Ym(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(qe&&r&&Mm(e),e.flags|=1,zt(t,e,n,i),e.child)}function hx(t,e,n,r,i){if(en(n)){var s=!0;_c(e)}else s=!1;if(so(e,i),e.stateNode===null)Bu(t,e),o1(e,n,r),Xf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Dn(d):(d=en(n)?ps:jt.current,d=xo(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==d)&&ox(e,o,r,d),li=!1;var p=e.memoizedState;o.state=p,Cc(e,r,o,i),u=e.memoizedState,a!==r||p!==u||Zt.current||li?(typeof h=="function"&&(Yf(e,n,h,r),u=e.memoizedState),(a=li||sx(e,n,a,r,p,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,V_(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:zn(e.type,a),o.props=d,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Dn(u):(u=en(n)?ps:jt.current,u=xo(e,u));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==u)&&ox(e,o,r,u),li=!1,p=e.memoizedState,o.state=p,Cc(e,r,o,i);var w=e.memoizedState;a!==f||p!==w||Zt.current||li?(typeof m=="function"&&(Yf(e,n,m,r),w=e.memoizedState),(d=li||sx(e,n,d,r,p,w,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return ep(t,e,n,r,s,i)}function ep(t,e,n,r,i,s){d1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&X0(e,n,!1),zr(t,e,s);r=e.stateNode,GC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wo(e,t.child,null,s),e.child=wo(e,null,a,s)):zt(t,e,a,s),e.memoizedState=r.state,i&&X0(e,n,!0),e.child}function h1(t){var e=t.stateNode;e.pendingContext?Y0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Y0(t,e.context,!1),qm(t,e.containerInfo)}function fx(t,e,n,r,i){return vo(),Vm(i),e.flags|=256,zt(t,e,n,r),e.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function np(t){return{baseLanes:t,cachePool:null,transitions:null}}function f1(t,e,n){var r=e.pendingProps,i=Ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(Ke,i&1),t===null)return Gf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xd(o,r,0,null),t=cs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=np(n),e.memoizedState=tp,t):Zm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return QC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ci(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ci(a,s):(s=cs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?np(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tp,r}return s=t.child,t=s.sibling,r=Ci(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zm(t,e){return e=xd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xu(t,e,n,r){return r!==null&&Vm(r),wo(e,t.child,null,n),t=Zm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vh(Error(G(422))),xu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xd({mode:"visible",children:r.children},i,0,null),s=cs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wo(e,t.child,null,o),e.child.memoizedState=np(o),e.memoizedState=tp,s);if(!(e.mode&1))return xu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=Vh(s,r,void 0),xu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Jt||a){if(r=yt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ur(t,i),Kn(r,t,i,-1))}return sg(),r=Vh(Error(G(421))),xu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,wn=Ei(i.nextSibling),_n=e,qe=!0,Bn=null,t!==null&&(Nn[In++]=Rr,Nn[In++]=Pr,Nn[In++]=ms,Rr=t.id,Pr=t.overflow,ms=e),e=Zm(e,r.children),e.flags|=4096,e)}function px(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qf(t.return,e,n)}function Uh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function p1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(zt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&px(t,n,e);else if(t.tag===19)px(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Nc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Uh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Uh(e,!0,n,null,s);break;case"together":Uh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YC(t,e,n){switch(e.tag){case 3:h1(e),vo();break;case 5:U_(e);break;case 1:en(e.type)&&_c(e);break;case 4:qm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(Sc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?f1(t,e,n):(Ve(Ke,Ke.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Ve(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,c1(t,e,n)}return zr(t,e,n)}var m1,rp,g1,y1;m1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rp=function(){};g1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,is(dr.current);var s=null;switch(n){case"input":i=Sf(t,i),r=Sf(t,r),s=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),s=[];break;case"textarea":i=Nf(t,i),r=Nf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wc)}Af(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ka.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ka.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Be("scroll",t),s||a===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};y1=function(t,e,n,r){n!==r&&(e.flags|=4)};function fa(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XC(t,e,n){var r=e.pendingProps;switch(Fm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return en(e.type)&&bc(),Ct(e),null;case 3:return r=e.stateNode,bo(),He(Zt),He(jt),Km(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(dp(Bn),Bn=null))),rp(t,e),Ct(e),null;case 5:Wm(e);var i=is(sl.current);if(n=e.type,t!==null&&e.stateNode!=null)g1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Ct(e),null}if(t=is(dr.current),gu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ar]=e,r[rl]=s,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<Ea.length;i++)Be(Ea[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":E0(r,s),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Be("invalid",r);break;case"textarea":S0(r,s),Be("invalid",r)}Af(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&mu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&mu(r.textContent,a,t),i=["children",""+a]):Ka.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":au(r),k0(r,s,!0);break;case"textarea":au(r),T0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[rl]=r,m1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rf(n,r),n){case"dialog":Be("cancel",t),Be("close",t),i=r;break;case"iframe":case"object":case"embed":Be("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ea.length;i++)Be(Ea[i],t);i=r;break;case"source":Be("error",t),i=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=r;break;case"details":Be("toggle",t),i=r;break;case"input":E0(t,r),i=Sf(t,r),Be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),Be("invalid",t);break;case"textarea":S0(t,r),i=Nf(t,r),Be("invalid",t);break;default:i=r}Af(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Gb(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Wb(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ga(t,u):typeof u=="number"&&Ga(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ka.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Be("scroll",t):u!=null&&Em(t,s,u,o))}switch(n){case"input":au(t),k0(t,r,!1);break;case"textarea":au(t),T0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?to(t,!!r.multiple,s,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)y1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=is(sl.current),is(dr.current),gu(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(s=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:mu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Ct(e),null;case 13:if(He(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&wn!==null&&e.mode&1&&!(e.flags&128))O_(),vo(),e.flags|=98560,s=!1;else if(s=gu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[ar]=e}else vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),s=!1}else Bn!==null&&(dp(Bn),Bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?ft===0&&(ft=3):sg())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return bo(),rp(t,e),t===null&&tl(e.stateNode.containerInfo),Ct(e),null;case 10:return $m(e.type._context),Ct(e),null;case 17:return en(e.type)&&bc(),Ct(e),null;case 19:if(He(Ke),s=e.memoizedState,s===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)fa(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nc(t),o!==null){for(e.flags|=128,fa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&nt()>Eo&&(e.flags|=128,r=!0,fa(s,!1),e.lanes=4194304)}else{if(!r)if(t=Nc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qe)return Ct(e),null}else 2*nt()-s.renderingStartTime>Eo&&n!==1073741824&&(e.flags|=128,r=!0,fa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,n=Ke.current,Ve(Ke,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return ig(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function JC(t,e){switch(Fm(e),e.tag){case 1:return en(e.type)&&bc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bo(),He(Zt),He(jt),Km(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wm(e),null;case 13:if(He(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(Ke),null;case 4:return bo(),null;case 10:return $m(e.type._context),null;case 22:case 23:return ig(),null;case 24:return null;default:return null}}var vu=!1,At=!1,ZC=typeof WeakSet=="function"?WeakSet:Set,te=null;function Zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function ip(t,e,n){try{n()}catch(r){Je(t,e,r)}}var mx=!1;function eN(t,e){if(zf=yc,t=__(),Lm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++d===i&&(a=o),p===s&&++h===r&&(u=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for($f={focusedElem:t,selectionRange:n},yc=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var S=w.memoizedProps,T=w.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?S:zn(e.type,S),T);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(D){Je(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return w=mx,mx=!1,w}function Oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ip(e,n,s)}i=i.next}while(i!==r)}}function gd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function x1(t){var e=t.alternate;e!==null&&(t.alternate=null,x1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[rl],delete e[qf],delete e[LC],delete e[MC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function v1(t){return t.tag===5||t.tag===3||t.tag===4}function gx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wc));else if(r!==4&&(t=t.child,t!==null))for(op(t,e,n),t=t.sibling;t!==null;)op(t,e,n),t=t.sibling}function ap(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}var vt=null,$n=!1;function ii(t,e,n){for(n=n.child;n!==null;)w1(t,e,n),n=n.sibling}function w1(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(ld,n)}catch{}switch(n.tag){case 5:At||Zs(n,e);case 6:var r=vt,i=$n;vt=null,ii(t,e,n),vt=r,$n=i,vt!==null&&($n?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&($n?(t=vt,n=n.stateNode,t.nodeType===8?jh(t.parentNode,n):t.nodeType===1&&jh(t,n),Ja(t)):jh(vt,n.stateNode));break;case 4:r=vt,i=$n,vt=n.stateNode.containerInfo,$n=!0,ii(t,e,n),vt=r,$n=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ip(n,e,o),i=i.next}while(i!==r)}ii(t,e,n);break;case 1:if(!At&&(Zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}ii(t,e,n);break;case 21:ii(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,ii(t,e,n),At=r):ii(t,e,n);break;default:ii(t,e,n)}}function yx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZC),e.forEach(function(r){var i=uN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,$n=!1;break e;case 3:vt=a.stateNode.containerInfo,$n=!0;break e;case 4:vt=a.stateNode.containerInfo,$n=!0;break e}a=a.return}if(vt===null)throw Error(G(160));w1(s,o,i),vt=null,$n=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Je(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)b1(e,t),e=e.sibling}function b1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),nr(t),r&4){try{Oa(3,t,t.return),gd(3,t)}catch(S){Je(t,t.return,S)}try{Oa(5,t,t.return)}catch(S){Je(t,t.return,S)}}break;case 1:Un(e,t),nr(t),r&512&&n!==null&&Zs(n,n.return);break;case 5:if(Un(e,t),nr(t),r&512&&n!==null&&Zs(n,n.return),t.flags&32){var i=t.stateNode;try{Ga(i,"")}catch(S){Je(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Bb(i,s),Rf(a,o);var d=Rf(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?Gb(i,f):h==="dangerouslySetInnerHTML"?Wb(i,f):h==="children"?Ga(i,f):Em(i,h,f,d)}switch(a){case"input":Tf(i,s);break;case"textarea":Hb(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?to(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?to(i,!!s.multiple,s.defaultValue,!0):to(i,!!s.multiple,s.multiple?[]:"",!1))}i[rl]=s}catch(S){Je(t,t.return,S)}}break;case 6:if(Un(e,t),nr(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Je(t,t.return,S)}}break;case 3:if(Un(e,t),nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ja(e.containerInfo)}catch(S){Je(t,t.return,S)}break;case 4:Un(e,t),nr(t);break;case 13:Un(e,t),nr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ng=nt())),r&4&&yx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(At=(d=At)||h,Un(e,t),At=d):Un(e,t),nr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(te=t,h=t.child;h!==null;){for(f=te=h;te!==null;){switch(p=te,m=p.child,p.tag){case 0:case 11:case 14:case 15:Oa(4,p,p.return);break;case 1:Zs(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(S){Je(r,n,S)}}break;case 5:Zs(p,p.return);break;case 22:if(p.memoizedState!==null){vx(f);continue}}m!==null?(m.return=p,te=m):vx(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Kb("display",o))}catch(S){Je(t,t.return,S)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(S){Je(t,t.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Un(e,t),nr(t),r&4&&yx(t);break;case 21:break;default:Un(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(v1(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ga(i,""),r.flags&=-33);var s=gx(t);ap(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gx(t);op(t,a,o);break;default:throw Error(G(161))}}catch(u){Je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tN(t,e,n){te=t,_1(t)}function _1(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||vu;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||At;a=vu;var d=At;if(vu=o,(At=u)&&!d)for(te=i;te!==null;)o=te,u=o.child,o.tag===22&&o.memoizedState!==null?wx(i):u!==null?(u.return=o,te=u):wx(i);for(;s!==null;)te=s,_1(s),s=s.sibling;te=i,vu=a,At=d}xx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):xx(t)}}function xx(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||gd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nx(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ja(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}At||e.flags&512&&sp(e)}catch(p){Je(e,e.return,p)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function vx(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function wx(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gd(4,e)}catch(u){Je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Je(e,i,u)}}var s=e.return;try{sp(e)}catch(u){Je(e,s,u)}break;case 5:var o=e.return;try{sp(e)}catch(u){Je(e,o,u)}}}catch(u){Je(e,e.return,u)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var nN=Math.ceil,Rc=Qr.ReactCurrentDispatcher,eg=Qr.ReactCurrentOwner,Pn=Qr.ReactCurrentBatchConfig,Ne=0,yt=null,lt=null,bt=0,gn=0,eo=$i(0),ft=0,ul=null,ys=0,yd=0,tg=0,La=null,Xt=null,ng=0,Eo=1/0,Cr=null,Pc=!1,lp=null,Si=null,wu=!1,gi=null,jc=0,Ma=0,up=null,Hu=-1,qu=0;function Bt(){return Ne&6?nt():Hu!==-1?Hu:Hu=nt()}function Ti(t){return t.mode&1?Ne&2&&bt!==0?bt&-bt:VC.transition!==null?(qu===0&&(qu=o_()),qu):(t=je,t!==0||(t=window.event,t=t===void 0?16:f_(t.type)),t):1}function Kn(t,e,n,r){if(50<Ma)throw Ma=0,up=null,Error(G(185));_l(t,n,r),(!(Ne&2)||t!==yt)&&(t===yt&&(!(Ne&2)&&(yd|=n),ft===4&&ci(t,bt)),tn(t,r),n===1&&Ne===0&&!(e.mode&1)&&(Eo=nt()+500,fd&&Bi()))}function tn(t,e){var n=t.callbackNode;V2(t,e);var r=gc(t,t===yt?bt:0);if(r===0)n!==null&&I0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&I0(n),e===1)t.tag===0?FC(bx.bind(null,t)):P_(bx.bind(null,t)),DC(function(){!(Ne&6)&&Bi()}),n=null;else{switch(a_(r)){case 1:n=Nm;break;case 4:n=i_;break;case 16:n=mc;break;case 536870912:n=s_;break;default:n=mc}n=A1(n,E1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E1(t,e){if(Hu=-1,qu=0,Ne&6)throw Error(G(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=gc(t,t===yt?bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dc(t,r);else{e=r;var i=Ne;Ne|=2;var s=S1();(yt!==t||bt!==e)&&(Cr=null,Eo=nt()+500,us(t,e));do try{sN();break}catch(a){k1(t,a)}while(!0);zm(),Rc.current=s,Ne=i,lt!==null?e=0:(yt=null,bt=0,e=ft)}if(e!==0){if(e===2&&(i=Lf(t),i!==0&&(r=i,e=cp(t,i))),e===1)throw n=ul,us(t,0),ci(t,r),tn(t,nt()),n;if(e===6)ci(t,r);else{if(i=t.current.alternate,!(r&30)&&!rN(i)&&(e=Dc(t,r),e===2&&(s=Lf(t),s!==0&&(r=s,e=cp(t,s))),e===1))throw n=ul,us(t,0),ci(t,r),tn(t,nt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Zi(t,Xt,Cr);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=ng+500-nt(),10<e)){if(gc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Hf(Zi.bind(null,t,Xt,Cr),e);break}Zi(t,Xt,Cr);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Wn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nN(r/1960))-r,10<r){t.timeoutHandle=Hf(Zi.bind(null,t,Xt,Cr),r);break}Zi(t,Xt,Cr);break;case 5:Zi(t,Xt,Cr);break;default:throw Error(G(329))}}}return tn(t,nt()),t.callbackNode===n?E1.bind(null,t):null}function cp(t,e){var n=La;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=Dc(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&dp(e)),t}function dp(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function rN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~tg,e&=~yd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function bx(t){if(Ne&6)throw Error(G(327));oo();var e=gc(t,0);if(!(e&1))return tn(t,nt()),null;var n=Dc(t,e);if(t.tag!==0&&n===2){var r=Lf(t);r!==0&&(e=r,n=cp(t,r))}if(n===1)throw n=ul,us(t,0),ci(t,e),tn(t,nt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zi(t,Xt,Cr),tn(t,nt()),null}function rg(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(Eo=nt()+500,fd&&Bi())}}function xs(t){gi!==null&&gi.tag===0&&!(Ne&6)&&oo();var e=Ne;Ne|=1;var n=Pn.transition,r=je;try{if(Pn.transition=null,je=1,t)return t()}finally{je=r,Pn.transition=n,Ne=e,!(Ne&6)&&Bi()}}function ig(){gn=eo.current,He(eo)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jC(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Fm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bc();break;case 3:bo(),He(Zt),He(jt),Km();break;case 5:Wm(r);break;case 4:bo();break;case 13:He(Ke);break;case 19:He(Ke);break;case 10:$m(r.type._context);break;case 22:case 23:ig()}n=n.return}if(yt=t,lt=t=Ci(t.current,null),bt=gn=e,ft=0,ul=null,tg=yd=ys=0,Xt=La=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}rs=null}return t}function k1(t,e){do{var n=lt;try{if(zm(),zu.current=Ac,Ic){for(var r=Ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ic=!1}if(gs=0,gt=dt=Ge=null,Da=!1,ol=0,eg.current=null,n===null||n.return===null){ft=1,ul=e,lt=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=bt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=lx(o);if(m!==null){m.flags&=-257,ux(m,o,a,s,e),m.mode&1&&ax(s,d,e),e=m,u=d;var w=e.updateQueue;if(w===null){var S=new Set;S.add(u),e.updateQueue=S}else w.add(u);break e}else{if(!(e&1)){ax(s,d,e),sg();break e}u=Error(G(426))}}else if(qe&&a.mode&1){var T=lx(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),ux(T,o,a,s,e),Vm(_o(u,a));break e}}s=u=_o(u,a),ft!==4&&(ft=2),La===null?La=[s]:La.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=a1(s,u,e);tx(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Si===null||!Si.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=l1(s,a,e);tx(s,D);break e}}s=s.return}while(s!==null)}C1(n)}catch(M){e=M,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function S1(){var t=Rc.current;return Rc.current=Ac,t===null?Ac:t}function sg(){(ft===0||ft===3||ft===2)&&(ft=4),yt===null||!(ys&268435455)&&!(yd&268435455)||ci(yt,bt)}function Dc(t,e){var n=Ne;Ne|=2;var r=S1();(yt!==t||bt!==e)&&(Cr=null,us(t,e));do try{iN();break}catch(i){k1(t,i)}while(!0);if(zm(),Ne=n,Rc.current=r,lt!==null)throw Error(G(261));return yt=null,bt=0,ft}function iN(){for(;lt!==null;)T1(lt)}function sN(){for(;lt!==null&&!A2();)T1(lt)}function T1(t){var e=I1(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?C1(t):lt=e,eg.current=null}function C1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JC(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,lt=null;return}}else if(n=XC(n,e,gn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);ft===0&&(ft=5)}function Zi(t,e,n){var r=je,i=Pn.transition;try{Pn.transition=null,je=1,oN(t,e,n,r)}finally{Pn.transition=i,je=r}return null}function oN(t,e,n,r){do oo();while(gi!==null);if(Ne&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(U2(t,s),t===yt&&(lt=yt=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wu||(wu=!0,A1(mc,function(){return oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pn.transition,Pn.transition=null;var o=je;je=1;var a=Ne;Ne|=4,eg.current=null,eN(t,n),b1(n,t),TC($f),yc=!!zf,$f=zf=null,t.current=n,tN(n),R2(),Ne=a,je=o,Pn.transition=s}else t.current=n;if(wu&&(wu=!1,gi=t,jc=i),s=t.pendingLanes,s===0&&(Si=null),D2(n.stateNode),tn(t,nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pc)throw Pc=!1,t=lp,lp=null,t;return jc&1&&t.tag!==0&&oo(),s=t.pendingLanes,s&1?t===up?Ma++:(Ma=0,up=t):Ma=0,Bi(),null}function oo(){if(gi!==null){var t=a_(jc),e=Pn.transition,n=je;try{if(Pn.transition=null,je=16>t?16:t,gi===null)var r=!1;else{if(t=gi,gi=null,jc=0,Ne&6)throw Error(G(331));var i=Ne;for(Ne|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(te=d;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:Oa(8,h,s)}var f=h.child;if(f!==null)f.return=h,te=f;else for(;te!==null;){h=te;var p=h.sibling,m=h.return;if(x1(h),h===d){te=null;break}if(p!==null){p.return=m,te=p;break}te=m}}}var w=s.alternate;if(w!==null){var S=w.child;if(S!==null){w.child=null;do{var T=S.sibling;S.sibling=null,S=T}while(S!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Oa(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,te=y;break e}te=s.return}}var v=t.current;for(te=v;te!==null;){o=te;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,te=b;else e:for(o=v;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gd(9,a)}}catch(M){Je(a,a.return,M)}if(a===o){te=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,te=D;break e}te=a.return}}if(Ne=i,Bi(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(ld,t)}catch{}r=!0}return r}finally{je=n,Pn.transition=e}}return!1}function _x(t,e,n){e=_o(n,e),e=a1(t,e,1),t=ki(t,e,1),e=Bt(),t!==null&&(_l(t,1,e),tn(t,e))}function Je(t,e,n){if(t.tag===3)_x(t,t,n);else for(;e!==null;){if(e.tag===3){_x(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Si===null||!Si.has(r))){t=_o(n,t),t=l1(e,t,1),e=ki(e,t,1),t=Bt(),e!==null&&(_l(e,1,t),tn(e,t));break}}e=e.return}}function aN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(bt&n)===n&&(ft===4||ft===3&&(bt&130023424)===bt&&500>nt()-ng?us(t,0):tg|=n),tn(t,e)}function N1(t,e){e===0&&(t.mode&1?(e=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):e=1);var n=Bt();t=Ur(t,e),t!==null&&(_l(t,e,n),tn(t,n))}function lN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),N1(t,n)}function uN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),N1(t,n)}var I1;I1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zt.current)Jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jt=!1,YC(t,e,n);Jt=!!(t.flags&131072)}else Jt=!1,qe&&e.flags&1048576&&j_(e,kc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bu(t,e),t=e.pendingProps;var i=xo(e,jt.current);so(e,n),i=Qm(null,e,r,t,i,n);var s=Ym();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(r)?(s=!0,_c(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hm(e),i.updater=md,e.stateNode=i,i._reactInternals=e,Xf(e,r,t,n),e=ep(null,e,r,!0,s,n)):(e.tag=0,qe&&s&&Mm(e),zt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dN(r),t=zn(r,t),i){case 0:e=Zf(null,e,r,t,n);break e;case 1:e=hx(null,e,r,t,n);break e;case 11:e=cx(null,e,r,t,n);break e;case 14:e=dx(null,e,r,zn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),Zf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),hx(t,e,r,i,n);case 3:e:{if(h1(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,V_(t,e),Cc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_o(Error(G(423)),e),e=fx(t,e,r,n,i);break e}else if(r!==i){i=_o(Error(G(424)),e),e=fx(t,e,r,n,i);break e}else for(wn=Ei(e.stateNode.containerInfo.firstChild),_n=e,qe=!0,Bn=null,n=M_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vo(),r===i){e=zr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return U_(e),t===null&&Gf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Bf(r,i)?o=null:s!==null&&Bf(r,s)&&(e.flags|=32),d1(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&Gf(e),null;case 13:return f1(t,e,n);case 4:return qm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wo(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),cx(t,e,r,i,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ve(Sc,r._currentValue),r._currentValue=o,s!==null)if(Qn(s.value,o)){if(s.children===i.children&&!Zt.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Or(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Qf(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}zt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,so(e,n),i=Dn(i),r=r(i),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,i=zn(r,e.pendingProps),i=zn(r.type,i),dx(t,e,r,i,n);case 15:return u1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),Bu(t,e),e.tag=1,en(r)?(t=!0,_c(e)):t=!1,so(e,n),o1(e,r,i),Xf(e,r,i,n),ep(null,e,r,!0,t,n);case 19:return p1(t,e,n);case 22:return c1(t,e,n)}throw Error(G(156,e.tag))};function A1(t,e){return r_(t,e)}function cN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new cN(t,e,n,r)}function og(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dN(t){if(typeof t=="function")return og(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sm)return 11;if(t===Tm)return 14}return 2}function Ci(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")og(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hs:return cs(n.children,i,s,e);case km:o=8,i|=8;break;case bf:return t=Rn(12,n,e,i|2),t.elementType=bf,t.lanes=s,t;case _f:return t=Rn(13,n,e,i),t.elementType=_f,t.lanes=s,t;case Ef:return t=Rn(19,n,e,i),t.elementType=Ef,t.lanes=s,t;case Ub:return xd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fb:o=10;break e;case Vb:o=9;break e;case Sm:o=11;break e;case Tm:o=14;break e;case ai:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function cs(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function xd(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=Ub,t.lanes=n,t.stateNode={isHidden:!1},t}function zh(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function $h(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_h(0),this.expirationTimes=_h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_h(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ag(t,e,n,r,i,s,o,a,u){return t=new hN(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hm(s),t}function fN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function R1(t){if(!t)return ji;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(en(n))return R_(t,n,e)}return e}function P1(t,e,n,r,i,s,o,a,u){return t=ag(n,r,!0,t,i,s,o,a,u),t.context=R1(null),n=t.current,r=Bt(),i=Ti(n),s=Or(r,i),s.callback=e??null,ki(n,s,i),t.current.lanes=i,_l(t,i,r),tn(t,r),t}function vd(t,e,n,r){var i=e.current,s=Bt(),o=Ti(i);return n=R1(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ki(i,e,o),t!==null&&(Kn(t,i,o,s),Uu(t,i,o)),o}function Oc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ex(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lg(t,e){Ex(t,e),(t=t.alternate)&&Ex(t,e)}function pN(){return null}var j1=typeof reportError=="function"?reportError:function(t){console.error(t)};function ug(t){this._internalRoot=t}wd.prototype.render=ug.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));vd(t,e,null,null)};wd.prototype.unmount=ug.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){vd(null,t,null,null)}),e[Vr]=null}};function wd(t){this._internalRoot=t}wd.prototype.unstable_scheduleHydration=function(t){if(t){var e=c_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&h_(t)}};function cg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kx(){}function mN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Oc(o);s.call(d)}}var o=P1(e,r,t,0,null,!1,!1,"",kx);return t._reactRootContainer=o,t[Vr]=o.current,tl(t.nodeType===8?t.parentNode:t),xs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=Oc(u);a.call(d)}}var u=ag(t,0,!1,null,null,!1,!1,"",kx);return t._reactRootContainer=u,t[Vr]=u.current,tl(t.nodeType===8?t.parentNode:t),xs(function(){vd(e,u,n,r)}),u}function _d(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Oc(o);a.call(u)}}vd(e,o,t,i)}else o=mN(n,e,t,i,r);return Oc(o)}l_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_a(e.pendingLanes);n!==0&&(Im(e,n|1),tn(e,nt()),!(Ne&6)&&(Eo=nt()+500,Bi()))}break;case 13:xs(function(){var r=Ur(t,1);if(r!==null){var i=Bt();Kn(r,t,1,i)}}),lg(t,1)}};Am=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=Bt();Kn(e,t,134217728,n)}lg(t,134217728)}};u_=function(t){if(t.tag===13){var e=Ti(t),n=Ur(t,e);if(n!==null){var r=Bt();Kn(n,t,e,r)}lg(t,e)}};c_=function(){return je};d_=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};jf=function(t,e,n){switch(e){case"input":if(Tf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=hd(r);if(!i)throw Error(G(90));$b(r),Tf(r,i)}}}break;case"textarea":Hb(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};Xb=rg;Jb=xs;var gN={usingClientEntryPoint:!1,Events:[kl,Gs,hd,Qb,Yb,rg]},pa={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yN={bundleType:pa.bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=t_(t),t===null?null:t.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||pN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{ld=bu.inject(yN),cr=bu}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gN;kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cg(e))throw Error(G(200));return fN(t,e,null,n)};kn.createRoot=function(t,e){if(!cg(t))throw Error(G(299));var n=!1,r="",i=j1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ag(t,1,!1,null,null,n,!1,r,i),t[Vr]=e.current,tl(t.nodeType===8?t.parentNode:t),new ug(e)};kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=t_(e),t=t===null?null:t.stateNode,t};kn.flushSync=function(t){return xs(t)};kn.hydrate=function(t,e,n){if(!bd(e))throw Error(G(200));return _d(null,t,e,!0,n)};kn.hydrateRoot=function(t,e,n){if(!cg(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=j1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=P1(e,null,t,1,n??null,i,!1,s,o),t[Vr]=e.current,tl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new wd(e)};kn.render=function(t,e,n){if(!bd(e))throw Error(G(200));return _d(null,t,e,!1,n)};kn.unmountComponentAtNode=function(t){if(!bd(t))throw Error(G(40));return t._reactRootContainer?(xs(function(){_d(null,null,t,!1,function(){t._reactRootContainer=null,t[Vr]=null})}),!0):!1};kn.unstable_batchedUpdates=rg;kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return _d(t,e,n,!1,r)};kn.version="18.3.1-next-f1338f8080-20240426";function D1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D1)}catch(t){console.error(t)}}D1(),Db.exports=kn;var xN=Db.exports,O1,Sx=xN;O1=Sx.createRoot,Sx.hydrateRoot;var dg={};Object.defineProperty(dg,"__esModule",{value:!0});dg.parse=SN;dg.serialize=TN;const vN=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,wN=/^[\u0021-\u003A\u003C-\u007E]*$/,bN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,_N=/^[\u0020-\u003A\u003D-\u007E]*$/,EN=Object.prototype.toString,kN=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function SN(t,e){const n=new kN,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||CN;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const a=t.indexOf(";",s),u=a===-1?r:a;if(o>u){s=t.lastIndexOf(";",o-1)+1;continue}const d=Tx(t,s,o),h=Cx(t,o,d),f=t.slice(d,h);if(n[f]===void 0){let p=Tx(t,o+1,u),m=Cx(t,u,p);const w=i(t.slice(p,m));n[f]=w}s=u+1}while(s<r);return n}function Tx(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function Cx(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function TN(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!vN.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!wN.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!bN.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!_N.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!NN(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function CN(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function NN(t){return EN.call(t)==="[object Date]"}var Nx="popstate";function IN(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return hp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:cl(i)}return RN(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AN(){return Math.random().toString(36).substring(2,10)}function Ix(t,e){return{usr:t.state,key:t.key,idx:e}}function hp(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Oo(e):e,state:n,key:e&&e.key||r||AN()}}function cl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function RN(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let T=h(),y=T==null?null:T-d;d=T,u&&u({action:a,location:S.location,delta:y})}function p(T,y){a="PUSH";let v=hp(S.location,T,y);d=h()+1;let b=Ix(v,d),D=S.createHref(v);try{o.pushState(b,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(D)}s&&u&&u({action:a,location:S.location,delta:1})}function m(T,y){a="REPLACE";let v=hp(S.location,T,y);d=h();let b=Ix(v,d),D=S.createHref(v);o.replaceState(b,"",D),s&&u&&u({action:a,location:S.location,delta:0})}function w(T){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof T=="string"?T:cl(T);return v=v.replace(/ $/,"%20"),We(y,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,y)}let S={get action(){return a},get location(){return t(i,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Nx,f),u=T,()=>{i.removeEventListener(Nx,f),u=null}},createHref(T){return e(i,T)},createURL:w,encodeLocation(T){let y=w(T);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(T){return o.go(T)}};return S}function L1(t,e,n="/"){return PN(t,e,n,!1)}function PN(t,e,n,r){let i=typeof e=="string"?Oo(e):e,s=$r(i.pathname||"/",n);if(s==null)return null;let o=M1(t);jN(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let d=HN(s);a=$N(o[u],d,r)}return a}function M1(t,e=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(We(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=Lr([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(We(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),M1(s.children,e,h,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:UN(d,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of F1(s.path))i(s,o,u)}),e}function F1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=F1(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function jN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var DN=/^:[\w-]+$/,ON=3,LN=2,MN=1,FN=10,VN=-2,Ax=t=>t==="*";function UN(t,e){let n=t.split("/"),r=n.length;return n.some(Ax)&&(r+=VN),e&&(r+=LN),n.filter(i=>!Ax(i)).reduce((i,s)=>i+(DN.test(s)?ON:s===""?MN:FN),r)}function zN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function $N(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],d=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Lc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=Lc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Lr([s,f.pathname]),pathnameBase:GN(Lr([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Lr([s,f.pathnameBase]))}return o}function Lc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:f},p)=>{if(h==="*"){let w=a[p]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const m=a[p];return f&&!m?d[h]=void 0:d[h]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function BN(t,e=!1,n=!0){Yn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function HN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function $r(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qN(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Oo(t):t;return{pathname:n?n.startsWith("/")?n:WN(n,e):e,search:QN(r),hash:YN(i)}}function WN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Bh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hg(t){let e=KN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function fg(t,e,n,r=!1){let i;typeof t=="string"?i=Oo(t):(i={...t},We(!i.pathname||!i.pathname.includes("?"),Bh("?","pathname","search",i)),We(!i.pathname||!i.pathname.includes("#"),Bh("#","pathname","hash",i)),We(!i.search||!i.search.includes("#"),Bh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let u=qN(i,a),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Lr=t=>t.join("/").replace(/\/\/+/g,"/"),GN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var V1=["POST","PUT","PATCH","DELETE"];new Set(V1);var JN=["GET",...V1];new Set(JN);var Lo=k.createContext(null);Lo.displayName="DataRouter";var Ed=k.createContext(null);Ed.displayName="DataRouterState";var U1=k.createContext({isTransitioning:!1});U1.displayName="ViewTransition";var ZN=k.createContext(new Map);ZN.displayName="Fetchers";var eI=k.createContext(null);eI.displayName="Await";var Xn=k.createContext(null);Xn.displayName="Navigation";var Tl=k.createContext(null);Tl.displayName="Location";var Mn=k.createContext({outlet:null,matches:[],isDataRoute:!1});Mn.displayName="Route";var pg=k.createContext(null);pg.displayName="RouteError";function tI(t,{relative:e}={}){We(Mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(Xn),{hash:i,pathname:s,search:o}=Cl(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Lr([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Mo(){return k.useContext(Tl)!=null}function Jn(){return We(Mo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Tl).location}var z1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $1(t){k.useContext(Xn).static||k.useLayoutEffect(t)}function Yr(){let{isDataRoute:t}=k.useContext(Mn);return t?yI():nI()}function nI(){We(Mo(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Lo),{basename:e,navigator:n}=k.useContext(Xn),{matches:r}=k.useContext(Mn),{pathname:i}=Jn(),s=JSON.stringify(hg(r)),o=k.useRef(!1);return $1(()=>{o.current=!0}),k.useCallback((u,d={})=>{if(Yn(o.current,z1),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=fg(u,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Lr([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,s,i,t])}var rI=k.createContext(null);function iI(t){let e=k.useContext(Mn).outlet;return e&&k.createElement(rI.Provider,{value:t},e)}function sI(){let{matches:t}=k.useContext(Mn),e=t[t.length-1];return e?e.params:{}}function Cl(t,{relative:e}={}){let{matches:n}=k.useContext(Mn),{pathname:r}=Jn(),i=JSON.stringify(hg(n));return k.useMemo(()=>fg(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function oI(t,e){return B1(t,e)}function B1(t,e,n,r){var v;We(Mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=k.useContext(Xn),{matches:o}=k.useContext(Mn),a=o[o.length-1],u=a?a.params:{},d=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let b=f&&f.path||"";H1(d,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let p=Jn(),m;if(e){let b=typeof e=="string"?Oo(e):e;We(h==="/"||((v=b.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=p;let w=m.pathname||"/",S=w;if(h!=="/"){let b=h.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let T=!s&&n&&n.matches&&n.matches.length>0?n.matches:L1(t,{pathname:S});Yn(f||T!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Yn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=dI(T&&T.map(b=>Object.assign({},b,{params:Object.assign({},u,b.params),pathname:Lr([h,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Lr([h,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return e&&y?k.createElement(Tl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},y):y}function aI(){let t=gI(),e=XN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:s},"ErrorBoundary")," or"," ",k.createElement("code",{style:s},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,o)}var lI=k.createElement(aI,null),uI=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?k.createElement(Mn.Provider,{value:this.props.routeContext},k.createElement(pg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cI({routeContext:t,match:e,children:n}){let r=k.useContext(Lo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Mn.Provider,{value:t},n)}function dI(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);We(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(a=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let f,p=!1,m=null,w=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,m=d.route.errorElement||lI,o&&(a<0&&h===0?(H1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,w=null):a===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,h+1)),T=()=>{let y;return f?y=m:p?y=w:d.route.Component?y=k.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=u,k.createElement(cI,{match:d,routeContext:{outlet:u,matches:S,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?k.createElement(uI,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}function mg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hI(t){let e=k.useContext(Lo);return We(e,mg(t)),e}function fI(t){let e=k.useContext(Ed);return We(e,mg(t)),e}function pI(t){let e=k.useContext(Mn);return We(e,mg(t)),e}function gg(t){let e=pI(t),n=e.matches[e.matches.length-1];return We(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function mI(){return gg("useRouteId")}function gI(){var r;let t=k.useContext(pg),e=fI("useRouteError"),n=gg("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function yI(){let{router:t}=hI("useNavigate"),e=gg("useNavigate"),n=k.useRef(!1);return $1(()=>{n.current=!0}),k.useCallback(async(i,s={})=>{Yn(n.current,z1),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Rx={};function H1(t,e,n){!e&&!Rx[t]&&(Rx[t]=!0,Yn(!1,n))}k.memo(xI);function xI({routes:t,future:e,state:n}){return B1(t,void 0,n,e)}function fp({to:t,replace:e,state:n,relative:r}){We(Mo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(Xn);Yn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=k.useContext(Mn),{pathname:o}=Jn(),a=Yr(),u=fg(t,hg(s),o,r==="path"),d=JSON.stringify(u);return k.useEffect(()=>{a(JSON.parse(d),{replace:e,state:n,relative:r})},[a,d,r,e,n]),null}function vI(t){return iI(t.context)}function ct(t){We(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function wI({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){We(!Mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=k.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Oo(n));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=n,m=k.useMemo(()=>{let w=$r(u,o);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:r}},[o,u,d,h,f,p,r]);return Yn(m!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:k.createElement(Xn.Provider,{value:a},k.createElement(Tl.Provider,{children:e,value:m}))}function bI({children:t,location:e}){return oI(pp(t),e)}function pp(t,e=[]){let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){n.push.apply(n,pp(r.props.children,s));return}We(r.type===ct,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),We(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=pp(r.props.children,s)),n.push(o)}),n}var Ku="get",Gu="application/x-www-form-urlencoded";function kd(t){return t!=null&&typeof t.tagName=="string"}function _I(t){return kd(t)&&t.tagName.toLowerCase()==="button"}function EI(t){return kd(t)&&t.tagName.toLowerCase()==="form"}function kI(t){return kd(t)&&t.tagName.toLowerCase()==="input"}function SI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TI(t,e){return t.button===0&&(!e||e==="_self")&&!SI(t)}var _u=null;function CI(){if(_u===null)try{new FormData(document.createElement("form"),0),_u=!1}catch{_u=!0}return _u}var NI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hh(t){return t!=null&&!NI.has(t)?(Yn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gu}"`),null):t}function II(t,e){let n,r,i,s,o;if(EI(t)){let a=t.getAttribute("action");r=a?$r(a,e):null,n=t.getAttribute("method")||Ku,i=Hh(t.getAttribute("enctype"))||Gu,s=new FormData(t)}else if(_I(t)||kI(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?$r(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Ku,i=Hh(t.getAttribute("formenctype"))||Hh(a.getAttribute("enctype"))||Gu,s=new FormData(a,t),!CI()){let{name:d,type:h,value:f}=t;if(h==="image"){let p=d?`${d}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else d&&s.append(d,f)}}else{if(kd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ku,r=null,i=Gu,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function yg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function AI(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function PI(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await AI(s,n);return o.links?o.links():[]}return[]}));return LI(r.flat(1).filter(RI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Px(t,e,n,r,i,s){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,a=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,d)=>o(u,d)||a(u,d)):s==="data"?e.filter((u,d)=>{var f;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||a(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function jI(t,e,{includeHydrateFallback:n}={}){return DI(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function DI(t){return[...new Set(t)]}function OI(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function LI(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(OI(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}var MI=new Set([100,101,204,205]);function FI(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&$r(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function q1(){let t=k.useContext(Lo);return yg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function VI(){let t=k.useContext(Ed);return yg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var xg=k.createContext(void 0);xg.displayName="FrameworkContext";function W1(){let t=k.useContext(xg);return yg(t,"You must render this element inside a <HydratedRouter> element"),t}function UI(t,e){let n=k.useContext(xg),[r,i]=k.useState(!1),[s,o]=k.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:f}=e,p=k.useRef(null);k.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=y=>{y.forEach(v=>{o(v.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return p.current&&T.observe(p.current),()=>{T.disconnect()}}},[t]),k.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let m=()=>{i(!0)},w=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,p,{}]:[s,p,{onFocus:ma(a,m),onBlur:ma(u,w),onMouseEnter:ma(d,m),onMouseLeave:ma(h,w),onTouchStart:ma(f,m)}]:[!1,p,{}]}function ma(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function zI({page:t,...e}){let{router:n}=q1(),r=k.useMemo(()=>L1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?k.createElement(BI,{page:t,matches:r,...e}):null}function $I(t){let{manifest:e,routeModules:n}=W1(),[r,i]=k.useState([]);return k.useEffect(()=>{let s=!1;return PI(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function BI({page:t,matches:e,...n}){let r=Jn(),{manifest:i,routeModules:s}=W1(),{basename:o}=q1(),{loaderData:a,matches:u}=VI(),d=k.useMemo(()=>Px(t,e,u,i,r,"data"),[t,e,u,i,r]),h=k.useMemo(()=>Px(t,e,u,i,r,"assets"),[t,e,u,i,r]),f=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(e.forEach(y=>{var b;let v=i.routes[y.route.id];!v||!v.hasLoader||(!d.some(D=>D.route.id===y.route.id)&&y.route.id in a&&((b=s[y.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?S=!0:w.add(y.route.id))}),w.size===0)return[];let T=FI(t,o);return S&&w.size>0&&T.searchParams.set("_routes",e.filter(y=>w.has(y.route.id)).map(y=>y.route.id).join(",")),[T.pathname+T.search]},[o,a,r,i,d,e,t,s]),p=k.useMemo(()=>jI(h,i),[h,i]),m=$I(h);return k.createElement(k.Fragment,null,f.map(w=>k.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),p.map(w=>k.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),m.map(({key:w,link:S})=>k.createElement("link",{key:w,...S})))}function HI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var K1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{K1&&(window.__reactRouterVersion="7.5.3")}catch{}function qI({basename:t,children:e,window:n}){let r=k.useRef();r.current==null&&(r.current=IN({window:n,v5Compat:!0}));let i=r.current,[s,o]=k.useState({action:i.action,location:i.location}),a=k.useCallback(u=>{k.startTransition(()=>o(u))},[o]);return k.useLayoutEffect(()=>i.listen(a),[i,a]),k.createElement(wI,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var G1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=k.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:d,preventScrollReset:h,viewTransition:f,...p},m){let{basename:w}=k.useContext(Xn),S=typeof d=="string"&&G1.test(d),T,y=!1;if(typeof d=="string"&&S&&(T=d,K1))try{let N=new URL(window.location.href),R=d.startsWith("//")?new URL(N.protocol+d):new URL(d),j=$r(R.pathname,w);R.origin===N.origin&&j!=null?d=j+R.search+R.hash:y=!0}catch{Yn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=tI(d,{relative:i}),[b,D,M]=UI(r,p),C=QI(d,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,viewTransition:f});function E(N){e&&e(N),N.defaultPrevented||C(N)}let _=k.createElement("a",{...p,...M,href:T||v,onClick:y||s?e:E,ref:HI(m,D),target:u,"data-discover":!S&&n==="render"?"true":void 0});return b&&!S?k.createElement(k.Fragment,null,_,k.createElement(zI,{page:v})):_});Te.displayName="Link";var WI=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...d},h){let f=Cl(o,{relative:d.relative}),p=Jn(),m=k.useContext(Ed),{navigator:w,basename:S}=k.useContext(Xn),T=m!=null&&eA(f)&&a===!0,y=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,v=p.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(v=v.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&S&&(b=$r(b,S)||b);const D=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let M=v===y||!i&&v.startsWith(y)&&v.charAt(D)==="/",C=b!=null&&(b===y||!i&&b.startsWith(y)&&b.charAt(y.length)==="/"),E={isActive:M,isPending:C,isTransitioning:T},_=M?e:void 0,N;typeof r=="function"?N=r(E):N=[r,M?"active":null,C?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(E):s;return k.createElement(Te,{...d,"aria-current":_,className:N,ref:h,style:R,to:o,viewTransition:a},typeof u=="function"?u(E):u)});WI.displayName="NavLink";var KI=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Ku,action:a,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:f,...p},m)=>{let w=JI(),S=ZI(a,{relative:d}),T=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&G1.test(a),v=b=>{if(u&&u(b),b.defaultPrevented)return;b.preventDefault();let D=b.nativeEvent.submitter,M=(D==null?void 0:D.getAttribute("formmethod"))||o;w(D||b.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:i,state:s,relative:d,preventScrollReset:h,viewTransition:f})};return k.createElement("form",{ref:m,method:T,action:S,onSubmit:r?u:v,...p,"data-discover":!y&&t==="render"?"true":void 0})});KI.displayName="Form";function GI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q1(t){let e=k.useContext(Lo);return We(e,GI(t)),e}function QI(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Yr(),u=Jn(),d=Cl(t,{relative:s});return k.useCallback(h=>{if(TI(h,e)){h.preventDefault();let f=n!==void 0?n:cl(u)===cl(d);a(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,d,n,r,e,t,i,s,o])}var YI=0,XI=()=>`__${String(++YI)}__`;function JI(){let{router:t}=Q1("useSubmit"),{basename:e}=k.useContext(Xn),n=mI();return k.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:d}=II(r,e);if(i.navigate===!1){let h=i.fetcherKey||XI();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function ZI(t,{relative:e}={}){let{basename:n}=k.useContext(Xn),r=k.useContext(Mn);We(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Cl(t||".",{relative:e})},o=Jn();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(h=>h==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Lr([n,s.pathname])),cl(s)}function eA(t,e={}){let n=k.useContext(U1);We(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Q1("useViewTransitionState"),i=Cl(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=$r(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=$r(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lc(i.pathname,o)!=null||Lc(i.pathname,s)!=null}new TextEncoder;[...MI];const tA=()=>{};var jx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},X1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|d>>6,m=d&63;u||(m=64,o||(p=64)),r.push(n[h],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||d==null||f==null)throw new rA;const p=s<<2|a>>4;if(r.push(p),d!==64){const m=a<<4&240|d>>2;if(r.push(m),f!==64){const w=d<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iA=function(t){const e=Y1(t);return X1.encodeByteArray(e,!0)},Mc=function(t){return iA(t).replace(/\./g,"")},J1=function(t){try{return X1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=()=>sA().__FIREBASE_DEFAULTS__,aA=()=>{if(typeof process>"u"||typeof jx>"u")return;const t=jx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&J1(t[1]);return e&&JSON.parse(e)},Sd=()=>{try{return tA()||oA()||aA()||lA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Z1=t=>{var e,n;return(n=(e=Sd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eE=t=>{const e=Z1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tE=()=>{var t;return(t=Sd())===null||t===void 0?void 0:t.config},nE=t=>{var e;return(e=Sd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mc(JSON.stringify(n)),Mc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function dA(){var t;const e=(t=Sd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mA(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gA(){return!dA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="FirebaseError";class wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vA,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wA(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new wr(i,a,r)}}function wA(t,e){return t.replace(bA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const bA=/\{\$([^}]+)}/g;function _A(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Dx(s)&&Dx(o)){if(!vs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Dx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ka(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Sa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function EA(t,e){const n=new kA(t,e);return n.subscribe.bind(n)}class kA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qh),i.error===void 0&&(i.error=qh),i.complete===void 0&&(i.complete=qh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t){return t&&t._delegate?t._delegate:t}class Di{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NA(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CA(t){return t===es?void 0:t}function NA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const AA={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},RA=_e.INFO,PA={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},jA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=PA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vg{constructor(e){this.name=e,this._logLevel=RA,this._logHandler=jA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const DA=(t,e)=>e.some(n=>t instanceof n);let Ox,Lx;function OA(){return Ox||(Ox=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LA(){return Lx||(Lx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iE=new WeakMap,mp=new WeakMap,sE=new WeakMap,Wh=new WeakMap,wg=new WeakMap;function MA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ni(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&iE.set(n,t)}).catch(()=>{}),wg.set(e,t),e}function FA(t){if(mp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});mp.set(t,e)}let gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VA(t){gp=t(gp)}function UA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kh(this),e,...n);return sE.set(r,e.sort?e.sort():[e]),Ni(r)}:LA().includes(t)?function(...e){return t.apply(Kh(this),e),Ni(iE.get(this))}:function(...e){return Ni(t.apply(Kh(this),e))}}function zA(t){return typeof t=="function"?UA(t):(t instanceof IDBTransaction&&FA(t),DA(t,OA())?new Proxy(t,gp):t)}function Ni(t){if(t instanceof IDBRequest)return MA(t);if(Wh.has(t))return Wh.get(t);const e=zA(t);return e!==t&&(Wh.set(t,e),wg.set(e,t)),e}const Kh=t=>wg.get(t);function $A(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ni(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ni(o.result),u.oldVersion,u.newVersion,Ni(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const BA=["get","getKey","getAll","getAllKeys","count"],HA=["put","add","delete","clear"],Gh=new Map;function Mx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gh.get(e))return Gh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BA.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),i&&u.done]))[0]};return Gh.set(e,s),s}VA(t=>({...t,get:(e,n,r)=>Mx(e,n)||t.get(e,n,r),has:(e,n)=>!!Mx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yp="@firebase/app",Fx="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new vg("@firebase/app"),KA="@firebase/app-compat",GA="@firebase/analytics-compat",QA="@firebase/analytics",YA="@firebase/app-check-compat",XA="@firebase/app-check",JA="@firebase/auth",ZA="@firebase/auth-compat",eR="@firebase/database",tR="@firebase/data-connect",nR="@firebase/database-compat",rR="@firebase/functions",iR="@firebase/functions-compat",sR="@firebase/installations",oR="@firebase/installations-compat",aR="@firebase/messaging",lR="@firebase/messaging-compat",uR="@firebase/performance",cR="@firebase/performance-compat",dR="@firebase/remote-config",hR="@firebase/remote-config-compat",fR="@firebase/storage",pR="@firebase/storage-compat",mR="@firebase/firestore",gR="@firebase/vertexai",yR="@firebase/firestore-compat",xR="firebase",vR="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]",wR={[yp]:"fire-core",[KA]:"fire-core-compat",[QA]:"fire-analytics",[GA]:"fire-analytics-compat",[XA]:"fire-app-check",[YA]:"fire-app-check-compat",[JA]:"fire-auth",[ZA]:"fire-auth-compat",[eR]:"fire-rtdb",[tR]:"fire-data-connect",[nR]:"fire-rtdb-compat",[rR]:"fire-fn",[iR]:"fire-fn-compat",[sR]:"fire-iid",[oR]:"fire-iid-compat",[aR]:"fire-fcm",[lR]:"fire-fcm-compat",[uR]:"fire-perf",[cR]:"fire-perf-compat",[dR]:"fire-rc",[hR]:"fire-rc-compat",[fR]:"fire-gcs",[pR]:"fire-gcs-compat",[mR]:"fire-fst",[yR]:"fire-fst-compat",[gR]:"fire-vertex","fire-js":"fire-js",[xR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Map,bR=new Map,vp=new Map;function Vx(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ws(t){const e=t.name;if(vp.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;vp.set(e,t);for(const n of Fc.values())Vx(n,t);for(const n of bR.values())Vx(n,t);return!0}function Td(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Nl("app","Firebase",_R);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=vR;function oE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ii.create("bad-app-name",{appName:String(i)});if(n||(n=tE()),!n)throw Ii.create("no-options");const s=Fc.get(i);if(s){if(vs(n,s.options)&&vs(r,s.config))return s;throw Ii.create("duplicate-app",{appName:i})}const o=new IA(i);for(const u of vp.values())o.addComponent(u);const a=new ER(n,r,o);return Fc.set(i,a),a}function bg(t=xp){const e=Fc.get(t);if(!e&&t===xp&&tE())return oE();if(!e)throw Ii.create("no-app",{appName:t});return e}function hr(t,e,n){var r;let i=(r=wR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(a.join(" "));return}ws(new Di(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="firebase-heartbeat-database",SR=1,dl="firebase-heartbeat-store";let Qh=null;function aE(){return Qh||(Qh=$A(kR,SR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),Qh}async function TR(t){try{const n=(await aE()).transaction(dl),r=await n.objectStore(dl).get(lE(t));return await n.done,r}catch(e){if(e instanceof wr)Br.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(n.message)}}}async function Ux(t,e){try{const r=(await aE()).transaction(dl,"readwrite");await r.objectStore(dl).put(e,lE(t)),await r.done}catch(n){if(n instanceof wr)Br.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Br.warn(r.message)}}}function lE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=1024,NR=30;class IR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>NR){const o=PR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zx(),{heartbeatsToSend:r,unsentEntries:i}=AR(this._heartbeatsCache.heartbeats),s=Mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Br.warn(n),""}}}function zx(){return new Date().toISOString().substring(0,10)}function AR(t,e=CR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$x(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$x(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ux(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ux(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $x(t){return Mc(JSON.stringify({version:2,heartbeats:t})).length}function PR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){ws(new Di("platform-logger",e=>new qA(e),"PRIVATE")),ws(new Di("heartbeat",e=>new IR(e),"PRIVATE")),hr(yp,Fx,t),hr(yp,Fx,"esm2017"),hr("fire-js","")}jR("");function _g(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function uE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DR=uE,cE=new Nl("auth","Firebase",uE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new vg("@firebase/auth");function OR(t,...e){Vc.logLevel<=_e.WARN&&Vc.warn(`Auth (${Ns}): ${t}`,...e)}function Qu(t,...e){Vc.logLevel<=_e.ERROR&&Vc.error(`Auth (${Ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,...e){throw kg(t,...e)}function Gn(t,...e){return kg(t,...e)}function Eg(t,e,n){const r=Object.assign(Object.assign({},DR()),{[e]:n});return new Nl("auth","Firebase",r).create(e,{appName:t.name})}function Ai(t){return Eg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ln(t,"argument-error"),Eg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cE.create(t,...e)}function le(t,e,...n){if(!t)throw kg(e,...n)}function jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qu(e),new Error(e)}function Hr(t,e){t||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function MR(){return Bx()==="http:"||Bx()==="https:"}function Bx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MR()||fA()||"connection"in navigator)?navigator.onLine:!0}function VR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=cA()||pA()}get(){return FR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t,e){Hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$R=new Al(3e4,6e4);function Hi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xr(t,e,n,r,i={}){return hE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Il(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},s);return hA()||(d.referrerPolicy="no-referrer"),dE.fetch()(await fE(t,t.config.apiHost,n,a),d)})}async function hE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},UR),e);try{const i=new HR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Eu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,d]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Eu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Eu(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Eg(t,h,d);Ln(t,h)}}catch(i){if(i instanceof wr)throw i;Ln(t,"network-request-failed",{message:String(i)})}}async function Cd(t,e,n,r,i={}){const s=await Xr(t,e,n,r,i);return"mfaPendingCredential"in s&&Ln(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function fE(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Sg(t.config,i):`${t.config.apiScheme}://${i}`;return zR.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function BR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gn(this.auth,"network-request-failed")),$R.get())})}}function Eu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gn(t,e,r);return i.customData._tokenResponse=n,i}function Hx(t){return t!==void 0&&t.enterprise!==void 0}class qR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WR(t,e){return Xr(t,"GET","/v2/recaptchaConfig",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e){return Xr(t,"POST","/v1/accounts:delete",e)}async function Uc(t,e){return Xr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GR(t,e=!1){const n=Zn(t),r=await n.getIdToken(e),i=Tg(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Fa(Yh(i.auth_time)),issuedAtTime:Fa(Yh(i.iat)),expirationTime:Fa(Yh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Yh(t){return Number(t)*1e3}function Tg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const i=J1(n);return i?JSON.parse(i):(Qu("Failed to decode base64 JWT payload"),null)}catch(i){return Qu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qx(t){const e=Tg(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wr&&QR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fa(this.lastLoginAt),this.creationTime=Fa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await hl(t,Uc(n,{idToken:r}));le(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pE(s.providerUserInfo):[],a=JR(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=u?d:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function XR(t){const e=Zn(t);await zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pE(t){return t.map(e=>{var{providerId:n}=e,r=_g(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e){const n=await hE(t,{},async()=>{const r=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await fE(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",dE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eP(t,e){return Xr(t,"POST","/v2/accounts:revokeToken",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=qx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ZR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ao;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ao,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=_g(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hl(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GR(this,e)}reload(){return XR(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await hl(this,KR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,d,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:D,isAnonymous:M,providerData:C,stsTokenManager:E}=n;le(b&&E,e,"internal-error");const _=ao.fromJSON(this.name,E);le(typeof b=="string",e,"internal-error"),si(f,e.name),si(p,e.name),le(typeof D=="boolean",e,"internal-error"),le(typeof M=="boolean",e,"internal-error"),si(m,e.name),si(w,e.name),si(S,e.name),si(T,e.name),si(y,e.name),si(v,e.name);const N=new Hn({uid:b,auth:e,email:p,emailVerified:D,displayName:f,isAnonymous:M,photoURL:w,phoneNumber:m,tenantId:S,stsTokenManager:_,createdAt:y,lastLoginAt:v});return C&&Array.isArray(C)&&(N.providerData=C.map(R=>Object.assign({},R))),T&&(N._redirectEventId=T),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new ao;i.updateFromServerResponse(n);const s=new Hn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ao;a.updateFromIdToken(r);const u=new Hn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new bp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new Map;function Dr(t){Hr(t instanceof Function,"Expected a class definition");let e=Wx.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mE.type="NONE";const Kx=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e,n){return`firebase:${t}:${e}:${n}`}class lo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Yu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uc(this.auth,{idToken:e}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lo(Dr(Kx),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Dr(Kx);const o=Yu(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const p=await Uc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Hn._fromGetAccountInfoResponse(e,p,h)}else f=Hn._fromJSON(e,h);d!==s&&(a=f),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new lo(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new lo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bE(e))return"Blackberry";if(_E(e))return"Webos";if(yE(e))return"Safari";if((e.includes("chrome/")||xE(e))&&!e.includes("edge/"))return"Chrome";if(wE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gE(t=Dt()){return/firefox\//i.test(t)}function yE(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xE(t=Dt()){return/crios\//i.test(t)}function vE(t=Dt()){return/iemobile/i.test(t)}function wE(t=Dt()){return/android/i.test(t)}function bE(t=Dt()){return/blackberry/i.test(t)}function _E(t=Dt()){return/webos/i.test(t)}function Cg(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tP(t=Dt()){var e;return Cg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nP(){return mA()&&document.documentMode===10}function EE(t=Dt()){return Cg(t)||wE(t)||_E(t)||bE(t)||/windows phone/i.test(t)||vE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e=[]){let n;switch(t){case"Browser":n=Gx(Dt());break;case"Worker":n=`${Gx(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(t,e={}){return Xr(t,"GET","/v2/passwordPolicy",Hi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=6;class oP{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qx(this),this.idTokenSubscription=new Qx(this),this.beforeStateQueue=new rP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uc(this,{idToken:e}),r=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Ai(this));const n=e?Zn(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iP(this),n=new oP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qi(t){return Zn(t)}class Qx{constructor(e){this.auth=e,this.observer=null,this.addObserver=EA(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lP(t){Nd=t}function SE(t){return Nd.loadJS(t)}function uP(){return Nd.recaptchaEnterpriseScript}function cP(){return Nd.gapiScript}function dP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hP{constructor(){this.enterprise=new fP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const pP="recaptcha-enterprise",TE="NO_RECAPTCHA";class mP{constructor(e){this.type=pP,this.auth=qi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{WR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new qR(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;Hx(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(TE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hP().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Hx(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=uP();u.length!==0&&(u+=a),SE(u).then(()=>{i(a,s,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function Yx(t,e,n,r=!1,i=!1){const s=new mP(t);let o;if(i)o=TE;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function _p(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Yx(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Yx(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t,e){const n=Td(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(vs(s,e??{}))return i;Ln(i,"already-initialized")}return n.initialize({options:e})}function yP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xP(t,e,n){const r=qi(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=CE(e),{host:o,port:a}=vP(e),u=a===null?"":`:${a}`,d={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(vs(d,r.config.emulator)&&vs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,wP()}function CE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vP(t){const e=CE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Xx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Xx(o)}}}function Xx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,n){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function bP(t,e){return Xr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(t,e){return Cd(t,"POST","/v1/accounts:signInWithPassword",Hi(t,e))}async function EP(t,e){return Xr(t,"POST","/v1/accounts:sendOobCode",Hi(t,e))}async function kP(t,e){return EP(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(t,e){return Cd(t,"POST","/v1/accounts:signInWithEmailLink",Hi(t,e))}async function TP(t,e){return Cd(t,"POST","/v1/accounts:signInWithEmailLink",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Ng{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new fl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(e,n,"signInWithPassword",_P);case"emailLink":return SP(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(e,r,"signUpPassword",bP);case"emailLink":return TP(e,{idToken:n,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return Cd(t,"POST","/v1/accounts:signInWithIdp",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="http://localhost";class bs extends Ng{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=_g(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:CP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Il(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IP(t){const e=ka(Sa(t)).link,n=e?ka(Sa(e)).deep_link_id:null,r=ka(Sa(t)).deep_link_id;return(r?ka(Sa(r)).link:null)||r||n||e||t}class Ig{constructor(e){var n,r,i,s,o,a;const u=ka(Sa(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,f=NP((i=u.mode)!==null&&i!==void 0?i:null);le(d&&h&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=IP(e);try{return new Ig(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,n){return fl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ig.parseLink(n);return le(r,"argument-error"),fl._fromEmailAndCode(e,r.code,r.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Rl{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Rl{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Rl{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Hn._fromIdTokenResponse(e,r,i),o=Jx(r);return new ko({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Jx(r);return new ko({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Jx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends wr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $c(e,n,r,i)}}function NE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(t,s,e,r):s})}async function AP(t,e,n=!1){const r=await hl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ko._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(t,e,n=!1){const{auth:r}=t;if(vn(r.app))return Promise.reject(Ai(r));const i="reauthenticate";try{const s=await hl(t,NE(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Tg(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),ko._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ln(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(t,e,n=!1){if(vn(t.app))return Promise.reject(Ai(t));const r="signIn",i=await NE(t,r,e),s=await ko._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function PP(t,e){return IE(qi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t){const e=qi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DP(t,e,n){const r=qi(t);await _p(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",kP)}function Zx(t,e,n){return vn(t.app)?Promise.reject(Ai(t)):PP(Zn(t),Fo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jP(t),r})}function OP(t,e,n,r){return Zn(t).onIdTokenChanged(e,n,r)}function LP(t,e,n){return Zn(t).beforeAuthStateChanged(e,n)}function MP(t,e,n,r){return Zn(t).onAuthStateChanged(e,n,r)}function ev(t){return Zn(t).signOut()}const Bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bc,"1"),this.storage.removeItem(Bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=1e3,VP=10;class RE extends AE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);nP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,VP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RE.type="LOCAL";const UP=RE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends AE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PE.type="SESSION";const jE=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Id(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async d=>d(n.origin,s)),u=await zP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const d=Rg("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}function BP(t){fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function HP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function WP(){return DE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="firebaseLocalStorageDb",KP=1,Hc="firebaseLocalStorage",LE="fbase_key";class Pl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(t,e){return t.transaction([Hc],e?"readwrite":"readonly").objectStore(Hc)}function GP(){const t=indexedDB.deleteDatabase(OE);return new Pl(t).toPromise()}function Ep(){const t=indexedDB.open(OE,KP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hc,{keyPath:LE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hc)?e(r):(r.close(),await GP(),e(await Ep()))})})}async function tv(t,e,n){const r=Ad(t,!0).put({[LE]:e,value:n});return new Pl(r).toPromise()}async function QP(t,e){const n=Ad(t,!1).get(e),r=await new Pl(n).toPromise();return r===void 0?null:r.value}function nv(t,e){const n=Ad(t,!0).delete(e);return new Pl(n).toPromise()}const YP=800,XP=3;class ME{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Id._getInstance(WP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HP(),!this.activeServiceWorker)return;this.sender=new $P(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ep();return await tv(e,Bc,"1"),await nv(e,Bc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ad(i,!1).getAll();return new Pl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ME.type="LOCAL";const JP=ME;new Al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e){return e?Dr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends Ng{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZP(t){return IE(t.auth,new Pg(t),t.bypassAuthState)}function ej(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),RP(n,new Pg(t),t.bypassAuthState)}async function tj(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),AP(n,new Pg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZP;case"linkViaPopup":case"linkViaRedirect":return tj;case"reauthViaPopup":case"reauthViaRedirect":return ej;default:Ln(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new Al(2e3,1e4);async function rj(t,e,n){if(vn(t.app))return Promise.reject(Gn(t,"operation-not-supported-in-this-environment"));const r=qi(t);LR(t,e,Ag);const i=FE(r,n);return new ss(r,"signInViaPopup",e,i).executeNotNull()}class ss extends VE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ss.currentPopupAction&&ss.currentPopupAction.cancel(),ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nj.get())};e()}}ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="pendingRedirect",Xu=new Map;class sj extends VE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const r=await oj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oj(t,e){const n=uj(e),r=lj(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function aj(t,e){Xu.set(t._key(),e)}function lj(t){return Dr(t._redirectPersistence)}function uj(t){return Yu(ij,t.config.apiKey,t.name)}async function cj(t,e,n=!1){if(vn(t.app))return Promise.reject(Ai(t));const r=qi(t),i=FE(r,e),o=await new sj(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=10*60*1e3;class hj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!UE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dj&&this.cachedEventUids.clear(),this.cachedEventUids.has(rv(e))}saveEventToCache(e){this.cachedEventUids.add(rv(e)),this.lastProcessedEventTime=Date.now()}}function rv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function UE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e={}){return Xr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gj=/^https?/;async function yj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pj(t);for(const n of e)try{if(xj(n))return}catch{}Ln(t,"unauthorized-domain")}function xj(t){const e=wp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gj.test(n))return!1;if(mj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new Al(3e4,6e4);function iv(){const t=fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wj(t){return new Promise((e,n)=>{var r,i,s;function o(){iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iv(),n(Gn(t,"network-request-failed"))},timeout:vj.get()})}if(!((i=(r=fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=fr().gapi)===null||s===void 0)&&s.load)o();else{const a=dP("iframefcb");return fr()[a]=()=>{gapi.load?o():n(Gn(t,"network-request-failed"))},SE(`${cP()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function bj(t){return Ju=Ju||wj(t),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Al(5e3,15e3),Ej="__/auth/iframe",kj="emulator/auth/iframe",Sj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cj(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sg(e,kj):`https://${t.config.authDomain}/${Ej}`,r={apiKey:e.apiKey,appName:t.name,v:Ns},i=Tj.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Il(r).slice(1)}`}async function Nj(t){const e=await bj(t),n=fr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:Cj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Gn(t,"network-request-failed"),a=fr().setTimeout(()=>{s(o)},_j.get());function u(){fr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Aj=500,Rj=600,Pj="_blank",jj="http://localhost";class sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dj(t,e,n,r=Aj,i=Rj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Ij),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Dt().toLowerCase();n&&(a=xE(d)?Pj:n),gE(d)&&(e=e||jj,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(tP(d)&&a!=="_self")return Oj(e||"",a),new sv(null);const f=window.open(e||"",a,h);le(f,t,"popup-blocked");try{f.focus()}catch{}return new sv(f)}function Oj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="__/auth/handler",Mj="emulator/auth/handler",Fj=encodeURIComponent("fac");async function ov(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ns,eventId:i};if(e instanceof Ag){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_A(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Rl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),d=u?`#${Fj}=${encodeURIComponent(u)}`:"";return`${Vj(t)}?${Il(a).slice(1)}${d}`}function Vj({config:t}){return t.emulator?Sg(t,Mj):`https://${t.authDomain}/${Lj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="webStorageSupport";class Uj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jE,this._completeRedirectFn=cj,this._overrideRedirectResult=aj}async _openPopup(e,n,r,i){var s;Hr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ov(e,n,r,wp(),i);return Dj(e,o,Rg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await ov(e,n,r,wp(),i);return BP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Hr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Nj(e),r=new hj(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xh,{type:Xh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Xh];o!==void 0&&n(!!o),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EE()||yE()||Cg()}}const zj=Uj;var av="@firebase/auth",lv="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Hj(t){ws(new Di("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kE(t)},d=new aP(r,i,s,u);return yP(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ws(new Di("auth-internal",e=>{const n=qi(e.getProvider("auth").getImmediate());return(r=>new $j(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(av,lv,Bj(t)),hr(av,lv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=5*60,Wj=nE("authIdTokenMaxAge")||qj;let uv=null;const Kj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Wj)return;const i=n==null?void 0:n.token;uv!==i&&(uv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Gj(t=bg()){const e=Td(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gP(t,{popupRedirectResolver:zj,persistence:[JP,UP,jE]}),r=nE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Kj(s.toString());LP(n,o,()=>o(n.currentUser)),OP(n,a=>o(a))}}const i=Z1("auth");return i&&xP(n,`http://${i}`),n}function Qj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Gn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Qj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Hj("Browser");var Yj="firebase",Xj="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr(Yj,Xj,"app");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,zE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function N(){}N.prototype=_.prototype,E.D=_.prototype,E.prototype=new N,E.prototype.constructor=E,E.C=function(R,j,I){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return _.prototype[j].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,_,N){N||(N=0);var R=Array(16);if(typeof _=="string")for(var j=0;16>j;++j)R[j]=_.charCodeAt(N++)|_.charCodeAt(N++)<<8|_.charCodeAt(N++)<<16|_.charCodeAt(N++)<<24;else for(j=0;16>j;++j)R[j]=_[N++]|_[N++]<<8|_[N++]<<16|_[N++]<<24;_=E.g[0],N=E.g[1],j=E.g[2];var I=E.g[3],P=_+(I^N&(j^I))+R[0]+3614090360&4294967295;_=N+(P<<7&4294967295|P>>>25),P=I+(j^_&(N^j))+R[1]+3905402710&4294967295,I=_+(P<<12&4294967295|P>>>20),P=j+(N^I&(_^N))+R[2]+606105819&4294967295,j=I+(P<<17&4294967295|P>>>15),P=N+(_^j&(I^_))+R[3]+3250441966&4294967295,N=j+(P<<22&4294967295|P>>>10),P=_+(I^N&(j^I))+R[4]+4118548399&4294967295,_=N+(P<<7&4294967295|P>>>25),P=I+(j^_&(N^j))+R[5]+1200080426&4294967295,I=_+(P<<12&4294967295|P>>>20),P=j+(N^I&(_^N))+R[6]+2821735955&4294967295,j=I+(P<<17&4294967295|P>>>15),P=N+(_^j&(I^_))+R[7]+4249261313&4294967295,N=j+(P<<22&4294967295|P>>>10),P=_+(I^N&(j^I))+R[8]+1770035416&4294967295,_=N+(P<<7&4294967295|P>>>25),P=I+(j^_&(N^j))+R[9]+2336552879&4294967295,I=_+(P<<12&4294967295|P>>>20),P=j+(N^I&(_^N))+R[10]+4294925233&4294967295,j=I+(P<<17&4294967295|P>>>15),P=N+(_^j&(I^_))+R[11]+2304563134&4294967295,N=j+(P<<22&4294967295|P>>>10),P=_+(I^N&(j^I))+R[12]+1804603682&4294967295,_=N+(P<<7&4294967295|P>>>25),P=I+(j^_&(N^j))+R[13]+4254626195&4294967295,I=_+(P<<12&4294967295|P>>>20),P=j+(N^I&(_^N))+R[14]+2792965006&4294967295,j=I+(P<<17&4294967295|P>>>15),P=N+(_^j&(I^_))+R[15]+1236535329&4294967295,N=j+(P<<22&4294967295|P>>>10),P=_+(j^I&(N^j))+R[1]+4129170786&4294967295,_=N+(P<<5&4294967295|P>>>27),P=I+(N^j&(_^N))+R[6]+3225465664&4294967295,I=_+(P<<9&4294967295|P>>>23),P=j+(_^N&(I^_))+R[11]+643717713&4294967295,j=I+(P<<14&4294967295|P>>>18),P=N+(I^_&(j^I))+R[0]+3921069994&4294967295,N=j+(P<<20&4294967295|P>>>12),P=_+(j^I&(N^j))+R[5]+3593408605&4294967295,_=N+(P<<5&4294967295|P>>>27),P=I+(N^j&(_^N))+R[10]+38016083&4294967295,I=_+(P<<9&4294967295|P>>>23),P=j+(_^N&(I^_))+R[15]+3634488961&4294967295,j=I+(P<<14&4294967295|P>>>18),P=N+(I^_&(j^I))+R[4]+3889429448&4294967295,N=j+(P<<20&4294967295|P>>>12),P=_+(j^I&(N^j))+R[9]+568446438&4294967295,_=N+(P<<5&4294967295|P>>>27),P=I+(N^j&(_^N))+R[14]+3275163606&4294967295,I=_+(P<<9&4294967295|P>>>23),P=j+(_^N&(I^_))+R[3]+4107603335&4294967295,j=I+(P<<14&4294967295|P>>>18),P=N+(I^_&(j^I))+R[8]+1163531501&4294967295,N=j+(P<<20&4294967295|P>>>12),P=_+(j^I&(N^j))+R[13]+2850285829&4294967295,_=N+(P<<5&4294967295|P>>>27),P=I+(N^j&(_^N))+R[2]+4243563512&4294967295,I=_+(P<<9&4294967295|P>>>23),P=j+(_^N&(I^_))+R[7]+1735328473&4294967295,j=I+(P<<14&4294967295|P>>>18),P=N+(I^_&(j^I))+R[12]+2368359562&4294967295,N=j+(P<<20&4294967295|P>>>12),P=_+(N^j^I)+R[5]+4294588738&4294967295,_=N+(P<<4&4294967295|P>>>28),P=I+(_^N^j)+R[8]+2272392833&4294967295,I=_+(P<<11&4294967295|P>>>21),P=j+(I^_^N)+R[11]+1839030562&4294967295,j=I+(P<<16&4294967295|P>>>16),P=N+(j^I^_)+R[14]+4259657740&4294967295,N=j+(P<<23&4294967295|P>>>9),P=_+(N^j^I)+R[1]+2763975236&4294967295,_=N+(P<<4&4294967295|P>>>28),P=I+(_^N^j)+R[4]+1272893353&4294967295,I=_+(P<<11&4294967295|P>>>21),P=j+(I^_^N)+R[7]+4139469664&4294967295,j=I+(P<<16&4294967295|P>>>16),P=N+(j^I^_)+R[10]+3200236656&4294967295,N=j+(P<<23&4294967295|P>>>9),P=_+(N^j^I)+R[13]+681279174&4294967295,_=N+(P<<4&4294967295|P>>>28),P=I+(_^N^j)+R[0]+3936430074&4294967295,I=_+(P<<11&4294967295|P>>>21),P=j+(I^_^N)+R[3]+3572445317&4294967295,j=I+(P<<16&4294967295|P>>>16),P=N+(j^I^_)+R[6]+76029189&4294967295,N=j+(P<<23&4294967295|P>>>9),P=_+(N^j^I)+R[9]+3654602809&4294967295,_=N+(P<<4&4294967295|P>>>28),P=I+(_^N^j)+R[12]+3873151461&4294967295,I=_+(P<<11&4294967295|P>>>21),P=j+(I^_^N)+R[15]+530742520&4294967295,j=I+(P<<16&4294967295|P>>>16),P=N+(j^I^_)+R[2]+3299628645&4294967295,N=j+(P<<23&4294967295|P>>>9),P=_+(j^(N|~I))+R[0]+4096336452&4294967295,_=N+(P<<6&4294967295|P>>>26),P=I+(N^(_|~j))+R[7]+1126891415&4294967295,I=_+(P<<10&4294967295|P>>>22),P=j+(_^(I|~N))+R[14]+2878612391&4294967295,j=I+(P<<15&4294967295|P>>>17),P=N+(I^(j|~_))+R[5]+4237533241&4294967295,N=j+(P<<21&4294967295|P>>>11),P=_+(j^(N|~I))+R[12]+1700485571&4294967295,_=N+(P<<6&4294967295|P>>>26),P=I+(N^(_|~j))+R[3]+2399980690&4294967295,I=_+(P<<10&4294967295|P>>>22),P=j+(_^(I|~N))+R[10]+4293915773&4294967295,j=I+(P<<15&4294967295|P>>>17),P=N+(I^(j|~_))+R[1]+2240044497&4294967295,N=j+(P<<21&4294967295|P>>>11),P=_+(j^(N|~I))+R[8]+1873313359&4294967295,_=N+(P<<6&4294967295|P>>>26),P=I+(N^(_|~j))+R[15]+4264355552&4294967295,I=_+(P<<10&4294967295|P>>>22),P=j+(_^(I|~N))+R[6]+2734768916&4294967295,j=I+(P<<15&4294967295|P>>>17),P=N+(I^(j|~_))+R[13]+1309151649&4294967295,N=j+(P<<21&4294967295|P>>>11),P=_+(j^(N|~I))+R[4]+4149444226&4294967295,_=N+(P<<6&4294967295|P>>>26),P=I+(N^(_|~j))+R[11]+3174756917&4294967295,I=_+(P<<10&4294967295|P>>>22),P=j+(_^(I|~N))+R[2]+718787259&4294967295,j=I+(P<<15&4294967295|P>>>17),P=N+(I^(j|~_))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+j&4294967295,E.g[3]=E.g[3]+I&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var N=_-this.blockSize,R=this.B,j=this.h,I=0;I<_;){if(j==0)for(;I<=N;)i(this,E,I),I+=this.blockSize;if(typeof E=="string"){for(;I<_;)if(R[j++]=E.charCodeAt(I++),j==this.blockSize){i(this,R),j=0;break}}else for(;I<_;)if(R[j++]=E[I++],j==this.blockSize){i(this,R),j=0;break}}this.h=j,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var N=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=N&255,N/=256;for(this.u(E),E=Array(16),_=N=0;4>_;++_)for(var R=0;32>R;R+=8)E[N++]=this.g[_]>>>R&255;return E};function s(E,_){var N=a;return Object.prototype.hasOwnProperty.call(N,E)?N[E]:N[E]=_(E)}function o(E,_){this.h=_;for(var N=[],R=!0,j=E.length-1;0<=j;j--){var I=E[j]|0;R&&I==_||(N[j]=I,R=!1)}this.g=N}var a={};function u(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return T(d(-E));for(var _=[],N=1,R=0;E>=N;R++)_[R]=E/N|0,N*=4294967296;return new o(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return T(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(_,8)),R=f,j=0;j<E.length;j+=8){var I=Math.min(8,E.length-j),P=parseInt(E.substring(j,j+I),_);8>I?(I=d(Math.pow(_,I)),R=R.j(I).add(d(P))):(R=R.j(N),R=R.add(d(P)))}return R}var f=u(0),p=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(S(this))return-T(this).m();for(var E=0,_=1,N=0;N<this.g.length;N++){var R=this.i(N);E+=(0<=R?R:4294967296+R)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(S(this))return"-"+T(this).toString(E);for(var _=d(Math.pow(E,6)),N=this,R="";;){var j=D(N,_).g;N=y(N,j.j(_));var I=((0<N.g.length?N.g[0]:N.h)>>>0).toString(E);if(N=j,w(N))return I+R;for(;6>I.length;)I="0"+I;R=I+R}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function S(E){return E.h==-1}t.l=function(E){return E=y(this,E),S(E)?-1:w(E)?0:1};function T(E){for(var _=E.g.length,N=[],R=0;R<_;R++)N[R]=~E.g[R];return new o(N,~E.h).add(p)}t.abs=function(){return S(this)?T(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),N=[],R=0,j=0;j<=_;j++){var I=R+(this.i(j)&65535)+(E.i(j)&65535),P=(I>>>16)+(this.i(j)>>>16)+(E.i(j)>>>16);R=P>>>16,I&=65535,P&=65535,N[j]=P<<16|I}return new o(N,N[N.length-1]&-2147483648?-1:0)};function y(E,_){return E.add(T(_))}t.j=function(E){if(w(this)||w(E))return f;if(S(this))return S(E)?T(this).j(T(E)):T(T(this).j(E));if(S(E))return T(this.j(T(E)));if(0>this.l(m)&&0>E.l(m))return d(this.m()*E.m());for(var _=this.g.length+E.g.length,N=[],R=0;R<2*_;R++)N[R]=0;for(R=0;R<this.g.length;R++)for(var j=0;j<E.g.length;j++){var I=this.i(R)>>>16,P=this.i(R)&65535,B=E.i(j)>>>16,Y=E.i(j)&65535;N[2*R+2*j]+=P*Y,v(N,2*R+2*j),N[2*R+2*j+1]+=I*Y,v(N,2*R+2*j+1),N[2*R+2*j+1]+=P*B,v(N,2*R+2*j+1),N[2*R+2*j+2]+=I*B,v(N,2*R+2*j+2)}for(R=0;R<_;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=_;R<2*_;R++)N[R]=0;return new o(N,0)};function v(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function b(E,_){this.g=E,this.h=_}function D(E,_){if(w(_))throw Error("division by zero");if(w(E))return new b(f,f);if(S(E))return _=D(T(E),_),new b(T(_.g),T(_.h));if(S(_))return _=D(E,T(_)),new b(T(_.g),_.h);if(30<E.g.length){if(S(E)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var N=p,R=_;0>=R.l(E);)N=M(N),R=M(R);var j=C(N,1),I=C(R,1);for(R=C(R,2),N=C(N,2);!w(R);){var P=I.add(R);0>=P.l(E)&&(j=j.add(N),I=P),R=C(R,1),N=C(N,1)}return _=y(E,j.j(_)),new b(j,_)}for(j=f;0<=E.l(_);){for(N=Math.max(1,Math.floor(E.m()/_.m())),R=Math.ceil(Math.log(N)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),I=d(N),P=I.j(_);S(P)||0<P.l(E);)N-=R,I=d(N),P=I.j(_);w(I)&&(I=p),j=j.add(I),E=y(E,P)}return new b(j,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),N=[],R=0;R<_;R++)N[R]=this.i(R)&E.i(R);return new o(N,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),N=[],R=0;R<_;R++)N[R]=this.i(R)|E.i(R);return new o(N,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),N=[],R=0;R<_;R++)N[R]=this.i(R)^E.i(R);return new o(N,this.h^E.h)};function M(E){for(var _=E.g.length+1,N=[],R=0;R<_;R++)N[R]=E.i(R)<<1|E.i(R-1)>>>31;return new o(N,E.h)}function C(E,_){var N=_>>5;_%=32;for(var R=E.g.length-N,j=[],I=0;I<R;I++)j[I]=0<_?E.i(I+N)>>>_|E.i(I+N+1)<<32-_:E.i(I+N);return new o(j,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ri=o}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $E,Ta,BE,Zu,kp,HE,qE,WE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,x){return c==Array.prototype||c==Object.prototype||(c[g]=x.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ku=="object"&&ku];for(var g=0;g<c.length;++g){var x=c[g];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function i(c,g){if(g)e:{var x=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var F=c[A];if(!(F in x))break e;x=x[F]}c=c[c.length-1],A=x[c],g=g(A),g!=A&&g!=null&&e(x,c,{configurable:!0,writable:!0,value:g})}}function s(c,g){c instanceof String&&(c+="");var x=0,A=!1,F={next:function(){if(!A&&x<c.length){var z=x++;return{value:g(z,c[z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(c){return c||function(){return s(this,function(g,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function d(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function h(c,g,x){return c.call.apply(c.bind,arguments)}function f(c,g,x){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),c.apply(g,F)}}return function(){return c.apply(g,arguments)}}function p(c,g,x){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function m(c,g){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function w(c,g){function x(){}x.prototype=g.prototype,c.aa=g.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(A,F,z){for(var J=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)J[Le-2]=arguments[Le];return g.prototype[F].apply(A,J)}}function S(c){const g=c.length;if(0<g){const x=Array(g);for(let A=0;A<g;A++)x[A]=c[A];return x}return[]}function T(c,g){for(let x=1;x<arguments.length;x++){const A=arguments[x];if(u(A)){const F=c.length||0,z=A.length||0;c.length=F+z;for(let J=0;J<z;J++)c[F+J]=A[J]}else c.push(A)}}class y{constructor(g,x){this.i=g,this.j=x,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function D(c){return D[" "](c),c}D[" "]=function(){};var M=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function C(c,g,x){for(const A in c)g.call(x,c[A],A,c)}function E(c,g){for(const x in c)g.call(void 0,c[x],x,c)}function _(c){const g={};for(const x in c)g[x]=c[x];return g}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,g){let x,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(x in A)c[x]=A[x];for(let z=0;z<N.length;z++)x=N[z],Object.prototype.hasOwnProperty.call(A,x)&&(c[x]=A[x])}}function j(c){var g=1;c=c.split(":");const x=[];for(;0<g&&c.length;)x.push(c.shift()),g--;return c.length&&x.push(c.join(":")),x}function I(c){a.setTimeout(()=>{throw c},0)}function P(){var c=H;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class B{constructor(){this.h=this.g=null}add(g,x){const A=Y.get();A.set(g,x),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new y(()=>new he,c=>c.reset());class he{constructor(){this.next=this.g=this.h=null}set(g,x){this.h=g,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let X,V=!1,H=new B,O=()=>{const c=a.Promise.resolve(void 0);X=()=>{c.then(re)}};var re=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(x){I(x)}var g=Y;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}V=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};a.addEventListener("test",x,g),a.removeEventListener("test",x,g)}catch{}return c}();function Ee(c,g){if(L.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(M){e:{try{D(g.nodeName);var F=!0;break e}catch{}F=!1}F||(g=null)}}else x=="mouseover"?g=c.fromElement:x=="mouseout"&&(g=c.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:xe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ee.aa.h.call(this)}}w(Ee,L);var xe={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),W=0;function se(c,g,x,A,F){this.listener=c,this.proxy=null,this.src=g,this.type=x,this.capture=!!A,this.ha=F,this.key=++W,this.da=this.fa=!1}function Me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ut(c){this.src=c,this.g={},this.h=0}ut.prototype.add=function(c,g,x,A,F){var z=c.toString();c=this.g[z],c||(c=this.g[z]=[],this.h++);var J=Lt(c,g,A,F);return-1<J?(g=c[J],x||(g.fa=!1)):(g=new se(g,this.src,z,!!A,F),g.fa=x,c.push(g)),g};function et(c,g){var x=g.type;if(x in c.g){var A=c.g[x],F=Array.prototype.indexOf.call(A,g,void 0),z;(z=0<=F)&&Array.prototype.splice.call(A,F,1),z&&(Me(g),c.g[x].length==0&&(delete c.g[x],c.h--))}}function Lt(c,g,x,A){for(var F=0;F<c.length;++F){var z=c[F];if(!z.da&&z.listener==g&&z.capture==!!x&&z.ha==A)return F}return-1}var cn="closure_lm_"+(1e6*Math.random()|0),Mt={};function Kt(c,g,x,A,F){if(Array.isArray(g)){for(var z=0;z<g.length;z++)Kt(c,g[z],x,A,F);return null}return x=Bl(x),c&&c[Oe]?c.K(g,x,d(A)?!!A.capture:!!A,F):pe(c,g,x,!1,A,F)}function pe(c,g,x,A,F,z){if(!g)throw Error("Invalid event type");var J=d(F)?!!F.capture:!!F,Le=Ko(c);if(Le||(c[cn]=Le=new ut(c)),x=Le.add(g,x,A,J,z),x.proxy)return x;if(A=Gt(),x.proxy=A,A.src=c,A.listener=x,c.addEventListener)fe||(F=J),F===void 0&&(F=!1),c.addEventListener(g.toString(),A,F);else if(c.attachEvent)c.attachEvent(Jr(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Gt(){function c(x){return g.call(c.src,c.listener,x)}const g=nh;return c}function Ft(c,g,x,A,F){if(Array.isArray(g))for(var z=0;z<g.length;z++)Ft(c,g[z],x,A,F);else A=d(A)?!!A.capture:!!A,x=Bl(x),c&&c[Oe]?(c=c.i,g=String(g).toString(),g in c.g&&(z=c.g[g],x=Lt(z,x,A,F),-1<x&&(Me(z[x]),Array.prototype.splice.call(z,x,1),z.length==0&&(delete c.g[g],c.h--)))):c&&(c=Ko(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Lt(g,x,A,F)),(x=-1<c?g[c]:null)&&Fn(x))}function Fn(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Oe])et(g.i,c);else{var x=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(x,A,c.capture):g.detachEvent?g.detachEvent(Jr(x),A):g.addListener&&g.removeListener&&g.removeListener(A),(x=Ko(g))?(et(x,c),x.h==0&&(x.src=null,g[cn]=null)):Me(c)}}}function Jr(c){return c in Mt?Mt[c]:Mt[c]="on"+c}function nh(c,g){if(c.da)c=!0;else{g=new Ee(g,this);var x=c.listener,A=c.ha||c.src;c.fa&&Fn(c),c=x.call(A,g)}return c}function Ko(c){return c=c[cn],c instanceof ut?c:null}var Go="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bl(c){return typeof c=="function"?c:(c[Go]||(c[Go]=function(g){return c.handleEvent(g)}),c[Go])}function $(){ie.call(this),this.i=new ut(this),this.M=this,this.F=null}w($,ie),$.prototype[Oe]=!0,$.prototype.removeEventListener=function(c,g,x,A){Ft(this,c,g,x,A)};function K(c,g){var x,A=c.F;if(A)for(x=[];A;A=A.F)x.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new L(g,c);else if(g instanceof L)g.target=g.target||c;else{var F=g;g=new L(A,c),R(g,F)}if(F=!0,x)for(var z=x.length-1;0<=z;z--){var J=g.g=x[z];F=ue(J,A,!0,g)&&F}if(J=g.g=c,F=ue(J,A,!0,g)&&F,F=ue(J,A,!1,g)&&F,x)for(z=0;z<x.length;z++)J=g.g=x[z],F=ue(J,A,!1,g)&&F}$.prototype.N=function(){if($.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var x=c.g[g],A=0;A<x.length;A++)Me(x[A]);delete c.g[g],c.h--}}this.F=null},$.prototype.K=function(c,g,x,A){return this.i.add(String(c),g,!1,x,A)},$.prototype.L=function(c,g,x,A){return this.i.add(String(c),g,!0,x,A)};function ue(c,g,x,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var F=!0,z=0;z<g.length;++z){var J=g[z];if(J&&!J.da&&J.capture==x){var Le=J.listener,xt=J.ha||J.src;J.fa&&et(c.i,J),F=Le.call(xt,A)!==!1&&F}}return F&&!A.defaultPrevented}function ve(c,g,x){if(typeof c=="function")x&&(c=p(c,x));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(c,g||0)}function Re(c){c.g=ve(()=>{c.g=null,c.i&&(c.i=!1,Re(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class dn extends ie{constructor(g,x){super(),this.m=g,this.l=x,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hn(c){ie.call(this),this.h=c,this.g={}}w(hn,ie);var Cn=[];function Zr(c){C(c.g,function(g,x){this.g.hasOwnProperty(x)&&Fn(g)},c),c.g={}}hn.prototype.N=function(){hn.aa.N.call(this),Zr(this)},hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=a.JSON.stringify,Vt=a.JSON.parse,ei=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function fn(){}fn.prototype.h=null;function Ty(c){return c.h||(c.h=c.i())}function Cy(){}var Qo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rh(){L.call(this,"d")}w(rh,L);function ih(){L.call(this,"c")}w(ih,L);var Gi={},Ny=null;function Hl(){return Ny=Ny||new $}Gi.La="serverreachability";function Iy(c){L.call(this,Gi.La,c)}w(Iy,L);function Yo(c){const g=Hl();K(g,new Iy(g))}Gi.STAT_EVENT="statevent";function Ay(c,g){L.call(this,Gi.STAT_EVENT,c),this.stat=g}w(Ay,L);function Ut(c){const g=Hl();K(g,new Ay(g,c))}Gi.Ma="timingevent";function Ry(c,g){L.call(this,Gi.Ma,c),this.size=g}w(Ry,L);function Xo(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},g)}function Jo(){this.g=!0}Jo.prototype.xa=function(){this.g=!1};function ET(c,g,x,A,F,z){c.info(function(){if(c.g)if(z)for(var J="",Le=z.split("&"),xt=0;xt<Le.length;xt++){var Ie=Le[xt].split("=");if(1<Ie.length){var kt=Ie[0];Ie=Ie[1];var St=kt.split("_");J=2<=St.length&&St[1]=="type"?J+(kt+"="+Ie+"&"):J+(kt+"=redacted&")}}else J=null;else J=z;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+g+`
`+x+`
`+J})}function kT(c,g,x,A,F,z,J){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+g+`
`+x+`
`+z+" "+J})}function js(c,g,x,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+TT(c,x)+(A?" "+A:"")})}function ST(c,g){c.info(function(){return"TIMEOUT: "+g})}Jo.prototype.info=function(){};function TT(c,g){if(!c.g)return g;if(!g)return null;try{var x=JSON.parse(g);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var A=x[c];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var z=F[0];if(z!="noop"&&z!="stop"&&z!="close")for(var J=1;J<F.length;J++)F[J]=""}}}}return _r(x)}catch{return g}}var ql={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Py={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sh;function Wl(){}w(Wl,fn),Wl.prototype.g=function(){return new XMLHttpRequest},Wl.prototype.i=function(){return{}},sh=new Wl;function ti(c,g,x,A){this.j=c,this.i=g,this.l=x,this.R=A||1,this.U=new hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jy}function jy(){this.i=null,this.g="",this.h=!1}var Dy={},oh={};function ah(c,g,x){c.L=1,c.v=Yl(Er(g)),c.m=x,c.P=!0,Oy(c,null)}function Oy(c,g){c.F=Date.now(),Kl(c),c.A=Er(c.v);var x=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Qy(x.i,"t",A),c.C=0,x=c.j.J,c.h=new jy,c.g=f0(c.j,x?g:null,!c.m),0<c.O&&(c.M=new dn(p(c.Y,c,c.g),c.O)),g=c.U,x=c.g,A=c.ca;var F="readystatechange";Array.isArray(F)||(F&&(Cn[0]=F.toString()),F=Cn);for(var z=0;z<F.length;z++){var J=Kt(x,F[z],A||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Yo(),ET(c.i,c.u,c.A,c.l,c.R,c.m)}ti.prototype.ca=function(c){c=c.target;const g=this.M;g&&kr(c)==3?g.j():this.Y(c)},ti.prototype.Y=function(c){try{if(c==this.g)e:{const St=kr(this.g);var g=this.g.Ba();const Ls=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||n0(this.g)))){this.J||St!=4||g==7||(g==8||0>=Ls?Yo(3):Yo(2)),lh(this);var x=this.g.Z();this.X=x;t:if(Ly(this)){var A=n0(this.g);c="";var F=A.length,z=kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qi(this),Zo(this);var J="";break t}this.h.i=new a.TextDecoder}for(g=0;g<F;g++)this.h.h=!0,c+=this.h.i.decode(A[g],{stream:!(z&&g==F-1)});A.length=0,this.h.g+=c,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=x==200,kT(this.i,this.u,this.A,this.l,this.R,St,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,xt=this.g;if((Le=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Le)){var Ie=Le;break t}}Ie=null}if(x=Ie)js(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uh(this,x);else{this.o=!1,this.s=3,Ut(12),Qi(this),Zo(this);break e}}if(this.P){x=!0;let Vn;for(;!this.J&&this.C<J.length;)if(Vn=CT(this,J),Vn==oh){St==4&&(this.s=4,Ut(14),x=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Dy){this.s=4,Ut(15),js(this.i,this.l,J,"[Invalid Chunk]"),x=!1;break}else js(this.i,this.l,Vn,null),uh(this,Vn);if(Ly(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||J.length!=0||this.h.h||(this.s=1,Ut(16),x=!1),this.o=this.o&&x,!x)js(this.i,this.l,J,"[Invalid Chunked Response]"),Qi(this),Zo(this);else if(0<J.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),mh(kt),kt.M=!0,Ut(11))}}else js(this.i,this.l,J,null),uh(this,J);St==4&&Qi(this),this.o&&!this.J&&(St==4?u0(this.j,this):(this.o=!1,Kl(this)))}else HT(this.g),x==400&&0<J.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Qi(this),Zo(this)}}}catch{}finally{}};function Ly(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function CT(c,g){var x=c.C,A=g.indexOf(`
`,x);return A==-1?oh:(x=Number(g.substring(x,A)),isNaN(x)?Dy:(A+=1,A+x>g.length?oh:(g=g.slice(A,A+x),c.C=A+x,g)))}ti.prototype.cancel=function(){this.J=!0,Qi(this)};function Kl(c){c.S=Date.now()+c.I,My(c,c.I)}function My(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Xo(p(c.ba,c),g)}function lh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}ti.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ST(this.i,this.A),this.L!=2&&(Yo(),Ut(17)),Qi(this),this.s=2,Zo(this)):My(this,this.S-c)};function Zo(c){c.j.G==0||c.J||u0(c.j,c)}function Qi(c){lh(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Zr(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function uh(c,g){try{var x=c.j;if(x.G!=0&&(x.g==c||ch(x.h,c))){if(!c.K&&ch(x.h,c)&&x.G==3){try{var A=x.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)nu(x),eu(x);else break e;ph(x),Ut(18)}}else x.za=F[1],0<x.za-x.T&&37500>F[2]&&x.F&&x.v==0&&!x.C&&(x.C=Xo(p(x.Za,x),6e3));if(1>=Uy(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Xi(x,11)}else if((c.K||x.g==c)&&nu(x),!v(g))for(F=x.Da.g.parse(g),g=0;g<F.length;g++){let Ie=F[g];if(x.T=Ie[0],Ie=Ie[1],x.G==2)if(Ie[0]=="c"){x.K=Ie[1],x.ia=Ie[2];const kt=Ie[3];kt!=null&&(x.la=kt,x.j.info("VER="+x.la));const St=Ie[4];St!=null&&(x.Aa=St,x.j.info("SVER="+x.Aa));const Ls=Ie[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(A=1.5*Ls,x.L=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const Vn=c.g;if(Vn){const iu=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var z=A.h;z.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(dh(z,z.h),z.h=null))}if(A.D){const gh=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;gh&&(A.ya=gh,ze(A.I,A.D,gh))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),A=x;var J=c;if(A.qa=h0(A,A.J?A.ia:null,A.W),J.K){zy(A.h,J);var Le=J,xt=A.L;xt&&(Le.I=xt),Le.B&&(lh(Le),Kl(Le)),A.g=J}else a0(A);0<x.i.length&&tu(x)}else Ie[0]!="stop"&&Ie[0]!="close"||Xi(x,7);else x.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Xi(x,7):fh(x):Ie[0]!="noop"&&x.l&&x.l.ta(Ie),x.v=0)}}Yo(4)}catch{}}var NT=class{constructor(c,g){this.g=c,this.map=g}};function Fy(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vy(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Uy(c){return c.h?1:c.g?c.g.size:0}function ch(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function dh(c,g){c.g?c.g.add(g):c.h=g}function zy(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Fy.prototype.cancel=function(){if(this.i=$y(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function $y(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const x of c.g.values())g=g.concat(x.D);return g}return S(c.i)}function IT(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var g=[],x=c.length,A=0;A<x;A++)g.push(c[A]);return g}g=[],x=0;for(A in c)g[x++]=c[A];return g}function AT(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var g=[];c=c.length;for(var x=0;x<c;x++)g.push(x);return g}g=[],x=0;for(const A in c)g[x++]=A;return g}}}function By(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var x=AT(c),A=IT(c),F=A.length,z=0;z<F;z++)g.call(void 0,A[z],x&&x[z],c)}var Hy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RT(c,g){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var A=c[x].indexOf("="),F=null;if(0<=A){var z=c[x].substring(0,A);F=c[x].substring(A+1)}else z=c[x];g(z,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Yi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Yi){this.h=c.h,Gl(this,c.j),this.o=c.o,this.g=c.g,Ql(this,c.s),this.l=c.l;var g=c.i,x=new na;x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),qy(this,x),this.m=c.m}else c&&(g=String(c).match(Hy))?(this.h=!1,Gl(this,g[1]||"",!0),this.o=ea(g[2]||""),this.g=ea(g[3]||"",!0),Ql(this,g[4]),this.l=ea(g[5]||"",!0),qy(this,g[6]||"",!0),this.m=ea(g[7]||"")):(this.h=!1,this.i=new na(null,this.h))}Yi.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ta(g,Wy,!0),":");var x=this.g;return(x||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ta(g,Wy,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(ta(x,x.charAt(0)=="/"?DT:jT,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",ta(x,LT)),c.join("")};function Er(c){return new Yi(c)}function Gl(c,g,x){c.j=x?ea(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ql(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function qy(c,g,x){g instanceof na?(c.i=g,MT(c.i,c.h)):(x||(g=ta(g,OT)),c.i=new na(g,c.h))}function ze(c,g,x){c.i.set(g,x)}function Yl(c){return ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ea(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ta(c,g,x){return typeof c=="string"?(c=encodeURI(c).replace(g,PT),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function PT(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Wy=/[#\/\?@]/g,jT=/[#\?:]/g,DT=/[#\?]/g,OT=/[#\?@]/g,LT=/#/g;function na(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function ni(c){c.g||(c.g=new Map,c.h=0,c.i&&RT(c.i,function(g,x){c.add(decodeURIComponent(g.replace(/\+/g," ")),x)}))}t=na.prototype,t.add=function(c,g){ni(this),this.i=null,c=Ds(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(g),this.h+=1,this};function Ky(c,g){ni(c),g=Ds(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Gy(c,g){return ni(c),g=Ds(c,g),c.g.has(g)}t.forEach=function(c,g){ni(this),this.g.forEach(function(x,A){x.forEach(function(F){c.call(g,F,A,this)},this)},this)},t.na=function(){ni(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),x=[];for(let A=0;A<g.length;A++){const F=c[A];for(let z=0;z<F.length;z++)x.push(g[A])}return x},t.V=function(c){ni(this);let g=[];if(typeof c=="string")Gy(this,c)&&(g=g.concat(this.g.get(Ds(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)g=g.concat(c[x])}return g},t.set=function(c,g){return ni(this),this.i=null,c=Ds(this,c),Gy(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Qy(c,g,x){Ky(c,g),0<x.length&&(c.i=null,c.g.set(Ds(c,g),S(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var x=0;x<g.length;x++){var A=g[x];const z=encodeURIComponent(String(A)),J=this.V(A);for(A=0;A<J.length;A++){var F=z;J[A]!==""&&(F+="="+encodeURIComponent(String(J[A]))),c.push(F)}}return this.i=c.join("&")};function Ds(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function MT(c,g){g&&!c.j&&(ni(c),c.i=null,c.g.forEach(function(x,A){var F=A.toLowerCase();A!=F&&(Ky(this,A),Qy(this,F,x))},c)),c.j=g}function FT(c,g){const x=new Jo;if(a.Image){const A=new Image;A.onload=m(ri,x,"TestLoadImage: loaded",!0,g,A),A.onerror=m(ri,x,"TestLoadImage: error",!1,g,A),A.onabort=m(ri,x,"TestLoadImage: abort",!1,g,A),A.ontimeout=m(ri,x,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function VT(c,g){const x=new Jo,A=new AbortController,F=setTimeout(()=>{A.abort(),ri(x,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(z=>{clearTimeout(F),z.ok?ri(x,"TestPingServer: ok",!0,g):ri(x,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),ri(x,"TestPingServer: error",!1,g)})}function ri(c,g,x,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(x)}catch{}}function UT(){this.g=new ei}function zT(c,g,x){const A=x||"";try{By(c,function(F,z){let J=F;d(F)&&(J=_r(F)),g.push(A+z+"="+encodeURIComponent(J))})}catch(F){throw g.push(A+"type="+encodeURIComponent("_badmap")),F}}function Xl(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Xl,fn),Xl.prototype.g=function(){return new Jl(this.l,this.j)},Xl.prototype.i=function(c){return function(){return c}}({});function Jl(c,g){$.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Jl,$),t=Jl.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,ia(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ia(this)),this.g&&(this.readyState=3,ia(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yy(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yy(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?ra(this):ia(this),this.readyState==3&&Yy(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ra(this))},t.Qa=function(c){this.g&&(this.response=c,ra(this))},t.ga=function(){this.g&&ra(this)};function ra(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ia(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var x=g.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=g.next();return c.join(`\r
`)};function ia(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xy(c){let g="";return C(c,function(x,A){g+=A,g+=":",g+=x,g+=`\r
`}),g}function hh(c,g,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=Xy(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):ze(c,g,x))}function Xe(c){$.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Xe,$);var $T=/^https?$/i,BT=["POST","PUT"];t=Xe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sh.g(),this.v=this.o?Ty(this.o):Ty(sh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(z){Jy(this,z);return}if(c=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)x.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const z of A.keys())x.set(z,A.get(z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(z=>z.toLowerCase()=="content-type"),F=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(BT,g,void 0))||A||F||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,J]of x)this.g.setRequestHeader(z,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{t0(this),this.u=!0,this.g.send(c),this.u=!1}catch(z){Jy(this,z)}};function Jy(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Zy(c),Zl(c)}function Zy(c){c.A||(c.A=!0,K(c,"complete"),K(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,K(this,"complete"),K(this,"abort"),Zl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zl(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?e0(this):this.bb())},t.bb=function(){e0(this)};function e0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||kr(c)!=4||c.Z()!=2)){if(c.u&&kr(c)==4)ve(c.Ea,0,c);else if(K(c,"readystatechange"),kr(c)==4){c.h=!1;try{const J=c.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var x;if(!(x=g)){var A;if(A=J===0){var F=String(c.D).match(Hy)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),A=!$T.test(F?F.toLowerCase():"")}x=A}if(x)K(c,"complete"),K(c,"success");else{c.m=6;try{var z=2<kr(c)?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.Z()+"]",Zy(c)}}finally{Zl(c)}}}}function Zl(c,g){if(c.g){t0(c);const x=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||K(c,"ready");try{x.onreadystatechange=A}catch{}}}function t0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function kr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<kr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Vt(g)}};function n0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function HT(c){const g={};c=(c.g&&2<=kr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(v(c[A]))continue;var x=j(c[A]);const F=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const z=g[F]||[];g[F]=z,z.push(x)}E(g,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sa(c,g,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||g}function r0(c){this.Aa=0,this.i=[],this.j=new Jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sa("baseRetryDelayMs",5e3,c),this.cb=sa("retryDelaySeedMs",1e4,c),this.Wa=sa("forwardChannelMaxRetries",2,c),this.wa=sa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Fy(c&&c.concurrentRequestLimit),this.Da=new UT,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=r0.prototype,t.la=8,t.G=1,t.connect=function(c,g,x,A){Ut(0),this.W=c,this.H=g||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.I=h0(this,null,this.W),tu(this)};function fh(c){if(i0(c),c.G==3){var g=c.U++,x=Er(c.I);if(ze(x,"SID",c.K),ze(x,"RID",g),ze(x,"TYPE","terminate"),oa(c,x),g=new ti(c,c.j,g),g.L=2,g.v=Yl(Er(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=g.v,x=!0),x||(g.g=f0(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Kl(g)}d0(c)}function eu(c){c.g&&(mh(c),c.g.cancel(),c.g=null)}function i0(c){eu(c),c.u&&(a.clearTimeout(c.u),c.u=null),nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tu(c){if(!Vy(c.h)&&!c.s){c.s=!0;var g=c.Ga;X||O(),V||(X(),V=!0),H.add(g,c),c.B=0}}function qT(c,g){return Uy(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Xo(p(c.Ga,c,g),c0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const F=new ti(this,this.j,c);let z=this.o;if(this.S&&(z?(z=_(z),R(z,this.S)):z=this.S),this.m!==null||this.O||(F.H=z,z=null),this.P)e:{for(var g=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=x;break e}if(g===4096||x===this.i.length-1){g=x+1;break e}}g=1e3}else g=1e3;g=o0(this,F,g),x=Er(this.I),ze(x,"RID",c),ze(x,"CVER",22),this.D&&ze(x,"X-HTTP-Session-Id",this.D),oa(this,x),z&&(this.O?g="headers="+encodeURIComponent(String(Xy(z)))+"&"+g:this.m&&hh(x,this.m,z)),dh(this.h,F),this.Ua&&ze(x,"TYPE","init"),this.P?(ze(x,"$req",g),ze(x,"SID","null"),F.T=!0,ah(F,x,null)):ah(F,x,g),this.G=2}}else this.G==3&&(c?s0(this,c):this.i.length==0||Vy(this.h)||s0(this))};function s0(c,g){var x;g?x=g.l:x=c.U++;const A=Er(c.I);ze(A,"SID",c.K),ze(A,"RID",x),ze(A,"AID",c.T),oa(c,A),c.m&&c.o&&hh(A,c.m,c.o),x=new ti(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),g&&(c.i=g.D.concat(c.i)),g=o0(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),dh(c.h,x),ah(x,A,g)}function oa(c,g){c.H&&C(c.H,function(x,A){ze(g,A,x)}),c.l&&By({},function(x,A){ze(g,A,x)})}function o0(c,g,x){x=Math.min(c.i.length,x);var A=c.l?p(c.l.Na,c.l,c):null;e:{var F=c.i;let z=-1;for(;;){const J=["count="+x];z==-1?0<x?(z=F[0].g,J.push("ofs="+z)):z=0:J.push("ofs="+z);let Le=!0;for(let xt=0;xt<x;xt++){let Ie=F[xt].g;const kt=F[xt].map;if(Ie-=z,0>Ie)z=Math.max(0,F[xt].g-100),Le=!1;else try{zT(kt,J,"req"+Ie+"_")}catch{A&&A(kt)}}if(Le){A=J.join("&");break e}}}return c=c.i.splice(0,x),g.D=c,A}function a0(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;X||O(),V||(X(),V=!0),H.add(g,c),c.v=0}}function ph(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Xo(p(c.Fa,c),c0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,l0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Xo(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),eu(this),l0(this))};function mh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function l0(c){c.g=new ti(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Er(c.qa);ze(g,"RID","rpc"),ze(g,"SID",c.K),ze(g,"AID",c.T),ze(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&ze(g,"TO",c.ja),ze(g,"TYPE","xmlhttp"),oa(c,g),c.m&&c.o&&hh(g,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=Yl(Er(g)),x.m=null,x.P=!0,Oy(x,c)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),ph(this),Ut(19))};function nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function u0(c,g){var x=null;if(c.g==g){nu(c),mh(c),c.g=null;var A=2}else if(ch(c.h,g))x=g.D,zy(c.h,g),A=1;else return;if(c.G!=0){if(g.o)if(A==1){x=g.m?g.m.length:0,g=Date.now()-g.F;var F=c.B;A=Hl(),K(A,new Ry(A,x)),tu(c)}else a0(c);else if(F=g.s,F==3||F==0&&0<g.X||!(A==1&&qT(c,g)||A==2&&ph(c)))switch(x&&0<x.length&&(g=c.h,g.i=g.i.concat(x)),F){case 1:Xi(c,5);break;case 4:Xi(c,10);break;case 3:Xi(c,6);break;default:Xi(c,2)}}}function c0(c,g){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*g}function Xi(c,g){if(c.j.info("Error code "+g),g==2){var x=p(c.fb,c),A=c.Xa;const F=!A;A=new Yi(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gl(A,"https"),Yl(A),F?FT(A.toString(),x):VT(A.toString(),x)}else Ut(2);c.G=0,c.l&&c.l.sa(g),d0(c),i0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function d0(c){if(c.G=0,c.ka=[],c.l){const g=$y(c.h);(g.length!=0||c.i.length!=0)&&(T(c.ka,g),T(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function h0(c,g,x){var A=x instanceof Yi?Er(x):new Yi(x);if(A.g!="")g&&(A.g=g+"."+A.g),Ql(A,A.s);else{var F=a.location;A=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;var z=new Yi(null);A&&Gl(z,A),g&&(z.g=g),F&&Ql(z,F),x&&(z.l=x),A=z}return x=c.D,g=c.ya,x&&g&&ze(A,x,g),ze(A,"VER",c.la),oa(c,A),A}function f0(c,g,x){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Xe(new Xl({eb:x})):new Xe(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function p0(){}t=p0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ru(){}ru.prototype.g=function(c,g){return new pn(c,g)};function pn(c,g){$.call(this),this.g=new r0(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!v(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Os(this)}w(pn,$),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){fh(this.g)},pn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=_r(c),c=x);g.i.push(new NT(g.Ya++,c)),g.G==3&&tu(g)},pn.prototype.N=function(){this.g.l=null,delete this.j,fh(this.g),delete this.g,pn.aa.N.call(this)};function m0(c){rh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const x in g){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}w(m0,rh);function g0(){ih.call(this),this.status=1}w(g0,ih);function Os(c){this.g=c}w(Os,p0),Os.prototype.ua=function(){K(this.g,"a")},Os.prototype.ta=function(c){K(this.g,new m0(c))},Os.prototype.sa=function(c){K(this.g,new g0)},Os.prototype.ra=function(){K(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,WE=function(){return new ru},qE=function(){return Hl()},HE=Gi,kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ql.NO_ERROR=0,ql.TIMEOUT=8,ql.HTTP_ERROR=6,Zu=ql,Py.COMPLETE="complete",BE=Py,Cy.EventType=Qo,Qo.OPEN="a",Qo.CLOSE="b",Qo.ERROR="c",Qo.MESSAGE="d",$.prototype.listen=$.prototype.K,Ta=Cy,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,$E=Xe}).apply(typeof ku<"u"?ku:typeof self<"u"?self:typeof window<"u"?window:{});const dv="@firebase/firestore",hv="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new vg("@firebase/firestore");function Vs(){return _s.logLevel}function ee(t,...e){if(_s.logLevel<=_e.DEBUG){const n=e.map(jg);_s.debug(`Firestore (${Vo}): ${t}`,...n)}}function qr(t,...e){if(_s.logLevel<=_e.ERROR){const n=e.map(jg);_s.error(`Firestore (${Vo}): ${t}`,...n)}}function So(t,...e){if(_s.logLevel<=_e.WARN){const n=e.map(jg);_s.warn(`Firestore (${Vo}): ${t}`,...n)}}function jg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,KE(t,r,n)}function KE(t,e,n){let r=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qr(r),new Error(r)}function Qe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||KE(e,i,r)}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class Zj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class e4{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ds,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ds)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new GE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new It(e)}}class t4{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n4{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new t4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=i4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function Sp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return we(r,i);{const s=QE(),o=s4(s.encode(pv(t,n)),s.encode(pv(e,n)));return o!==0?o:we(r,i)}}n+=r>65535?2:1}return we(t.length,e.length)}function pv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function s4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return we(t[n],e[n]);return we(t.length,e.length)}function To(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=-62135596800,gv=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*gv);return new nn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mv)throw new oe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gv}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-mv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new nn(0,0))}static max(){return new de(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="__name__";class or{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=or.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return we(e.length,n.length)}static compareSegments(e,n){const r=or.isNumericId(e),i=or.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?or.extractNumericId(e).compare(or.extractNumericId(n)):Sp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class Ze extends or{construct(e,n,r){return new Ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const o4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends or{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return o4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yv}static keyField(){return new $t([yv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new oe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new oe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new oe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new oe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ze.fromString(e))}static fromName(e){return new ae(Ze.fromString(e).popFirst(5))}static empty(){return new ae(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function a4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new nn(n+1,0):new nn(n,r));return new Oi(i,ae.empty(),e)}function l4(t){return new Oi(t.readTime,t.key,pl)}class Oi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Oi(de.min(),ae.empty(),pl)}static max(){return new Oi(de.max(),ae.empty(),pl)}}function u4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==c4)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function h4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Uo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Pd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=-1;function jd(t){return t==null}function Tp(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="";function p4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xv(e)),e=m4(t.get(n),e);return xv(e)}function m4(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case XE:n+="";break;default:n+=s}}return n}function xv(t){return t+XE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function g4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Su(this.root,e,this.comparator,!1)}getReverseIterator(){return new Su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Su(this.root,e,this.comparator,!0)}}class Su{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(e){return new wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new yi([])}unionWith(e){let n=new pt($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JE("Invalid base64 string: "+s):s}}(e);return new Et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const y4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(t){if(Qe(!!t,39018),typeof t=="string"){let e=0;const n=y4.exec(t);if(Qe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mi(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="server_timestamp",ek="__type__",tk="__previous_value__",nk="__local_write_time__";function Dg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ek])===null||n===void 0?void 0:n.stringValue)===ZE}function Dd(t){const e=t.mapValue.fields[tk];return Dg(e)?Dd(e):e}function ml(t){const e=Li(t.mapValue.fields[nk].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}const Cp="(default)";class gl{constructor(e,n){this.projectId=e,this.database=n||Cp}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===Cp}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="__type__",rk="__max__",Tu={mapValue:{fields:{__type__:{stringValue:rk}}}},w4="__vector__",Np="value";function Fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dg(t)?4:_4(t)?9007199254740991:b4(t)?10:11:ge(28295,{value:t})}function mr(t,e){if(t===e)return!0;const n=Fi(t);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ml(t).isEqual(ml(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Li(i.timestampValue),a=Li(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Mi(i.bytesValue).isEqual(Mi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return tt(i.geoPointValue.latitude)===tt(s.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return tt(i.integerValue)===tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=tt(i.doubleValue),a=tt(s.doubleValue);return o===a?Tp(o)===Tp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return To(t.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vv(o)!==vv(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!mr(o[u],a[u])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function yl(t,e){return(t.values||[]).find(n=>mr(n,e))!==void 0}function Co(t,e){if(t===e)return 0;const n=Fi(t),r=Fi(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=tt(s.integerValue||s.doubleValue),u=tt(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return bv(t.timestampValue,e.timestampValue);case 4:return bv(ml(t),ml(e));case 5:return Sp(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Mi(s),u=Mi(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const h=we(a[d],u[d]);if(h!==0)return h}return we(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=we(tt(s.latitude),tt(o.latitude));return a!==0?a:we(tt(s.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _v(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,d,h;const f=s.fields||{},p=o.fields||{},m=(a=f[Np])===null||a===void 0?void 0:a.arrayValue,w=(u=p[Np])===null||u===void 0?void 0:u.arrayValue,S=we(((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:_v(m,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Tu.mapValue&&o===Tu.mapValue)return 0;if(s===Tu.mapValue)return 1;if(o===Tu.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Sp(u[f],h[f]);if(p!==0)return p;const m=Co(a[u[f]],d[h[f]]);if(m!==0)return m}return we(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{Pe:n})}}function bv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Li(t),r=Li(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function _v(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Co(n[i],r[i]);if(s)return s}return we(n.length,r.length)}function No(t){return Ip(t)}function Ip(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ip(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ip(n.fields[o])}`;return i+"}"}(t.mapValue):ge(61005,{value:t})}function ec(t){switch(Fi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dd(t);return e?16+ec(e):16;case 5:return 2*t.stringValue.length;case 6:return Mi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ec(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return jl(r.fields,(s,o)=>{i+=s.length+ec(o)}),i}(t.mapValue);default:throw ge(13486,{value:t})}}function Ap(t){return!!t&&"integerValue"in t}function Og(t){return!!t&&"arrayValue"in t}function Ev(t){return!!t&&"nullValue"in t}function kv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jh(t){return!!t&&"mapValue"in t}function b4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[v4])===null||n===void 0?void 0:n.stringValue)===w4}function Va(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Va(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Va(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.value=e}static empty(){return new lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(n)}setAll(e){let n=$t.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Va(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Jh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){jl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new lr(Va(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,de.min(),de.min(),de.min(),lr.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,de.min(),de.min(),lr.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,de.min(),de.min(),lr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.position=e,this.inclusive=n}}function Sv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=Co(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function E4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{}class ht extends ik{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new S4(e,n,r):n==="array-contains"?new N4(e,r):n==="in"?new I4(e,r):n==="not-in"?new A4(e,r):n==="array-contains-any"?new R4(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new T4(e,r):new C4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Co(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(Co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends ik{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new gr(e,n)}matches(e){return sk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function sk(t){return t.op==="and"}function ok(t){return k4(t)&&sk(t)}function k4(t){for(const e of t.filters)if(e instanceof gr)return!1;return!0}function Rp(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+No(t.value);if(ok(t))return t.filters.map(e=>Rp(e)).join(",");{const e=t.filters.map(n=>Rp(n)).join(",");return`${t.op}(${e})`}}function ak(t,e){return t instanceof ht?function(r,i){return i instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&mr(r.value,i.value)}(t,e):t instanceof gr?function(r,i){return i instanceof gr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ak(o,i.filters[a]),!0):!1}(t,e):void ge(19439)}function lk(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`}(t):t instanceof gr?function(n){return n.op.toString()+" {"+n.getFilters().map(lk).join(" ,")+"}"}(t):"Filter"}class S4 extends ht{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class T4 extends ht{constructor(e,n){super(e,"in",n),this.keys=uk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class C4 extends ht{constructor(e,n){super(e,"not-in",n),this.keys=uk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class N4 extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Og(n)&&yl(n.arrayValue,this.value)}}class I4 extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yl(this.value.arrayValue,n)}}class A4 extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yl(this.value.arrayValue,n)}}class R4 extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}}function Cv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new P4(t,e,n,r,i,s,o)}function Lg(t){const e=Se(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>No(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>No(r)).join(",")),e.Ie=n}return e.Ie}function Mg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!E4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ak(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tv(t.startAt,e.startAt)&&Tv(t.endAt,e.endAt)}function Pp(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function j4(t,e,n,r,i,s,o,a){return new Od(t,e,n,r,i,s,o,a)}function Fg(t){return new Od(t)}function Nv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function D4(t){return t.collectionGroup!==null}function Ua(t){const e=Se(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pt($t.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Wc(s,r))}),n.has($t.keyField().canonicalString())||e.Ee.push(new Wc($t.keyField(),r))}return e.Ee}function pr(t){const e=Se(t);return e.de||(e.de=O4(e,Ua(t))),e.de}function O4(t,e){if(t.limitType==="F")return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wc(i.field,s)});const n=t.endAt?new qc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qc(t.startAt.position,t.startAt.inclusive):null;return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jp(t,e,n){return new Od(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return Mg(pr(t),pr(e))&&t.limitType===e.limitType}function ck(t){return`${Lg(pr(t))}|lt:${t.limitType}`}function Us(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lk(i)).join(", ")}]`),jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>No(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>No(i)).join(",")),`Target(${r})`}(pr(t))}; limitType=${t.limitType})`}function Md(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ua(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const d=Sv(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Ua(r),i)||r.endAt&&!function(o,a,u){const d=Sv(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Ua(r),i))}(t,e)}function L4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dk(t){return(e,n)=>{let r=!1;for(const i of Ua(t)){const s=M4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function M4(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return u!==null&&d!==null?Co(u,d):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return g4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=new rt(ae.comparator);function Vi(){return F4}const hk=new rt(ae.comparator);function Ca(...t){let e=hk;for(const n of t)e=e.insert(n.key,n);return e}function V4(t){let e=hk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function os(){return za()}function fk(){return za()}function za(){return new Is(t=>t.toString(),(t,e)=>t.isEqual(e))}const U4=new pt(ae.comparator);function Ce(...t){let e=U4;for(const n of t)e=e.add(n);return e}const z4=new pt(we);function $4(){return z4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tp(e)?"-0":e}}function H4(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this._=void 0}}function q4(t,e,n){return t instanceof Dp?function(i,s){const o={fields:{[ek]:{stringValue:ZE},[nk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Dg(s)&&(s=Dd(s)),s&&(o.fields[tk]=s),{mapValue:o}}(n,e):t instanceof Kc?pk(t,e):t instanceof Gc?mk(t,e):function(i,s){const o=K4(i,s),a=Iv(o)+Iv(i.Re);return Ap(o)&&Ap(i.Re)?H4(a):B4(i.serializer,a)}(t,e)}function W4(t,e,n){return t instanceof Kc?pk(t,e):t instanceof Gc?mk(t,e):n}function K4(t,e){return t instanceof Op?function(r){return Ap(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Dp extends Fd{}class Kc extends Fd{constructor(e){super(),this.elements=e}}function pk(t,e){const n=gk(e);for(const r of t.elements)n.some(i=>mr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gc extends Fd{constructor(e){super(),this.elements=e}}function mk(t,e){let n=gk(e);for(const r of t.elements)n=n.filter(i=>!mr(i,r));return{arrayValue:{values:n}}}class Op extends Fd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Iv(t){return tt(t.integerValue||t.doubleValue)}function gk(t){return Og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function G4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Kc&&i instanceof Kc||r instanceof Gc&&i instanceof Gc?To(r.elements,i.elements,mr):r instanceof Op&&i instanceof Op?mr(r.Re,i.Re):r instanceof Dp&&i instanceof Dp}(t.transform,e.transform)}class hs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vg{}function yk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Y4(t.key,hs.none()):new Ug(t.key,t.data,hs.none());{const n=t.data,r=lr.empty();let i=new pt($t.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Vd(t.key,r,new yi(i.toArray()),hs.none())}}function Q4(t,e,n){t instanceof Ug?function(i,s,o){const a=i.value.clone(),u=Rv(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Vd?function(i,s,o){if(!tc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Rv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(xk(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $a(t,e,n,r){return t instanceof Ug?function(s,o,a,u){if(!tc(s.precondition,o))return a;const d=s.value.clone(),h=Pv(s.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vd?function(s,o,a,u){if(!tc(s.precondition,o))return a;const d=Pv(s.fieldTransforms,u,o),h=o.data;return h.setAll(xk(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return tc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Av(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&To(r,i,(s,o)=>G4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ug extends Vg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vd extends Vg{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rv(t,e,n){const r=new Map;Qe(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,W4(o,a,n[i]))}return r}function Pv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,q4(s,o,e))}return r}class Y4 extends Vg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Q4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=yk(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(n,r)=>Av(n,r))&&To(this.baseMutations,e.baseMutations,(n,r)=>Av(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,ke;function vk(t){if(t===void 0)return qr("GRPC error has no .code"),Z.UNKNOWN;switch(t){case st.OK:return Z.OK;case st.CANCELLED:return Z.CANCELLED;case st.UNKNOWN:return Z.UNKNOWN;case st.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case st.INTERNAL:return Z.INTERNAL;case st.UNAVAILABLE:return Z.UNAVAILABLE;case st.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case st.NOT_FOUND:return Z.NOT_FOUND;case st.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case st.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case st.ABORTED:return Z.ABORTED;case st.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case st.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case st.DATA_LOSS:return Z.DATA_LOSS;default:return ge(39323,{code:t})}}(ke=st||(st={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new Ri([4294967295,4294967295],0);function jv(t){const e=QE().encode(t),n=new zE;return n.update(e),new Uint8Array(n.digest())}function Dv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([i,s],0)]}class zg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Na(`Invalid padding: ${n}`);if(r<0)throw new Na(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Na(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Na(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ri.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(Ri.fromNumber(r)));return i.compare(eD)===1&&(i=new Ri([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=jv(e),[r,i]=Dv(n);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=jv(e),[r,i]=Dv(n);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Dl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ud(de.min(),i,new rt(we),Vi(),Ce())}}class Dl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dl(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class wk{constructor(e,n){this.targetId=e,this.Ce=n}}class bk{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ov{constructor(){this.Fe=0,this.Me=Lv(),this.xe=Et.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ce(),n=Ce(),r=Ce();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ge(38017,{changeType:s})}}),new Dl(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Lv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class tD{constructor(e){this.ze=e,this.je=new Map,this.He=Vi(),this.Je=Cu(),this.Ye=Cu(),this.Ze=new rt(we)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const s=i.target;if(Pp(s))if(r===0){const o=new ae(s.path);this.tt(n,o,Rt.newNoDocument(o,de.min()))}else Qe(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),u=a?this.lt(a,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Mi(r).toUint8Array()}catch(u){if(u instanceof JE)return So("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new zg(o,i,s)}catch(u){return So(u instanceof Na?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,s,null),i++)}),i}It(e){const n=new Map;this.je.forEach((s,o)=>{const a=this._t(o);if(a){if(s.current&&Pp(a.target)){const u=new ae(a.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,Rt.newNoDocument(u,e))}s.Le&&(n.set(o,s.qe()),s.Qe())}});let r=Ce();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new Ud(e,n,this.Ze,this.He,r);return this.He=Vi(),this.Je=Cu(),this.Ye=Cu(),this.Ze=new rt(we),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Ov,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new pt(we),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new pt(we),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ov),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Cu(){return new rt(ae.comparator)}function Lv(){return new rt(ae.comparator)}const nD={asc:"ASCENDING",desc:"DESCENDING"},rD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iD={and:"AND",or:"OR"};class sD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lp(t,e){return t.useProto3Json||jd(e)?e:{value:e}}function oD(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function co(t){return Qe(!!t,49232),de.fromTimestamp(function(n){const r=Li(n);return new nn(r.seconds,r.nanos)}(t))}function lD(t,e){return Mp(t,e).canonicalString()}function Mp(t,e){const n=function(i){return new Ze(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _k(t){const e=Ze.fromString(t);return Qe(Ck(e),10190,{key:e.toString()}),e}function Zh(t,e){const n=_k(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(kk(n))}function Ek(t,e){return lD(t.databaseId,e)}function uD(t){const e=_k(t);return e.length===4?Ze.emptyPath():kk(e)}function Mv(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kk(t){return Qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ge(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Qe(h===void 0||typeof h=="string",58123),Et.fromBase64String(h||"")):(Qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?Z.UNKNOWN:vk(d.code);return new oe(h,d.message||"")}(o);n=new bk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zh(t,r.document.name),s=co(r.document.updateTime),o=r.document.createTime?co(r.document.createTime):de.min(),a=new lr({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new nc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Zh(t,r.document),s=r.readTime?co(r.readTime):de.min(),o=Rt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new nc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Zh(t,r.document),s=r.removedTargetIds||[];n=new nc([],s,i,null)}else{if(!("filter"in e))return ge(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Z4(i,s),a=r.targetId;n=new wk(a,o)}}return n}function dD(t,e){return{documents:[Ek(t,e.path)]}}function hD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ek(t,i);const s=function(d){if(d.length!==0)return Tk(gr.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:zs(p.field),direction:mD(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Lp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:i}}function fD(t){let e=uD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=Sk(f);return p instanceof gr&&ok(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new Wc($s(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,jd(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,m=f.values||[];return new qc(m,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,m=f.values||[];return new qc(m,p)}(n.endAt)),j4(e,i,o,s,a,"F",u,d)}function pD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Sk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$s(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$s(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$s(n.unaryFilter.field);return ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$s(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create($s(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gr.create(n.compositeFilter.filters.map(r=>Sk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function mD(t){return nD[t]}function gD(t){return rD[t]}function yD(t){return iD[t]}function zs(t){return{fieldPath:t.canonicalString()}}function $s(t){return $t.fromServerFormat(t.fieldPath)}function Tk(t){return t instanceof ht?function(n){if(n.op==="=="){if(kv(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NAN"}};if(Ev(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kv(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NAN"}};if(Ev(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(n.field),op:gD(n.op),value:n.value}}}(t):t instanceof gr?function(n){const r=n.getFilters().map(i=>Tk(i));return r.length===1?r[0]:{compositeFilter:{op:yD(n.op),filters:r}}}(t):ge(54877,{filter:t})}function Ck(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,r,i,s=de.min(),o=de.min(),a=Et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.wt=e}}function vD(t){const e=fD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.yn=new bD}addToCollectionParentIndex(e,n){return this.yn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Oi.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class bD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Ze.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nk=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(Nk,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Io(0)}static ir(){return new Io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="LruGarbageCollector",_D=1048576;function Uv([t,e],[n,r]){const i=we(t,n);return i===0?we(e,r):i}class ED{constructor(e){this.cr=e,this.buffer=new pt(Uv),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Uv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){ee(Vv,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Uo(n)?ee(Vv,"Ignoring IndexedDB error during garbage collection: ",n):await Rd(n)}await this.Ir(3e5)})}}class SD{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Pd.le);const r=new ED(n);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fv):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,i,s,o,a,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Vs()<=_e.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function TD(t,e){return new SD(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.changes=new Is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$a(r.mutation,i,yi.empty(),nn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const i=os();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ca();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Vi();const o=za(),a=function(){return za()}();return n.forEach((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Vd)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),$a(h.mutation,d,h.mutation.getFieldMask(),nn.now())):o.set(d.key,yi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var f;return a.set(d,new ND(h,(f=o.get(d))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=za();let i=new rt((o,a)=>o-a),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||yi.empty();h=a.applyToLocalView(d,h),r.set(u,h);const f=(i.get(a.batchId)||Ce()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,h=u.value,f=fk();h.forEach(p=>{if(!s.has(p)){const m=yk(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):D4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(os());let a=pl,u=s;return o.next(d=>q.forEach(d,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,Ce())).next(h=>({batchId:a,changes:V4(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=Ca();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ca();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,u=>{const d=function(f,p){return new Od(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Rt.newInvalidDocument(h)))});let a=Ca();return o.forEach((u,d)=>{const h=s.get(u);h!==void 0&&$a(h.mutation,d,yi.empty(),nn.now()),Md(n,d)&&(a=a.insert(u,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return q.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:co(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(i){return{name:i.name,query:vD(i.bundledQuery),readTime:co(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.overlays=new rt(ae.comparator),this.Or=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=os();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=os(),s=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new rt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=os(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=os(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return q.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new J4(n,r));let s=this.Or.get(n);s===void 0&&(s=Ce(),this.Or.set(n,s)),this.Or.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.Nr=new pt(mt.Br),this.Lr=new pt(mt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new mt(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new ae(new Ze([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.Lr.forEachInRange([r,i],o=>{this.Qr(o),s.push(o.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new ae(new Ze([])),r=new mt(n,e),i=new mt(n,e+1);let s=Ce();return this.Lr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mt(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return ae.comparator(e.key,n.key)||we(e.Gr,n.Gr)}static kr(e,n){return we(e.Gr,n.Gr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new pt(mt.Br)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new X4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.zr=this.zr.add(new mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Hr(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?f4:this.Jn-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],o=>{const a=this.jr(o.Gr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(we);return n.forEach(i=>{const s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,o],a=>{r=r.add(a.Gr)})}),q.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new mt(new ae(s),0);let a=new pt(we);return this.zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.Gr)),!0)},o),q.resolve(this.Jr(a))}Jr(e){const n=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Qe(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return q.forEach(n.mutations,i=>{const s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new mt(n,0),i=this.zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.Zr=e,this.docs=function(){return new rt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Vi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vi();const o=n.path,a=new ae(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||u4(l4(h),r)<=0||(i.has(h.key)||Md(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ge(9500)}Xr(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OD(this)}getSize(e){return q.resolve(this.size)}}class OD extends CD{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.persistence=e,this.ei=new Is(n=>Lg(n),Mg),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.ti=0,this.ni=new $g,this.targetCount=0,this.ri=Io.rr()}forEachTarget(e,n){return this.ei.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),q.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Io(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.ar(n),q.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ei.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n){this.ii={},this.overlays={},this.si=new Pd(0),this.oi=!1,this.oi=!0,this._i=new PD,this.referenceDelegate=e(this),this.ai=new LD(this),this.indexManager=new wD,this.remoteDocumentCache=function(i){return new DD(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new xD(n),this.ci=new AD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new jD(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new MD(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,n){return q.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class MD extends d4{constructor(e){super(),this.currentSequenceNumber=e}}class Bg{constructor(e){this.persistence=e,this.Ti=new $g,this.Ii=null}static Ei(e){return new Bg(e)}get di(){if(this.Ii)return this.Ii;throw ge(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.di,r=>{const i=ae.fromPath(r);return this.Ai(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return q.or([()=>q.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class Qc{constructor(e,n){this.persistence=e,this.Ri=new Is(r=>p4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=TD(this,n)}static Ei(e,n){return new Qc(e,n)}li(){}hi(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return q.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,o=>this.gr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,de.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),q.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ec(e.data.value)),n}gr(e,n,r){return q.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.Ri.get(n);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=i}static Ps(e,n){let r=Ce(),i=Ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Hg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return gA()?8:h4(Dt())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Rs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Vs(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new FD;return this.fs(e,n,o).next(a=>{if(s.result=a,this.Is)return this.gs(e,n,o,a.size)})}).next(()=>s.result)}gs(e,n,r,i){return r.documentReadCount<this.Es?(Vs()<=_e.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),q.resolve()):(Vs()<=_e.DEBUG&&ee("QueryEngine","Query:",Us(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Vs()<=_e.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):q.resolve())}Rs(e,n){if(Nv(n))return q.resolve(null);let r=pr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jp(n,null,"F"),r=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ce(...s);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ps(n,a);return this.ys(n,d,o,u.readTime)?this.Rs(e,jp(n,null,"F")):this.ws(e,d,n,u)}))})))}Vs(e,n,r,i){return Nv(n)||i.isEqual(de.min())?q.resolve(null):this.As.getDocuments(e,r).next(s=>{const o=this.ps(n,s);return this.ys(n,o,r,i)?q.resolve(null):(Vs()<=_e.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Us(n)),this.ws(e,o,n,a4(i,pl)).next(a=>a))})}ps(e,n){let r=new pt(dk(e));return n.forEach((i,s)=>{Md(e,s)&&(r=r.add(s))}),r}ys(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,n,r){return Vs()<=_e.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Us(n)),this.As.getDocumentsMatchingQuery(e,n,Oi.min(),r)}ws(e,n,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="LocalStore",UD=3e8;class zD{constructor(e,n,r,i){this.persistence=e,this.bs=n,this.serializer=i,this.Ss=new rt(we),this.Ds=new Is(s=>Lg(s),Mg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ID(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function $D(t,e,n,r){return new zD(t,e,n,r)}async function Ak(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ce();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of s){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ms:d,removedBatchIds:o,addedBatchIds:a}))})})}function Rk(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function BD(t,e){const n=Se(t),r=e.snapshotVersion;let i=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Cs.newChangeBuffer({trackRemovals:!0});i=n.Ss;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.ai.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.ai.addMatchingKeys(s,h.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Et.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(f,m),function(S,T,y){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=UD?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,m,h)&&a.push(n.ai.updateTargetData(s,m))});let u=Vi(),d=Ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(HD(s,o,e.documentUpdates).next(h=>{u=h.xs,d=h.Os})),!r.isEqual(de.min())){const h=n.ai.getLastRemoteSnapshotVersion(s).next(f=>n.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.Ss=i,s))}function HD(t,e,n){let r=Ce(),i=Ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vi();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ee(qg,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{xs:o,Os:i}})}function qD(t,e){const n=Se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.ai.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.ai.allocateTargetId(r).next(o=>(i=new xi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function Fp(t,e,n){const r=Se(t),i=r.Ss.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Uo(o))throw o;ee(qg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function zv(t,e,n){const r=Se(t);let i=de.min(),s=Ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const f=Se(u),p=f.Ds.get(h);return p!==void 0?q.resolve(f.Ss.get(p)):f.ai.getTargetData(d,h)}(r,o,pr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:Ce())).next(a=>(WD(r,L4(e),a),{documents:a,Ns:s})))}function WD(t,e,n){let r=t.vs.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.vs.set(e,r)}class $v{constructor(){this.activeTargetIds=$4()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KD{constructor(){this.So=new $v,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new $v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="ConnectivityMonitor";class Hv{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ee(Bv,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){ee(Bv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=null;function Vp(){return Nu===null?Nu=function(){return 268435456+Math.round(2147483648*Math.random())}():Nu++,"0x"+Nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="RestConnection",QD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YD{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Cp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,n,r,i,s){const o=Vp(),a=this.$o(e,n.toUriEncodedString());ee(ef,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(u,i,s),this.Ko(e,a,u,r).then(d=>(ee(ef,`Received RPC '${e}' ${o}: `,d),d),d=>{throw So(ef,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Wo(e,n,r,i,s,o){return this.Qo(e,n,r,i,s)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,n){const r=QD[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class JD extends YD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,i){const s=Vp();return new Promise((o,a)=>{const u=new $E;u.setWithCredentials(!0),u.listenOnce(BE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zu.NO_ERROR:const h=u.getResponseJson();ee(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Zu.TIMEOUT:ee(Nt,`RPC '${e}' ${s} timed out`),a(new oe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const f=u.getStatus();if(ee(Nt,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const w=function(T){const y=T.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(y)>=0?y:Z.UNKNOWN}(m.status);a(new oe(w,m.message))}else a(new oe(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new oe(Z.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{s_:e,streamId:s,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{ee(Nt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ee(Nt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}a_(e,n,r){const i=Vp(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WE(),a=qE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ee(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);let p=!1,m=!1;const w=new XD({Go:T=>{m?ee(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(p||(ee(Nt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),ee(Nt,`RPC '${e}' stream ${i} sending:`,T),f.send(T))},zo:()=>f.close()}),S=(T,y,v)=>{T.listen(y,b=>{try{v(b)}catch(D){setTimeout(()=>{throw D},0)}})};return S(f,Ta.EventType.OPEN,()=>{m||(ee(Nt,`RPC '${e}' stream ${i} transport opened.`),w.t_())}),S(f,Ta.EventType.CLOSE,()=>{m||(m=!0,ee(Nt,`RPC '${e}' stream ${i} transport closed`),w.r_())}),S(f,Ta.EventType.ERROR,T=>{m||(m=!0,So(Nt,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),w.r_(new oe(Z.UNAVAILABLE,"The operation could not be completed")))}),S(f,Ta.EventType.MESSAGE,T=>{var y;if(!m){const v=T.data[0];Qe(!!v,16349);const b=v,D=(b==null?void 0:b.error)||((y=b[0])===null||y===void 0?void 0:y.error);if(D){ee(Nt,`RPC '${e}' stream ${i} received error:`,D);const M=D.status;let C=function(N){const R=st[N];if(R!==void 0)return vk(R)}(M),E=D.message;C===void 0&&(C=Z.INTERNAL,E="Unknown error status: "+M+" with message "+D.message),m=!0,w.r_(new oe(C,E)),f.close()}else ee(Nt,`RPC '${e}' stream ${i} received:`,v),w.i_(v)}}),S(a,HE.STAT_EVENT,T=>{T.stat===kp.PROXY?ee(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===kp.NOPROXY&&ee(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.n_()},0),w}}function tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){return new sD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="PersistentStream";class ZD{constructor(e,n,r,i,s,o,a,u){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new jk(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===n&&this.B_(r,i)},r=>{e(()=>{const i=new oe(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return ee(qv,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(ee(qv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eO extends ZD{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=cD(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?co(o.readTime):de.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=Mv(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Pp(u)?{documents:dD(s,u)}:{query:hD(s,u).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aD(s,o.resumeToken);const d=Lp(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=oD(s,o.snapshotVersion.toTimestamp());const d=Lp(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=pD(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=Mv(this.serializer),n.removeTarget=e,this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{}class nO extends tO{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new oe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Qo(e,Mp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(Z.UNKNOWN,s.toString())})}Wo(e,n,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,Mp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(Z.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class rO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(qr(n),this.ea=!1):ee("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="RemoteStore";class iO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Ll(this)&&(ee(Ao,"Restarting streams for network reachability change."),await async function(u){const d=Se(u);d.aa.add(4),await Ol(d),d.la.set("Unknown"),d.aa.delete(4),await zd(d)}(this))})}),this.la=new rO(r,i)}}async function zd(t){if(Ll(t))for(const e of t.ua)await e(!0)}async function Ol(t){for(const e of t.ua)await e(!1)}function Dk(t,e){const n=Se(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),Qg(n)?Gg(n):zo(n).b_()&&Kg(n,e))}function Wg(t,e){const n=Se(t),r=zo(n);n._a.delete(e),r.b_()&&Ok(n,e),n._a.size===0&&(r.b_()?r.v_():Ll(n)&&n.la.set("Unknown"))}function Kg(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(t).U_(e)}function Ok(t,e){t.ha.Ke(e),zo(t).K_(e)}function Gg(t){t.ha=new tD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),zo(t).start(),t.la.ta()}function Qg(t){return Ll(t)&&!zo(t).w_()&&t._a.size>0}function Ll(t){return Se(t).aa.size===0}function Lk(t){t.ha=void 0}async function sO(t){t.la.set("Online")}async function oO(t){t._a.forEach((e,n)=>{Kg(t,e)})}async function aO(t,e){Lk(t),Qg(t)?(t.la.ia(e),Gg(t)):t.la.set("Unknown")}async function lO(t,e,n){if(t.la.set("Online"),e instanceof bk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i._a.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i._a.delete(a),i.ha.removeTarget(a))}(t,e)}catch(r){ee(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wv(t,r)}else if(e instanceof nc?t.ha.Xe(e):e instanceof wk?t.ha.ot(e):t.ha.nt(e),!n.isEqual(de.min()))try{const r=await Rk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.ha.It(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=s._a.get(d);h&&s._a.set(d,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const h=s._a.get(u);if(!h)return;s._a.set(u,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),Ok(s,u);const f=new xi(h.target,u,d,h.sequenceNumber);Kg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee(Ao,"Failed to raise snapshot:",r),await Wv(t,r)}}async function Wv(t,e,n){if(!Uo(e))throw e;t.aa.add(1),await Ol(t),t.la.set("Offline"),n||(n=()=>Rk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(Ao,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await zd(t)})}async function Kv(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),ee(Ao,"RemoteStore received new credentials");const r=Ll(n);n.aa.add(3),await Ol(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await zd(n)}async function uO(t,e){const n=Se(t);e?(n.aa.delete(2),await zd(n)):e||(n.aa.add(2),await Ol(n),n.la.set("Unknown"))}function zo(t){return t.Pa||(t.Pa=function(n,r,i){const s=Se(n);return s.Y_(),new eO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{jo:sO.bind(null,t),Jo:oO.bind(null,t),Zo:aO.bind(null,t),Q_:lO.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),Qg(t)?Gg(t):t.la.set("Unknown")):(await t.Pa.stop(),Lk(t))})),t.Pa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Yg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mk(t,e){if(qr("AsyncQueue",`${e}: ${t}`),Uo(t))return new oe(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Ca(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.Ia=new rt(ae.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):ge(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ro{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ro(e,n,ho.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class dO{constructor(){this.queries=Qv(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const i=Se(n),s=i.queries;i.queries=Qv(),s.forEach((o,a)=>{for(const u of a.Ra)u.onError(r)})})(this,new oe(Z.ABORTED,"Firestore shutting down"))}}function Qv(){return new Is(t=>ck(t),Ld)}async function hO(t,e){const n=Se(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new cO,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await n.onListen(i,!0);break;case 1:s.Aa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Mk(o,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Ra.push(e),e.ga(n.onlineState),s.Aa&&e.pa(s.Aa)&&Xg(n)}async function fO(t,e){const n=Se(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Ra.indexOf(e);o>=0&&(s.Ra.splice(o,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pO(t,e){const n=Se(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Ra)a.pa(i)&&(r=!0);o.Aa=i}}r&&Xg(n)}function mO(t,e,n){const r=Se(t),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(n);r.queries.delete(e)}function Xg(t){t.fa.forEach(e=>{e.next()})}var Up,Yv;(Yv=Up||(Up={})).ya="default",Yv.Cache="cache";class gO{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.key=e}}class Vk{constructor(e){this.key=e}}class yO{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ce(),this.mutatedKeys=Ce(),this.Ua=dk(e),this.Ka=new ho(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new Gv,i=n?n.Ka:this.Ka;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),m=Md(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;p&&m?p.data.isEqual(m.data)?w!==S&&(r.track({type:3,doc:m}),T=!0):this.ja(p,m)||(r.track({type:2,doc:m}),T=!0,(u&&this.Ua(m,u)>0||d&&this.Ua(m,d)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),T=!0):p&&!m&&(r.track({type:1,doc:p}),T=!0,(u||d)&&(a=!0)),T&&(m?(o=o.add(m),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:a,mutatedKeys:s}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((h,f)=>function(m,w){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Vt:T})}};return S(m)-S(w)}(h.type,f.type)||this.Ua(h.doc,f.doc)),this.Ha(r),i=i!=null&&i;const a=n&&!i?this.Ja():[],u=this.$a.size===0&&this.current&&!i?1:0,d=u!==this.Qa;return this.Qa=u,o.length!==0||d?{snapshot:new Ro(this.query,e.Ka,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Gv,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ce(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new Vk(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new Fk(r))}),n}Xa(e){this.qa=e.Ns,this.$a=Ce();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Ro.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Jg="SyncEngine";class xO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vO{constructor(e){this.key=e,this.tu=!1}}class wO{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new Is(a=>ck(a),Ld),this.iu=new Map,this.su=new Set,this.ou=new rt(ae.comparator),this._u=new Map,this.au=new $g,this.uu={},this.cu=new Map,this.lu=Io.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function bO(t,e,n=!0){const r=Hk(t);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await Uk(r,e,n,!0),i}async function _O(t,e){const n=Hk(t);await Uk(n,e,!0,!1)}async function Uk(t,e,n,r){const i=await qD(t.localStore,pr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await EO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Dk(t.remoteStore,i),a}async function EO(t,e,n,r,i){t.Pu=(f,p,m)=>async function(S,T,y,v){let b=T.view.Ga(y);b.ys&&(b=await zv(S.localStore,T.query,!1).then(({documents:E})=>T.view.Ga(E,b)));const D=v&&v.targetChanges.get(T.targetId),M=v&&v.targetMismatches.get(T.targetId)!=null,C=T.view.applyChanges(b,S.isPrimaryClient,D,M);return Jv(S,T.targetId,C.Ya),C.snapshot}(t,f,p,m);const s=await zv(t.localStore,e,!0),o=new yO(e,s.Ns),a=o.Ga(s.documents),u=Dl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(a,t.isPrimaryClient,u);Jv(t,n,d.Ya);const h=new xO(e,n,o);return t.ru.set(e,h),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),d.snapshot}async function kO(t,e,n){const r=Se(t),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(o=>!Ld(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Wg(r.remoteStore,i.targetId),zp(r,i.targetId)}).catch(Rd)):(zp(r,i.targetId),await Fp(r.localStore,i.targetId,!0))}async function SO(t,e){const n=Se(t),r=n.ru.get(e),i=n.iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wg(n.remoteStore,r.targetId))}async function zk(t,e){const n=Se(t);try{const r=await BD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n._u.get(s);o&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.tu=!0:i.modifiedDocuments.size>0?Qe(o.tu,14607):i.removedDocuments.size>0&&(Qe(o.tu,42227),o.tu=!1))}),await Bk(n,r,e)}catch(r){await Rd(r)}}function Xv(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ru.forEach((s,o)=>{const a=o.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Se(o);u.onlineState=a;let d=!1;u.queries.forEach((h,f)=>{for(const p of f.Ra)p.ga(a)&&(d=!0)}),d&&Xg(u)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TO(t,e,n){const r=Se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r._u.get(e),s=i&&i.key;if(s){let o=new rt(ae.comparator);o=o.insert(s,Rt.newNoDocument(s,de.min()));const a=Ce().add(s),u=new Ud(de.min(),new Map,new rt(we),o,a);await zk(r,u),r.ou=r.ou.remove(s),r._u.delete(e),Zg(r)}else await Fp(r.localStore,e,!1).then(()=>zp(r,e,n)).catch(Rd)}function zp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||$k(t,r)})}function $k(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(Wg(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),Zg(t))}function Jv(t,e,n){for(const r of n)r instanceof Fk?(t.au.addReference(r.key,e),CO(t,r)):r instanceof Vk?(ee(Jg,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||$k(t,r.key)):ge(19791,{Iu:r})}function CO(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(ee(Jg,"New document in limbo: "+n),t.su.add(r),Zg(t))}function Zg(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new ae(Ze.fromString(e)),r=t.lu.next();t._u.set(r,new vO(n)),t.ou=t.ou.insert(n,r),Dk(t.remoteStore,new xi(pr(Fg(n.path)),r,"TargetPurposeLimboResolution",Pd.le))}}async function Bk(t,e,n){const r=Se(t),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,u)=>{o.push(r.Pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){i.push(d);const f=Hg.Ps(u.targetId,d);s.push(f)}}))}),await Promise.all(o),r.nu.Q_(i),await async function(u,d){const h=Se(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(d,p=>q.forEach(p.ls,m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>q.forEach(p.hs,m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Uo(f))throw f;ee(qg,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const m=h.Ss.get(p),w=m.snapshotVersion,S=m.withLastLimboFreeSnapshotVersion(w);h.Ss=h.Ss.insert(p,S)}}}(r.localStore,s))}async function NO(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){ee(Jg,"User change. New user:",e.toKey());const r=await Ak(n.localStore,e);n.currentUser=e,function(s,o){s.cu.forEach(a=>{a.forEach(u=>{u.reject(new oe(Z.CANCELLED,o))})}),s.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bk(n,r.Ms)}}function IO(t,e){const n=Se(t),r=n._u.get(e);if(r&&r.tu)return Ce().add(r.key);{let i=Ce();const s=n.iu.get(e);if(!s)return i;for(const o of s){const a=n.ru.get(o);i=i.unionWith(a.view.Wa)}return i}}function Hk(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TO.bind(null,e),e.nu.Q_=pO.bind(null,e.eventManager),e.nu.Tu=mO.bind(null,e.eventManager),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pk(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return $D(this.persistence,new VD,e.initialUser,this.serializer)}Ru(e){return new Ik(Bg.Ei,this.serializer)}Au(e){return new KD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class AO extends Yc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){Qe(this.persistence.referenceDelegate instanceof Qc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kD(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new Ik(r=>Qc.Ei(r,n),this.serializer)}}class $p{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NO.bind(null,this.syncEngine),await uO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dO}()}createDatastore(e){const n=Pk(e.databaseInfo.databaseId),r=function(s){return new JD(s)}(e.databaseInfo);return function(s,o,a,u){return new nO(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new iO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Xv(this.syncEngine,n,0),function(){return Hv.C()?new Hv:new GD}())}createSyncEngine(e,n){return function(i,s,o,a,u,d,h){const f=new wO(i,s,o,a,u,d);return h&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Se(i);ee(Ao,"RemoteStore shutting down."),s.aa.add(5),await Ol(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$p.provider={build:()=>new $p};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="FirestoreClient";class PO{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=YE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee(Ui,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee(Ui,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mk(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nf(t,e){t.asyncQueue.verifyOperationInProgress(),ee(Ui,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ak(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jO(t);ee(Ui,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Kv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Kv(e.remoteStore,i)),t._onlineComponents=e}async function jO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(Ui,"Using user provided OfflineComponentProvider");try{await nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await nf(t,new Yc)}}else ee(Ui,"Using default OfflineComponentProvider"),await nf(t,new AO(void 0));return t._offlineComponents}async function DO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(Ui,"Using user provided OnlineComponentProvider"),await Zv(t,t._uninitializedComponentsProvider._online)):(ee(Ui,"Using default OnlineComponentProvider"),await Zv(t,new $p))),t._onlineComponents}async function OO(t){const e=await DO(t),n=e.eventManager;return n.onListen=bO.bind(null,e.syncEngine),n.onUnlisten=kO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_O.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SO.bind(null,e.syncEngine),n}function LO(t,e,n={}){const r=new ds;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,d){const h=new RO({next:p=>{h.yu(),o.enqueueAndForget(()=>fO(s,f));const m=p.docs.has(a);!m&&p.fromCache?d.reject(new oe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&u&&u.source==="server"?d.reject(new oe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new gO(Fg(a.path),h,{includeMetadataChanges:!0,Fa:!0});return hO(s,f)}(await OO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t,e,n){if(!n)throw new oe(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FO(t,e,n,r){if(e===!0&&r===!0)throw new oe(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tw(t){if(!ae.isDocumentKey(t))throw new oe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VO(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function Bp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=VO(t);throw new oe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="firestore.googleapis.com",nw=!0;class rw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wk,this.ssl=nw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:nw;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Nk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_D)throw new oe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ey{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Jj;switch(r.type){case"firstParty":return new n4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ew.get(n);r&&(ee("ComponentProvider","Removing Datastore"),ew.delete(n),r.terminate())}(this),Promise.resolve()}}function UO(t,e,n,r={}){var i;const s=(t=Bp(t,ey))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;s.host!==Wk&&s.host!==a&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!vs(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=It.MOCK_USER;else{d=rE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new oe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new It(f)}t._authCredentials=new Zj(new GE(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ty(this.firestore,e,this._query)}}class Mr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mr(this.firestore,e,this._key)}}class xl extends ty{constructor(e,n,r){super(e,n,Fg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mr(this.firestore,null,new ae(e))}withConverter(e){return new xl(this.firestore,e,this._path)}}function zO(t,e,...n){if(t=Zn(t),arguments.length===1&&(e=YE.newId()),MO("doc","path",e),t instanceof ey){const r=Ze.fromString(e,...n);return tw(r),new Mr(t,null,new ae(r))}{if(!(t instanceof Mr||t instanceof xl))throw new oe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...n));return tw(r),new Mr(t.firestore,t instanceof xl?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="AsyncQueue";class sw{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new jk(this,"async_queue_retry"),this.ju=()=>{const r=tf();r&&ee(iw,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new ds;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Uo(e))throw e;ee(iw,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,qr("INTERNAL UNHANDLED ERROR: ",ow(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const i=Yg.createAndSchedule(this,e,n,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&ge(47125,{ec:ow(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function ow(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Kk extends ey{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new sw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sw(e),this._firestoreClient=void 0,await e}}}function $O(t,e){const n=typeof t=="object"?t:bg(),r=typeof t=="string"?t:e,i=Td(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=eE("firestore");s&&UO(i,...s)}return i}function BO(t){if(t._terminated)throw new oe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HO(t),t._firestoreClient}function HO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,d,h){return new x4(a,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new PO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xc(Et.fromBase64String(e))}catch(n){throw new oe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xc(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const KO=new RegExp("[~\\*/\\[\\]]");function GO(t,e,n){if(e.search(KO)>=0)throw aw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new Gk(...e.split("."))._internalPath}catch{throw aw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function aw(t,e,n,r,i){let s=`Function ${e}() called with invalid data`;s+=". ";let o="";return new oe(Z.INVALID_ARGUMENT,s+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yk("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QO extends Qk{data(){return super.data()}}function Yk(t,e){return typeof e=="string"?GO(t,e):e instanceof Gk?e._internalPath:e._delegate._internalPath}class YO{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Np].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>tt(o.doubleValue));return new WO(s)}convertGeoPoint(e){return new qO(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const n=Li(e);return new nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ze.fromString(e);Qe(Ck(r),9688,{name:e});const i=new gl(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xk extends Qk{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new JO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class JO extends Xk{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){t=Bp(t,Mr);const e=Bp(t.firestore,Kk);return LO(BO(e),t._key).then(n=>tL(e,t,n))}class eL extends YO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mr(this.firestore,null,n)}}function tL(t,e,n){const r=n.docs.get(e._key),i=new eL(t);return new Xk(t,i,e._key,r,new XO(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Vo=i})(Ns),ws(new Di("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Kk(new e4(r.getProvider("auth-internal")),new r4(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new oe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(d.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),hr(dv,hv,e),hr(dv,hv,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="firebasestorage.googleapis.com",nL="storageBucket",rL=2*60*1e3,iL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends wr{constructor(e,n,r=0){super(rf(e),`Firebase Storage: ${n} (${rf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yr||(yr={}));function rf(t){return"storage/"+t}function sL(){const t="An unknown error occurred, please check the error payload for server response.";return new br(yr.UNKNOWN,t)}function oL(){return new br(yr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aL(){return new br(yr.CANCELED,"User canceled the upload/download.")}function lL(t){return new br(yr.INVALID_URL,"Invalid URL '"+t+"'.")}function uL(t){return new br(yr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lw(t){return new br(yr.INVALID_ARGUMENT,t)}function Zk(){return new br(yr.APP_DELETED,"The Firebase app was deleted.")}function cL(t){return new br(yr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qn.makeFromUrl(e,n)}catch{return new qn(e,"")}if(r.path==="")return r;throw uL(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),w={bucket:1,path:3},S=n===Jk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",y=new RegExp(`^https?://${S}/${i}/${T}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:m,indices:w,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<b.length;D++){const M=b[D],C=M.regex.exec(e);if(C){const E=C[M.indices.bucket];let _=C[M.indices.path];_||(_=""),r=new qn(E,_),M.postModify(r);break}}if(r==null)throw lL(e);return r}}class dL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let d=!1;function h(...T){d||(d=!0,e.apply(null,T))}function f(T){i=setTimeout(()=>{i=null,t(m,u())},T)}function p(){s&&clearTimeout(s)}function m(T,...y){if(d){p();return}if(T){p(),h.call(null,T,...y);return}if(u()||o){p(),h.call(null,T,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let w=!1;function S(T){w||(w=!0,p(),!d&&(i!==null?(T||(a=2),clearTimeout(i),f(0)):T||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function fL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){return t!==void 0}function uw(t,e,n,r){if(r<e)throw lw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw lw(`Invalid value for '${t}'. Expected ${n} or less.`)}function mL(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Jc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Jc||(Jc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,r,i,s,o,a,u,d,h,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,w)=>{this.resolve_=m,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Iu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Jc.NO_ERROR,u=s.getStatus();if(!a||gL(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Jc.ABORT;r(!1,new Iu(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Iu(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());pL(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=sL();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Zk():aL();o(u)}else{const u=oL();o(u)}};this.canceled_?n(!1,new Iu(!1,null,!0)):this.backoffId_=hL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Iu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function xL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function vL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function bL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _L(t,e,n,r,i,s,o=!0){const a=mL(t.urlParams),u=t.url+a,d=Object.assign({},t.headers);return wL(d,e),xL(d,n),vL(d,s),bL(d,r),new yL(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kL(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this._service=e,n instanceof qn?this._location=n:this._location=qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zc(e,n)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kL(this._location.path)}get storage(){return this._service}get parent(){const e=EL(this._location.path);if(e===null)return null;const n=new qn(this._location.bucket,e);return new Zc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cL(e)}}function cw(t,e){const n=e==null?void 0:e[nL];return n==null?null:qn.makeFromBucketSpec(n,t)}function SL(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:rE(i,t.app.options.projectId))}class TL{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Jk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rL,this._maxUploadRetryTime=iL,this._requests=new Set,i!=null?this._bucket=qn.makeFromBucketSpec(i,this._host):this._bucket=cw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=cw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zc(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new dL(Zk());{const o=_L(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const dw="@firebase/storage",hw="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="storage";function CL(t=bg(),e){t=Zn(t);const r=Td(t,eS).getImmediate({identifier:e}),i=eE("storage");return i&&NL(r,...i),r}function NL(t,e,n,r={}){SL(t,e,n,r)}function IL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new TL(n,r,i,e,Ns)}function AL(){ws(new Di(eS,IL,"PUBLIC").setMultipleInstances(!0)),hr(dw,hw,""),hr(dw,hw,"esm2017")}AL();const RL={apiKey:"AIzaSyBLVREytbAcmjQpPBeUYv5SVSDsCrr3Vss",authDomain:"ai-tutor-dev-457802.firebaseapp.com",projectId:"ai-tutor-dev-457802",storageBucket:"ai-tutor-dev-457802.firebasestorage.app",messagingSenderId:"459030890739",appId:"1:459030890739:web:38c19c0f0534f619614f86"},ny=oE(RL),Nr=Gj(ny),PL=$O(ny,"default");CL(ny);function tS(t,e){return function(){return t.apply(e,arguments)}}const{toString:jL}=Object.prototype,{getPrototypeOf:ry}=Object,{iterator:$d,toStringTag:nS}=Symbol,Bd=(t=>e=>{const n=jL.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),er=t=>(t=t.toLowerCase(),e=>Bd(e)===t),Hd=t=>e=>typeof e===t,{isArray:$o}=Array,vl=Hd("undefined");function DL(t){return t!==null&&!vl(t)&&t.constructor!==null&&!vl(t.constructor)&&rn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const rS=er("ArrayBuffer");function OL(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&rS(t.buffer),e}const LL=Hd("string"),rn=Hd("function"),iS=Hd("number"),qd=t=>t!==null&&typeof t=="object",ML=t=>t===!0||t===!1,rc=t=>{if(Bd(t)!=="object")return!1;const e=ry(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(nS in t)&&!($d in t)},FL=er("Date"),VL=er("File"),UL=er("Blob"),zL=er("FileList"),$L=t=>qd(t)&&rn(t.pipe),BL=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||rn(t.append)&&((e=Bd(t))==="formdata"||e==="object"&&rn(t.toString)&&t.toString()==="[object FormData]"))},HL=er("URLSearchParams"),[qL,WL,KL,GL]=["ReadableStream","Request","Response","Headers"].map(er),QL=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ml(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),$o(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function sS(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const as=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,oS=t=>!vl(t)&&t!==as;function Hp(){const{caseless:t}=oS(this)&&this||{},e={},n=(r,i)=>{const s=t&&sS(e,i)||i;rc(e[s])&&rc(r)?e[s]=Hp(e[s],r):rc(r)?e[s]=Hp({},r):$o(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ml(arguments[r],n);return e}const YL=(t,e,n,{allOwnKeys:r}={})=>(Ml(e,(i,s)=>{n&&rn(i)?t[s]=tS(i,n):t[s]=i},{allOwnKeys:r}),t),XL=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),JL=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},ZL=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&ry(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},eM=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},tM=t=>{if(!t)return null;if($o(t))return t;let e=t.length;if(!iS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},nM=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ry(Uint8Array)),rM=(t,e)=>{const r=(t&&t[$d]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},iM=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},sM=er("HTMLFormElement"),oM=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),fw=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),aM=er("RegExp"),aS=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ml(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},lM=t=>{aS(t,(e,n)=>{if(rn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(rn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},uM=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return $o(t)?r(t):r(String(t).split(e)),n},cM=()=>{},dM=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function hM(t){return!!(t&&rn(t.append)&&t[nS]==="FormData"&&t[$d])}const fM=t=>{const e=new Array(10),n=(r,i)=>{if(qd(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=$o(r)?[]:{};return Ml(r,(o,a)=>{const u=n(o,i+1);!vl(u)&&(s[a]=u)}),e[i]=void 0,s}}return r};return n(t,0)},pM=er("AsyncFunction"),mM=t=>t&&(qd(t)||rn(t))&&rn(t.then)&&rn(t.catch),lS=((t,e)=>t?setImmediate:e?((n,r)=>(as.addEventListener("message",({source:i,data:s})=>{i===as&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),as.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",rn(as.postMessage)),gM=typeof queueMicrotask<"u"?queueMicrotask.bind(as):typeof process<"u"&&process.nextTick||lS,yM=t=>t!=null&&rn(t[$d]),U={isArray:$o,isArrayBuffer:rS,isBuffer:DL,isFormData:BL,isArrayBufferView:OL,isString:LL,isNumber:iS,isBoolean:ML,isObject:qd,isPlainObject:rc,isReadableStream:qL,isRequest:WL,isResponse:KL,isHeaders:GL,isUndefined:vl,isDate:FL,isFile:VL,isBlob:UL,isRegExp:aM,isFunction:rn,isStream:$L,isURLSearchParams:HL,isTypedArray:nM,isFileList:zL,forEach:Ml,merge:Hp,extend:YL,trim:QL,stripBOM:XL,inherits:JL,toFlatObject:ZL,kindOf:Bd,kindOfTest:er,endsWith:eM,toArray:tM,forEachEntry:rM,matchAll:iM,isHTMLForm:sM,hasOwnProperty:fw,hasOwnProp:fw,reduceDescriptors:aS,freezeMethods:lM,toObjectSet:uM,toCamelCase:oM,noop:cM,toFiniteNumber:dM,findKey:sS,global:as,isContextDefined:oS,isSpecCompliantForm:hM,toJSONObject:fM,isAsyncFn:pM,isThenable:mM,setImmediate:lS,asap:gM,isIterable:yM};function me(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}U.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const uS=me.prototype,cS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cS[t]={value:t}});Object.defineProperties(me,cS);Object.defineProperty(uS,"isAxiosError",{value:!0});me.from=(t,e,n,r,i,s)=>{const o=Object.create(uS);return U.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),me.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const xM=null;function qp(t){return U.isPlainObject(t)||U.isArray(t)}function dS(t){return U.endsWith(t,"[]")?t.slice(0,-2):t}function pw(t,e,n){return t?t.concat(e).map(function(i,s){return i=dS(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function vM(t){return U.isArray(t)&&!t.some(qp)}const wM=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function Wd(t,e,n){if(!U.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!U.isUndefined(T[S])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(i))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if(U.isDate(w))return w.toISOString();if(!u&&U.isBlob(w))throw new me("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(w)||U.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function h(w,S,T){let y=w;if(w&&!T&&typeof w=="object"){if(U.endsWith(S,"{}"))S=r?S:S.slice(0,-2),w=JSON.stringify(w);else if(U.isArray(w)&&vM(w)||(U.isFileList(w)||U.endsWith(S,"[]"))&&(y=U.toArray(w)))return S=dS(S),y.forEach(function(b,D){!(U.isUndefined(b)||b===null)&&e.append(o===!0?pw([S],D,s):o===null?S:S+"[]",d(b))}),!1}return qp(w)?!0:(e.append(pw(T,S,s),d(w)),!1)}const f=[],p=Object.assign(wM,{defaultVisitor:h,convertValue:d,isVisitable:qp});function m(w,S){if(!U.isUndefined(w)){if(f.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));f.push(w),U.forEach(w,function(y,v){(!(U.isUndefined(y)||y===null)&&i.call(e,y,U.isString(v)?v.trim():v,S,p))===!0&&m(y,S?S.concat(v):[v])}),f.pop()}}if(!U.isObject(t))throw new TypeError("data must be an object");return m(t),e}function mw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function iy(t,e){this._pairs=[],t&&Wd(t,this,e)}const hS=iy.prototype;hS.append=function(e,n){this._pairs.push([e,n])};hS.toString=function(e){const n=e?function(r){return e.call(this,r,mw)}:mw;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function bM(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fS(t,e,n){if(!e)return t;const r=n&&n.encode||bM;U.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=U.isURLSearchParams(e)?e.toString():new iy(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class gw{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(r){r!==null&&e(r)})}}const pS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_M=typeof URLSearchParams<"u"?URLSearchParams:iy,EM=typeof FormData<"u"?FormData:null,kM=typeof Blob<"u"?Blob:null,SM={isBrowser:!0,classes:{URLSearchParams:_M,FormData:EM,Blob:kM},protocols:["http","https","file","blob","url","data"]},sy=typeof window<"u"&&typeof document<"u",Wp=typeof navigator=="object"&&navigator||void 0,TM=sy&&(!Wp||["ReactNative","NativeScript","NS"].indexOf(Wp.product)<0),CM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",NM=sy&&window.location.href||"http://localhost",IM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sy,hasStandardBrowserEnv:TM,hasStandardBrowserWebWorkerEnv:CM,navigator:Wp,origin:NM},Symbol.toStringTag,{value:"Module"})),Pt={...IM,...SM};function AM(t,e){return Wd(t,new Pt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Pt.isNode&&U.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function RM(t){return U.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function PM(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function mS(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=n.length;return o=!o&&U.isArray(i)?i.length:o,u?(U.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!U.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&U.isArray(i[o])&&(i[o]=PM(i[o])),!a)}if(U.isFormData(t)&&U.isFunction(t.entries)){const n={};return U.forEachEntry(t,(r,i)=>{e(RM(r),i,n,0)}),n}return null}function jM(t,e,n){if(U.isString(t))try{return(e||JSON.parse)(t),U.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Fl={transitional:pS,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=U.isObject(e);if(s&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return i?JSON.stringify(mS(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return AM(e,this.formSerializer).toString();if((a=U.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Wd(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),jM(e)):e}],transformResponse:[function(e){const n=this.transitional||Fl.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?me.from(a,me.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pt.classes.FormData,Blob:Pt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],t=>{Fl.headers[t]={}});const DM=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),OM=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&DM[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},yw=Symbol("internals");function ga(t){return t&&String(t).trim().toLowerCase()}function ic(t){return t===!1||t==null?t:U.isArray(t)?t.map(ic):String(t)}function LM(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const MM=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function sf(t,e,n,r,i){if(U.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!U.isString(e)){if(U.isString(r))return e.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(e)}}function FM(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function VM(t,e){const n=U.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class sn{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,u,d){const h=ga(u);if(!h)throw new Error("header name must be a non-empty string");const f=U.findKey(i,h);(!f||i[f]===void 0||d===!0||d===void 0&&i[f]!==!1)&&(i[f||u]=ic(a))}const o=(a,u)=>U.forEach(a,(d,h)=>s(d,h,u));if(U.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(U.isString(e)&&(e=e.trim())&&!MM(e))o(OM(e),n);else if(U.isObject(e)&&U.isIterable(e)){let a={},u,d;for(const h of e){if(!U.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[d=h[0]]=(u=a[d])?U.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=ga(e),e){const r=U.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return LM(i);if(U.isFunction(n))return n.call(this,i,r);if(U.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ga(e),e){const r=U.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||sf(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ga(o),o){const a=U.findKey(r,o);a&&(!n||sf(r,r[a],a,n))&&(delete r[a],i=!0)}}return U.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||sf(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return U.forEach(this,(i,s)=>{const o=U.findKey(r,s);if(o){n[o]=ic(i),delete n[s];return}const a=e?FM(s):String(s).trim();a!==s&&delete n[s],n[a]=ic(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return U.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&U.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[yw]=this[yw]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ga(o);r[a]||(VM(i,o),r[a]=!0)}return U.isArray(e)?e.forEach(s):s(e),this}}sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(sn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});U.freezeMethods(sn);function of(t,e){const n=this||Fl,r=e||n,i=sn.from(r.headers);let s=r.data;return U.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function gS(t){return!!(t&&t.__CANCEL__)}function Bo(t,e,n){me.call(this,t??"canceled",me.ERR_CANCELED,e,n),this.name="CanceledError"}U.inherits(Bo,me,{__CANCEL__:!0});function yS(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new me("Request failed with status code "+n.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function UM(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function zM(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),h=r[s];o||(o=d),n[i]=u,r[i]=d;let f=s,p=0;for(;f!==i;)p+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),d-o<e)return;const m=h&&d-h;return m?Math.round(p*1e3/m):void 0}}function $M(t,e){let n=0,r=1e3/e,i,s;const o=(d,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t.apply(null,d)};return[(...d)=>{const h=Date.now(),f=h-n;f>=r?o(d,h):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-f)))},()=>i&&o(i)]}const ed=(t,e,n=3)=>{let r=0;const i=zM(50,250);return $M(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-r,d=i(u),h=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:d||void 0,estimated:d&&a&&h?(a-o)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},xw=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},vw=t=>(...e)=>U.asap(()=>t(...e)),BM=Pt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Pt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Pt.origin),Pt.navigator&&/(msie|trident)/i.test(Pt.navigator.userAgent)):()=>!0,HM=Pt.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];U.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),U.isString(r)&&o.push("path="+r),U.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qM(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function WM(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function xS(t,e,n){let r=!qM(e);return t&&(r||n==!1)?WM(t,e):e}const ww=t=>t instanceof sn?{...t}:t;function Es(t,e){e=e||{};const n={};function r(d,h,f,p){return U.isPlainObject(d)&&U.isPlainObject(h)?U.merge.call({caseless:p},d,h):U.isPlainObject(h)?U.merge({},h):U.isArray(h)?h.slice():h}function i(d,h,f,p){if(U.isUndefined(h)){if(!U.isUndefined(d))return r(void 0,d,f,p)}else return r(d,h,f,p)}function s(d,h){if(!U.isUndefined(h))return r(void 0,h)}function o(d,h){if(U.isUndefined(h)){if(!U.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function a(d,h,f){if(f in e)return r(d,h);if(f in t)return r(void 0,d)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(d,h,f)=>i(ww(d),ww(h),f,!0)};return U.forEach(Object.keys(Object.assign({},t,e)),function(h){const f=u[h]||i,p=f(t[h],e[h],h);U.isUndefined(p)&&f!==a||(n[h]=p)}),n}const vS=t=>{const e=Es({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=sn.from(o),e.url=fS(xS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(U.isFormData(n)){if(Pt.hasStandardBrowserEnv||Pt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[d,...h]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...h].join("; "))}}if(Pt.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(e)),r||r!==!1&&BM(e.url))){const d=i&&s&&HM.read(s);d&&o.set(i,d)}return e},KM=typeof XMLHttpRequest<"u",GM=KM&&function(t){return new Promise(function(n,r){const i=vS(t);let s=i.data;const o=sn.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:d}=i,h,f,p,m,w;function S(){m&&m(),w&&w(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function y(){if(!T)return;const b=sn.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:b,config:t,request:T};yS(function(E){n(E),S()},function(E){r(E),S()},M),T=null}"onloadend"in T?T.onloadend=y:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(y)},T.onabort=function(){T&&(r(new me("Request aborted",me.ECONNABORTED,t,T)),T=null)},T.onerror=function(){r(new me("Network Error",me.ERR_NETWORK,t,T)),T=null},T.ontimeout=function(){let D=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||pS;i.timeoutErrorMessage&&(D=i.timeoutErrorMessage),r(new me(D,M.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,t,T)),T=null},s===void 0&&o.setContentType(null),"setRequestHeader"in T&&U.forEach(o.toJSON(),function(D,M){T.setRequestHeader(M,D)}),U.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),a&&a!=="json"&&(T.responseType=i.responseType),d&&([p,w]=ed(d,!0),T.addEventListener("progress",p)),u&&T.upload&&([f,m]=ed(u),T.upload.addEventListener("progress",f),T.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(h=b=>{T&&(r(!b||b.type?new Bo(null,t,T):b),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const v=UM(i.url);if(v&&Pt.protocols.indexOf(v)===-1){r(new me("Unsupported protocol "+v+":",me.ERR_BAD_REQUEST,t));return}T.send(s||null)})},QM=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(d){if(!i){i=!0,a();const h=d instanceof Error?d:this.reason;r.abort(h instanceof me?h:new Bo(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new me(`timeout ${e} of ms exceeded`,me.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),t=null)};t.forEach(d=>d.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>U.asap(a),u}},YM=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},XM=async function*(t,e){for await(const n of JM(t))yield*YM(n,e)},JM=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},bw=(t,e,n,r)=>{const i=XM(t,e);let s=0,o,a=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:h}=await i.next();if(d){a(),u.close();return}let f=h.byteLength;if(n){let p=s+=f;n(p)}u.enqueue(new Uint8Array(h))}catch(d){throw a(d),d}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},Kd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",wS=Kd&&typeof ReadableStream=="function",ZM=Kd&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),bS=(t,...e)=>{try{return!!t(...e)}catch{return!1}},e3=wS&&bS(()=>{let t=!1;const e=new Request(Pt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),_w=64*1024,Kp=wS&&bS(()=>U.isReadableStream(new Response("").body)),td={stream:Kp&&(t=>t.body)};Kd&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!td[e]&&(td[e]=U.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new me(`Response type '${e}' is not supported`,me.ERR_NOT_SUPPORT,r)})})})(new Response);const t3=async t=>{if(t==null)return 0;if(U.isBlob(t))return t.size;if(U.isSpecCompliantForm(t))return(await new Request(Pt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(U.isArrayBufferView(t)||U.isArrayBuffer(t))return t.byteLength;if(U.isURLSearchParams(t)&&(t=t+""),U.isString(t))return(await ZM(t)).byteLength},n3=async(t,e)=>{const n=U.toFiniteNumber(t.getContentLength());return n??t3(e)},r3=Kd&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:d,headers:h,withCredentials:f="same-origin",fetchOptions:p}=vS(t);d=d?(d+"").toLowerCase():"text";let m=QM([i,s&&s.toAbortSignal()],o),w;const S=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let T;try{if(u&&e3&&n!=="get"&&n!=="head"&&(T=await n3(h,r))!==0){let M=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(U.isFormData(r)&&(C=M.headers.get("content-type"))&&h.setContentType(C),M.body){const[E,_]=xw(T,ed(vw(u)));r=bw(M.body,_w,E,_)}}U.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;w=new Request(e,{...p,signal:m,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:y?f:void 0});let v=await fetch(w);const b=Kp&&(d==="stream"||d==="response");if(Kp&&(a||b&&S)){const M={};["status","statusText","headers"].forEach(N=>{M[N]=v[N]});const C=U.toFiniteNumber(v.headers.get("content-length")),[E,_]=a&&xw(C,ed(vw(a),!0))||[];v=new Response(bw(v.body,_w,E,()=>{_&&_(),S&&S()}),M)}d=d||"text";let D=await td[U.findKey(td,d)||"text"](v,t);return!b&&S&&S(),await new Promise((M,C)=>{yS(M,C,{data:D,headers:sn.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:w})})}catch(y){throw S&&S(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,t,w),{cause:y.cause||y}):me.from(y,y&&y.code,t,w)}}),Gp={http:xM,xhr:GM,fetch:r3};U.forEach(Gp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ew=t=>`- ${t}`,i3=t=>U.isFunction(t)||t===null||t===!1,_S={getAdapter:t=>{t=U.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!i3(n)&&(r=Gp[(o=String(n)).toLowerCase()],r===void 0))throw new me(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Ew).join(`
`):" "+Ew(s[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Gp};function af(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Bo(null,t)}function kw(t){return af(t),t.headers=sn.from(t.headers),t.data=of.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_S.getAdapter(t.adapter||Fl.adapter)(t).then(function(r){return af(t),r.data=of.call(t,t.transformResponse,r),r.headers=sn.from(r.headers),r},function(r){return gS(r)||(af(t),r&&r.response&&(r.response.data=of.call(t,t.transformResponse,r.response),r.response.headers=sn.from(r.response.headers))),Promise.reject(r)})}const ES="1.9.0",Gd={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Gd[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Sw={};Gd.transitional=function(e,n,r){function i(s,o){return"[Axios v"+ES+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new me(i(o," has been removed"+(n?" in "+n:"")),me.ERR_DEPRECATED);return n&&!Sw[o]&&(Sw[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Gd.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function s3(t,e,n){if(typeof t!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new me("option "+s+" must be "+u,me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new me("Unknown option "+s,me.ERR_BAD_OPTION)}}const sc={assertOptions:s3,validators:Gd},rr=sc.validators;class fs{constructor(e){this.defaults=e||{},this.interceptors={request:new gw,response:new gw}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Es(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&sc.assertOptions(r,{silentJSONParsing:rr.transitional(rr.boolean),forcedJSONParsing:rr.transitional(rr.boolean),clarifyTimeoutError:rr.transitional(rr.boolean)},!1),i!=null&&(U.isFunction(i)?n.paramsSerializer={serialize:i}:sc.assertOptions(i,{encode:rr.function,serialize:rr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),sc.assertOptions(n,{baseUrl:rr.spelling("baseURL"),withXsrfToken:rr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&U.merge(s.common,s[n.method]);s&&U.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),n.headers=sn.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(u=u&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const d=[];this.interceptors.response.forEach(function(S){d.push(S.fulfilled,S.rejected)});let h,f=0,p;if(!u){const w=[kw.bind(this),void 0];for(w.unshift.apply(w,a),w.push.apply(w,d),p=w.length,h=Promise.resolve(n);f<p;)h=h.then(w[f++],w[f++]);return h}p=a.length;let m=n;for(f=0;f<p;){const w=a[f++],S=a[f++];try{m=w(m)}catch(T){S.call(this,T);break}}try{h=kw.call(this,m)}catch(w){return Promise.reject(w)}for(f=0,p=d.length;f<p;)h=h.then(d[f++],d[f++]);return h}getUri(e){e=Es(this.defaults,e);const n=xS(e.baseURL,e.url,e.allowAbsoluteUrls);return fS(n,e.params,e.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(e){fs.prototype[e]=function(n,r){return this.request(Es(r||{},{method:e,url:n,data:(r||{}).data}))}});U.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Es(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}fs.prototype[e]=n(),fs.prototype[e+"Form"]=n(!0)});class oy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Bo(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new oy(function(i){e=i}),cancel:e}}}function o3(t){return function(n){return t.apply(null,n)}}function a3(t){return U.isObject(t)&&t.isAxiosError===!0}const Qp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qp).forEach(([t,e])=>{Qp[e]=t});function kS(t){const e=new fs(t),n=tS(fs.prototype.request,e);return U.extend(n,fs.prototype,e,{allOwnKeys:!0}),U.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return kS(Es(t,i))},n}const De=kS(Fl);De.Axios=fs;De.CanceledError=Bo;De.CancelToken=oy;De.isCancel=gS;De.VERSION=ES;De.toFormData=Wd;De.AxiosError=me;De.Cancel=De.CanceledError;De.all=function(e){return Promise.all(e)};De.spread=o3;De.isAxiosError=a3;De.mergeConfig=Es;De.AxiosHeaders=sn;De.formToJSON=t=>mS(U.isHTMLForm(t)?new FormData(t):t);De.getAdapter=_S.getAdapter;De.HttpStatusCode=Qp;De.default=De;const it=De.create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json"}});it.interceptors.request.use(async t=>{const e=Nr.currentUser;if(e)try{const n=await e.getIdToken();n&&(t.headers.Authorization=`Bearer ${n}`)}catch(n){console.error("Error getting ID token in API interceptor:",n)}return t},t=>Promise.reject(t));const on={async getAuthToken(){try{const t=Nr.currentUser;return t?await t.getIdToken():null}catch(t){return console.error("Error getting auth token:",t),null}},async uploadAudioMessage(t,e={}){try{e.sttProcessingMode&&t.append("stt_processing_mode",e.sttProcessingMode);const n=await fetch("http://localhost:5000/api/v2/agent/chat",{method:"POST",headers:{Authorization:`Bearer ${await this.getAuthToken()}`},body:t});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||"Failed to process audio message")}const r=await n.json();return e.sttProcessingMode==="review"?{...r,transcript:r.transcript||r.text,processing_mode:"review"}:r}catch(n){return console.error("Error uploading audio message:",n),{error:n instanceof Error?n.message:"Failed to upload audio message"}}},async chat(t){const e=await it.post("/api/v2/agent/chat",{query:t.query,documentId:t.documentId,thread_id:t.threadId,mode:t.mode});return{agent_response:e.data.final_agent_response||e.data.response,thread_id:e.data.active_quiz_thread_id||e.data.thread_id,audio_content_base64:e.data.audio_content_base64,timepoints:e.data.timepoints,is_quiz:e.data.quiz_active||!1,quiz_completed:e.data.quiz_complete||!1,quiz_cancelled:e.data.quiz_cancelled||!1,conversation_history:e.data.conversation_history,document_id:e.data.document_id,error_detail:e.data.error_detail,processing_mode:e.data.processing_mode}},async getChatHistory(t){return(await it.get("/api/v2/agent/history",{params:{thread_id:t}})).data.conversation_history||[]},async synthesizeText(t){try{const e=await it.post("/api/tts/synthesize",{text:t});return{audioContent:e.data.audio_content,timepoints:e.data.timepoints}}catch(e){throw console.error("Error synthesizing text:",e),e}},async getDocument(t){return(await it.get(`/api/documents/${t}?include_content=true`)).data},async listDocuments(){return(await it.get("/api/documents")).data.data||[]},async uploadDocument(t,e){const n=new FormData;return n.append("file",t),e&&n.append("metadata",JSON.stringify(e)),(await it.post("/api/documents",n,{headers:{"Content-Type":"multipart/form-data"}})).data},async deleteDocument(t){await it.delete(`/api/documents/${t}`)},async getTtsAssets(t){return(await it.get(`/api/documents/${t}/tts-assets`)).data},async cancelQuiz(t){await it.post("/api/v2/agent/chat",{query:"/cancel_quiz",thread_id:t})},async submitFeedback(t){return(await it.post("/api/feedback",{type:t.type,description:t.description,browser_info:t.browserInfo})).data},async getUserProfile(){return(await it.get("/api/users/profile")).data.data||{}},async updateUserProfile(t){await it.put("/api/users/profile",t)},async createUser(t){return(await it.post("/api/users",t)).data},async deleteUser(){await it.delete("/api/users")},async verifyEmail(){return(await it.post("/api/users/verify-email")).data},async startQuiz(t,e){const n=await it.post("/api/v2/agent/chat",{query:`Start a quiz for document ${t}`,documentId:t,thread_id:e});return console.log("[apiService.startQuiz] Raw response.data from backend:",JSON.stringify(n.data,null,2)),{agent_response:n.data.final_agent_response||n.data.response||"No response from AI",thread_id:n.data.active_quiz_thread_id||n.data.thread_id,is_quiz:n.data.quiz_active||!1,quiz_complete:n.data.quiz_complete||!1,quiz_cancelled:n.data.quiz_cancelled||!1,error_detail:n.data.error_detail,audio_content_base64:n.data.audio_content_base64||null}},async continueQuiz(t,e,n){const r=await it.post("/api/v2/agent/chat",{query:e,documentId:n,thread_id:t});return{agent_response:r.data.response||r.data.agent_response||"No response from AI",thread_id:r.data.thread_id,is_quiz:r.data.quiz_active||!1,quiz_completed:r.data.quiz_complete||!1}},async refineAnswer(t){return(await it.post("/api/v2/answer-formulation/refine",{transcript:t.transcript,question:t.question,session_id:t.session_id})).data},async editAnswer(t){return(await it.post("/api/v2/answer-formulation/edit",{session_id:t.session_id,edit_command:t.edit_command})).data}},ya={fontSize:16,fontFamily:"OpenDyslexic",lineSpacing:1.5,wordSpacing:1.2,textColor:"#000000",backgroundColor:"#f8f9fa",highContrast:!1,uiTtsEnabled:!0,ttsVoice:"en-US-Wavenet-D",ttsSpeed:1,ttsPitch:0,cloudTtsEnabled:!1,cloudTtsVoice:"en-US-Neural2-F"},SS=k.createContext(void 0),l3=({children:t})=>{const[e,n]=k.useState(null),[r,i]=k.useState(ya),[s,o]=k.useState(!0);k.useEffect(()=>MP(Nr,async v=>{if(v)try{await v.getIdToken(!0);const b=zO(PL,"users",v.uid),D=await ZO(b);if(D.exists()){console.log(`[AuthContext:onAuthStateChanged] User doc found for ${v.uid}. Loading preferences.`);const M=D.data();i(M.preferences||ya)}else console.warn(`[AuthContext:onAuthStateChanged] User doc for ${v.uid} not found. Using defaults.`),i(ya);n(v)}catch(b){console.error("[AuthContext:onAuthStateChanged] Error processing user state:",b),n(v),i(ya)}finally{o(!1)}else n(null),i(ya),o(!1)}),[]);const a=k.useCallback(async(y=!0)=>{if(!e)throw console.warn("[AuthContext:getAuthTokenCallback] Attempted to get token without a current user."),new Error("User not authenticated to get token.");return console.log(`[AuthContext] Getting auth token, forceRefresh: ${y}`),e.getIdToken(y)},[e]),u=k.useCallback(async(y,v)=>{await Zx(Nr,y,v)},[]),d=k.useCallback(async(y,v,b)=>{var D,M;try{console.log("[AuthContext:signUpCallback] Starting Server-First user creation"),await on.createUser({email:y,password:v,display_name:b}),console.log("[AuthContext:signUpCallback] Backend user creation successful");const C=await Zx(Nr,y,v);return console.log("[AuthContext:signUpCallback] User signed in successfully"),{user:C.user,partial:!1}}catch(C){return console.error("[AuthContext:signUpCallback] Signup failed:",C),{user:null,partial:!1,error:((M=(D=C.response)==null?void 0:D.data)==null?void 0:M.message)||C.message||"Signup failed"}}},[]),h=k.useCallback(async()=>{await ev(Nr)},[]),f=k.useCallback(async()=>{if(e)try{console.log("[AuthContext:deleteAccountCallback] Requesting account deletion via API"),await on.deleteUser(),await ev(Nr),console.log("[AuthContext:deleteAccountCallback] Account deleted successfully")}catch(y){throw console.error("[AuthContext:deleteAccountCallback] Error deleting account:",y),y}},[e]),p=k.useCallback(async()=>{const y=new Ar;try{console.log("[AuthContext:signInWithGoogleCallback] Attempting Google Sign-In via popup..."),await rj(Nr,y),console.log("[AuthContext:signInWithGoogleCallback] Google Sign-In popup initiated successfully.")}catch(v){throw console.error("[AuthContext:signInWithGoogleCallback] Error during Google Sign-In popup:",v),v.code&&console.error("[AuthContext] Firebase Error Code (signInWithPopup):",v.code),v.message&&console.error("[AuthContext] Firebase Error Message (signInWithPopup):",v.message),v}},[]),m=k.useCallback(async y=>{console.log("[AuthContext:resetPasswordCallback] Sending password reset email via Client SDK"),await DP(Nr,y),console.log("[AuthContext:resetPasswordCallback] Password reset email sent")},[]),w=k.useCallback(async y=>{if(!e)throw new Error("No user logged in to update preferences");const v={...r,...y},{getAuthToken:b,...D}=v;try{await on.updateUserProfile({preferences:D}),i(v),console.log("[AuthContext:updateUserPreferencesCallback] User preferences updated via API.")}catch(M){throw console.error("[AuthContext:updateUserPreferencesCallback] Failed to update preferences:",M),M}},[e,r]),S=k.useMemo(()=>({...r,getAuthToken:a}),[r,a]),T=k.useMemo(()=>({currentUser:e,userPreferences:S,loading:s,signIn:u,signUp:d,signOut:h,deleteAccount:f,signInWithGoogle:p,resetPassword:m,updateUserPreferences:w,getAuthToken:a}),[e,S,s,u,d,h,f,p,m,w,a]);return l.jsx(SS.Provider,{value:T,children:!s&&t})},Tn=()=>{const t=k.useContext(SS);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Tw=async(t,e)=>{var n,r;try{console.log("[TTS Utils] Sending TTS request with options:",{text:t.text.substring(0,50)+"...",voice_name:t.voice_name,speaking_rate:t.speaking_rate,pitch:t.pitch});const s="http://localhost:5000/api/tts";console.log("[TTS Utils] API URL:",s);const o=await De.post(s,t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(o.data.status==="success")return console.log("[TTS Utils] TTS API call successful",{audio_size:((n=o.data.audio_data)==null?void 0:n.length)||0,format:o.data.audio_format,voice:(r=o.data.metadata)==null?void 0:r.voice_name}),o.data;throw console.error("[TTS Utils] TTS API returned error status:",o.data),new Error(o.data.message||"Failed to synthesize speech")}catch(i){throw console.error("[TTS Utils] Error in TTS API call:",i),i}},Cw=(t,e="mp3")=>{if(!t)throw console.error("[TTS Utils] No audio data received"),new Error("No audio data received");if(t.length<100)throw console.error("[TTS Utils] Audio data too short, likely invalid. Length:",t.length),new Error("Audio data too short, likely invalid");if(!/^[A-Za-z0-9+/=]+$/.test(t))throw console.error("[TTS Utils] Audio data contains invalid base64 characters"),new Error("Invalid base64 audio data format");console.log("[TTS Utils] Creating audio element with base64 data, length:",t.length);const n=new Audio;return n.addEventListener("loadedmetadata",()=>{console.log("[TTS Utils] Audio metadata loaded, duration:",n.duration),n.duration&&!isNaN(n.duration)?n.play().catch(r=>{console.error("[TTS Utils] Error playing audio:",r)}):console.error("[TTS Utils] Audio has invalid duration after metadata loaded:",n.duration)}),n.addEventListener("play",()=>{console.log("[TTS Utils] Audio playback started")}),n.addEventListener("canplaythrough",()=>{console.log("[TTS Utils] Audio can play through completely, duration:",n.duration)}),n.addEventListener("error",r=>{console.error("[TTS Utils] Audio element error:",r)}),n.src=`data:audio/${e};base64,${t}`,n.load(),n};var Tr=(t=>(t[t.Off=0]="Off",t[t.Short=500]="Short",t[t.Medium=1e3]="Medium",t[t.Long=1500]="Long",t))(Tr||{});const TS=k.createContext(void 0),u3=({children:t})=>{const{userPreferences:e,updateUserPreferences:n}=Tn(),[r,i]=k.useState(e.uiTtsEnabled),[s,o]=k.useState(e.highContrast),[a,u]=k.useState(e.fontSize),[d,h]=k.useState(e.fontFamily),[f,p]=k.useState(e.lineSpacing),[m,w]=k.useState(e.wordSpacing),[S,T]=k.useState(e.cloudTtsEnabled||!1),[y,v]=k.useState(e.ttsDelay||500),[b,D]=k.useState(!1),[M,C]=k.useState(!1),[E,_]=k.useState(0),N=k.useRef(null),R=k.useRef(!1),j=k.useRef(null);k.useEffect(()=>{i(e.uiTtsEnabled),o(e.highContrast),u(e.fontSize),h(e.fontFamily),p(e.lineSpacing),w(e.wordSpacing),T(e.cloudTtsEnabled||!1),v(e.ttsDelay!==void 0?e.ttsDelay:500)},[e]);const I=async()=>{const W=!r;i(W),await n({uiTtsEnabled:W})},P=async()=>{xe();const W=!S;console.log("[AccessibilityContext] Toggling cloud TTS:",W),T(W),await n({cloudTtsEnabled:W}),W&&!e.cloudTtsVoice&&(console.log("[AccessibilityContext] Setting default cloud TTS voice"),await n({cloudTtsVoice:"en-US-Standard-C"})),console.log("[AccessibilityContext] Cloud TTS is now",W?"enabled":"disabled")},B=async()=>{const W=!s;o(W),await n({highContrast:W})},Y=async W=>{u(W),await n({fontSize:W})},he=async W=>{h(W),await n({fontFamily:W})},X=async W=>{p(W),await n({lineSpacing:W})},V=async W=>{w(W),await n({wordSpacing:W})},H=async W=>{v(W),await n({ttsDelay:W}),console.log(`[AccessibilityContext] TTS delay set to ${W}ms`)},O=(W,se={})=>{if(!W||W.trim()===""){console.log("[AccessibilityContext] Empty text provided, skipping TTS");return}if(j.current&&(clearTimeout(j.current),j.current=null),se.ignoreDelay||y===0){re(W,se);return}console.log(`[AccessibilityContext] Scheduling speech with ${y}ms delay`),j.current=setTimeout(()=>{re(W,se),j.current=null},y)},re=(W,se={})=>{console.log("[AccessibilityContext] Executing speech with options:",se),xe(),ie(se)?(console.log("[AccessibilityContext] Using cloud TTS for speech synthesis"),fe(W)):"speechSynthesis"in window&&(console.log("[AccessibilityContext] Using browser TTS for speech synthesis"),L(W))},ie=(W={})=>W.forceBasic?!1:W.forcePremium?!0:!W.isDocumentContent&&!W.forcePremium?!1:S,L=W=>{if(!("speechSynthesis"in window)){console.warn("[AccessibilityContext] Speech synthesis not supported in this browser");return}if(!(!W||W.trim()===""))try{Oe.current||console.log("[AccessibilityContext] Speech requested but browser not yet initialized - waiting for user interaction"),xe();const se=new SpeechSynthesisUtterance(W);se.rate=e.ttsSpeed||1,se.pitch=e.ttsPitch||1;let Me=window.speechSynthesis.getVoices();if(Me.length===0)console.log("[AccessibilityContext] No voices available yet, using default voice");else{const ut=Me.find(et=>et.name===e.ttsVoice);ut&&(se.voice=ut)}se.onstart=()=>{console.log("[AccessibilityContext] Speech started:",W.substring(0,20)+(W.length>20?"...":"")),D(!0)},se.onend=()=>{console.log("[AccessibilityContext] Speech ended successfully"),D(!1)},se.onerror=ut=>{if(console.error("[AccessibilityContext] Speech error:",ut),D(!1),!Oe.current){console.log("[AccessibilityContext] Attempting to initialize speech after error"),Oe.current=!0;try{const et=new SpeechSynthesisUtterance("");window.speechSynthesis.speak(et),window.speechSynthesis.cancel()}catch(et){console.error("[AccessibilityContext] Failed to initialize speech:",et)}}},window.speechSynthesis.speak(se)}catch(se){console.error("[AccessibilityContext] Error in speakWithBrowserTts:",se),D(!1)}},fe=async W=>{var se,Me,ut;try{xe(),C(!0),D(!0),_(0),R.current=!1,console.log("[AccessibilityContext] Force refreshing auth token for TTS API call");const et=await((se=e.getAuthToken)==null?void 0:se.call(e,!0))||"";if(!et)throw new Error("Failed to get a valid authentication token after refresh");console.log("[AccessibilityContext] Got refreshed auth token");let Lt=e.cloudTtsVoice||"en-US-Standard-C";Lt.match(/^[a-z]{2,5}-[A-Z]{2,5}-(Standard|Neural|Wavenet|Studio)-[A-Z]$/)||(console.warn("[AccessibilityContext] Invalid voice name format, falling back to default:",Lt),Lt="en-US-Standard-C"),console.log("[AccessibilityContext] Using cloud TTS voice:",Lt);const cn=15e3,Mt=new Promise((pe,Gt)=>{setTimeout(()=>Gt(new Error("TTS API call timed out")),cn)}),Kt=await Promise.race([Tw({text:W,voice_name:Lt,speaking_rate:e.ttsSpeed||1,pitch:e.ttsPitch||0},et),Mt]);if(console.log("[AccessibilityContext] TTS API call successful, received audio data length:",((Me=Kt.audio_data)==null?void 0:Me.length)||0),!Kt.audio_data||Kt.audio_data.length<100)throw new Error("Received invalid or empty audio data from TTS API");if(R.current){console.log("[AccessibilityContext] TTS was cancelled during API call"),C(!1),D(!1);return}try{console.log("[AccessibilityContext] Creating audio element from base64 data");const pe=Cw(Kt.audio_data,Kt.audio_format||"mp3");N.current=pe,pe.addEventListener("ended",()=>{console.log("[AccessibilityContext] Audio playback ended"),D(!1),_(0),N.current=null}),pe.addEventListener("timeupdate",()=>{if(pe.duration&&!isNaN(pe.duration)&&pe.duration>0&&pe.currentTime>=0&&!isNaN(pe.currentTime)){const Gt=pe.currentTime/pe.duration,Ft=Math.max(0,Math.min(1,Gt));console.log(`[AccessibilityContext] Audio progress: ${Math.round(Ft*100)}%`,`(${pe.currentTime.toFixed(1)}s / ${pe.duration.toFixed(1)}s)`),_(Ft)}else console.warn("[AccessibilityContext] Invalid audio timing values:",{duration:pe.duration,currentTime:pe.currentTime})}),pe.addEventListener("error",Gt=>{console.error("[AccessibilityContext] Audio playback error:",Gt),D(!1),C(!1),_(0)}),pe.addEventListener("canplay",()=>{console.log("[AccessibilityContext] Audio can play, initial duration:",pe.duration),C(!1)}),pe.addEventListener("canplaythrough",()=>{if(console.log("[AccessibilityContext] Audio can play through completely, final duration:",pe.duration),pe.duration&&!isNaN(pe.duration)&&pe.duration>0){const Gt=pe.currentTime/pe.duration;_(Math.max(0,Math.min(1,Gt)))}})}catch(pe){throw console.error("[AccessibilityContext] Error setting up audio playback:",pe),pe}}catch(et){console.error("[AccessibilityContext] Error using cloud TTS:",et),De.isAxiosError(et)&&((ut=et.response)==null?void 0:ut.status)===401&&console.error("[AccessibilityContext] TTS API call failed due to authorization (401). Token might be invalid or expired."),console.log("[AccessibilityContext] Falling back to browser TTS due to Cloud TTS error."),L(W),C(!1),D(!1),_(0),"speechSynthesis"in window&&S&&(console.log("[AccessibilityContext] Falling back to browser TTS due to cloud TTS error"),L(W))}},Ee=async(W,se={})=>{var et;if(!W||W.trim()===""){console.log("[AccessibilityContext] Empty text provided to speakLongText, skipping TTS");return}const ut=se.forcePremium||S;if(W.length<=3e3||!ut){O(W,{isDocumentContent:!0,forcePremium:se.forcePremium,ignoreDelay:se.ignoreDelay});return}try{xe(),C(!0),D(!0),R.current=!1;const Lt=W.match(/[^.!?]+[.!?]+/g)||[];let cn=[],Mt="";for(const pe of Lt)Mt.length+pe.length>3e3?(cn.push(Mt),Mt=pe):Mt+=pe;Mt&&cn.push(Mt);const Kt=await((et=e.getAuthToken)==null?void 0:et.call(e))||"";if(!Kt)throw new Error("Failed to get authentication token");for(let pe=0;pe<cn.length&&!R.current;pe++){const Gt=await Tw({text:cn[pe],voice_name:e.cloudTtsVoice||"en-US-Neural2-F",speaking_rate:e.ttsSpeed||1,pitch:e.ttsPitch||0},Kt),Ft=Cw(Gt.audio_data,Gt.audio_format);if(N.current=Ft,Ft.ontimeupdate=()=>{if(Ft.duration){const Fn=Ft.currentTime/Ft.duration,Jr=(pe+Fn)/cn.length;_(Jr)}},await new Promise(Fn=>{Ft.onended=()=>{Fn()};const Jr=setInterval(()=>{R.current&&(clearInterval(Jr),Fn())},100)}),R.current)break}C(!1),D(!1),_(0),N.current=null}catch(Lt){console.error("Error processing long text with TTS:",Lt),C(!1),D(!1),"speechSynthesis"in window&&L(W)}},xe=()=>{if(console.log("[AccessibilityContext] Cancelling all speech"),j.current&&(console.log("[AccessibilityContext] Clearing pending TTS timer"),clearTimeout(j.current),j.current=null),"speechSynthesis"in window&&window.speechSynthesis.cancel(),R.current=!0,N.current){try{const W=N.current;W.onended=null,W.ontimeupdate=null,W.onerror=null,W.oncanplay=null,W.pause(),W.currentTime=0,W.src="",console.log("[AccessibilityContext] Stopped playing audio")}catch(W){console.error("[AccessibilityContext] Error stopping audio:",W)}N.current=null}D(!1),C(!1),_(0)},Oe=k.useRef(!1);return k.useEffect(()=>{if("speechSynthesis"in window){window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices()};const W=()=>{if(!Oe.current)try{console.log("[AccessibilityContext] Initializing speech synthesis after user interaction"),Oe.current=!0;const se=new SpeechSynthesisUtterance("");se.onerror=Me=>{console.log("[AccessibilityContext] Silent utterance error (expected during initialization):",Me)},window.speechSynthesis.speak(se),setTimeout(()=>{try{window.speechSynthesis.cancel()}catch(Me){console.log("[AccessibilityContext] Error canceling speech:",Me)}},100),console.log("[AccessibilityContext] Speech synthesis initialized successfully")}catch(se){console.error("[AccessibilityContext] Error initializing speech synthesis:",se),Oe.current=!0}finally{document.removeEventListener("click",W),document.removeEventListener("keydown",W),document.removeEventListener("touchstart",W)}};document.addEventListener("click",W),document.addEventListener("keydown",W),document.addEventListener("touchstart",W)}return()=>{"speechSynthesis"in window&&window.speechSynthesis.cancel()}},[]),l.jsx(TS.Provider,{value:{uiTtsEnabled:r,highContrast:s,fontSize:a,fontFamily:d,lineSpacing:f,wordSpacing:m,cloudTtsEnabled:S,ttsDelay:y,toggleUiTts:I,toggleHighContrast:B,toggleCloudTts:P,setFontSize:Y,setFontFamily:he,setLineSpacing:X,setWordSpacing:V,setTtsDelay:H,speakText:O,speakLongText:Ee,cancelSpeech:xe,isSpeaking:b,ttsLoading:M,audioProgress:E},children:t})},tr=()=>{const t=k.useContext(TS);if(t===void 0)throw new Error("useAccessibility must be used within an AccessibilityProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:u,...d},h)=>k.createElement("svg",{ref:h,...c3,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${d3(t)}`,a].join(" "),...d},[...e.map(([f,p])=>k.createElement(f,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=ne("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=ne("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=ne("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=ne("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ne("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ne("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=ne("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=ne("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ne("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=ne("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ne("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ne("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=ne("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ne("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=ne("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=ne("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=ne("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=ne("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=ne("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=ne("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=ne("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=ne("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=ne("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=ne("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=ne("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=ne("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=ne("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=ne("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=ne("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),$e=({text:t,className:e="",isDocumentContent:n=!1,onMouseEnter:r,onMouseLeave:i,ariaLabel:s})=>{const o=k.useRef(!1),{speakText:a,uiTtsEnabled:u,cloudTtsEnabled:d}=tr(),h=()=>{u&&(o.current=!0,r&&r(),a(t))},f=()=>{o.current=!1,i&&i()};return l.jsx("span",{className:e,onMouseEnter:h,onMouseLeave:f,"aria-label":s||t,children:t})},D3=()=>{const{speakText:t,uiTtsEnabled:e,toggleUiTts:n,toggleHighContrast:r,highContrast:i}=tr(),s=o=>{e&&t(o)};return k.useEffect(()=>{document.documentElement.classList.toggle("high-contrast",i)},[i]),l.jsxs("div",{className:i?"min-h-screen bg-black text-white":"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white",children:[l.jsxs("nav",{className:"w-full py-4 px-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(jn,{className:i?"text-white mr-2":"text-blue-400 mr-2",size:24,"aria-hidden":"true"}),l.jsx("span",{className:i?"text-white font-medium text-xl":"text-blue-400 font-medium text-xl",children:"AI Tutor"})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{className:`p-2 rounded-full ${i?"bg-white text-black hover:bg-gray-200":"text-gray-300 hover:bg-gray-800"} transition-colors duration-200`,"aria-label":i?"Disable high contrast mode":"Enable high contrast mode","aria-pressed":i,onClick:r,children:[l.jsx(nd,{size:20}),l.jsx("span",{className:"sr-only",children:l.jsx("span",{onMouseEnter:()=>s(i?"Disable high contrast mode":"Enable high contrast mode"),children:i?"Disable high contrast mode":"Enable high contrast mode"})})]}),l.jsx("button",{className:`p-2 rounded-full ${e?i?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700":i?"bg-gray-800 text-white hover:bg-gray-700":"text-gray-300 hover:bg-gray-800"} transition-colors duration-200`,"aria-label":e?"Disable audio support":"Enable audio support","aria-pressed":e,onClick:n,onMouseEnter:()=>s(e?"Disable audio support":"Enable audio support"),children:l.jsx(fo,{size:20})}),l.jsx(Te,{to:"/auth/signin",className:`${i?"bg-white text-black hover:bg-gray-200":"bg-blue-600 hover:bg-blue-700 text-white"} py-2 px-4 rounded-md transition-colors duration-200`,children:l.jsx($e,{text:"Sign In",className:"inline-block"})})]})]}),l.jsxs("div",{className:"text-center py-20 px-6 max-w-3xl mx-auto",children:[l.jsx("h1",{className:"text-white text-4xl sm:text-5xl font-bold mb-4 leading-tight",onMouseEnter:()=>s("AI Tutor for Students with Dyslexia"),children:"AI Tutor for Students with Dyslexia"}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} text-lg sm:text-xl leading-relaxed mb-8`,onMouseEnter:()=>s("An accessible learning platform designed to help students with dyslexia learn more effectively through personalized AI assistance."),children:"An accessible learning platform designed to help students with dyslexia learn more effectively through personalized AI assistance."}),l.jsxs(Te,{to:"/auth/signup",className:`inline-flex items-center ${i?"bg-white text-black hover:bg-gray-200":"bg-blue-600 hover:bg-blue-700 text-white"} py-3 px-8 rounded-md text-lg font-medium transition-all duration-200 transform hover:scale-105`,onMouseEnter:()=>s("Get Started Now - It's Free"),children:["Get Started Now - It's Free",l.jsx(Yp,{className:"ml-2",size:20})]})]}),l.jsxs("div",{className:"w-full max-w-7xl mx-auto px-6 py-16",children:[l.jsx("h2",{className:"text-white text-3xl font-bold text-center mb-12",children:l.jsx($e,{text:"Features Designed for Accessibility"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-8 flex flex-col items-center text-center transition-transform duration-300 hover:transform hover:scale-105`,children:[l.jsx("div",{className:i?"text-white mb-6":"text-blue-400 mb-6",children:l.jsx(jn,{size:48,"aria-hidden":"true"})}),l.jsx("h3",{className:"text-white text-xl font-semibold mb-4",children:l.jsx($e,{text:"Accessible Learning"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} leading-relaxed`,children:l.jsx($e,{text:"Customizable text display with dyslexia-friendly options. Integrated text-to-speech for better comprehension."})})]}),l.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-8 flex flex-col items-center text-center transition-transform duration-300 hover:transform hover:scale-105`,children:[l.jsx("div",{className:i?"text-white mb-6":"text-green-400 mb-6",children:l.jsx(xn,{size:48,"aria-hidden":"true"})}),l.jsx("h3",{className:"text-white text-xl font-semibold mb-4",children:l.jsx($e,{text:"Document Support"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} leading-relaxed`,children:l.jsx($e,{text:"Upload any document for instant help. AI breaks down complex content into manageable parts."})})]}),l.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-8 flex flex-col items-center text-center transition-transform duration-300 hover:transform hover:scale-105`,children:[l.jsx("div",{className:i?"text-white mb-6":"text-purple-400 mb-6",children:l.jsx(po,{size:48,"aria-hidden":"true"})}),l.jsx("h3",{className:"text-white text-xl font-semibold mb-4",children:l.jsx($e,{text:"AI Conversation"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} leading-relaxed`,children:l.jsx($e,{text:"Talk naturally with your AI Tutor. Get explanations, summaries, and personalized help."})})]})]})]}),l.jsx("div",{className:`${i?"bg-gray-900":"bg-gray-900/50"} py-16`,children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[l.jsx("h2",{className:"text-white text-3xl font-bold text-center mb-12",children:l.jsx($e,{text:"How AI Tutor Works"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[l.jsxs("div",{className:`${i?"bg-black border border-white":"bg-gray-800/70"} rounded-lg p-6 relative`,children:[l.jsx("div",{className:`absolute -top-4 -left-4 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"} font-bold text-lg`,children:"1"}),l.jsx("h3",{className:"text-white text-lg font-semibold mb-3 mt-2",children:l.jsx($e,{text:"Upload Your Documents"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:l.jsx($e,{text:"Simply upload any document you're studying - PDF, Word, or even images with text."})})]}),l.jsxs("div",{className:`${i?"bg-black border border-white":"bg-gray-800/70"} rounded-lg p-6 relative`,children:[l.jsx("div",{className:`absolute -top-4 -left-4 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"} font-bold text-lg`,children:"2"}),l.jsx("h3",{className:"text-white text-lg font-semibold mb-3 mt-2",children:l.jsx($e,{text:"AI Processes Content"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:l.jsx($e,{text:"Our AI extracts and analyzes text, making it accessible for your learning style."})})]}),l.jsxs("div",{className:`${i?"bg-black border border-white":"bg-gray-800/70"} rounded-lg p-6 relative`,children:[l.jsx("div",{className:`absolute -top-4 -left-4 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"} font-bold text-lg`,children:"3"}),l.jsx("h3",{className:"text-white text-lg font-semibold mb-3 mt-2",children:l.jsx($e,{text:"Interact and Learn"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:l.jsx($e,{text:"Ask questions, get summaries, or take quizzes on the material."})})]}),l.jsxs("div",{className:`${i?"bg-black border border-white":"bg-gray-800/70"} rounded-lg p-6 relative`,children:[l.jsx("div",{className:`absolute -top-4 -left-4 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"} font-bold text-lg`,children:"4"}),l.jsx("h3",{className:"text-white text-lg font-semibold mb-3 mt-2",children:l.jsx($e,{text:"Track Your Progress"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:l.jsx($e,{text:"Monitor learning achievements with detailed progress tracking."})})]})]})]})}),l.jsx("div",{className:`${i?"bg-black":"bg-blue-600/20"} py-16 px-6`,children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-white text-3xl font-bold mb-6",children:"Ready to transform your learning experience?"}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} text-lg mb-8 max-w-2xl mx-auto`,children:"Join thousands of students who are already benefiting from AI Tutor's personalized learning assistance."}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[l.jsxs(Te,{to:"/auth/signup",className:`inline-flex items-center justify-center ${i?"bg-white text-black hover:bg-gray-200":"bg-blue-600 hover:bg-blue-700 text-white"} py-3 px-6 rounded-md text-lg font-medium transition-colors duration-200`,onMouseEnter:()=>s("Create Free Account"),children:["Create Free Account",l.jsx(Yp,{className:"ml-2",size:20})]}),l.jsx(Te,{to:"/auth/signin",className:`inline-flex items-center justify-center ${i?"bg-gray-900 text-white border border-white hover:bg-gray-800":"bg-gray-800 text-white hover:bg-gray-700"} py-3 px-6 rounded-md text-lg font-medium transition-colors duration-200`,onMouseEnter:()=>s("Sign In"),children:"Sign In"})]})]})}),l.jsxs("div",{className:"w-full max-w-7xl mx-auto px-6 py-16",children:[l.jsx("h2",{className:"text-white text-3xl font-bold text-center mb-12",children:"Why Choose AI Tutor?"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"flex items-start text-white",onMouseEnter:()=>s("Designed specifically for students with dyslexia"),children:[l.jsx("div",{className:`flex-shrink-0 ${i?"text-white":"text-green-400"} mr-4`,children:l.jsx(vi,{size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium mb-2",children:l.jsx($e,{text:"Designed specifically for students with dyslexia"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:l.jsx($e,{text:"Every feature is built with dyslexic students in mind, from font choices to color schemes."})})]})]}),l.jsxs("div",{className:"flex items-start text-white",onMouseEnter:()=>s("Personalized learning pace"),children:[l.jsx("div",{className:`flex-shrink-0 ${i?"text-white":"text-green-400"} mr-4`,children:l.jsx(vi,{size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium mb-2",children:l.jsx($e,{text:"Personalized learning pace"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:l.jsx($e,{text:"Move at your own speed without pressure, with an AI tutor that adapts to your needs."})})]})]}),l.jsxs("div",{className:"flex items-start text-white",children:[l.jsx("div",{className:`flex-shrink-0 ${i?"text-white":"text-green-400"} mr-4`,children:l.jsx(vi,{size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium mb-2",children:l.jsx($e,{text:"Multi-sensory learning approach"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:l.jsx($e,{text:"Combines visual, auditory, and interactive elements to strengthen learning and comprehension."})})]})]}),l.jsxs("div",{className:"flex items-start text-white",children:[l.jsx("div",{className:`flex-shrink-0 ${i?"text-white":"text-green-400"} mr-4`,children:l.jsx(vi,{size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium mb-2",children:l.jsx($e,{text:"Builds confidence and independence"})}),l.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:l.jsx($e,{text:"Helps students develop self-reliance and confidence in their academic abilities."})})]})]})]})]}),l.jsx("footer",{className:`w-full py-12 px-6 ${i?"bg-gray-900 border-t border-white":"bg-gray-900"}`,children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[l.jsx(jn,{className:i?"text-white mr-2":"text-blue-400 mr-2",size:24,"aria-hidden":"true"}),l.jsx("span",{className:i?"text-white font-medium text-xl":"text-blue-400 font-medium text-xl",children:"AI Tutor"})]}),l.jsxs("div",{className:"flex space-x-6",children:[l.jsx(Te,{to:"/about",className:`${i?"text-white hover:text-gray-300":"text-gray-300 hover:text-white"} transition-colors duration-200`,onMouseEnter:()=>s("About"),children:"About"}),l.jsx(Te,{to:"/privacy",className:`${i?"text-white hover:text-gray-300":"text-gray-300 hover:text-white"} transition-colors duration-200`,onMouseEnter:()=>s("Privacy"),children:"Privacy"}),l.jsx(Te,{to:"/terms",className:`${i?"text-white hover:text-gray-300":"text-gray-300 hover:text-white"} transition-colors duration-200`,onMouseEnter:()=>s("Terms"),children:"Terms"}),l.jsx("a",{href:"mailto:cossil@lexiaid.com",className:`${i?"text-white hover:text-gray-300":"text-gray-300 hover:text-white"} transition-colors duration-200`,onMouseEnter:()=>s("Contact"),children:"Contact"})]})]}),l.jsxs("div",{className:"border-t border-gray-700 pt-8",children:[l.jsx("p",{className:`${i?"text-gray-300":"text-gray-400"} text-center text-sm`,children:"AI Tutor - Helping students with dyslexia learn more effectively"}),l.jsx("p",{className:`${i?"text-gray-400":"text-gray-500"} text-center text-sm mt-1`,children:" 2025. All rights reserved."})]})]})})]})},O3=()=>{const[t,e]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(!1),{signIn:u,signInWithGoogle:d}=Tn(),{speakText:h,uiTtsEnabled:f}=tr(),p=Yr(),m=T=>{f&&h(T)},w=async T=>{if(T.preventDefault(),!t||!n){s("Please fill in all fields");return}try{s(""),a(!0),await u(t,n),p("/dashboard")}catch(y){s("Failed to sign in. Please check your credentials."),console.error(y)}finally{a(!1)}},S=async()=>{try{s(""),a(!0),await d(),p("/dashboard")}catch(T){s("Failed to sign in with Google."),console.error(T)}finally{a(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800 px-4 py-12 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full bg-gray-800/50 rounded-lg shadow-lg p-8",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx(jn,{className:"h-12 w-12 text-blue-400","aria-hidden":"true"})}),l.jsx("h2",{className:"text-center text-3xl font-extrabold text-white mb-6",onMouseEnter:()=>m("Sign in to AI Tutor"),children:"Sign in to AI Tutor"}),i&&l.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-md p-4 mb-6",role:"alert",onMouseEnter:()=>m(`Error: ${i}`),children:l.jsxs("div",{className:"flex",children:[l.jsx(As,{className:"h-5 w-5 text-red-400 mr-2","aria-hidden":"true"}),l.jsx("span",{className:"text-red-300",children:i})]})}),l.jsxs("form",{className:"space-y-6",onSubmit:w,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>m("Email address"),children:"Email address"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Qd,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:T=>e(T.target.value),onFocus:()=>m("Email address field"),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address","aria-required":"true"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>m("Password"),children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Jp,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:T=>r(T.target.value),onFocus:()=>m("Password field"),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Password","aria-required":"true"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",onFocus:()=>m("Remember me checkbox"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),l.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-300",onMouseEnter:()=>m("Remember me"),children:"Remember me"})]}),l.jsx("div",{className:"text-sm",children:l.jsx(Te,{to:"/auth/reset-password",className:"font-medium text-blue-400 hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800",onMouseEnter:()=>m("Forgot your password?"),onFocus:()=>m("Forgot your password?"),children:"Forgot your password?"})})]}),l.jsx("div",{children:l.jsxs("button",{type:"submit",disabled:o,onMouseEnter:()=>m(o?"Signing in...":"Sign in"),onFocus:()=>m(o?"Signing in...":"Sign in"),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 font-medium transition-colors duration-200","aria-label":"Sign in to your account",children:[l.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:o?l.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-opacity-60 border-t-transparent rounded-full"}):l.jsx(Yp,{className:"h-5 w-5 text-blue-400 group-hover:text-blue-300","aria-hidden":"true"})}),o?"Signing in...":"Sign in"]})})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-600"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-gray-800 text-gray-400",onMouseEnter:()=>m("Or continue with"),children:"Or continue with"})})]}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:S,disabled:o,onMouseEnter:()=>m("Sign in with Google"),onFocus:()=>m("Sign in with Google"),className:"w-full flex justify-center py-2 px-4 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-sm font-medium text-white hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-200","aria-label":"Sign in with Google",children:l.jsxs("span",{className:"flex items-center",children:[l.jsx("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.798-1.677-4.202-2.701-6.735-2.701-5.539 0-10.032 4.493-10.032 10.032s4.493 10.032 10.032 10.032c8.445 0 10.154-7.889 9.321-11.731h-9.321z"})}),"Sign in with Google"]})})})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-sm text-gray-400",children:[l.jsxs("span",{onMouseEnter:()=>m("Don't have an account?"),children:["Don't have an account?"," "]}),l.jsx(Te,{to:"/auth/signup",className:"font-medium text-blue-400 hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500",onMouseEnter:()=>m("Sign up"),onFocus:()=>m("Sign up"),children:"Sign up"})]})})]})})},L3=()=>{const[t,e]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(""),[u,d]=k.useState(""),[h,f]=k.useState(!1),[p,m]=k.useState(!1),{signUp:w}=Tn(),{speakText:S,uiTtsEnabled:T}=tr(),y=Yr(),v=D=>{T&&S(D)};k.useEffect(()=>{let D;return p&&(console.log("[SignUp] Success detected, scheduling navigation"),D=window.setTimeout(()=>{console.log("[SignUp] Navigation timer fired, redirecting to dashboard"),y("/dashboard")},1500)),()=>{D&&(console.log("[SignUp] Clearing navigation timer"),clearTimeout(D))}},[p,y]),console.log("[SignUp] Render state:",{loading:h,success:p,error:u});const b=async D=>{if(D.preventDefault(),console.log("[SignUp] Form submitted"),!t||!n||!i||!o){d("Please fill in all fields"),console.log("[SignUp] Validation failed: empty fields");return}if(i!==o){d("Passwords do not match"),console.log("[SignUp] Validation failed: passwords mismatch");return}if(i.length<6){d("Password must be at least 6 characters"),console.log("[SignUp] Validation failed: password too short");return}console.log("[SignUp] Validation passed, proceeding with signup"),d(""),f(!0),m(!1);try{console.log("[SignUp] Calling Firebase signUp...");const M=await w(n,i,t);console.log("[SignUp] Firebase signUp returned:",M),M.partial?(console.log("[SignUp] Partial success - user created but Firestore failed"),setTimeout(()=>{d(M.error||"Account created but user profile setup was incomplete."),m(!0),f(!1)},0)):(console.log("[SignUp] Complete success"),setTimeout(()=>{m(!0),f(!1),d("")},0))}catch(M){console.error("[SignUp] Firebase signUp failed:",M);let C="Failed to create an account. Please try again.";M.code==="auth/email-already-in-use"&&(C="An account with this email already exists"),setTimeout(()=>{d(C),m(!1),f(!1),console.log("[SignUp] Error state set")},0)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800 px-4 py-12 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full bg-gray-800/50 rounded-lg shadow-lg p-8",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx(jn,{className:"h-12 w-12 text-blue-400","aria-hidden":"true",onMouseEnter:()=>v("AI Tutor logo")})}),l.jsx("h2",{className:"text-center text-3xl font-extrabold text-white mb-6",onMouseEnter:()=>v("Create your account"),children:"Create your account"}),u&&l.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-md p-4 mb-6",role:"alert",children:l.jsxs("div",{className:"flex",children:[l.jsx(As,{className:"h-5 w-5 text-red-400 mr-2","aria-hidden":"true"}),l.jsx("span",{className:"text-red-300",children:u})]})}),l.jsxs("form",{className:"space-y-6",onSubmit:b,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>v("Full name"),children:"Full name"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(rd,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),l.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:t,onChange:D=>e(D.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your name","aria-required":"true"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>v("Email address"),children:"Email address"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Qd,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:D=>r(D.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address","aria-required":"true"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>v("Password"),children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Jp,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:i,onChange:D=>s(D.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Password (min. 6 characters)","aria-required":"true"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>v("Confirm password"),children:"Confirm password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Jp,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:o,onChange:D=>a(D.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirm password","aria-required":"true"})]})]}),l.jsx("div",{children:l.jsxs("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 font-medium transition-colors duration-200","aria-label":"Create your account",onMouseEnter:()=>v(h?"Creating account...":p?"Account created!":"Sign up"),children:[h&&!p?l.jsx("div",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:l.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-opacity-60 border-t-transparent rounded-full"})}):p?l.jsx("div",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:l.jsx(vi,{className:"h-5 w-5 text-green-400"})}):null,h&&!p?"Creating account...":p?"Account created!":"Sign up"]})})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-sm text-gray-400",onMouseEnter:()=>v("Already have an account?"),children:["Already have an account?"," ",l.jsx(Te,{to:"/auth/signin",className:"font-medium text-blue-400 hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500",onMouseEnter:()=>v("Sign in"),children:"Sign in"})]})}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs("p",{className:"text-xs text-gray-500",onMouseEnter:()=>v("By signing up, you agree to our Terms of Service and Privacy Policy"),children:["By signing up, you agree to our"," ",l.jsx(Te,{to:"/terms",className:"text-blue-400 hover:text-blue-300",onMouseEnter:()=>v("Terms of Service"),children:"Terms of Service"})," ","and"," ",l.jsx(Te,{to:"/privacy",className:"text-blue-400 hover:text-blue-300",onMouseEnter:()=>v("Privacy Policy"),children:"Privacy Policy"})]})})]})})},M3=()=>{const[t,e]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(!1),{resetPassword:u}=Tn(),d=async h=>{if(h.preventDefault(),!t){r("Please enter your email address");return}try{r(""),s(""),a(!0),await u(t),s("Check your email for password reset instructions")}catch(f){r("Failed to reset password. Please check if the email is correct."),console.error(f)}finally{a(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800 px-4 py-12 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full bg-gray-800/50 rounded-lg shadow-lg p-8",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx(jn,{className:"h-12 w-12 text-blue-400","aria-hidden":"true"})}),l.jsx("h2",{className:"text-center text-3xl font-extrabold text-white mb-6",children:"Reset your password"}),l.jsx("p",{className:"text-center text-gray-300 mb-8",children:"Enter your email address and we'll send you a link to reset your password."}),n&&l.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-md p-4 mb-6",role:"alert",children:l.jsxs("div",{className:"flex",children:[l.jsx(As,{className:"h-5 w-5 text-red-400 mr-2","aria-hidden":"true"}),l.jsx("span",{className:"text-red-300",children:n})]})}),i&&l.jsx("div",{className:"bg-green-500/20 border border-green-500 rounded-md p-4 mb-6",role:"alert",children:l.jsxs("div",{className:"flex",children:[l.jsx(vi,{className:"h-5 w-5 text-green-400 mr-2","aria-hidden":"true"}),l.jsx("span",{className:"text-green-300",children:i})]})}),l.jsxs("form",{className:"space-y-6",onSubmit:d,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Qd,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:h=>e(h.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address","aria-required":"true"})]})]}),l.jsx("div",{children:l.jsxs("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 font-medium transition-colors duration-200","aria-label":"Send password reset email",children:[o?l.jsx("div",{className:"mr-2 animate-spin h-5 w-5 border-2 border-white border-opacity-60 border-t-transparent rounded-full"}):null,o?"Sending...":"Reset password"]})})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs(Te,{to:"/auth/signin",className:"flex items-center justify-center text-sm font-medium text-blue-400 hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx(ay,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Back to sign in"]})})]})})},F3=()=>{const{currentUser:t}=Tn(),{speakText:e,uiTtsEnabled:n,highContrast:r}=tr(),[i,s]=k.useState([]),[o,a]=k.useState(!1),[u,d]=k.useState(null),h=p=>{n&&e(p)};k.useEffect(()=>{(async()=>{if(t){a(!0);try{const m=await t.getIdToken();if(!m)throw new Error("Authentication token not available");const y=((await De.get("http://localhost:5000/api/documents",{headers:{Authorization:`Bearer ${m}`}})).data.data||[]).map(v=>({id:v.id,title:v.name||"Untitled Document",uploadedAt:new Date(v.created_at),lastAccessed:new Date(v.updated_at||v.created_at),pageCount:v.page_count||0,processingStatus:v.processing_status||"completed"})).sort((v,b)=>b.lastAccessed.getTime()-v.lastAccessed.getTime()).slice(0,4);s(y),console.log("Recent documents loaded:",y.length)}catch(m){console.error("Error fetching recent documents:",m)}a(!1)}})()},[t]),k.useEffect(()=>{(async()=>{var m,w,S,T;if(t)try{const y=await t.getIdToken();if(!y)throw new Error("Authentication token not available");const v="http://localhost:5000";console.log("[Dashboard] Fetching user profile data from backend");const b=await De.get(`${v}/api/users/profile`,{headers:{Authorization:`Bearer ${y}`}}).catch(D=>(console.log("[Dashboard] User profile API not available, using Firebase Auth profile instead:",D),{data:null}));if((m=b.data)!=null&&m.data){const D=b.data.data;d({displayName:D.displayName||t.displayName||((w=t.email)==null?void 0:w.split("@")[0])||"Student",uid:D.uid,email:D.email}),console.log("[Dashboard] User profile loaded from backend API")}else d({displayName:t.displayName||((S=t.email)==null?void 0:S.split("@")[0])||"Student",uid:t.uid,email:t.email||""}),console.log("[Dashboard] Using Firebase Auth profile data as fallback")}catch(y){console.error("Error fetching user profile:",y),d({displayName:t.displayName||((T=t.email)==null?void 0:T.split("@")[0])||"Student",uid:t.uid,email:t.email||""})}})()},[t]);const f=p=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(p);return l.jsxs("div",{className:"pb-12",children:[l.jsxs("div",{className:`mb-8 ${r?"border-b border-white pb-6":"pb-6"}`,children:[l.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",onMouseEnter:()=>h(`Welcome back, ${(u==null?void 0:u.displayName)||"Student"}`),children:["Welcome back, ",(u==null?void 0:u.displayName)||(t==null?void 0:t.displayName)||"Student"]}),l.jsx("p",{className:`${r?"text-gray-200":"text-gray-300"}`,onMouseEnter:()=>h("Continue your learning journey with AI Tutor"),children:"Continue your learning journey with AI Tutor"})]}),l.jsxs("section",{className:"mb-10","aria-labelledby":"quick-actions-heading",children:[l.jsx("h2",{id:"quick-actions-heading",className:"text-xl font-semibold mb-4 text-white",onMouseEnter:()=>h("Quick Actions"),children:"Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[l.jsxs(Te,{to:"/dashboard/upload",className:`flex flex-col items-center justify-center p-6 rounded-lg ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>h("Upload Document"),children:[l.jsx(ks,{className:`h-10 w-10 mb-3 ${r?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),l.jsx("span",{className:"text-lg font-medium text-white",children:"Upload Document"})]}),l.jsxs(Te,{to:"/dashboard/chat",className:`flex flex-col items-center justify-center p-6 rounded-lg ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>h("Chat with AI Tutor"),children:[l.jsx(po,{className:`h-10 w-10 mb-3 ${r?"text-white":"text-purple-400"}`,"aria-hidden":"true"}),l.jsx("span",{className:"text-lg font-medium text-white",children:"Chat with AI Tutor"})]})]})]}),l.jsxs("section",{className:"mb-10","aria-labelledby":"recent-documents-heading",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{id:"recent-documents-heading",className:"text-xl font-semibold text-white",onMouseEnter:()=>h("Recent Documents"),children:"Recent Documents"}),l.jsxs(Te,{to:"/dashboard/documents",className:`flex items-center text-sm font-medium ${r?"text-white hover:underline":"text-blue-400 hover:text-blue-300"}`,onMouseEnter:()=>h("View all documents"),children:["View all",l.jsx(CS,{className:"h-4 w-4 ml-1","aria-hidden":"true"})]})]}),o?l.jsx("div",{className:`rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"} p-6 flex justify-center`,children:l.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-t-transparent rounded-full border-white"})}):i.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map(p=>l.jsxs(Te,{to:`/dashboard/documents/${p.id}`,className:`block rounded-lg p-5 ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>h(p.title),children:[l.jsxs("div",{className:"flex items-start mb-3",children:[l.jsx(xn,{className:`h-6 w-6 mr-2 flex-shrink-0 ${r?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),l.jsx("h3",{className:"text-base font-medium truncate text-white",children:p.title})]}),l.jsxs("div",{className:`flex items-center text-xs ${r?"text-gray-200":"text-gray-400"}`,children:[l.jsx(Xp,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),l.jsxs("span",{children:["Last accessed: ",f(p.lastAccessed)]})]}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsxs("span",{className:`text-xs ${r?"text-gray-200":"text-gray-400"}`,children:[p.pageCount," ",p.pageCount===1?"page":"pages"]}),p.processingStatus==="pending"&&l.jsx("span",{className:"text-xs bg-yellow-700/30 text-yellow-300 px-2 py-1 rounded",children:"Processing"}),p.processingStatus==="completed"&&l.jsx("span",{className:"text-xs bg-green-700/30 text-green-300 px-2 py-1 rounded",children:"Ready"}),p.processingStatus==="error"&&l.jsx("span",{className:"text-xs bg-red-700/30 text-red-300 px-2 py-1 rounded",children:"Error"})]})]},p.id))}):l.jsxs("div",{className:`rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"} p-8 text-center`,children:[l.jsx("p",{className:`mb-4 ${r?"text-white":"text-gray-300"}`,children:"You haven't uploaded any documents yet."}),l.jsxs(Te,{to:"/dashboard/upload",className:`inline-flex items-center px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} font-medium transition-colors duration-200`,onMouseEnter:()=>h("Upload your first document"),children:[l.jsx(ks,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload your first document"]})]})]})]})},V3=["application/pdf","image/png","image/jpeg","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],U3={"application/pdf":l.jsx(xn,{className:"text-red-400"}),"image/png":l.jsx(oc,{className:"text-blue-400"}),"image/jpeg":l.jsx(oc,{className:"text-blue-400"}),"text/plain":l.jsx(oc,{className:"text-gray-400"}),"application/msword":l.jsx(xn,{className:"text-blue-400"}),"application/vnd.openxmlformats-officedocument.wordprocessingml.document":l.jsx(xn,{className:"text-blue-400"})},z3={"application/pdf":"PDF Document","image/png":"PNG Image","image/jpeg":"JPEG Image","text/plain":"Text File","application/msword":"Word Document","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word Document"},$3=15*1024*1024,B3=()=>{const{currentUser:t}=Tn(),{speakText:e,uiTtsEnabled:n,highContrast:r}=tr(),[i,s]=k.useState([]),[o,a]=k.useState(""),[u,d]=k.useState(!1),[h,f]=k.useState(0),[p,m]=k.useState(!1),[w,S]=k.useState(""),T=k.useRef(null),y=Yr(),v=I=>{n&&e(I)},b=k.useCallback(I=>{if(I.length===0)return;const P=I[0];if(!V3.includes(P.type)){a("File type not supported. Please upload a PDF, image, or document file.");return}if(P.size>$3){a("File is too large. Maximum file size is 15MB.");return}a("");const B=P.name.split(".").slice(0,-1).join(".");if(S(B),s([P]),P.type.startsWith("image/")){const Y=Object.assign(P,{preview:URL.createObjectURL(P)});s([Y])}},[]),D=I=>{I.preventDefault(),I.stopPropagation()},M=I=>{I.preventDefault(),I.stopPropagation()},C=I=>{I.preventDefault(),I.stopPropagation()},E=I=>{I.preventDefault(),I.stopPropagation(),I.dataTransfer.files&&I.dataTransfer.files.length>0&&b(Array.from(I.dataTransfer.files))},_=()=>{T.current&&T.current.click()},N=I=>{I.target.files&&I.target.files.length>0&&b(Array.from(I.target.files))},R=()=>{s([]),S(""),T.current&&(T.current.value="")},j=async()=>{if(i.length===0){a("Please select a file to upload");return}if(!w.trim()){a("Please enter a document name");return}d(!0),f(0),a("");const I=new FormData;I.append("file",i[0]),I.append("name",w);try{const B="http://localhost:5000/api/documents/upload";console.log("Attempting to POST to URL:",B);const Y=await(t==null?void 0:t.getIdToken());if(!Y)throw new Error("Authentication token not available");const he=await De.post(B,I,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${Y}`},onUploadProgress:X=>{const V=Math.round(X.loaded*100/(X.total||100));f(V)}});m(!0),setTimeout(()=>{y(`/dashboard/documents/${he.data.document.id}`)},1500)}catch(P){console.error("Error uploading document:",P),a("Failed to upload document. Please try again.")}finally{d(!1)}};return l.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[l.jsx("h1",{className:"text-3xl font-bold mb-6 text-white",onMouseEnter:()=>v("Upload Document"),children:"Upload Document"}),l.jsx("div",{className:`mb-6 p-4 rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/60"}`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(v3,{className:`mr-3 h-5 w-5 flex-shrink-0 ${r?"text-white":"text-blue-400"}`}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium text-white mb-2",children:"Document Processing with AI Tutor"}),l.jsxs("ul",{className:`list-disc list-inside space-y-1 ${r?"text-gray-200":"text-gray-300"}`,children:[l.jsx("li",{children:"Upload any document: PDF, image with text, Word document, or text file"}),l.jsx("li",{children:"AI Tutor will process the text content, making it accessible for your learning"}),l.jsx("li",{children:"Once processed, you can read, get summaries, and ask questions about the material"}),l.jsx("li",{children:"Maximum file size: 15MB"})]})]})]})}),o&&l.jsx("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/50 rounded-lg",role:"alert","aria-live":"assertive",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(As,{className:`h-5 w-5 ${r?"text-white":"text-red-400"} mr-2`,"aria-hidden":"true"}),l.jsx("p",{className:`${r?"text-white":"text-red-300"}`,children:o})]})}),p?l.jsxs("div",{className:"flex flex-col items-center justify-center p-10 text-center",children:[l.jsx(vi,{className:`h-16 w-16 mb-4 ${r?"text-white":"text-green-500"}`,"aria-hidden":"true"}),l.jsx("h2",{className:"text-xl font-bold mb-2 text-white",children:"Upload Successful!"}),l.jsx("p",{className:`mb-6 ${r?"text-gray-200":"text-gray-300"}`,children:"Your document is being processed. You'll be redirected shortly..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`mb-6 border-2 border-dashed rounded-lg p-10 text-center ${r?"border-white hover:border-gray-300 bg-gray-900":"border-gray-600 hover:border-blue-500 bg-gray-800/30"} transition-colors duration-200 cursor-pointer`,onDragOver:D,onDragEnter:M,onDragLeave:C,onDrop:E,onClick:_,onMouseEnter:()=>v("Drag and drop your file here, or click to browse"),role:"button","aria-label":"Upload document area",tabIndex:0,children:[l.jsx("input",{ref:T,type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.txt,.doc,.docx",onChange:N,"aria-hidden":"true"}),i.length===0?l.jsxs("div",{className:"space-y-3",children:[l.jsx(ks,{className:`mx-auto h-12 w-12 ${r?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),l.jsx("h3",{className:"text-lg font-medium text-white",children:"Drag and drop your file here"}),l.jsxs("p",{className:`${r?"text-gray-300":"text-gray-400"}`,children:["or ",l.jsx("span",{className:`${r?"text-white underline":"text-blue-400"}`,children:"browse"})," to upload"]}),l.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"Supported formats: PDF, PNG, JPG, TXT, DOC, DOCX"})]}):l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"flex justify-center",children:i[0].type.startsWith("image/")&&i[0].preview?l.jsx("img",{src:i[0].preview,alt:"Document preview",className:"h-32 object-contain rounded border border-gray-700"}):l.jsx("div",{className:`h-16 w-16 flex items-center justify-center rounded-full ${r?"bg-white":"bg-gray-700"}`,children:U3[i[0].type]||l.jsx(oc,{className:r?"text-black":"text-gray-300"})})}),l.jsx("h3",{className:"text-lg font-medium text-white",children:i[0].name}),l.jsxs("p",{className:`text-sm ${r?"text-gray-300":"text-gray-400"}`,children:[z3[i[0].type]||"Document","  ",(i[0].size/1024/1024).toFixed(2)," MB"]}),l.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),R()},className:`inline-flex items-center px-3 py-1 rounded ${r?"bg-white text-black hover:bg-gray-200":"bg-gray-700 text-gray-200 hover:bg-gray-600"} text-sm transition-colors duration-200`,"aria-label":"Remove file",onMouseEnter:()=>v("Remove file"),children:[l.jsx(Vl,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Remove"]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("label",{htmlFor:"document-name",className:`block text-sm font-medium mb-2 ${r?"text-white":"text-gray-300"}`,children:"Document Name"}),l.jsx("input",{type:"text",id:"document-name",value:w,onChange:I=>S(I.target.value),className:`block w-full px-4 py-3 rounded-md ${r?"bg-gray-900 text-white border border-white focus:border-blue-500":"bg-gray-700 text-white border border-gray-600 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Enter a name for your document","aria-required":"true",disabled:u}),l.jsx("p",{className:`mt-1 text-sm ${r?"text-gray-300":"text-gray-400"}`,children:"This name will help you identify the document later"})]}),u&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsx("span",{className:`text-sm ${r?"text-white":"text-gray-300"}`,children:"Uploading..."}),l.jsxs("span",{className:`text-sm ${r?"text-white":"text-gray-300"}`,children:[h,"%"]})]}),l.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full ${r?"bg-white":"bg-blue-500"} transition-all duration-300 ease-in-out`,style:{width:`${h}%`},role:"progressbar","aria-valuenow":h,"aria-valuemin":0,"aria-valuemax":100})})]}),l.jsxs("div",{className:"flex justify-end space-x-4",children:[l.jsx("button",{type:"button",onClick:()=>y("/dashboard"),className:`px-4 py-2 rounded-md ${r?"bg-gray-900 text-white border border-white hover:bg-gray-800":"bg-gray-700 text-white hover:bg-gray-600"} font-medium transition-colors duration-200`,disabled:u,onMouseEnter:()=>v("Cancel"),children:"Cancel"}),l.jsx("button",{type:"button",onClick:j,disabled:u||i.length===0,className:`px-6 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200 disabled:bg-gray-500 disabled:text-gray-800":"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-500/50 disabled:text-gray-300"} font-medium transition-colors duration-200 flex items-center`,onMouseEnter:()=>v(u?"Uploading...":"Upload Document"),children:u?l.jsxs(l.Fragment,{children:[l.jsx(RS,{className:"animate-spin h-5 w-5 mr-2","aria-hidden":"true"}),"Uploading..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ks,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"Upload Document"]})})]})]})]})},xr=(t,e="")=>{const[n,r]=k.useState("idle"),[i,s]=k.useState(null),[o,a]=k.useState([]),[u,d]=k.useState(null),h=k.useRef(null),f=k.useRef(null),p=k.useRef(null),m=k.useCallback(()=>{h.current&&(h.current.pause(),h.current.src&&URL.revokeObjectURL(h.current.src),h.current=null),r("idle"),s(null),a([]),f.current=null,p.current=null},[]),w=k.useCallback(async(y={})=>{r("loading"),d(null);let v=null;const b=async(C,E)=>{const _=await fetch(E);if(!_.ok)throw new Error("Failed to fetch timepoints");const N=await _.json();return a(N||[]),{audio:new Audio(C),timepoints:N}},D=async(C,E)=>{const _=await fetch(`data:audio/mpeg;base64,${C}`).then(I=>I.blob()),N=URL.createObjectURL(_);v=N;const R=new Audio(N),j=E||[];return a(j),{audio:R,timepoints:j}},M=async C=>{if(!C)throw new Error("No text provided for on-demand synthesis.");const E=await on.synthesizeText(C),_=E.audioContent,N=E.timepoints;if(a(N||[]),!_)throw new Error("No audio content received from on-demand TTS service");const R=await fetch(`data:audio/mpeg;base64,${_}`).then(P=>P.blob()),j=URL.createObjectURL(R);return v=j,{audio:new Audio(j),timepoints:N}};try{let C,E;if(y.audioContent){const _=await D(y.audioContent,y.timepoints);C=_.audio,E=_.timepoints}else if(t&&!y.text)try{console.log(`TTS_DEBUG: Attempting to fetch pre-generated assets for document ${t}`);const{audio_url:_,timepoints_url:N}=await on.getTtsAssets(t),R=await b(_,N);C=R.audio,E=R.timepoints,console.log("TTS_DEBUG: Successfully loaded pre-generated TTS assets.")}catch(_){console.warn(`TTS_DEBUG: Could not fetch pre-generated assets for document ${t}. Falling back to on-demand synthesis.`,_);const N=await M(y.text||e);C=N.audio,E=N.timepoints}else{console.log("TTS_DEBUG: Using on-demand synthesis.");const _=await M(y.text||e);C=_.audio,E=_.timepoints}h.current=C,C.ontimeupdate=()=>{var N;let _=null;for(let R=0;R<E.length;R++){const j=E[R];if(C.currentTime>=j.time_seconds)_=j;else break}_&&((N=p.current)==null?void 0:N.mark_name)!==_.mark_name&&(s(_),p.current=_)},C.onended=()=>{v&&URL.revokeObjectURL(v),m()},C.onerror=_=>{console.error("Audio playback error:",_),d("Failed to play audio"),v&&URL.revokeObjectURL(v),m()},f.current!==null&&(C.currentTime=f.current,f.current=null),await C.play(),r("playing")}catch(C){console.error("Error in startPlayback:",C),d(C instanceof Error?C.message:String(C)),m()}},[t,e,m]),S=k.useCallback(async y=>{var v,b;if(y){n!=="idle"&&m(),await w(y);return}switch(n){case"playing":(v=h.current)==null||v.pause(),r("paused");break;case"paused":(b=h.current)==null||b.play(),r("playing");break;case"loading":m();break;case"idle":await w();break}},[n,w,m]),T=k.useCallback(y=>{h.current&&(n==="playing"||n==="paused")?(h.current.currentTime=y,n==="paused"&&(h.current.play(),r("playing"))):n==="idle"&&(f.current=y,S())},[n,S]);return k.useEffect(()=>()=>m(),[m]),{playAudio:S,stopAudio:m,seekAndPlay:T,status:n,error:u,activeTimepoint:i,wordTimepoints:o}},DS=k.createContext(void 0),H3=({children:t})=>{const[e,n]=k.useState(null),r=k.useMemo(()=>({activeDocumentId:e,setActiveDocumentId:n}),[e]);return l.jsx(DS.Provider,{value:r,children:t})},OS=()=>{const t=k.useContext(DS);if(t===void 0)throw new Error("useDocument must be used within a DocumentProvider");return t},q3=({wordTimepoints:t,activeTimepoint:e,className:n="",onWordClick:r})=>{if(console.log(`SpeakableDocumentContent: Received ${t?t.length:0} timepoints`),t&&t.length>0){console.log("First 5 timepoints:",t.slice(0,5)),console.log("Last 5 timepoints:",t.slice(-5));const o=t.filter(a=>a&&a.mark_name==="PARAGRAPH_BREAK");console.log(`Found ${o.length} PARAGRAPH_BREAK markers in timepoints array`),o.length>0&&console.log("Paragraph break positions:",o.map(a=>`at ${a.time_seconds.toFixed(2)}s (index ${t.indexOf(a)}/${t.length})`))}if(!t||t.length===0)return l.jsx("div",{className:`${n} text-center text-gray-500 p-8`,children:l.jsx("p",{children:"No text content available to display for this document."})});const i=[];let s=[];return t.forEach(o=>{if(o&&o.mark_name){const a=o.mark_name==="PARAGRAPH_BREAK",u=o.mark_name.includes(`
`),d=o.mark_name.trim();d&&!a&&s.push({...o,mark_name:d}),(a||u)&&(s.length>0&&i.push(s),s=[],console.log("Found paragraph break:",a?"PARAGRAPH_BREAK marker":"newline character"))}}),s.length>0&&i.push(s),l.jsx("div",{className:`${n} font-sans`,children:i.map((o,a)=>l.jsx("p",{className:"mb-4 last:mb-0",children:o.map((u,d)=>{const h=e&&u&&u.time_seconds===e.time_seconds&&u.mark_name===e.mark_name;return l.jsxs("span",{className:`${h?"bg-blue-300 dark:bg-blue-700 rounded-md":"bg-transparent"} cursor-pointer`,onClick:()=>r(u.time_seconds),children:[u.mark_name," "]},`${a}-${d}`)})},a))})},W3=()=>{const{id:t}=sI(),{currentUser:e,getAuthToken:n}=Tn(),{speakText:r,uiTtsEnabled:i,highContrast:s,toggleUiTts:o}=tr(),[a,u]=k.useState(null),[d,h]=k.useState(!0),[f,p]=k.useState(null),[m,w]=k.useState("read"),[S,T]=k.useState(16),[y,v]=k.useState(1.5),[b,D]=k.useState(!1),M=Yr(),C=Jn(),{setActiveDocumentId:E}=OS(),{playAudio:_,stopAudio:N,seekAndPlay:R,status:j,activeTimepoint:I,wordTimepoints:P}=xr(t||null,(a==null?void 0:a.content)||""),B=()=>j==="loading"?"Loading...":j==="playing"?"Pause":j==="paused"?"Resume":"Read Aloud",Y=V=>{i&&r(V)};k.useEffect(()=>{(async()=>{if(!(!e||!t)){h(!0),p(null);try{const H=await n();if(!H)throw new Error("Authentication token not available");const re=await De.get(`http://localhost:5000/api/documents/${t}?include_content=true`,{headers:{Authorization:`Bearer ${H}`}});u(re.data)}catch(H){console.error("Error fetching document:",H),p("Failed to load document. Please try again.")}finally{h(!1)}}})()},[e,t,n]),k.useEffect(()=>{t&&E(t)},[t,E]),k.useEffect(()=>{const H=new URLSearchParams(C.search).get("tab");H==="quiz"?w("quiz"):H==="chat"?w("chat"):m!=="chat"&&m!=="quiz"&&w("read")},[C.search,m]);const he=async()=>{if(a)try{const V=await n();if(!V)throw new Error("Authentication token not available");const O=await De.get(`http://localhost:5000/api/documents/${t}/download`,{headers:{Authorization:`Bearer ${V}`},responseType:"blob"}),re=new Blob([O.data]),ie=window.URL.createObjectURL(re),L=window.document.createElement("a");L.href=ie,L.download=a.original_filename||"download",window.document.body.appendChild(L),L.click(),window.URL.revokeObjectURL(ie),L.remove()}catch(V){console.error("Error downloading document:",V),p("Failed to download document.")}},X=()=>{if(!a)return null;switch(m){case"read":return l.jsx("div",{className:"p-4 sm:p-6 lg:p-8",style:{fontSize:`${S}px`,lineHeight:y},children:j==="playing"||j==="paused"||P&&P.length>0?l.jsx(q3,{wordTimepoints:P,activeTimepoint:I,className:"text-foreground",onWordClick:R}):l.jsx("p",{className:"whitespace-pre-wrap font-sans text-foreground",children:a.content})});case"chat":return l.jsxs("div",{className:"p-6 h-full flex flex-col items-center justify-center",children:[l.jsx(po,{className:`h-16 w-16 mb-4 ${s?"text-white":"text-blue-400"}`}),l.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"Ask Questions"}),l.jsx("p",{className:`text-center max-w-lg mb-6 ${s?"text-gray-200":"text-gray-300"}`,children:"Chat with AI Tutor about this document to get summaries or explanations."}),l.jsxs("button",{className:`px-6 py-3 rounded-md ${s?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} font-medium transition-colors duration-200 flex items-center`,onClick:()=>M(`/dashboard/chat?document=${t}`),children:[l.jsx(po,{className:"h-5 w-5 mr-2"}),"Start Chat"]})]});case"quiz":return l.jsxs("div",{className:"p-6 h-full flex flex-col items-center justify-center",children:[l.jsx(ac,{className:`h-16 w-16 mb-4 ${s?"text-white":"text-green-400"}`}),l.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"Test Your Knowledge"}),l.jsx("p",{className:`text-center max-w-lg mb-6 ${s?"text-gray-200":"text-gray-300"}`,children:"Generate quizzes based on this document to test your understanding."}),l.jsxs("button",{className:`px-6 py-3 rounded-md ${s?"bg-white text-black hover:bg-gray-200":"bg-green-600 text-white hover:bg-green-700"} font-medium transition-colors duration-200 flex items-center`,onClick:()=>M(`/dashboard/chat?document=${t}&start_quiz=true`),children:[l.jsx(ac,{className:"h-5 w-5 mr-2"}),"Generate Quiz"]})]});default:return null}};return d?l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsx(an,{className:"h-12 w-12 animate-spin text-blue-500"})}):f?l.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-500",children:[l.jsx(As,{className:"h-12 w-12 mb-4"}),l.jsx("p",{children:f}),l.jsx("button",{onClick:()=>M("/dashboard"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go to Dashboard"})]}):l.jsxs("div",{className:`p-4 sm:p-6 lg:p-8 ${s?"bg-black text-white":"bg-gray-900 text-gray-100"} min-h-screen flex flex-col`,children:[l.jsxs("header",{className:"flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:()=>M("/dashboard"),className:`p-2 rounded-full ${s?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,onMouseEnter:()=>Y("Back to dashboard"),children:l.jsx(p3,{className:"h-5 w-5"})}),l.jsx("h1",{className:"text-2xl font-bold text-white",children:(a==null?void 0:a.name)||"Document"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:()=>D(!b),className:`p-2 rounded-md ${s?"bg-gray-700":"bg-gray-600"} text-white`,onMouseEnter:()=>Y("Accessibility Settings"),children:[" ",l.jsx(Ho,{className:"h-5 w-5"})," "]}),l.jsxs("button",{onClick:he,className:`p-2 rounded-md ${s?"bg-gray-700":"bg-gray-600"} text-white`,onMouseEnter:()=>Y("Download document"),children:[" ",l.jsx(IS,{className:"h-5 w-5"})," "]}),l.jsxs("button",{onClick:_,disabled:j==="loading"||!(a!=null&&a.content),className:`px-4 py-2 rounded-md flex items-center justify-center transition-colors duration-200 ${j==="loading"?"bg-gray-600 text-gray-400 cursor-not-allowed":s?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"}`,onMouseEnter:()=>Y(B()),children:[j==="loading"?l.jsx(an,{className:"h-5 w-5 animate-spin"}):j==="playing"?l.jsx(E3,{className:"h-5 w-5"}):l.jsx(uy,{className:"h-5 w-5"}),l.jsx("span",{className:"ml-2",children:B()})]}),(j==="playing"||j==="paused")&&l.jsxs("button",{onClick:N,className:`px-4 py-2 rounded-md flex items-center justify-center transition-colors duration-200 ${s?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"}`,onMouseEnter:()=>Y("Stop reading"),children:[l.jsx(PS,{className:"h-5 w-5"}),l.jsx("span",{className:"ml-2",children:"Stop"})]})]})]}),b&&l.jsxs("div",{className:`mb-6 p-4 rounded-lg ${s?"bg-gray-800":"bg-gray-700"}`,children:[l.jsx("h2",{className:"text-lg font-semibold mb-3 text-white",children:"Reading Settings"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"font-size",className:`block text-sm font-medium mb-1 ${s?"text-white":"text-gray-300"}`,children:["Font Size: ",S,"px"]}),l.jsx("input",{id:"font-size",type:"range",min:"12",max:"28",step:"1",value:S,onChange:V=>T(Number(V.target.value)),className:"w-full"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"line-spacing",className:`block text-sm font-medium mb-1 ${s?"text-white":"text-gray-300"}`,children:["Line Spacing: ",y]}),l.jsx("input",{id:"line-spacing",type:"range",min:"1",max:"3",step:"0.1",value:y,onChange:V=>v(Number(V.target.value)),className:"w-full"})]}),l.jsx("div",{className:"flex items-center",children:l.jsxs("button",{onClick:o,className:`flex items-center px-4 py-2 rounded-md ${i?s?"bg-white text-black":"bg-blue-600 text-white":s?"bg-gray-900 text-white border border-white":"bg-gray-700 text-gray-300"} transition-colors duration-200`,children:[l.jsx(jn,{className:"h-5 w-5 mr-2"}),i?"UI TTS: On":"UI TTS: Off"]})})]})]}),l.jsx("div",{className:"border-b border-gray-700",children:l.jsxs("nav",{className:"flex space-x-8","aria-label":"Document navigation",children:[l.jsxs("button",{className:`py-3 px-1 ${m==="read"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>w("read"),onMouseEnter:()=>Y("Read document content"),"aria-current":m==="read"?"page":void 0,children:[l.jsx(xn,{className:"h-5 w-5 mr-2 inline-block"}),"Read"]}),l.jsxs("button",{className:`py-3 px-1 ${m==="chat"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>w("chat"),onMouseEnter:()=>Y("Chat with the document"),"aria-current":m==="chat"?"page":void 0,children:[l.jsx(po,{className:"h-5 w-5 mr-2 inline-block"}),"Chat"]}),l.jsxs("button",{className:`py-3 px-1 ${m==="quiz"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>w("quiz"),onMouseEnter:()=>Y("Test your knowledge"),"aria-current":m==="quiz"?"page":void 0,children:[l.jsx(ac,{className:"h-5 w-5 mr-2 inline-block"}),"Quiz"]})]})})]}),l.jsx("main",{className:"flex-grow overflow-auto",children:l.jsx("div",{className:`${s?"bg-gray-900":"bg-gray-800/50"} rounded-lg h-full`,children:X()})})]})},K3=()=>{var P;const{currentUser:t}=Tn(),{speakText:e,uiTtsEnabled:n,highContrast:r}=tr(),[i,s]=k.useState([]),[o,a]=k.useState(!0),[u,d]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState("date"),[w,S]=k.useState("desc"),[T,y]=k.useState(!1),[v,b]=k.useState(null),D=B=>{n&&e(B)};k.useEffect(()=>{(async()=>{if(t)try{a(!0);const Y=await t.getIdToken();if(!Y)throw new Error("Authentication token not available");const X=await De.get("http://localhost:5000/api/documents",{headers:{Authorization:`Bearer ${Y}`}});s(X.data||[])}catch(Y){console.error("Error fetching documents:",Y),d("Failed to load documents. Please try again.")}finally{a(!1)}})()},[t]);const C=[...i.filter(B=>B.name.toLowerCase().includes(h.toLowerCase())||B.original_filename.toLowerCase().includes(h.toLowerCase()))].sort((B,Y)=>{if(p==="date"){const he=new Date(w==="asc"?B.created_at:Y.created_at).getTime(),X=new Date(w==="asc"?Y.created_at:B.created_at).getTime();return he-X}else return p==="name"?w==="asc"?B.name.localeCompare(Y.name):Y.name.localeCompare(B.name):w==="asc"?B.file_type.localeCompare(Y.file_type):Y.file_type.localeCompare(B.file_type)}),E=B=>{const Y=new Date(B);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(Y)},_=B=>{switch(B.toLowerCase()){case"pdf":return l.jsx(xn,{className:r?"text-white":"text-red-400"});case"png":case"jpg":case"jpeg":return l.jsx(xn,{className:r?"text-white":"text-blue-400"});case"txt":return l.jsx(xn,{className:r?"text-white":"text-gray-400"});case"doc":case"docx":return l.jsx(xn,{className:r?"text-white":"text-blue-500"});default:return l.jsx(xn,{className:r?"text-white":"text-gray-400"})}},N=B=>{n&&e("Delete document. Confirm action."),b(B),y(!0)},R=async()=>{if(!(!v||!t))try{const B=await t.getIdToken();if(!B)throw new Error("Authentication token not available");await De.delete(`http://localhost:5000/api/documents/${v}`,{headers:{Authorization:`Bearer ${B}`}}),s(he=>he.filter(X=>X.id!==v)),n&&e("Document deleted successfully.")}catch(B){console.error("Error deleting document:",B),d("Failed to delete document. Please try again."),n&&e("Failed to delete document.")}finally{y(!1),b(null)}},j=()=>{y(!1),b(null),n&&e("Deletion cancelled.")},I=B=>{p===B?S(w==="asc"?"desc":"asc"):(m(B),S(B==="date"?"desc":"asc"))};return l.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",onMouseEnter:()=>D("My Documents"),children:"My Documents"}),l.jsxs(Te,{to:"/dashboard/upload",className:`flex items-center px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors duration-200`,onMouseEnter:()=>D("Upload New Document"),children:[l.jsx(ks,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload New Document"]})]}),l.jsx("div",{className:`p-4 mb-6 rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"}`,children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(N3,{className:`h-5 w-5 ${r?"text-white":"text-gray-400"}`,"aria-hidden":"true"})}),l.jsx("input",{type:"text",placeholder:"Search documents...",value:h,onChange:B=>f(B.target.value),className:`pl-10 pr-4 py-2 w-full rounded-md ${r?"bg-black border border-white text-white placeholder-gray-400":"bg-gray-700 border border-gray-600 text-white placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Search documents"})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("button",{onClick:()=>I("date"),className:`px-3 py-2 rounded-md flex items-center ${p==="date"?r?"bg-white text-black":"bg-blue-600 text-white":r?"bg-gray-900 border border-white text-white hover:bg-gray-800":"bg-gray-700 text-gray-300 hover:bg-gray-600"} transition-colors duration-200`,"aria-pressed":p==="date",onMouseEnter:()=>D("Sort by date"),children:[l.jsx(Xp,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Date",p==="date"&&l.jsx("span",{className:"ml-1",children:w==="asc"?"":""})]}),l.jsxs("button",{onClick:()=>I("name"),className:`px-3 py-2 rounded-md flex items-center ${p==="name"?r?"bg-white text-black":"bg-blue-600 text-white":r?"bg-gray-900 border border-white text-white hover:bg-gray-800":"bg-gray-700 text-gray-300 hover:bg-gray-600"} transition-colors duration-200`,"aria-pressed":p==="name",onMouseEnter:()=>D("Sort by name"),children:[l.jsx(R3,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Name",p==="name"&&l.jsx("span",{className:"ml-1",children:w==="asc"?"":""})]}),l.jsxs("button",{onClick:()=>I("type"),className:`px-3 py-2 rounded-md flex items-center ${p==="type"?r?"bg-white text-black":"bg-blue-600 text-white":r?"bg-gray-900 border border-white text-white hover:bg-gray-800":"bg-gray-700 text-gray-300 hover:bg-gray-600"} transition-colors duration-200`,"aria-pressed":p==="type",onMouseEnter:()=>D("Sort by file type"),children:[l.jsx(AS,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Type",p==="type"&&l.jsx("span",{className:"ml-1",children:w==="asc"?"":""})]})]})]})}),o?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(RS,{className:`h-12 w-12 animate-spin mb-4 ${r?"text-white":"text-blue-400"}`}),l.jsx("p",{className:`text-lg ${r?"text-white":"text-gray-300"}`,children:"Loading your documents..."})]}):u?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(As,{className:`h-12 w-12 mb-4 ${r?"text-white":"text-red-400"}`}),l.jsx("p",{className:`text-lg mb-2 ${r?"text-white":"text-gray-300"}`,children:u}),l.jsx("button",{onClick:()=>window.location.reload(),className:`px-4 py-2 mt-4 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors duration-200`,children:"Try Again"})]}):C.length===0?l.jsx("div",{className:`rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"} p-8 text-center`,children:h?l.jsxs("div",{children:[l.jsx("p",{className:`mb-4 ${r?"text-white":"text-gray-300"}`,children:"No documents match your search query."}),l.jsx("button",{onClick:()=>f(""),className:`px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors duration-200`,children:"Clear Search"})]}):l.jsxs("div",{children:[l.jsx("p",{className:`mb-4 ${r?"text-white":"text-gray-300"}`,children:"You haven't uploaded any documents yet."}),l.jsxs(Te,{to:"/dashboard/upload",className:`inline-flex items-center px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} font-medium transition-colors duration-200`,onMouseEnter:()=>D("Upload your first document"),children:[l.jsx(ks,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload your first document"]})]})}):l.jsx("div",{className:"grid grid-cols-1 gap-4",children:C.map(B=>l.jsx(Te,{to:`/dashboard/documents/${B.id}`,className:`block p-4 rounded-lg ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>D(B.name),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:`p-3 rounded-md mr-4 ${r?"bg-black":"bg-gray-700"}`,children:_(B.file_type)}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium text-white mb-1",children:B.name}),l.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[l.jsxs("span",{className:`flex items-center text-xs ${r?"text-gray-300":"text-gray-400"}`,children:[l.jsx(Xp,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),E(B.created_at)]}),l.jsxs("span",{className:`flex items-center text-xs ${r?"text-gray-300":"text-gray-400"}`,children:[l.jsx(xn,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),B.file_type.toUpperCase()]}),l.jsxs("span",{className:`flex items-center text-xs ${r?"text-gray-300":"text-gray-400"}`,children:[l.jsx(NS,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),Math.round(B.content_length/1e3),"K characters"]})]})]})]}),l.jsxs("div",{className:"flex items-center",children:[B.processing_status==="pending"&&l.jsx("span",{className:"text-xs bg-yellow-700/30 text-yellow-300 px-2 py-1 rounded mr-2",children:"Processing"}),B.processing_status==="completed"&&l.jsx("span",{className:"text-xs bg-green-700/30 text-green-300 px-2 py-1 rounded mr-2",children:"Ready"}),B.processing_status==="error"&&l.jsx("span",{className:"text-xs bg-red-700/30 text-red-300 px-2 py-1 rounded mr-2",children:"Error"}),l.jsx(CS,{className:`h-5 w-5 ${r?"text-white":"text-gray-400"}`,"aria-hidden":"true"}),l.jsx("button",{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),N(B.id)},className:`p-1.5 rounded-full transition-colors duration-200 ${r?"text-red-400 hover:bg-red-700 hover:text-white focus:bg-red-700 focus:text-white":"text-gray-400 hover:bg-red-100 hover:text-red-500 dark:hover:bg-red-700 dark:hover:text-white focus:bg-red-100 focus:text-red-500"}`,"aria-label":"Delete document",onMouseEnter:()=>D("Delete this document"),title:"Delete Document",children:l.jsx(nm,{className:"h-4 w-4"})})]})]})},B.id))}),T&&v&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:`p-6 rounded-lg shadow-xl w-full max-w-md ${r?"bg-black border-2 border-white":"bg-gray-800"}`,children:[l.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Confirm Deletion"}),l.jsxs("p",{className:`mb-6 ${r?"text-gray-200":"text-gray-300"}`,children:["Are you sure you want to delete the document: ",l.jsx("br",{}),l.jsx("strong",{className:`font-medium ${r?"text-blue-300":"text-blue-400"}`,children:((P=i.find(B=>B.id===v))==null?void 0:P.name)||"this document"}),"?",l.jsx("br",{}),l.jsx("br",{}),"This action cannot be undone."]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx("button",{onClick:j,className:`px-4 py-2 rounded-md font-medium ${r?"bg-gray-600 text-white hover:bg-gray-500 focus:ring-2 focus:ring-gray-400":"bg-gray-600 text-white hover:bg-gray-500 focus:ring-2 focus:ring-gray-500"} transition-colors`,onMouseEnter:()=>D("Cancel deletion"),children:"Cancel"}),l.jsx("button",{onClick:R,className:`px-4 py-2 rounded-md font-medium ${r?"bg-red-500 text-white hover:bg-red-400 focus:ring-2 focus:ring-red-300":"bg-red-600 text-white hover:bg-red-500 focus:ring-2 focus:ring-red-500"} transition-colors`,onMouseEnter:()=>D("Confirm delete document"),children:"Delete"})]})]})})]})};let G3={data:""},Q3=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||G3,Y3=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,X3=/\/\*[^]*?\*\/|  +/g,Rw=/\n+/g,pi=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?pi(o,s):s+"{"+pi(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=pi(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,a):a?a+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=pi.p?pi.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Sr={},LS=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+LS(t[n]);return e}return t},J3=(t,e,n,r,i)=>{let s=LS(t),o=Sr[s]||(Sr[s]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(s));if(!Sr[o]){let u=s!==t?t:(d=>{let h,f,p=[{}];for(;h=Y3.exec(d.replace(X3,""));)h[4]?p.shift():h[3]?(f=h[3].replace(Rw," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][h[1]]=h[2].replace(Rw," ").trim();return p[0]})(t);Sr[o]=pi(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let a=n&&Sr.g?Sr.g:null;return n&&(Sr.g=Sr[o]),((u,d,h,f)=>{f?d.data=d.data.replace(f,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(Sr[o],e,r,a),o},Z3=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),u=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=u?"."+u:a&&typeof a=="object"?a.props?"":pi(a,""):a===!1?"":a}return r+i+(o??"")},"");function Yd(t){let e=this||{},n=t.call?t(e.p):t;return J3(n.unshift?n.raw?Z3(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,Q3(e.target),e.g,e.o,e.k)}let MS,rm,im;Yd.bind({g:1});let Gr=Yd.bind({k:1});function e5(t,e,n,r){pi.p=e,MS=t,rm=n,im=r}function Wi(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),u=a.className||i.className;n.p=Object.assign({theme:rm&&rm()},a),n.o=/ *go\d+/.test(u),a.className=Yd.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=a.as||t,delete a.as),im&&d[0]&&im(a),MS(d,a)}return i}}var t5=t=>typeof t=="function",id=(t,e)=>t5(t)?t(e):t,n5=(()=>{let t=0;return()=>(++t).toString()})(),FS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),r5=20,VS=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r5)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return VS(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},lc=[],ls={toasts:[],pausedAt:void 0},Rs=t=>{ls=VS(ls,t),lc.forEach(e=>{e(ls)})},i5={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},s5=(t={})=>{let[e,n]=k.useState(ls),r=k.useRef(ls);k.useEffect(()=>(r.current!==ls&&n(ls),lc.push(n),()=>{let s=lc.indexOf(n);s>-1&&lc.splice(s,1)}),[]);let i=e.toasts.map(s=>{var o,a,u;return{...t,...t[s.type],...s,removeDelay:s.removeDelay||((o=t[s.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:s.duration||((a=t[s.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||i5[s.type],style:{...t.style,...(u=t[s.type])==null?void 0:u.style,...s.style}}});return{...e,toasts:i}},o5=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||n5()}),Ul=t=>(e,n)=>{let r=o5(e,t,n);return Rs({type:2,toast:r}),r.id},Pe=(t,e)=>Ul("blank")(t,e);Pe.error=Ul("error");Pe.success=Ul("success");Pe.loading=Ul("loading");Pe.custom=Ul("custom");Pe.dismiss=t=>{Rs({type:3,toastId:t})};Pe.remove=t=>Rs({type:4,toastId:t});Pe.promise=(t,e,n)=>{let r=Pe.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?id(e.success,i):void 0;return s?Pe.success(s,{id:r,...n,...n==null?void 0:n.success}):Pe.dismiss(r),i}).catch(i=>{let s=e.error?id(e.error,i):void 0;s?Pe.error(s,{id:r,...n,...n==null?void 0:n.error}):Pe.dismiss(r)}),t};var a5=(t,e)=>{Rs({type:1,toast:{id:t,height:e}})},l5=()=>{Rs({type:5,time:Date.now()})},Ba=new Map,u5=1e3,c5=(t,e=u5)=>{if(Ba.has(t))return;let n=setTimeout(()=>{Ba.delete(t),Rs({type:4,toastId:t})},e);Ba.set(t,n)},d5=t=>{let{toasts:e,pausedAt:n}=s5(t);k.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let u=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(u<0){a.visible&&Pe.dismiss(a.id);return}return setTimeout(()=>Pe.dismiss(a.id),u)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=k.useCallback(()=>{n&&Rs({type:6,time:Date.now()})},[n]),i=k.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:u=8,defaultPosition:d}=o||{},h=e.filter(m=>(m.position||d)===(s.position||d)&&m.height),f=h.findIndex(m=>m.id===s.id),p=h.filter((m,w)=>w<f&&m.visible).length;return h.filter(m=>m.visible).slice(...a?[p+1]:[0,p]).reduce((m,w)=>m+(w.height||0)+u,0)},[e]);return k.useEffect(()=>{e.forEach(s=>{if(s.dismissed)c5(s.id,s.removeDelay);else{let o=Ba.get(s.id);o&&(clearTimeout(o),Ba.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:a5,startPause:l5,endPause:r,calculateOffset:i}}},h5=Gr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,f5=Gr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,p5=Gr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,m5=Wi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${h5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${f5} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${p5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,g5=Gr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,y5=Wi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${g5} 1s linear infinite;
`,x5=Gr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,v5=Gr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,w5=Wi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${x5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${v5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,b5=Wi("div")`
  position: absolute;
`,_5=Wi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,E5=Gr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,k5=Wi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${E5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,S5=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?k.createElement(k5,null,e):e:n==="blank"?null:k.createElement(_5,null,k.createElement(y5,{...r}),n!=="loading"&&k.createElement(b5,null,n==="error"?k.createElement(m5,{...r}):k.createElement(w5,{...r})))},T5=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,C5=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,N5="0%{opacity:0;} 100%{opacity:1;}",I5="0%{opacity:1;} 100%{opacity:0;}",A5=Wi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,R5=Wi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,P5=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=FS()?[N5,I5]:[T5(n),C5(n)];return{animation:e?`${Gr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Gr(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},j5=k.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?P5(t.position||e||"top-center",t.visible):{opacity:0},s=k.createElement(S5,{toast:t}),o=k.createElement(R5,{...t.ariaProps},id(t.message,t));return k.createElement(A5,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):k.createElement(k.Fragment,null,s,o))});e5(k.createElement);var D5=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=k.useCallback(o=>{if(o){let a=()=>{let u=o.getBoundingClientRect().height;r(t,u)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return k.createElement("div",{ref:s,className:e,style:n},i)},O5=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:FS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},L5=Yd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Au=16,M5=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:u}=d5(n);return k.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Au,left:Au,right:Au,bottom:Au,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},a.map(d=>{let h=d.position||e,f=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),p=O5(h,f);return k.createElement(D5,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?L5:"",style:p},d.type==="custom"?id(d.message,d):i?i(d):k.createElement(j5,{toast:d,position:h}))}))};const F5=()=>{const t=Yr(),{currentUser:e,deleteAccount:n}=Tn(),{uiTtsEnabled:r,toggleUiTts:i,highContrast:s,toggleHighContrast:o,fontSize:a,setFontSize:u,fontFamily:d,setFontFamily:h,lineSpacing:f,setLineSpacing:p,wordSpacing:m,setWordSpacing:w,cloudTtsEnabled:S,toggleCloudTts:T,ttsDelay:y,setTtsDelay:v,speakText:b}=tr(),[D,M]=k.useState((e==null?void 0:e.displayName)||""),[C,E]=k.useState(!1),[_,N]=k.useState(!1),[R,j]=k.useState(!1);k.useEffect(()=>{e!=null&&e.displayName&&M(e.displayName)},[e]);const I=H=>{r&&b(H)},P=H=>{v(H)},B=async()=>{if(!D.trim()){Pe.error("Display name cannot be empty");return}E(!0);try{await on.updateUserProfile({displayName:D}),e&&await e.reload(),Pe.success("Profile updated successfully. Refreshing..."),setTimeout(()=>window.location.reload(),1e3)}catch(H){console.error("Failed to update profile:",H),Pe.error("Failed to update profile")}finally{E(!1)}},Y=async()=>{if(!(!e||e.emailVerified)){j(!0);try{await on.verifyEmail(),N(!0),Pe.success("Verification email sent")}catch(H){console.error("Failed to send verification email:",H),Pe.error("Failed to send verification email")}finally{j(!1)}}},he=async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone. All your documents, quizzes, and progress will be permanently deleted."))try{await n(),Pe.success("Account deleted successfully")}catch(H){console.error("Failed to delete account:",H),Pe.error("Failed to delete account. Please try logging in again before deleting.")}},X=(H,O)=>{const re=y===H;return l.jsx("button",{onClick:()=>P(H),className:`px-4 py-2 rounded-md transition-colors ${re?s?"bg-white text-black font-semibold":"bg-blue-600 text-white font-semibold":s?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,"aria-pressed":re,onMouseEnter:()=>I(O),children:O})},V=H=>{switch(H){case Tr.Off:return"Off";case Tr.Short:return"0.5 seconds";case Tr.Medium:return"1 second";case Tr.Long:return"1.5 seconds";default:return`${H}ms`}};return l.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[l.jsxs("div",{className:"mb-6 flex items-center",children:[l.jsx("button",{onClick:()=>t(-1),className:`mr-3 p-2 rounded-full ${s?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,"aria-label":"Go back",onMouseEnter:()=>I("Go back"),children:l.jsx(ay,{className:"w-5 h-5"})}),l.jsxs("h1",{className:"text-2xl font-bold flex items-center",onMouseEnter:()=>I("Settings"),children:[l.jsx(Ho,{className:"w-6 h-6 mr-2"}),"Settings"]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:`p-6 rounded-lg ${s?"bg-gray-900":"bg-gray-800"}`,onMouseEnter:()=>I("Accessibility Settings"),children:[l.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[l.jsx(fo,{className:"w-5 h-5 mr-2"}),"Accessibility Settings"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("UI Text-to-Speech"),children:"UI Text-to-Speech"}),l.jsx("p",{className:"text-sm text-gray-400 mb-2",onMouseEnter:()=>I("Enable or disable text-to-speech for UI elements when you hover over them"),children:"Enable or disable text-to-speech for UI elements when you hover over them"}),l.jsxs("button",{onClick:i,className:`flex items-center px-4 py-2 rounded-md w-fit ${r?s?"bg-white text-black":"bg-blue-600 text-white":s?"bg-gray-800 text-white":"bg-gray-700 text-gray-200"}`,"aria-pressed":r,onMouseEnter:()=>I(r?"Disable UI Text-to-Speech":"Enable UI Text-to-Speech"),children:[l.jsx(fo,{className:"w-5 h-5 mr-2"}),r?"Enabled":"Disabled"]})]}),l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("Text-to-Speech Delay"),children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(NS,{className:"w-5 h-5 mr-2"}),"Text-to-Speech Delay"]})}),l.jsx("p",{className:"text-sm text-gray-400 mb-2",onMouseEnter:()=>I("Set how long to wait before speaking text when you hover over an element"),children:"Set how long to wait before speaking text when you hover over an element. This helps prevent overlapping speech when moving quickly across the page."}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[X(Tr.Off,"Off"),X(Tr.Short,"0.5 seconds"),X(Tr.Medium,"1 second"),X(Tr.Long,"1.5 seconds")]}),l.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Current delay: ",l.jsx("span",{className:"font-medium",children:V(y)})]})]}),l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("High Contrast Mode"),children:"High Contrast Mode"}),l.jsx("p",{className:"text-sm text-gray-400 mb-2",onMouseEnter:()=>I("Enable or disable high contrast display for better visibility"),children:"Enable or disable high contrast display for better visibility"}),l.jsxs("button",{onClick:o,className:`flex items-center px-4 py-2 rounded-md w-fit ${s?"bg-white text-black":"bg-gray-700 text-gray-200"}`,"aria-pressed":s,onMouseEnter:()=>I(s?"Disable High Contrast Mode":"Enable High Contrast Mode"),children:[s?l.jsx(tm,{className:"w-5 h-5 mr-2"}):l.jsx(nd,{className:"w-5 h-5 mr-2"}),s?"Enabled":"Disabled"]})]}),l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("Premium Text-to-Speech"),children:"Premium Text-to-Speech"}),l.jsx("p",{className:"text-sm text-gray-400 mb-2",onMouseEnter:()=>I("Use high-quality cloud text-to-speech for document reading"),children:"Use high-quality cloud text-to-speech for document reading (not for UI elements)"}),l.jsxs("button",{onClick:T,className:`flex items-center px-4 py-2 rounded-md w-fit ${S?s?"bg-white text-black":"bg-blue-600 text-white":s?"bg-gray-800 text-white":"bg-gray-700 text-gray-200"}`,"aria-pressed":S,onMouseEnter:()=>I(S?"Disable Premium Text-to-Speech":"Enable Premium Text-to-Speech"),children:[l.jsx(fo,{className:"w-5 h-5 mr-2"}),S?"Enabled":"Disabled"]})]})]})]}),l.jsxs("section",{className:`p-6 rounded-lg ${s?"bg-gray-900":"bg-gray-800"}`,onMouseEnter:()=>I("Text Display Settings"),children:[l.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[l.jsx(P3,{className:"w-5 h-5 mr-2"}),"Text Display Settings"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("Font Size"),children:"Font Size"}),l.jsx("input",{type:"range",min:"12",max:"24",step:"1",value:a,onChange:H=>u(parseInt(H.target.value)),className:`w-full max-w-md ${s?"accent-white":"accent-blue-500"}`,onMouseEnter:()=>I(`Font size: ${a} pixels`)}),l.jsxs("p",{className:"text-sm font-medium",children:[a,"px"]})]}),l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("Line Spacing"),children:"Line Spacing"}),l.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:f,onChange:H=>p(parseFloat(H.target.value)),className:`w-full max-w-md ${s?"accent-white":"accent-blue-500"}`,onMouseEnter:()=>I(`Line spacing: ${f}`)}),l.jsxs("p",{className:"text-sm font-medium",children:[f.toFixed(1),"x"]})]}),l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("Word Spacing"),children:"Word Spacing"}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:m,onChange:H=>w(parseFloat(H.target.value)),className:`w-full max-w-md ${s?"accent-white":"accent-blue-500"}`,onMouseEnter:()=>I(`Word spacing: ${m} ems`)}),l.jsxs("p",{className:"text-sm font-medium",children:[m.toFixed(2)," em"]})]}),l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("Font Family"),children:"Font Family"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:["Inter","OpenDyslexic","Arial","Verdana"].map(H=>l.jsx("button",{onClick:()=>h(H),className:`px-4 py-2 rounded-md transition-colors ${d===H?s?"bg-white text-black font-semibold":"bg-blue-600 text-white font-semibold":s?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,style:{fontFamily:H},"aria-pressed":d===H,onMouseEnter:()=>I(H),children:H},H))})]})]})]}),l.jsxs("section",{className:`p-6 rounded-lg ${s?"bg-gray-900":"bg-gray-800"}`,onMouseEnter:()=>I("Account Management"),children:[l.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[l.jsx(rd,{className:"w-5 h-5 mr-2"}),"Account Management"]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col space-y-4",children:[l.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>I("Profile Information"),children:"Profile Information"}),l.jsxs("div",{className:"flex flex-col space-y-2 max-w-md",children:[l.jsx("label",{className:"text-sm text-gray-400",htmlFor:"displayName",children:"Display Name"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"displayName",type:"text",value:D,onChange:H=>M(H.target.value),className:`flex-1 px-4 py-2 rounded-md ${s?"bg-black border border-white text-white":"bg-gray-700 text-white border border-gray-600"} focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Enter your display name",onMouseEnter:()=>I("Enter your display name")}),l.jsxs("button",{onClick:B,disabled:C,className:`px-4 py-2 rounded-md flex items-center ${s?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed transition-colors`,onMouseEnter:()=>I("Save changes"),children:[l.jsx(C3,{className:"w-4 h-4 mr-2"}),C?"Saving...":"Save"]})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Email: ",e==null?void 0:e.email," (Cannot be changed)"]})]})]}),l.jsxs("div",{className:"border-t border-gray-700 pt-6 pb-6",children:[l.jsx("h3",{className:"text-md font-medium mb-4",onMouseEnter:()=>I("Email Status"),children:"Email Status"}),l.jsx("div",{className:"flex flex-col space-y-2",children:e!=null&&e.emailVerified?l.jsxs("div",{className:"flex items-center text-green-500 bg-green-500/10 px-3 py-2 rounded-md w-fit",children:[l.jsx(Nw,{className:"w-5 h-5 mr-2"}),l.jsx("span",{className:"font-medium",children:"Verified"})]}):l.jsxs("div",{className:"flex flex-col space-y-3 w-full max-w-md",children:[l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-md border ${s?"border-white bg-gray-900":"bg-yellow-500/10 border-yellow-500/30"}`,children:[l.jsxs("div",{className:`flex items-center ${s?"text-white":"text-yellow-500"}`,children:[l.jsx(Qd,{className:"w-5 h-5 mr-2"}),l.jsx("span",{children:"Not Verified"})]}),_?l.jsxs("span",{className:"text-sm text-green-400 font-medium flex items-center",children:[l.jsx(Nw,{className:"w-4 h-4 mr-1"}),"Sent!"]}):l.jsx("button",{onClick:Y,disabled:R,className:`px-3 py-1.5 text-sm rounded-md font-medium ${s?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 transition-colors`,onMouseEnter:()=>I("Send verification email"),children:R?"Sending...":"Verify Email"})]}),_&&l.jsxs("p",{className:`text-sm italic p-3 rounded-md border ${s?"text-white border-white":"text-orange-400 bg-orange-500/10 border-orange-500/20"}`,children:["Verification link sent to ",e==null?void 0:e.email,". Please check your Inbox and Spam Folder as the sender may be unknown."]})]})})]}),l.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[l.jsxs("h3",{className:"text-md font-medium text-red-500 flex items-center mb-2",onMouseEnter:()=>I("Danger Zone"),children:[l.jsx(nm,{className:"w-5 h-5 mr-2"}),"Danger Zone"]}),l.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Deleting your account is permanent and cannot be undone. All your documents and progress will be lost."}),l.jsxs("button",{onClick:he,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center",onMouseEnter:()=>I("Delete Account"),children:[l.jsx(nm,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})]})]})]})]})};function V5(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const U5=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,z5=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$5={};function Pw(t,e){return($5.jsx?z5:U5).test(t)}const B5=/[ \t\n\f\r]/g;function H5(t){return typeof t=="object"?t.type==="text"?jw(t.value):!1:jw(t)}function jw(t){return t.replace(B5,"")===""}class zl{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}zl.prototype.normal={};zl.prototype.property={};zl.prototype.space=void 0;function US(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new zl(n,r,e)}function sm(t){return t.toLowerCase()}class un{constructor(e,n){this.attribute=n,this.property=e}}un.prototype.attribute="";un.prototype.booleanish=!1;un.prototype.boolean=!1;un.prototype.commaOrSpaceSeparated=!1;un.prototype.commaSeparated=!1;un.prototype.defined=!1;un.prototype.mustUseProperty=!1;un.prototype.number=!1;un.prototype.overloadedBoolean=!1;un.prototype.property="";un.prototype.spaceSeparated=!1;un.prototype.space=void 0;let q5=0;const ye=Ps(),ot=Ps(),om=Ps(),Q=Ps(),Fe=Ps(),mo=Ps(),mn=Ps();function Ps(){return 2**++q5}const am=Object.freeze(Object.defineProperty({__proto__:null,boolean:ye,booleanish:ot,commaOrSpaceSeparated:mn,commaSeparated:mo,number:Q,overloadedBoolean:om,spaceSeparated:Fe},Symbol.toStringTag,{value:"Module"})),lf=Object.keys(am);class dy extends un{constructor(e,n,r,i){let s=-1;if(super(e,n),Dw(this,"space",i),typeof r=="number")for(;++s<lf.length;){const o=lf[s];Dw(this,lf[s],(r&am[o])===am[o])}}}dy.prototype.defined=!0;function Dw(t,e,n){n&&(t[e]=n)}function qo(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new dy(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[sm(r)]=r,n[sm(s.attribute)]=r}return new zl(e,n,t.space)}const zS=qo({properties:{ariaActiveDescendant:null,ariaAtomic:ot,ariaAutoComplete:null,ariaBusy:ot,ariaChecked:ot,ariaColCount:Q,ariaColIndex:Q,ariaColSpan:Q,ariaControls:Fe,ariaCurrent:null,ariaDescribedBy:Fe,ariaDetails:null,ariaDisabled:ot,ariaDropEffect:Fe,ariaErrorMessage:null,ariaExpanded:ot,ariaFlowTo:Fe,ariaGrabbed:ot,ariaHasPopup:null,ariaHidden:ot,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Fe,ariaLevel:Q,ariaLive:null,ariaModal:ot,ariaMultiLine:ot,ariaMultiSelectable:ot,ariaOrientation:null,ariaOwns:Fe,ariaPlaceholder:null,ariaPosInSet:Q,ariaPressed:ot,ariaReadOnly:ot,ariaRelevant:null,ariaRequired:ot,ariaRoleDescription:Fe,ariaRowCount:Q,ariaRowIndex:Q,ariaRowSpan:Q,ariaSelected:ot,ariaSetSize:Q,ariaSort:null,ariaValueMax:Q,ariaValueMin:Q,ariaValueNow:Q,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function $S(t,e){return e in t?t[e]:e}function BS(t,e){return $S(t,e.toLowerCase())}const W5=qo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:mo,acceptCharset:Fe,accessKey:Fe,action:null,allow:null,allowFullScreen:ye,allowPaymentRequest:ye,allowUserMedia:ye,alt:null,as:null,async:ye,autoCapitalize:null,autoComplete:Fe,autoFocus:ye,autoPlay:ye,blocking:Fe,capture:null,charSet:null,checked:ye,cite:null,className:Fe,cols:Q,colSpan:null,content:null,contentEditable:ot,controls:ye,controlsList:Fe,coords:Q|mo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ye,defer:ye,dir:null,dirName:null,disabled:ye,download:om,draggable:ot,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ye,formTarget:null,headers:Fe,height:Q,hidden:om,high:Q,href:null,hrefLang:null,htmlFor:Fe,httpEquiv:Fe,id:null,imageSizes:null,imageSrcSet:null,inert:ye,inputMode:null,integrity:null,is:null,isMap:ye,itemId:null,itemProp:Fe,itemRef:Fe,itemScope:ye,itemType:Fe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ye,low:Q,manifest:null,max:null,maxLength:Q,media:null,method:null,min:null,minLength:Q,multiple:ye,muted:ye,name:null,nonce:null,noModule:ye,noValidate:ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ye,optimum:Q,pattern:null,ping:Fe,placeholder:null,playsInline:ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ye,referrerPolicy:null,rel:Fe,required:ye,reversed:ye,rows:Q,rowSpan:Q,sandbox:Fe,scope:null,scoped:ye,seamless:ye,selected:ye,shadowRootClonable:ye,shadowRootDelegatesFocus:ye,shadowRootMode:null,shape:null,size:Q,sizes:null,slot:null,span:Q,spellCheck:ot,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Q,step:null,style:null,tabIndex:Q,target:null,title:null,translate:null,type:null,typeMustMatch:ye,useMap:null,value:ot,width:Q,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Fe,axis:null,background:null,bgColor:null,border:Q,borderColor:null,bottomMargin:Q,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ye,declare:ye,event:null,face:null,frame:null,frameBorder:null,hSpace:Q,leftMargin:Q,link:null,longDesc:null,lowSrc:null,marginHeight:Q,marginWidth:Q,noResize:ye,noHref:ye,noShade:ye,noWrap:ye,object:null,profile:null,prompt:null,rev:null,rightMargin:Q,rules:null,scheme:null,scrolling:ot,standby:null,summary:null,text:null,topMargin:Q,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Q,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ye,disableRemotePlayback:ye,prefix:null,property:null,results:Q,security:null,unselectable:null},space:"html",transform:BS}),K5=qo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:mn,accentHeight:Q,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Q,amplitude:Q,arabicForm:null,ascent:Q,attributeName:null,attributeType:null,azimuth:Q,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Q,by:null,calcMode:null,capHeight:Q,className:Fe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Q,diffuseConstant:Q,direction:null,display:null,dur:null,divisor:Q,dominantBaseline:null,download:ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:Q,enableBackground:null,end:null,event:null,exponent:Q,externalResourcesRequired:null,fill:null,fillOpacity:Q,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:mo,g2:mo,glyphName:mo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Q,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Q,horizOriginX:Q,horizOriginY:Q,id:null,ideographic:Q,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Q,k:Q,k1:Q,k2:Q,k3:Q,k4:Q,kernelMatrix:mn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Q,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Q,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Q,overlineThickness:Q,paintOrder:null,panose1:null,path:null,pathLength:Q,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Fe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Q,pointsAtY:Q,pointsAtZ:Q,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mn,rev:mn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mn,requiredFeatures:mn,requiredFonts:mn,requiredFormats:mn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Q,specularExponent:Q,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Q,strikethroughThickness:Q,string:null,stroke:null,strokeDashArray:mn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Q,strokeOpacity:Q,strokeWidth:null,style:null,surfaceScale:Q,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mn,tabIndex:Q,tableValues:null,target:null,targetX:Q,targetY:Q,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Q,underlineThickness:Q,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Q,values:null,vAlphabetic:Q,vMathematical:Q,vectorEffect:null,vHanging:Q,vIdeographic:Q,version:null,vertAdvY:Q,vertOriginX:Q,vertOriginY:Q,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Q,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:$S}),HS=qo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),qS=qo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:BS}),WS=qo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),G5={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Q5=/[A-Z]/g,Ow=/-[a-z]/g,Y5=/^data[-\w.:]+$/i;function X5(t,e){const n=sm(e);let r=e,i=un;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Y5.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Ow,Z5);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Ow.test(s)){let o=s.replace(Q5,J5);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=dy}return new i(r,e)}function J5(t){return"-"+t.toLowerCase()}function Z5(t){return t.charAt(1).toUpperCase()}const eF=US([zS,W5,HS,qS,WS],"html"),hy=US([zS,K5,HS,qS,WS],"svg");function tF(t){return t.join(" ").trim()}var fy={},Lw=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,nF=/\n/g,rF=/^\s*/,iF=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,sF=/^:\s*/,oF=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,aF=/^[;\s]*/,lF=/^\s+|\s+$/g,uF=`
`,Mw="/",Fw="*",ts="",cF="comment",dF="declaration",hF=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(w){var S=w.match(nF);S&&(n+=S.length);var T=w.lastIndexOf(uF);r=~T?w.length-T:r+w.length}function s(){var w={line:n,column:r};return function(S){return S.position=new o(w),d(),S}}function o(w){this.start=w,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(w){var S=new Error(e.source+":"+n+":"+r+": "+w);if(S.reason=w,S.filename=e.source,S.line=n,S.column=r,S.source=t,!e.silent)throw S}function u(w){var S=w.exec(t);if(S){var T=S[0];return i(T),t=t.slice(T.length),S}}function d(){u(rF)}function h(w){var S;for(w=w||[];S=f();)S!==!1&&w.push(S);return w}function f(){var w=s();if(!(Mw!=t.charAt(0)||Fw!=t.charAt(1))){for(var S=2;ts!=t.charAt(S)&&(Fw!=t.charAt(S)||Mw!=t.charAt(S+1));)++S;if(S+=2,ts===t.charAt(S-1))return a("End of comment missing");var T=t.slice(2,S-2);return r+=2,i(T),t=t.slice(S),r+=2,w({type:cF,comment:T})}}function p(){var w=s(),S=u(iF);if(S){if(f(),!u(sF))return a("property missing ':'");var T=u(oF),y=w({type:dF,property:Vw(S[0].replace(Lw,ts)),value:T?Vw(T[0].replace(Lw,ts)):ts});return u(aF),y}}function m(){var w=[];h(w);for(var S;S=p();)S!==!1&&(w.push(S),h(w));return w}return d(),m()};function Vw(t){return t?t.replace(lF,ts):ts}var fF=dc&&dc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fy,"__esModule",{value:!0});fy.default=mF;var pF=fF(hF);function mF(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,pF.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Xd={};Object.defineProperty(Xd,"__esModule",{value:!0});Xd.camelCase=void 0;var gF=/^--[a-zA-Z0-9_-]+$/,yF=/-([a-z])/g,xF=/^[^-]+$/,vF=/^-(webkit|moz|ms|o|khtml)-/,wF=/^-(ms)-/,bF=function(t){return!t||xF.test(t)||gF.test(t)},_F=function(t,e){return e.toUpperCase()},Uw=function(t,e){return"".concat(e,"-")},EF=function(t,e){return e===void 0&&(e={}),bF(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(wF,Uw):t=t.replace(vF,Uw),t.replace(yF,_F))};Xd.camelCase=EF;var kF=dc&&dc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},SF=kF(fy),TF=Xd;function lm(t,e){var n={};return!t||typeof t!="string"||(0,SF.default)(t,function(r,i){r&&i&&(n[(0,TF.camelCase)(r,e)]=i)}),n}lm.default=lm;var CF=lm;const NF=gm(CF),KS=GS("end"),py=GS("start");function GS(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function IF(t){const e=py(t),n=KS(t);if(e&&n)return{start:e,end:n}}function Ha(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?zw(t.position):"start"in t||"end"in t?zw(t):"line"in t||"column"in t?um(t):""}function um(t){return $w(t&&t.line)+":"+$w(t&&t.column)}function zw(t){return um(t&&t.start)+"-"+um(t&&t.end)}function $w(t){return t&&typeof t=="number"?t:1}class Ot extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=Ha(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ot.prototype.file="";Ot.prototype.name="";Ot.prototype.reason="";Ot.prototype.message="";Ot.prototype.stack="";Ot.prototype.column=void 0;Ot.prototype.line=void 0;Ot.prototype.ancestors=void 0;Ot.prototype.cause=void 0;Ot.prototype.fatal=void 0;Ot.prototype.place=void 0;Ot.prototype.ruleId=void 0;Ot.prototype.source=void 0;const my={}.hasOwnProperty,AF=new Map,RF=/[A-Z]/g,PF=new Set(["table","tbody","thead","tfoot","tr"]),jF=new Set(["td","th"]),QS="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function DF(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=$F(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=zF(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?hy:eF,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=YS(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function YS(t,e,n){if(e.type==="element")return OF(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return LF(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return FF(t,e,n);if(e.type==="mdxjsEsm")return MF(t,e);if(e.type==="root")return VF(t,e,n);if(e.type==="text")return UF(t,e)}function OF(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=hy,t.schema=i),t.ancestors.push(e);const s=JS(t,e.tagName,!1),o=BF(t,e);let a=yy(t,e);return PF.has(e.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!H5(u):!0})),XS(t,o,s,e),gy(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function LF(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}wl(t,e.position)}function MF(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);wl(t,e.position)}function FF(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=hy,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:JS(t,e.name,!0),o=HF(t,e),a=yy(t,e);return XS(t,o,s,e),gy(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function VF(t,e,n){const r={};return gy(r,yy(t,e)),t.create(e,t.Fragment,r,n)}function UF(t,e){return e.value}function XS(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function gy(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function zF(t,e,n){return r;function r(i,s,o,a){const d=Array.isArray(o.children)?n:e;return a?d(s,o,a):d(s,o)}}function $F(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=py(r);return e(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function BF(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&my.call(e.properties,i)){const s=qF(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&jF.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function HF(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else wl(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else wl(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function yy(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:AF;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const d=i.get(u)||0;o=u+"-"+d,i.set(u,d+1)}}const a=YS(t,s,o);a!==void 0&&n.push(a)}return n}function qF(t,e,n){const r=X5(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?V5(n):tF(n)),r.property==="style"){let i=typeof n=="object"?n:WF(t,String(n));return t.stylePropertyNameCase==="css"&&(i=KF(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?G5[r.property]||r.property:r.attribute,n]}}function WF(t,e){try{return NF(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Ot("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=QS+"#cannot-parse-style-attribute",i}}function JS(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Pw(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Pw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return my.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);wl(t)}function wl(t,e){const n=new Ot("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=QS+"#cannot-handle-mdx-estrees-without-createevaluater",n}function KF(t){const e={};let n;for(n in t)my.call(t,n)&&(e[GF(n)]=t[n]);return e}function GF(t){let e=t.replace(RF,QF);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function QF(t){return"-"+t.toLowerCase()}const uf={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},YF={};function XF(t,e){const n=YF,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ZS(t,r,i)}function ZS(t,e,n){if(JF(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Bw(t.children,e,n)}return Array.isArray(t)?Bw(t,e,n):""}function Bw(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=ZS(t[i],e,n);return r.join("")}function JF(t){return!!(t&&typeof t=="object")}const Hw=document.createElement("i");function xy(t){const e="&"+t+";";Hw.innerHTML=e;const n=Hw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function vr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function An(t,e){return t.length>0?(vr(t,t.length,0,e),t):e}const qw={}.hasOwnProperty;function ZF(t){const e={};let n=-1;for(;++n<t.length;)e6(e,t[n]);return e}function e6(t,e){let n;for(n in e){const i=(qw.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){qw.call(i,o)||(i[o]=[]);const a=s[o];t6(i[o],Array.isArray(a)?a:a?[a]:[])}}}function t6(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);vr(t,0,0,r)}function eT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function go(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ur=Ki(/[A-Za-z]/),bn=Ki(/[\dA-Za-z]/),n6=Ki(/[#-'*+\--9=?A-Z^-~]/);function cm(t){return t!==null&&(t<32||t===127)}const dm=Ki(/\d/),r6=Ki(/[\dA-Fa-f]/),i6=Ki(/[!-/:-@[-`{-~]/);function ce(t){return t!==null&&t<-2}function ln(t){return t!==null&&(t<0||t===32)}function Ae(t){return t===-2||t===-1||t===32}const s6=Ki(new RegExp("\\p{P}|\\p{S}","u")),o6=Ki(/\s/);function Ki(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Wo(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&bn(t.charCodeAt(n+1))&&bn(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Ue(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Ae(u)?(t.enter(n),a(u)):e(u)}function a(u){return Ae(u)&&s++<i?(t.consume(u),a):(t.exit(n),e(u))}}const a6={tokenize:l6};function l6(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ue(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return ce(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const u6={tokenize:c6},Ww={tokenize:d6};function c6(t){const e=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const D=n[r];return e.containerState=D[1],t.attempt(D[0].continuation,u,d)(b)}return d(b)}function u(b){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&v();const D=e.events.length;let M=D,C;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){C=e.events[M][1].end;break}y(r);let E=D;for(;E<e.events.length;)e.events[E][1].end={...C},E++;return vr(e.events,M+1,0,e.events.slice(D)),e.events.length=E,d(b)}return a(b)}function d(b){if(r===n.length){if(!i)return p(b);if(i.currentConstruct&&i.currentConstruct.concrete)return w(b);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Ww,h,f)(b)}function h(b){return i&&v(),y(r),p(b)}function f(b){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,w(b)}function p(b){return e.containerState={},t.attempt(Ww,m,w)(b)}function m(b){return r++,n.push([e.currentConstruct,e.containerState]),p(b)}function w(b){if(b===null){i&&v(),y(0),t.consume(b);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),S(b)}function S(b){if(b===null){T(t.exit("chunkFlow"),!0),y(0),t.consume(b);return}return ce(b)?(t.consume(b),T(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(b),S)}function T(b,D){const M=e.sliceStream(b);if(D&&M.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(M),e.parser.lazy[b.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const E=e.events.length;let _=E,N,R;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){if(N){R=e.events[_][1].end;break}N=!0}for(y(r),C=E;C<e.events.length;)e.events[C][1].end={...R},C++;vr(e.events,_+1,0,e.events.slice(E)),e.events.length=C}}function y(b){let D=n.length;for(;D-- >b;){const M=n[D];e.containerState=M[1],M[0].exit.call(e,t)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function d6(t,e,n){return Ue(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Kw(t){if(t===null||ln(t)||o6(t))return 1;if(s6(t))return 2}function vy(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const hm={name:"attention",resolveAll:h6,tokenize:f6};function h6(t,e){let n=-1,r,i,s,o,a,u,d,h;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},p={...t[n][1].start};Gw(f,-u),Gw(p,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},a={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:p},s={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=An(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=An(d,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=An(d,vy(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=An(d,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(h=2,d=An(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):h=0,vr(t,r-1,n-r+3,d),n=r+d.length-h-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function f6(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Kw(r);let s;return o;function o(u){return s=u,t.enter("attentionSequence"),a(u)}function a(u){if(u===s)return t.consume(u),a;const d=t.exit("attentionSequence"),h=Kw(u),f=!h||h===2&&i||n.includes(u),p=!i||i===2&&h||n.includes(r);return d._open=!!(s===42?f:f&&(i||!p)),d._close=!!(s===42?p:p&&(h||!f)),e(u)}}function Gw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const p6={name:"autolink",tokenize:m6};function m6(t,e,n){let r=0;return i;function i(m){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(m){return ur(m)?(t.consume(m),o):m===64?n(m):d(m)}function o(m){return m===43||m===45||m===46||bn(m)?(r=1,a(m)):d(m)}function a(m){return m===58?(t.consume(m),r=0,u):(m===43||m===45||m===46||bn(m))&&r++<32?(t.consume(m),a):(r=0,d(m))}function u(m){return m===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):m===null||m===32||m===60||cm(m)?n(m):(t.consume(m),u)}function d(m){return m===64?(t.consume(m),h):n6(m)?(t.consume(m),d):n(m)}function h(m){return bn(m)?f(m):n(m)}function f(m){return m===46?(t.consume(m),r=0,h):m===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):p(m)}function p(m){if((m===45||bn(m))&&r++<63){const w=m===45?p:f;return t.consume(m),w}return n(m)}}const Jd={partial:!0,tokenize:g6};function g6(t,e,n){return r;function r(s){return Ae(s)?Ue(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||ce(s)?e(s):n(s)}}const tT={continuation:{tokenize:x6},exit:v6,name:"blockQuote",tokenize:y6};function y6(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ae(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function x6(t,e,n){const r=this;return i;function i(o){return Ae(o)?Ue(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(tT,e,n)(o)}}function v6(t){t.exit("blockQuote")}const nT={name:"characterEscape",tokenize:w6};function w6(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return i6(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const rT={name:"characterReference",tokenize:b6};function b6(t,e,n){const r=this;let i=0,s,o;return a;function a(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),u}function u(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,o=bn,h(f))}function d(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=r6,h):(t.enter("characterReferenceValue"),s=7,o=dm,h(f))}function h(f){if(f===59&&i){const p=t.exit("characterReferenceValue");return o===bn&&!xy(r.sliceSerialize(p))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(f)&&i++<s?(t.consume(f),h):n(f)}}const Qw={partial:!0,tokenize:E6},Yw={concrete:!0,name:"codeFenced",tokenize:_6};function _6(t,e,n){const r=this,i={partial:!0,tokenize:M};let s=0,o=0,a;return u;function u(C){return d(C)}function d(C){const E=r.events[r.events.length-1];return s=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,a=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),h(C)}function h(C){return C===a?(o++,t.consume(C),h):o<3?n(C):(t.exit("codeFencedFenceSequence"),Ae(C)?Ue(t,f,"whitespace")(C):f(C))}function f(C){return C===null||ce(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(Qw,S,D)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||ce(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(C)):Ae(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ue(t,m,"whitespace")(C)):C===96&&C===a?n(C):(t.consume(C),p)}function m(C){return C===null||ce(C)?f(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),w(C))}function w(C){return C===null||ce(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(C)):C===96&&C===a?n(C):(t.consume(C),w)}function S(C){return t.attempt(i,D,T)(C)}function T(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),y}function y(C){return s>0&&Ae(C)?Ue(t,v,"linePrefix",s+1)(C):v(C)}function v(C){return C===null||ce(C)?t.check(Qw,S,D)(C):(t.enter("codeFlowValue"),b(C))}function b(C){return C===null||ce(C)?(t.exit("codeFlowValue"),v(C)):(t.consume(C),b)}function D(C){return t.exit("codeFenced"),e(C)}function M(C,E,_){let N=0;return R;function R(Y){return C.enter("lineEnding"),C.consume(Y),C.exit("lineEnding"),j}function j(Y){return C.enter("codeFencedFence"),Ae(Y)?Ue(C,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):I(Y)}function I(Y){return Y===a?(C.enter("codeFencedFenceSequence"),P(Y)):_(Y)}function P(Y){return Y===a?(N++,C.consume(Y),P):N>=o?(C.exit("codeFencedFenceSequence"),Ae(Y)?Ue(C,B,"whitespace")(Y):B(Y)):_(Y)}function B(Y){return Y===null||ce(Y)?(C.exit("codeFencedFence"),E(Y)):_(Y)}}}function E6(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const cf={name:"codeIndented",tokenize:S6},k6={partial:!0,tokenize:T6};function S6(t,e,n){const r=this;return i;function i(d){return t.enter("codeIndented"),Ue(t,s,"linePrefix",5)(d)}function s(d){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?u(d):ce(d)?t.attempt(k6,o,u)(d):(t.enter("codeFlowValue"),a(d))}function a(d){return d===null||ce(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),a)}function u(d){return t.exit("codeIndented"),e(d)}}function T6(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):ce(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Ue(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):ce(o)?i(o):n(o)}}const C6={name:"codeText",previous:I6,resolve:N6,tokenize:A6};function N6(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function I6(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function A6(t,e,n){let r=0,i,s;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),a(f)}function a(f){return f===96?(t.consume(f),r++,a):(t.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),u):f===96?(s=t.enter("codeTextSequence"),i=0,h(f)):ce(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("codeTextData"),d(f))}function d(f){return f===null||f===32||f===96||ce(f)?(t.exit("codeTextData"),u(f)):(t.consume(f),d)}function h(f){return f===96?(t.consume(f),i++,h):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",d(f))}}class R6{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&xa(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),xa(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),xa(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);xa(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);xa(this.left,n.reverse())}}}function xa(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function iT(t){const e={};let n=-1,r,i,s,o,a,u,d;const h=new R6(t);for(;++n<h.length;){for(;n in e;)n=e[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,P6(h,n)),n=e[n],d=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=h.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},a=h.slice(i,n),a.unshift(r),h.splice(i,n-i+1,a))}}return vr(t,0,Number.POSITIVE_INFINITY,h.slice(0)),!d}function P6(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,u=[],d={};let h,f,p=-1,m=n,w=0,S=0;const T=[S];for(;m;){for(;t.get(++i)[1]!==m;);s.push(i),m._tokenizer||(h=r.sliceStream(m),m.next||h.push(null),f&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(S=p+1,T.push(S),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):T.pop(),p=T.length;p--;){const y=a.slice(T[p],T[p+1]),v=s.pop();u.push([v,v+y.length-1]),t.splice(v,2,y)}for(u.reverse(),p=-1;++p<u.length;)d[w+u[p][0]]=w+u[p][1],w+=u[p][1]-u[p][0]-1;return d}const j6={resolve:O6,tokenize:L6},D6={partial:!0,tokenize:M6};function O6(t){return iT(t),t}function L6(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):ce(a)?t.check(D6,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function M6(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Ue(t,s,"linePrefix")}function s(o){if(o===null||ce(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function sT(t,e,n,r,i,s,o,a,u){const d=u||Number.POSITIVE_INFINITY;let h=0;return f;function f(y){return y===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(y),t.exit(s),p):y===null||y===32||y===41||cm(y)?n(y):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),S(y))}function p(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(t.exit("chunkString"),t.exit(a),p(y)):y===null||y===60||ce(y)?n(y):(t.consume(y),y===92?w:m)}function w(y){return y===60||y===62||y===92?(t.consume(y),m):m(y)}function S(y){return!h&&(y===null||y===41||ln(y))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(y)):h<d&&y===40?(t.consume(y),h++,S):y===41?(t.consume(y),h--,S):y===null||y===32||y===40||cm(y)?n(y):(t.consume(y),y===92?T:S)}function T(y){return y===40||y===41||y===92?(t.consume(y),S):S(y)}}function oT(t,e,n,r,i,s){const o=this;let a=0,u;return d;function d(m){return t.enter(r),t.enter(i),t.consume(m),t.exit(i),t.enter(s),h}function h(m){return a>999||m===null||m===91||m===93&&!u||m===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(t.exit(s),t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):ce(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),h):(t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||ce(m)||a++>999?(t.exit("chunkString"),h(m)):(t.consume(m),u||(u=!Ae(m)),m===92?p:f)}function p(m){return m===91||m===92||m===93?(t.consume(m),a++,f):f(m)}}function aT(t,e,n,r,i,s){let o;return a;function a(p){return p===34||p===39||p===40?(t.enter(r),t.enter(i),t.consume(p),t.exit(i),o=p===40?41:p,u):n(p)}function u(p){return p===o?(t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):(t.enter(s),d(p))}function d(p){return p===o?(t.exit(s),u(o)):p===null?n(p):ce(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),Ue(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===o||p===null||ce(p)?(t.exit("chunkString"),d(p)):(t.consume(p),p===92?f:h)}function f(p){return p===o||p===92?(t.consume(p),h):h(p)}}function qa(t,e){let n;return r;function r(i){return ce(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Ae(i)?Ue(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const F6={name:"definition",tokenize:U6},V6={partial:!0,tokenize:z6};function U6(t,e,n){const r=this;let i;return s;function s(m){return t.enter("definition"),o(m)}function o(m){return oT.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return i=go(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),u):n(m)}function u(m){return ln(m)?qa(t,d)(m):d(m)}function d(m){return sT(t,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function h(m){return t.attempt(V6,f,f)(m)}function f(m){return Ae(m)?Ue(t,p,"whitespace")(m):p(m)}function p(m){return m===null||ce(m)?(t.exit("definition"),r.parser.defined.push(i),e(m)):n(m)}}function z6(t,e,n){return r;function r(a){return ln(a)?qa(t,i)(a):n(a)}function i(a){return aT(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ae(a)?Ue(t,o,"whitespace")(a):o(a)}function o(a){return a===null||ce(a)?e(a):n(a)}}const $6={name:"hardBreakEscape",tokenize:B6};function B6(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return ce(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const H6={name:"headingAtx",resolve:q6,tokenize:W6};function q6(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},vr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function W6(t,e,n){let r=0;return i;function i(h){return t.enter("atxHeading"),s(h)}function s(h){return t.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&r++<6?(t.consume(h),o):h===null||ln(h)?(t.exit("atxHeadingSequence"),a(h)):n(h)}function a(h){return h===35?(t.enter("atxHeadingSequence"),u(h)):h===null||ce(h)?(t.exit("atxHeading"),e(h)):Ae(h)?Ue(t,a,"whitespace")(h):(t.enter("atxHeadingText"),d(h))}function u(h){return h===35?(t.consume(h),u):(t.exit("atxHeadingSequence"),a(h))}function d(h){return h===null||h===35||ln(h)?(t.exit("atxHeadingText"),a(h)):(t.consume(h),d)}}const K6=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Xw=["pre","script","style","textarea"],G6={concrete:!0,name:"htmlFlow",resolveTo:X6,tokenize:J6},Q6={partial:!0,tokenize:eV},Y6={partial:!0,tokenize:Z6};function X6(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function J6(t,e,n){const r=this;let i,s,o,a,u;return d;function d(L){return h(L)}function h(L){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(L),f}function f(L){return L===33?(t.consume(L),p):L===47?(t.consume(L),s=!0,S):L===63?(t.consume(L),i=3,r.interrupt?e:O):ur(L)?(t.consume(L),o=String.fromCharCode(L),T):n(L)}function p(L){return L===45?(t.consume(L),i=2,m):L===91?(t.consume(L),i=5,a=0,w):ur(L)?(t.consume(L),i=4,r.interrupt?e:O):n(L)}function m(L){return L===45?(t.consume(L),r.interrupt?e:O):n(L)}function w(L){const fe="CDATA[";return L===fe.charCodeAt(a++)?(t.consume(L),a===fe.length?r.interrupt?e:I:w):n(L)}function S(L){return ur(L)?(t.consume(L),o=String.fromCharCode(L),T):n(L)}function T(L){if(L===null||L===47||L===62||ln(L)){const fe=L===47,Ee=o.toLowerCase();return!fe&&!s&&Xw.includes(Ee)?(i=1,r.interrupt?e(L):I(L)):K6.includes(o.toLowerCase())?(i=6,fe?(t.consume(L),y):r.interrupt?e(L):I(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(L):s?v(L):b(L))}return L===45||bn(L)?(t.consume(L),o+=String.fromCharCode(L),T):n(L)}function y(L){return L===62?(t.consume(L),r.interrupt?e:I):n(L)}function v(L){return Ae(L)?(t.consume(L),v):R(L)}function b(L){return L===47?(t.consume(L),R):L===58||L===95||ur(L)?(t.consume(L),D):Ae(L)?(t.consume(L),b):R(L)}function D(L){return L===45||L===46||L===58||L===95||bn(L)?(t.consume(L),D):M(L)}function M(L){return L===61?(t.consume(L),C):Ae(L)?(t.consume(L),M):b(L)}function C(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),u=L,E):Ae(L)?(t.consume(L),C):_(L)}function E(L){return L===u?(t.consume(L),u=null,N):L===null||ce(L)?n(L):(t.consume(L),E)}function _(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||ln(L)?M(L):(t.consume(L),_)}function N(L){return L===47||L===62||Ae(L)?b(L):n(L)}function R(L){return L===62?(t.consume(L),j):n(L)}function j(L){return L===null||ce(L)?I(L):Ae(L)?(t.consume(L),j):n(L)}function I(L){return L===45&&i===2?(t.consume(L),he):L===60&&i===1?(t.consume(L),X):L===62&&i===4?(t.consume(L),re):L===63&&i===3?(t.consume(L),O):L===93&&i===5?(t.consume(L),H):ce(L)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Q6,ie,P)(L)):L===null||ce(L)?(t.exit("htmlFlowData"),P(L)):(t.consume(L),I)}function P(L){return t.check(Y6,B,ie)(L)}function B(L){return t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),Y}function Y(L){return L===null||ce(L)?P(L):(t.enter("htmlFlowData"),I(L))}function he(L){return L===45?(t.consume(L),O):I(L)}function X(L){return L===47?(t.consume(L),o="",V):I(L)}function V(L){if(L===62){const fe=o.toLowerCase();return Xw.includes(fe)?(t.consume(L),re):I(L)}return ur(L)&&o.length<8?(t.consume(L),o+=String.fromCharCode(L),V):I(L)}function H(L){return L===93?(t.consume(L),O):I(L)}function O(L){return L===62?(t.consume(L),re):L===45&&i===2?(t.consume(L),O):I(L)}function re(L){return L===null||ce(L)?(t.exit("htmlFlowData"),ie(L)):(t.consume(L),re)}function ie(L){return t.exit("htmlFlow"),e(L)}}function Z6(t,e,n){const r=this;return i;function i(o){return ce(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function eV(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Jd,e,n)}}const tV={name:"htmlText",tokenize:nV};function nV(t,e,n){const r=this;let i,s,o;return a;function a(O){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(O),u}function u(O){return O===33?(t.consume(O),d):O===47?(t.consume(O),M):O===63?(t.consume(O),b):ur(O)?(t.consume(O),_):n(O)}function d(O){return O===45?(t.consume(O),h):O===91?(t.consume(O),s=0,w):ur(O)?(t.consume(O),v):n(O)}function h(O){return O===45?(t.consume(O),m):n(O)}function f(O){return O===null?n(O):O===45?(t.consume(O),p):ce(O)?(o=f,X(O)):(t.consume(O),f)}function p(O){return O===45?(t.consume(O),m):f(O)}function m(O){return O===62?he(O):O===45?p(O):f(O)}function w(O){const re="CDATA[";return O===re.charCodeAt(s++)?(t.consume(O),s===re.length?S:w):n(O)}function S(O){return O===null?n(O):O===93?(t.consume(O),T):ce(O)?(o=S,X(O)):(t.consume(O),S)}function T(O){return O===93?(t.consume(O),y):S(O)}function y(O){return O===62?he(O):O===93?(t.consume(O),y):S(O)}function v(O){return O===null||O===62?he(O):ce(O)?(o=v,X(O)):(t.consume(O),v)}function b(O){return O===null?n(O):O===63?(t.consume(O),D):ce(O)?(o=b,X(O)):(t.consume(O),b)}function D(O){return O===62?he(O):b(O)}function M(O){return ur(O)?(t.consume(O),C):n(O)}function C(O){return O===45||bn(O)?(t.consume(O),C):E(O)}function E(O){return ce(O)?(o=E,X(O)):Ae(O)?(t.consume(O),E):he(O)}function _(O){return O===45||bn(O)?(t.consume(O),_):O===47||O===62||ln(O)?N(O):n(O)}function N(O){return O===47?(t.consume(O),he):O===58||O===95||ur(O)?(t.consume(O),R):ce(O)?(o=N,X(O)):Ae(O)?(t.consume(O),N):he(O)}function R(O){return O===45||O===46||O===58||O===95||bn(O)?(t.consume(O),R):j(O)}function j(O){return O===61?(t.consume(O),I):ce(O)?(o=j,X(O)):Ae(O)?(t.consume(O),j):N(O)}function I(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),i=O,P):ce(O)?(o=I,X(O)):Ae(O)?(t.consume(O),I):(t.consume(O),B)}function P(O){return O===i?(t.consume(O),i=void 0,Y):O===null?n(O):ce(O)?(o=P,X(O)):(t.consume(O),P)}function B(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||ln(O)?N(O):(t.consume(O),B)}function Y(O){return O===47||O===62||ln(O)?N(O):n(O)}function he(O){return O===62?(t.consume(O),t.exit("htmlTextData"),t.exit("htmlText"),e):n(O)}function X(O){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),V}function V(O){return Ae(O)?Ue(t,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):H(O)}function H(O){return t.enter("htmlTextData"),o(O)}}const wy={name:"labelEnd",resolveAll:oV,resolveTo:aV,tokenize:lV},rV={tokenize:uV},iV={tokenize:cV},sV={tokenize:dV};function oV(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&vr(t,0,t.length,n),t}function aV(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},h={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",u,e],["enter",d,e]],a=An(a,t.slice(s+1,s+r+3)),a=An(a,[["enter",h,e]]),a=An(a,vy(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=An(a,[["exit",h,e],t[o-2],t[o-1],["exit",d,e]]),a=An(a,t.slice(o+1)),a=An(a,[["exit",u,e]]),vr(t,s,t.length,a),t}function lV(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(p){return s?s._inactive?f(p):(o=r.parser.defined.includes(go(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelEnd"),u):n(p)}function u(p){return p===40?t.attempt(rV,h,o?h:f)(p):p===91?t.attempt(iV,h,o?d:f)(p):o?h(p):f(p)}function d(p){return t.attempt(sV,h,f)(p)}function h(p){return e(p)}function f(p){return s._balanced=!0,n(p)}}function uV(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return ln(f)?qa(t,s)(f):s(f)}function s(f){return f===41?h(f):sT(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return ln(f)?qa(t,u)(f):h(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?aT(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):h(f)}function d(f){return ln(f)?qa(t,h)(f):h(f)}function h(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function cV(t,e,n){const r=this;return i;function i(a){return oT.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(go(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function dV(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const hV={name:"labelStartImage",resolveAll:wy.resolveAll,tokenize:fV};function fV(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const pV={name:"labelStartLink",resolveAll:wy.resolveAll,tokenize:mV};function mV(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const df={name:"lineEnding",tokenize:gV};function gV(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ue(t,e,"linePrefix")}}const uc={name:"thematicBreak",tokenize:yV};function yV(t,e,n){let r=0,i;return s;function s(d){return t.enter("thematicBreak"),o(d)}function o(d){return i=d,a(d)}function a(d){return d===i?(t.enter("thematicBreakSequence"),u(d)):r>=3&&(d===null||ce(d))?(t.exit("thematicBreak"),e(d)):n(d)}function u(d){return d===i?(t.consume(d),r++,u):(t.exit("thematicBreakSequence"),Ae(d)?Ue(t,a,"whitespace")(d):a(d))}}const Qt={continuation:{tokenize:bV},exit:EV,name:"list",tokenize:wV},xV={partial:!0,tokenize:kV},vV={partial:!0,tokenize:_V};function wV(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(m){const w=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:dm(m)){if(r.containerState.type||(r.containerState.type=w,t.enter(w,{_container:!0})),w==="listUnordered")return t.enter("listItemPrefix"),m===42||m===45?t.check(uc,n,d)(m):d(m);if(!r.interrupt||m===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(m)}return n(m)}function u(m){return dm(m)&&++o<10?(t.consume(m),u):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(t.exit("listItemValue"),d(m)):n(m)}function d(m){return t.enter("listItemMarker"),t.consume(m),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,t.check(Jd,r.interrupt?n:h,t.attempt(xV,p,f))}function h(m){return r.containerState.initialBlankLine=!0,s++,p(m)}function f(m){return Ae(m)?(t.enter("listItemPrefixWhitespace"),t.consume(m),t.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(m)}}function bV(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Jd,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ue(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ae(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(vV,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ue(t,t.attempt(Qt,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function _V(t,e,n){const r=this;return Ue(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function EV(t){t.exit(this.containerState.type)}function kV(t,e,n){const r=this;return Ue(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ae(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Jw={name:"setextUnderline",resolveTo:SV,tokenize:TV};function SV(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function TV(t,e,n){const r=this;let i;return s;function s(d){let h=r.events.length,f;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){f=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),a(d)}function a(d){return d===i?(t.consume(d),a):(t.exit("setextHeadingLineSequence"),Ae(d)?Ue(t,u,"lineSuffix")(d):u(d))}function u(d){return d===null||ce(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const CV={tokenize:NV};function NV(t){const e=this,n=t.attempt(Jd,r,t.attempt(this.parser.constructs.flowInitial,i,Ue(t,t.attempt(this.parser.constructs.flow,i,t.attempt(j6,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const IV={resolveAll:uT()},AV=lT("string"),RV=lT("text");function lT(t){return{resolveAll:uT(t==="text"?PV:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(h){return d(h)?s(h):a(h)}function a(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),u}function u(h){return d(h)?(n.exit("data"),s(h)):(n.consume(h),u)}function d(h){if(h===null)return!0;const f=i[h];let p=-1;if(f)for(;++p<f.length;){const m=f[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function uT(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function PV(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const d=i[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(d===-2)u=!0,a++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const d={type:n===t.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const jV={42:Qt,43:Qt,45:Qt,48:Qt,49:Qt,50:Qt,51:Qt,52:Qt,53:Qt,54:Qt,55:Qt,56:Qt,57:Qt,62:tT},DV={91:F6},OV={[-2]:cf,[-1]:cf,32:cf},LV={35:H6,42:uc,45:[Jw,uc],60:G6,61:Jw,95:uc,96:Yw,126:Yw},MV={38:rT,92:nT},FV={[-5]:df,[-4]:df,[-3]:df,33:hV,38:rT,42:hm,60:[p6,tV],91:pV,92:[$6,nT],93:wy,95:hm,96:C6},VV={null:[hm,IV]},UV={null:[42,95]},zV={null:[]},$V=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:UV,contentInitial:DV,disable:zV,document:jV,flow:LV,flowInitial:OV,insideSpan:VV,string:MV,text:FV},Symbol.toStringTag,{value:"Module"}));function BV(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const u={attempt:E(M),check:E(C),consume:v,enter:b,exit:D,interrupt:E(C,{interrupt:!0})},d={code:null,containerState:{},defineSkip:S,events:[],now:w,parser:t,previous:null,sliceSerialize:p,sliceStream:m,write:f};let h=e.tokenize.call(d,u);return e.resolveAll&&s.push(e),d;function f(j){return o=An(o,j),T(),o[o.length-1]!==null?[]:(_(e,0),d.events=vy(s,d.events,d),d.events)}function p(j,I){return qV(m(j),I)}function m(j){return HV(o,j)}function w(){const{_bufferIndex:j,_index:I,line:P,column:B,offset:Y}=r;return{_bufferIndex:j,_index:I,line:P,column:B,offset:Y}}function S(j){i[j.line]=j.column,R()}function T(){let j;for(;r._index<o.length;){const I=o[r._index];if(typeof I=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<I.length;)y(I.charCodeAt(r._bufferIndex));else y(I)}}function y(j){h=h(j)}function v(j){ce(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,R()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=j}function b(j,I){const P=I||{};return P.type=j,P.start=w(),d.events.push(["enter",P,d]),a.push(P),P}function D(j){const I=a.pop();return I.end=w(),d.events.push(["exit",I,d]),I}function M(j,I){_(j,I.from)}function C(j,I){I.restore()}function E(j,I){return P;function P(B,Y,he){let X,V,H,O;return Array.isArray(B)?ie(B):"tokenize"in B?ie([B]):re(B);function re(xe){return Oe;function Oe(W){const se=W!==null&&xe[W],Me=W!==null&&xe.null,ut=[...Array.isArray(se)?se:se?[se]:[],...Array.isArray(Me)?Me:Me?[Me]:[]];return ie(ut)(W)}}function ie(xe){return X=xe,V=0,xe.length===0?he:L(xe[V])}function L(xe){return Oe;function Oe(W){return O=N(),H=xe,xe.partial||(d.currentConstruct=xe),xe.name&&d.parser.constructs.disable.null.includes(xe.name)?Ee():xe.tokenize.call(I?Object.assign(Object.create(d),I):d,u,fe,Ee)(W)}}function fe(xe){return j(H,O),Y}function Ee(xe){return O.restore(),++V<X.length?L(X[V]):he}}}function _(j,I){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&vr(d.events,I,d.events.length-I,j.resolve(d.events.slice(I),d)),j.resolveTo&&(d.events=j.resolveTo(d.events,d))}function N(){const j=w(),I=d.previous,P=d.currentConstruct,B=d.events.length,Y=Array.from(a);return{from:B,restore:he};function he(){r=j,d.previous=I,d.currentConstruct=P,d.events.length=B,a=Y,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function HV(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function qV(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function WV(t){const r={constructs:ZF([$V,...(t||{}).extensions||[]]),content:i(a6),defined:[],document:i(u6),flow:i(CV),lazy:{},string:i(AV),text:i(RV)};return r;function i(s){return o;function o(a){return BV(r,s,a)}}}function KV(t){for(;!iT(t););return t}const Zw=/[\0\t\n\r]/g;function GV(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const u=[];let d,h,f,p,m;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,e="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Zw.lastIndex=f,d=Zw.exec(s),p=d&&d.index!==void 0?d.index:s.length,m=s.charCodeAt(p),!d){e=s.slice(f);break}if(m===10&&f===p&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<p&&(u.push(s.slice(f,p)),t+=p-f),m){case 0:{u.push(65533),t++;break}case 9:{for(h=Math.ceil(t/4)*4,u.push(-2);t++<h;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}f=p+1}return a&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const QV=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function YV(t){return t.replace(QV,XV)}function XV(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return eT(n.slice(s?2:1),s?16:10)}return xy(n)||t}const cT={}.hasOwnProperty;function JV(t,e,n){return typeof e!="string"&&(n=e,e=void 0),ZV(n)(KV(WV(n).document().write(GV()(t,e,!0))))}function ZV(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ft),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(Mt),blockQuote:s(Me),characterEscape:N,characterReference:N,codeFenced:s(ut),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ut,o),codeText:s(et,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(Lt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(cn),hardBreakEscape:s(Kt),hardBreakTrailing:s(Kt),htmlFlow:s(pe,o),htmlFlowData:N,htmlText:s(pe,o),htmlTextData:N,image:s(Gt),label:o,link:s(Ft),listItem:s(Jr),listItemValue:p,listOrdered:s(Fn,f),listUnordered:s(Fn),paragraph:s(nh),reference:L,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Mt),strong:s(Ko),thematicBreak:s(Bl)},exit:{atxHeading:u(),atxHeadingSequence:M,autolink:u(),autolinkEmail:se,autolinkProtocol:W,blockQuote:u(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:Ee,characterReferenceMarkerNumeric:Ee,characterReferenceValue:xe,characterReference:Oe,codeFenced:u(T),codeFencedFence:S,codeFencedFenceInfo:m,codeFencedFenceMeta:w,codeFlowValue:R,codeIndented:u(y),codeText:u(Y),codeTextData:R,data:R,definition:u(),definitionDestinationString:D,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(I),hardBreakTrailing:u(I),htmlFlow:u(P),htmlFlowData:R,htmlText:u(B),htmlTextData:R,image:u(X),label:H,labelText:V,lineEnding:j,link:u(he),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:fe,resourceDestinationString:O,resourceTitleString:re,resource:ie,setextHeading:u(_),setextHeadingLineSequence:E,setextHeadingText:C,strong:u(),thematicBreak:u()}};dT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r($){let K={type:"root",children:[]};const ue={stack:[K],tokenStack:[],config:e,enter:a,exit:d,buffer:o,resume:h,data:n},ve=[];let Re=-1;for(;++Re<$.length;)if($[Re][1].type==="listOrdered"||$[Re][1].type==="listUnordered")if($[Re][0]==="enter")ve.push(Re);else{const dn=ve.pop();Re=i($,dn,Re)}for(Re=-1;++Re<$.length;){const dn=e[$[Re][0]];cT.call(dn,$[Re][1].type)&&dn[$[Re][1].type].call(Object.assign({sliceSerialize:$[Re][2].sliceSerialize},ue),$[Re][1])}if(ue.tokenStack.length>0){const dn=ue.tokenStack[ue.tokenStack.length-1];(dn[1]||eb).call(ue,void 0,dn[0])}for(K.position={start:oi($.length>0?$[0][1].start:{line:1,column:1,offset:0}),end:oi($.length>0?$[$.length-2][1].end:{line:1,column:1,offset:0})},Re=-1;++Re<e.transforms.length;)K=e.transforms[Re](K)||K;return K}function i($,K,ue){let ve=K-1,Re=-1,dn=!1,hn,Cn,Zr,_r;for(;++ve<=ue;){const Vt=$[ve];switch(Vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Vt[0]==="enter"?Re++:Re--,_r=void 0;break}case"lineEndingBlank":{Vt[0]==="enter"&&(hn&&!_r&&!Re&&!Zr&&(Zr=ve),_r=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:_r=void 0}if(!Re&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Re===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(hn){let ei=ve;for(Cn=void 0;ei--;){const fn=$[ei];if(fn[1].type==="lineEnding"||fn[1].type==="lineEndingBlank"){if(fn[0]==="exit")continue;Cn&&($[Cn][1].type="lineEndingBlank",dn=!0),fn[1].type="lineEnding",Cn=ei}else if(!(fn[1].type==="linePrefix"||fn[1].type==="blockQuotePrefix"||fn[1].type==="blockQuotePrefixWhitespace"||fn[1].type==="blockQuoteMarker"||fn[1].type==="listItemIndent"))break}Zr&&(!Cn||Zr<Cn)&&(hn._spread=!0),hn.end=Object.assign({},Cn?$[Cn][1].start:Vt[1].end),$.splice(Cn||ve,0,["exit",hn,Vt[2]]),ve++,ue++}if(Vt[1].type==="listItemPrefix"){const ei={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start),end:void 0};hn=ei,$.splice(ve,0,["enter",ei,Vt[2]]),ve++,ue++,Zr=void 0,_r=!0}}}return $[K][1]._spread=dn,ue}function s($,K){return ue;function ue(ve){a.call(this,$(ve),ve),K&&K.call(this,ve)}}function o(){this.stack.push({type:"fragment",children:[]})}function a($,K,ue){this.stack[this.stack.length-1].children.push($),this.stack.push($),this.tokenStack.push([K,ue||void 0]),$.position={start:oi(K.start),end:void 0}}function u($){return K;function K(ue){$&&$.call(this,ue),d.call(this,ue)}}function d($,K){const ue=this.stack.pop(),ve=this.tokenStack.pop();if(ve)ve[0].type!==$.type&&(K?K.call(this,$,ve[0]):(ve[1]||eb).call(this,$,ve[0]));else throw new Error("Cannot close `"+$.type+"` ("+Ha({start:$.start,end:$.end})+"): its not open");ue.position.end=oi($.end)}function h(){return XF(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function p($){if(this.data.expectingFirstListItemValue){const K=this.stack[this.stack.length-2];K.start=Number.parseInt(this.sliceSerialize($),10),this.data.expectingFirstListItemValue=void 0}}function m(){const $=this.resume(),K=this.stack[this.stack.length-1];K.lang=$}function w(){const $=this.resume(),K=this.stack[this.stack.length-1];K.meta=$}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function T(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$.replace(/(\r?\n|\r)$/g,"")}function v($){const K=this.resume(),ue=this.stack[this.stack.length-1];ue.label=K,ue.identifier=go(this.sliceSerialize($)).toLowerCase()}function b(){const $=this.resume(),K=this.stack[this.stack.length-1];K.title=$}function D(){const $=this.resume(),K=this.stack[this.stack.length-1];K.url=$}function M($){const K=this.stack[this.stack.length-1];if(!K.depth){const ue=this.sliceSerialize($).length;K.depth=ue}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function E($){const K=this.stack[this.stack.length-1];K.depth=this.sliceSerialize($).codePointAt(0)===61?1:2}function _(){this.data.setextHeadingSlurpLineEnding=void 0}function N($){const ue=this.stack[this.stack.length-1].children;let ve=ue[ue.length-1];(!ve||ve.type!=="text")&&(ve=Go(),ve.position={start:oi($.start),end:void 0},ue.push(ve)),this.stack.push(ve)}function R($){const K=this.stack.pop();K.value+=this.sliceSerialize($),K.position.end=oi($.end)}function j($){const K=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ue=K.children[K.children.length-1];ue.position.end=oi($.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(K.type)&&(N.call(this,$),R.call(this,$))}function I(){this.data.atHardBreak=!0}function P(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$}function B(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$}function Y(){const $=this.resume(),K=this.stack[this.stack.length-1];K.value=$}function he(){const $=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";$.type+="Reference",$.referenceType=K,delete $.url,delete $.title}else delete $.identifier,delete $.label;this.data.referenceType=void 0}function X(){const $=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";$.type+="Reference",$.referenceType=K,delete $.url,delete $.title}else delete $.identifier,delete $.label;this.data.referenceType=void 0}function V($){const K=this.sliceSerialize($),ue=this.stack[this.stack.length-2];ue.label=YV(K),ue.identifier=go(K).toLowerCase()}function H(){const $=this.stack[this.stack.length-1],K=this.resume(),ue=this.stack[this.stack.length-1];if(this.data.inReference=!0,ue.type==="link"){const ve=$.children;ue.children=ve}else ue.alt=K}function O(){const $=this.resume(),K=this.stack[this.stack.length-1];K.url=$}function re(){const $=this.resume(),K=this.stack[this.stack.length-1];K.title=$}function ie(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function fe($){const K=this.resume(),ue=this.stack[this.stack.length-1];ue.label=K,ue.identifier=go(this.sliceSerialize($)).toLowerCase(),this.data.referenceType="full"}function Ee($){this.data.characterReferenceType=$.type}function xe($){const K=this.sliceSerialize($),ue=this.data.characterReferenceType;let ve;ue?(ve=eT(K,ue==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ve=xy(K);const Re=this.stack[this.stack.length-1];Re.value+=ve}function Oe($){const K=this.stack.pop();K.position.end=oi($.end)}function W($){R.call(this,$);const K=this.stack[this.stack.length-1];K.url=this.sliceSerialize($)}function se($){R.call(this,$);const K=this.stack[this.stack.length-1];K.url="mailto:"+this.sliceSerialize($)}function Me(){return{type:"blockquote",children:[]}}function ut(){return{type:"code",lang:null,meta:null,value:""}}function et(){return{type:"inlineCode",value:""}}function Lt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function cn(){return{type:"emphasis",children:[]}}function Mt(){return{type:"heading",depth:0,children:[]}}function Kt(){return{type:"break"}}function pe(){return{type:"html",value:""}}function Gt(){return{type:"image",title:null,url:"",alt:null}}function Ft(){return{type:"link",title:null,url:"",children:[]}}function Fn($){return{type:"list",ordered:$.type==="listOrdered",start:null,spread:$._spread,children:[]}}function Jr($){return{type:"listItem",spread:$._spread,checked:null,children:[]}}function nh(){return{type:"paragraph",children:[]}}function Ko(){return{type:"strong",children:[]}}function Go(){return{type:"text",value:""}}function Bl(){return{type:"thematicBreak"}}}function oi(t){return{line:t.line,column:t.column,offset:t.offset}}function dT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?dT(t,r):eU(t,r)}}function eU(t,e){let n;for(n in e)if(cT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function eb(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Ha({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Ha({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ha({start:e.start,end:e.end})+") is still open")}function tU(t){const e=this;e.parser=n;function n(r){return JV(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function nU(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function rU(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function iU(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function sU(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oU(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aU(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Wo(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,u);const d={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,d),t.applyData(e,d)}function lU(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function uU(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function hT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function cU(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return hT(t,e);const i={src:Wo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function dU(t,e){const n={src:Wo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function hU(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function fU(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return hT(t,e);const i={href:Wo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function pU(t,e){const n={href:Wo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function mU(t,e,n){const r=t.all(e),i=n?gU(n):fT(e),s={},o=[];if(typeof e.checked=="boolean"){const h=r[0];let f;h&&h.type==="element"&&h.tagName==="p"?f=h:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const h=r[a];(i||a!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?o.push(...h.children):o.push(h)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,d),t.applyData(e,d)}function gU(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=fT(n[r])}return e}function fT(t){const e=t.spread;return e??t.children.length>1}function yU(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function xU(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vU(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function wU(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function bU(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=py(e.children[1]),u=KS(e.children[e.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function _U(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let u=-1;const d=[];for(;++u<a;){const f=e.children[u],p={},m=o?o[u]:void 0;m&&(p.align=m);let w={type:"element",tagName:s,properties:p,children:[]};f&&(w.children=t.all(f),t.patch(f,w),w=t.applyData(f,w)),d.push(w)}const h={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,h),t.applyData(e,h)}function EU(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const tb=9,nb=32;function kU(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(rb(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(rb(e.slice(i),i>0,!1)),s.join("")}function rb(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===tb||s===nb;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===tb||s===nb;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function SU(t,e){const n={type:"text",value:kU(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function TU(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const CU={blockquote:nU,break:rU,code:iU,delete:sU,emphasis:oU,footnoteReference:aU,heading:lU,html:uU,imageReference:cU,image:dU,inlineCode:hU,linkReference:fU,link:pU,listItem:mU,list:yU,paragraph:xU,root:vU,strong:wU,table:bU,tableCell:EU,tableRow:_U,text:SU,thematicBreak:TU,toml:Ru,yaml:Ru,definition:Ru,footnoteDefinition:Ru};function Ru(){}const pT=-1,Zd=0,Wa=1,sd=2,by=3,_y=4,Ey=5,ky=6,mT=7,gT=8,ib=typeof self=="object"?self:globalThis,NU=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Zd:case pT:return n(o,i);case Wa:{const a=n([],i);for(const u of o)a.push(r(u));return a}case sd:{const a=n({},i);for(const[u,d]of o)a[r(u)]=r(d);return a}case by:return n(new Date(o),i);case _y:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case Ey:{const a=n(new Map,i);for(const[u,d]of o)a.set(r(u),r(d));return a}case ky:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case mT:{const{name:a,message:u}=o;return n(new ib[a](u),i)}case gT:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new ib[s](o),i)};return r},sb=t=>NU(new Map,t)(0),Fs="",{toString:IU}={},{keys:AU}=Object,va=t=>{const e=typeof t;if(e!=="object"||!t)return[Zd,e];const n=IU.call(t).slice(8,-1);switch(n){case"Array":return[Wa,Fs];case"Object":return[sd,Fs];case"Date":return[by,Fs];case"RegExp":return[_y,Fs];case"Map":return[Ey,Fs];case"Set":return[ky,Fs];case"DataView":return[Wa,n]}return n.includes("Array")?[Wa,n]:n.includes("Error")?[mT,n]:[sd,n]},Pu=([t,e])=>t===Zd&&(e==="function"||e==="symbol"),RU=(t,e,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=va(o);switch(a){case Zd:{let h=o;switch(u){case"bigint":a=gT,h=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);h=null;break;case"undefined":return i([pT],o)}return i([a,h],o)}case Wa:{if(u){let p=o;return u==="DataView"?p=new Uint8Array(o.buffer):u==="ArrayBuffer"&&(p=new Uint8Array(o)),i([u,[...p]],o)}const h=[],f=i([a,h],o);for(const p of o)h.push(s(p));return f}case sd:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const h=[],f=i([a,h],o);for(const p of AU(o))(t||!Pu(va(o[p])))&&h.push([s(p),s(o[p])]);return f}case by:return i([a,o.toISOString()],o);case _y:{const{source:h,flags:f}=o;return i([a,{source:h,flags:f}],o)}case Ey:{const h=[],f=i([a,h],o);for(const[p,m]of o)(t||!(Pu(va(p))||Pu(va(m))))&&h.push([s(p),s(m)]);return f}case ky:{const h=[],f=i([a,h],o);for(const p of o)(t||!Pu(va(p)))&&h.push(s(p));return f}}const{message:d}=o;return i([a,{name:u,message:d}],o)};return s},ob=(t,{json:e,lossy:n}={})=>{const r=[];return RU(!(e||n),!!e,new Map,r)(t),r},od=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?sb(ob(t,e)):structuredClone(t):(t,e)=>sb(ob(t,e));function PU(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function jU(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function DU(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||PU,r=t.options.footnoteBackLabel||jU,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[u]);if(!d)continue;const h=t.all(d),f=String(d.identifier).toUpperCase(),p=Wo(f.toLowerCase());let m=0;const w=[],S=t.footnoteCounts.get(f);for(;S!==void 0&&++m<=S;){w.length>0&&w.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,m);typeof v=="string"&&(v={type:"text",value:v}),w.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,m),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const T=h[h.length-1];if(T&&T.type==="element"&&T.tagName==="p"){const v=T.children[T.children.length-1];v&&v.type==="text"?v.value+=" ":T.children.push({type:"text",value:" "}),T.children.push(...w)}else h.push(...w);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+p},children:t.wrap(h,!0)};t.patch(d,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...od(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const yT=function(t){if(t==null)return FU;if(typeof t=="function")return eh(t);if(typeof t=="object")return Array.isArray(t)?OU(t):LU(t);if(typeof t=="string")return MU(t);throw new Error("Expected function, string, or object as test")};function OU(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=yT(t[n]);return eh(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function LU(t){const e=t;return eh(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function MU(t){return eh(e);function e(n){return n&&n.type===t}}function eh(t){return e;function e(n,r,i){return!!(VU(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function FU(){return!0}function VU(t){return t!==null&&typeof t=="object"&&"type"in t}const xT=[],UU=!0,ab=!1,zU="skip";function $U(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=yT(i),o=r?-1:1;a(t,void 0,[])();function a(u,d,h){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const m=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(u.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=xT,w,S,T;if((!e||s(u,d,h[h.length-1]||void 0))&&(m=BU(n(u,h)),m[0]===ab))return m;if("children"in u&&u.children){const y=u;if(y.children&&m[0]!==zU)for(S=(r?y.children.length:-1)+o,T=h.concat(y);S>-1&&S<y.children.length;){const v=y.children[S];if(w=a(v,S,T)(),w[0]===ab)return w;S=typeof w[1]=="number"?w[1]:S+o}}return m}}}function BU(t){return Array.isArray(t)?t:typeof t=="number"?[UU,t]:t==null?xT:[t]}function vT(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),$U(t,s,a,i);function a(u,d){const h=d[d.length-1],f=h?h.children.indexOf(u):void 0;return o(u,f,h)}}const fm={}.hasOwnProperty,HU={};function qU(t,e){const n=e||HU,r=new Map,i=new Map,s=new Map,o={...CU,...n.handlers},a={all:d,applyData:KU,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:WU,wrap:QU};return vT(t,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const f=h.type==="definition"?r:i,p=String(h.identifier).toUpperCase();f.has(p)||f.set(p,h)}}),a;function u(h,f){const p=h.type,m=a.handlers[p];if(fm.call(a.handlers,p)&&m)return m(a,h,f);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in h){const{children:S,...T}=h,y=od(T);return y.children=a.all(h),y}return od(h)}return(a.options.unknownHandler||GU)(a,h,f)}function d(h){const f=[];if("children"in h){const p=h.children;let m=-1;for(;++m<p.length;){const w=a.one(p[m],h);if(w){if(m&&p[m-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=lb(w.value)),!Array.isArray(w)&&w.type==="element")){const S=w.children[0];S&&S.type==="text"&&(S.value=lb(S.value))}Array.isArray(w)?f.push(...w):f.push(w)}}}return f}}function WU(t,e){t.position&&(e.position=IF(t))}function KU(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,od(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function GU(t,e){const n=e.data||{},r="value"in e&&!(fm.call(n,"hProperties")||fm.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function QU(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function lb(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function ub(t,e){const n=qU(t,e),r=n.one(t,void 0),i=DU(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function YU(t,e){return t&&"run"in t?async function(n,r){const i=ub(n,{file:r,...e});await t.run(i,r)}:function(n,r){return ub(n,{file:r,...t||e})}}function cb(t){if(t)throw t}var cc=Object.prototype.hasOwnProperty,wT=Object.prototype.toString,db=Object.defineProperty,hb=Object.getOwnPropertyDescriptor,fb=function(e){return typeof Array.isArray=="function"?Array.isArray(e):wT.call(e)==="[object Array]"},pb=function(e){if(!e||wT.call(e)!=="[object Object]")return!1;var n=cc.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&cc.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||cc.call(e,i)},mb=function(e,n){db&&n.name==="__proto__"?db(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},gb=function(e,n){if(n==="__proto__")if(cc.call(e,n)){if(hb)return hb(e,n).value}else return;return e[n]},XU=function t(){var e,n,r,i,s,o,a=arguments[0],u=1,d=arguments.length,h=!1;for(typeof a=="boolean"&&(h=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<d;++u)if(e=arguments[u],e!=null)for(n in e)r=gb(a,n),i=gb(e,n),a!==i&&(h&&i&&(pb(i)||(s=fb(i)))?(s?(s=!1,o=r&&fb(r)?r:[]):o=r&&pb(r)?r:{},mb(a,{name:n,newValue:t(h,o,i)})):typeof i<"u"&&mb(a,{name:n,newValue:i}));return a};const hf=gm(XU);function pm(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function JU(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...d){const h=t[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(d[f]===null||d[f]===void 0)&&(d[f]=i[f]);i=d,h?ZU(h,a)(...d):o(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function ZU(t,e){let n;return r;function r(...o){const a=t.length>o.length;let u;a&&o.push(i);try{u=t.apply(this,o)}catch(d){const h=d;if(a&&n)throw h;return i(h)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const sr={basename:ez,dirname:tz,extname:nz,join:rz,sep:"/"};function ez(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');$l(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function tz(t){if($l(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function nz(t){$l(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function rz(...t){let e=-1,n;for(;++e<t.length;)$l(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":iz(n)}function iz(t){$l(t);const e=t.codePointAt(0)===47;let n=sz(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function sz(t,e){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function $l(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const oz={cwd:az};function az(){return"/"}function mm(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function lz(t){if(typeof t=="string")t=new URL(t);else if(!mm(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return uz(t)}function uz(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const ff=["history","path","basename","stem","extname","dirname"];class bT{constructor(e){let n;e?mm(e)?n={path:e}:typeof e=="string"||cz(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":oz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ff.length;){const s=ff[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)ff.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?sr.basename(this.path):void 0}set basename(e){mf(e,"basename"),pf(e,"basename"),this.path=sr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?sr.dirname(this.path):void 0}set dirname(e){yb(this.basename,"dirname"),this.path=sr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?sr.extname(this.path):void 0}set extname(e){if(pf(e,"extname"),yb(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=sr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){mm(e)&&(e=lz(e)),mf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?sr.basename(this.path,this.extname):void 0}set stem(e){mf(e,"stem"),pf(e,"stem"),this.path=sr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Ot(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function pf(t,e){if(t&&t.includes(sr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+sr.sep+"`")}function mf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function yb(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function cz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const dz=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},hz={}.hasOwnProperty;class Sy extends dz{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=JU()}copy(){const e=new Sy;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(hf(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(xf("data",this.frozen),this.namespace[e]=n,this):hz.call(this.namespace,e)&&this.namespace[e]||void 0:e?(xf("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=ju(e),r=this.parser||this.Parser;return gf("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),gf("process",this.parser||this.Parser),yf("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=ju(e),u=r.parse(a);r.run(u,a,function(h,f,p){if(h||!f||!p)return d(h);const m=f,w=r.stringify(m,p);mz(w)?p.value=w:p.result=w,d(h,p)});function d(h,f){h||!f?o(h):s?s(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),gf("processSync",this.parser||this.Parser),yf("processSync",this.compiler||this.Compiler),this.process(e,i),vb("processSync","process",n),r;function i(s,o){n=!0,cb(s),r=o}}run(e,n,r){xb(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=ju(n);i.run(e,u,d);function d(h,f,p){const m=f||e;h?a(h):o?o(m):r(void 0,m,p)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),vb("runSync","run",r),i;function s(o,a){cb(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=ju(n),i=this.compiler||this.Compiler;return yf("stringify",i),xb(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(xf("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")u(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[h,...f]=d;u(h,f)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(d.plugins),d.settings&&(i.settings=hf(!0,i.settings,d.settings))}function a(d){let h=-1;if(d!=null)if(Array.isArray(d))for(;++h<d.length;){const f=d[h];s(f)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function u(d,h){let f=-1,p=-1;for(;++f<r.length;)if(r[f][0]===d){p=f;break}if(p===-1)r.push([d,...h]);else if(h.length>0){let[m,...w]=h;const S=r[p][1];pm(S)&&pm(m)&&(m=hf(!0,S,m)),r[p]=[d,m,...w]}}}}const fz=new Sy().freeze();function gf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function yf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function xf(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function xb(t){if(!pm(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function vb(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function ju(t){return pz(t)?t:new bT(t)}function pz(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function mz(t){return typeof t=="string"||gz(t)}function gz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yz="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",wb=[],bb={allowDangerousHtml:!0},xz=/^(https?|ircs?|mailto|xmpp)$/i,vz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function wz(t){const e=bz(t),n=_z(t);return Ez(e.runSync(e.parse(n),n),t)}function bz(t){const e=t.rehypePlugins||wb,n=t.remarkPlugins||wb,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...bb}:bb;return fz().use(tU).use(n).use(YU,r).use(e)}function _z(t){const e=t.children||"",n=new bT;return typeof e=="string"&&(n.value=e),n}function Ez(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,u=e.urlTransform||kz;for(const h of vz)Object.hasOwn(e,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+yz+h.id,void 0);return vT(t,d),DF(t,{Fragment:l.Fragment,components:i,ignoreInvalidStyle:!0,jsx:l.jsx,jsxs:l.jsxs,passKeys:!0,passNode:!0});function d(h,f,p){if(h.type==="raw"&&p&&typeof f=="number")return o?p.children.splice(f,1):p.children[f]={type:"text",value:h.value},f;if(h.type==="element"){let m;for(m in uf)if(Object.hasOwn(uf,m)&&Object.hasOwn(h.properties,m)){const w=h.properties[m],S=uf[m];(S===null||S.includes(h.tagName))&&(h.properties[m]=u(String(w||""),m,h))}}if(h.type==="element"){let m=n?!n.includes(h.tagName):s?s.includes(h.tagName):!1;if(!m&&r&&typeof f=="number"&&(m=!r(h,f,p)),m&&p&&typeof f=="number")return a&&h.children?p.children.splice(f,1,...h.children):p.children.splice(f,1),f}}}function kz(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||xz.test(t.slice(0,e))?t:""}const Sz=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(null),[i,s]=k.useState(null),[o,a]=k.useState(null),u=k.useRef(null),d=k.useRef(null),h=k.useRef([]),f=k.useRef(null);return k.useEffect(()=>()=>{o&&URL.revokeObjectURL(o),d.current&&d.current.getTracks().forEach(S=>S.stop())},[o]),{isRecording:t,startRecording:async S=>{try{r(null),h.current=[],f.current=(S==null?void 0:S.onChunk)||null;const T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:16e3}});d.current=T;const y=new MediaRecorder(T,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});u.current=y,y.ondataavailable=v=>{v.data.size>0&&(f.current&&f.current(v.data),h.current.push(v.data))},y.onstop=()=>{d.current&&(d.current.getTracks().forEach(v=>v.stop()),d.current=null)},y.start(1e3),e(!0)}catch(T){console.error("Error accessing microphone:",T),r("Could not access microphone. Please ensure you have granted microphone permissions."),e(!1),d.current&&(d.current.getTracks().forEach(y=>y.stop()),d.current=null)}},stopRecording:()=>new Promise(S=>{if(!u.current||!t){console.log("No active recording to stop"),S(null);return}console.log("Stopping media recorder...");const T=()=>{if(console.log("MediaRecorder onstop event fired"),h.current.length>0){const y=new Blob(h.current,{type:"audio/webm;codecs=opus"}),v=URL.createObjectURL(y);console.log("Audio blob created, size:",y.size,"bytes"),s(y),a(v),u.current&&(u.current.stream.getTracks().forEach(b=>b.stop()),u.current=null),S(y)}else console.warn("No audio data was recorded"),r("No audio data was recorded."),u.current&&(u.current.stream.getTracks().forEach(y=>y.stop()),u.current=null),S(null);e(!1)};u.current.onstop=T;try{u.current.state!=="inactive"&&u.current.stream.getTracks().forEach(y=>y.stop()),u.current.state==="recording"?(console.log("Calling MediaRecorder.stop()"),u.current.stop()):(console.log("MediaRecorder not in recording state, state:",u.current.state),T())}catch(y){console.error("Error stopping recording:",y),r("Failed to stop recording. Please try again."),u.current&&(u.current.stream.getTracks().forEach(v=>v.stop()),u.current=null),e(!1),S(null)}}),error:n,audioBlob:i,audioUrl:o,clearAudio:()=>{o&&(URL.revokeObjectURL(o),a(null)),s(null),h.current=[]},hasAudio:!!i}},th=()=>{const[t,e]=k.useState("idle"),[n,r]=k.useState({final:"",interim:""}),[i,s]=k.useState(null),o=k.useRef(null),a=k.useRef(!1),{startRecording:u,stopRecording:d,isRecording:h}=Sz(),f=()=>{const M=typeof window<"u"?window.location.origin:"http://localhost:8000",C="http://localhost:5000";try{const E=new URL(C);return`${E.protocol}//${E.host}`}catch(E){return console.error("Failed to parse backend URL, falling back to page origin:",E),M}},p=k.useCallback(()=>new Promise((M,C)=>{const E=f(),_=E.startsWith("https")?"wss":E.startsWith("http")?"ws":void 0,R=`${E.replace(/^https?/,_||"ws")}/api/stt/stream`;console.log("Connecting to WebSocket:",R);const j=new WebSocket(R);o.current=j,j.onopen=()=>{console.log("WebSocket connection established."),e("dictating"),M()},j.onmessage=I=>{try{const P=JSON.parse(I.data);P.is_final?r(B=>({final:B.final+P.transcript+" ",interim:""})):r(B=>({...B,interim:P.transcript}))}catch(P){console.error("Failed to parse STT message:",P)}},j.onerror=I=>{if(a.current||t==="review"){console.log("Suppressing WebSocket error during manual stop:",I);return}console.error("WebSocket error:",I),s("Connection error during dictation."),e("idle"),C(I)},j.onclose=I=>{console.log("WebSocket connection closed:",I.code,I.reason),!a.current&&t==="dictating"&&e("review"),a.current=!1}}),[t]),m=k.useCallback(async()=>{s(null),r({final:"",interim:""}),e("connecting");try{await p(),await u({onChunk:M=>{!o.current||o.current.readyState!==WebSocket.OPEN||M.arrayBuffer().then(C=>{if(o.current&&o.current.readyState===WebSocket.OPEN)try{o.current.send(C)}catch(E){console.warn("Socket send failed (likely closing):",E)}}).catch(C=>{console.error("Failed to stream audio chunk to STT socket:",C)})}})}catch(M){console.error("Failed to start dictation:",M),s("Could not start microphone. Please check permissions."),e("idle"),o.current&&o.current.close()}},[p,u]),w=()=>{if(o.current){try{o.current.close()}catch(M){console.error("Failed to close STT socket:",M)}o.current=null}},S=k.useCallback((M,C=!1)=>{a.current=!0;const E=()=>{C&&r({final:"",interim:""}),e(M),setTimeout(()=>{w()},500)};(h?d():Promise.resolve(null)).catch(N=>{console.error("Failed to fully stop recorder:",N)}).finally(E)},[h,d]),T=k.useCallback(()=>{if(t!=="dictating"&&t!=="connecting"&&t!=="requesting_permission"){console.warn("stopDictation called but not in an active state, current status:",t);return}S("review")},[t,S]),y=k.useCallback(()=>{S("idle",!0)},[S]),v=k.useCallback(()=>{if(t!=="dictating")return console.warn("stopAndPlay called but not in dictating state, current status:",t),"";const M=`${n.final}${n.interim}`.trim();return console.log("stopAndPlay: returning transcript of length",M.length),S("review"),M},[t,S,n]),b=k.useCallback(async()=>{await m()},[m]),D=k.useCallback(M=>{(t==="review"||t==="idle")&&(r({final:M,interim:""}),M===""&&t==="review"&&e("idle"))},[t]);return{status:t,transcript:n,error:i,startDictation:m,stopDictation:T,stopAndPlay:v,rerecord:b,cancelDictation:y,updateTranscript:D}},Tz="_chatContainer_1p9hh_2",Cz="_messagesArea_1p9hh_14",Nz="_messageBubbleBase_1p9hh_25",Iz="_userMessage_1p9hh_36",Az="_agentMessage_1p9hh_43",Rz="_markdownContent_1p9hh_50",Pz="_speakerIconContainer_1p9hh_57",jz="_chatInputBar_1p9hh_82",Dz="_inputTextArea_1p9hh_90",Oz="_actionButton_1p9hh_110",Lz="_leftControls_1p9hh_134",Mz="_sttControls_1p9hh_140",Fz="_reviewButton_1p9hh_146",Vz="_stopButton_1p9hh_178",Uz="_pulse_1p9hh_1",zz="_quizButton_1p9hh_197",$z="_quizOptionsContainer_1p9hh_217",Bz="_quizOptionButton_1p9hh_225",at={chatContainer:Tz,messagesArea:Cz,messageBubbleBase:Nz,userMessage:Iz,agentMessage:Az,markdownContent:Rz,speakerIconContainer:Pz,chatInputBar:jz,inputTextArea:Dz,actionButton:Oz,leftControls:Lz,sttControls:Mz,reviewButton:Fz,stopButton:Vz,pulse:Uz,quizButton:zz,quizOptionsContainer:$z,quizOptionButton:Bz},Hz=({message:t,onRetrySend:e,onSendMessage:n,onPlayAudio:r,isPlaying:i,isLoading:s,activeTimepoint:o,timepoints:a,forceTimepointRenderer:u,onWordClick:d})=>{const h=()=>{e&&t.text&&t.id&&e(t.text,t.id)},f=k.useCallback(()=>{r(t)},[r,t]),p=m=>{const w=[];if(!m)return w;let S=[];return m.forEach(T=>{if(T&&T.mark_name){const y=T.mark_name==="PARAGRAPH_BREAK",v=T.mark_name.includes(`

`),b=T.mark_name.trim();b&&!y&&S.push({...T,mark_name:b}),(y||v)&&(S.length>0&&w.push(S),S=[])}}),S.length>0&&w.push(S),w};return l.jsxs("div",{className:`
        ${at.messageBubbleBase}
        ${t.sender==="user"?at.userMessage:at.agentMessage}
      `,children:[l.jsx("div",{className:`${at.speakerIconContainer} ${s||i?at.speakerIconActive:""}`,title:i?"Stop audio":"Play audio",onClick:f,role:"button",tabIndex:0,onKeyPress:m=>{(m.key==="Enter"||m.key===" ")&&f()},children:s?l.jsx(an,{size:20,className:"animate-spin"}):i?l.jsx(Kr,{size:20}):l.jsx(Wr,{size:20})}),l.jsxs("div",{className:at.markdownContent,children:[(()=>{const m=a||[],w=m.length>0;return u&&w||w?l.jsx("div",{children:p(m).map((T,y)=>l.jsx("p",{className:"mb-4 last:mb-0",children:T.map((v,b)=>{const D=i&&o&&o.time_seconds===v.time_seconds&&o.mark_name===v.mark_name;return l.jsxs("span",{className:`${D?"bg-yellow-200 dark:bg-yellow-500/70 rounded-md":"bg-transparent"} ${d?"cursor-pointer":""}`,onClick:()=>d&&d(v.time_seconds),children:[v.mark_name," "]},`${y}-${b}`)})},y))}):l.jsx(wz,{children:t.text||""})})(),t.isError&&t.sender==="user"&&e&&l.jsx("button",{onClick:h,className:"text-xs text-red-400 hover:text-red-300 mt-1",title:"Retry sending message",children:"Failed to send. Retry?"}),t.isQuizQuestion&&t.options&&t.options.length>0&&l.jsx("div",{className:at.quizOptionsContainer,children:t.options.map((m,w)=>l.jsx("button",{className:at.quizOptionButton,onClick:()=>n(m),children:m},w))})]})]})},qz=({onSendMessage:t,isSendingMessage:e,onPreviewPlay:n,onPreviewStop:r,previewStatus:i})=>{const{status:s,transcript:o,startDictation:a,stopDictation:u,stopAndPlay:d,updateTranscript:h}=th(),f=k.useRef(null),p=`${o.final}${o.interim}`,[m,w]=k.useState(!1);k.useEffect(()=>{f.current&&(f.current.style.height="auto",f.current.style.height=`${f.current.scrollHeight}px`)},[p]);const S=()=>{p.trim()&&((i==="playing"||i==="loading")&&r(),t(p.trim()),h(""))},T=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),S())},y=C=>{(s==="review"||s==="idle")&&h(C.target.value)},v=k.useCallback((C,E)=>{if(!E.trim()&&C!=="dictating")return"No text to play";switch(C){case"idle":return"Play typed text";case"dictating":return"Stop recording and play";case"review":return"Play transcribed text";case"connecting":return"Connecting...";default:return"Play audio"}},[]),b=k.useCallback((C,E)=>{if(!E.trim()&&C!=="dictating")return"Play button disabled, no text available";switch(C){case"idle":return"Play audio of typed text";case"dictating":return"Stop dictation and play transcribed audio";case"review":return"Play audio of transcribed text";case"connecting":return"Connecting to speech service";default:return"Play audio"}},[]),D=k.useCallback(()=>{if(m){console.log("Play button click ignored - transition in progress");return}const C=p.trim();switch(s){case"idle":C&&(console.log("Playing typed text"),n(C));break;case"dictating":console.log("Stop & Play initiated"),w(!0);const E=d();E&&E.trim()?setTimeout(()=>{console.log("Playing transcript after stop, length:",E.length),n(E),w(!1)},150):(console.warn("No transcript available to play after stopping dictation"),w(!1));break;case"review":C&&(console.log("Playing transcribed text"),n(C));break;case"connecting":console.log("Play button clicked while connecting - ignoring");break;default:console.warn("Unexpected status for Play button:",s)}},[s,p,n,d,m]),M=k.useCallback(()=>{switch(s){case"idle":case"connecting":console.log("Starting new dictation from idle/connecting state"),a();break;case"review":console.log("Starting new dictation from review state (re-record)"),a();break;default:console.warn("Unexpected status for microphone click:",s)}},[s,a]);return l.jsxs("div",{className:at.chatInputBar,children:[l.jsx("div",{className:at.leftControls,children:i==="playing"||i==="loading"?l.jsx("button",{onClick:r,className:at.reviewButton,title:"Stop playback","aria-label":"Stop audio playback",children:i==="loading"?l.jsx(an,{size:20,className:"animate-spin"}):l.jsx(Kr,{size:20})}):l.jsx("button",{onClick:D,className:at.reviewButton,title:v(s,p),"aria-label":b(s,p),disabled:m||!p.trim()&&s!=="dictating",children:l.jsx(uy,{size:20})})}),l.jsx("textarea",{ref:f,className:at.inputTextArea,value:p,onChange:y,onKeyPress:T,placeholder:s==="dictating"?"Listening...":"Type or dictate your message...",rows:1,readOnly:s==="dictating"||s==="connecting"}),l.jsxs("div",{className:at.sttControls,children:[(s==="idle"||s==="connecting"||s==="review")&&l.jsx("button",{onClick:M,className:at.actionButton,disabled:e||s==="connecting",title:s==="review"?"Start new dictation":"Start dictation","aria-label":s==="review"?"Start new voice recording":"Start voice dictation",children:s==="connecting"?l.jsx(an,{size:20,className:"animate-spin"}):l.jsx(Ht,{size:20})}),s==="dictating"&&l.jsx("button",{onClick:u,className:`${at.actionButton} ${at.stopButton}`,title:"Stop dictation","aria-label":"Stop voice recording",children:l.jsx(PS,{size:20})})]}),l.jsx("button",{onClick:S,className:at.actionButton,disabled:e||!p.trim(),title:"Send message",children:e?l.jsx(an,{size:20,className:"animate-spin"}):l.jsx(I3,{size:20})})]})},Wz=({messages:t,isSendingMessage:e,onSendMessage:n,currentDocumentId:r,currentThreadId:i})=>{const s=k.useRef(null),{playAudio:o,stopAudio:a,seekAndPlay:u,status:d,activeTimepoint:h,wordTimepoints:f,error:p}=xr(r||null),{playAudio:m,stopAudio:w,status:S}=xr(null),[T,y]=k.useState(null),v=(C,E)=>{T===C.id&&u(E)},b=k.useCallback(async C=>{if(T===C.id){a(),y(null);return}a(),y(C.id);try{if(C.audio_content_base64&&C.timepoints&&C.timepoints.length>0)await o({audioContent:C.audio_content_base64,timepoints:C.timepoints});else if(C.text)await o({text:C.text});else throw new Error("No audio content or text to play.")}catch(E){console.error("Error playing message audio:",E),y(null)}},[o,a,T]);k.useEffect(()=>{d==="idle"&&y(null),p&&console.error("TTS Playback Error:",p)},[d,p]);const D=()=>{var C;(C=s.current)==null||C.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{D()},[t]);const M=(C,E)=>{n(C,!0,E)};return l.jsxs("div",{className:at.chatContainer,children:[l.jsxs("div",{className:at.messagesArea,children:[t.map(C=>{const E=T===C.id,_=E?h:null,N=E?f:C.timepoints||null,R=E&&(d==="playing"||d==="loading"||d==="paused");return l.jsx(Hz,{message:C,onRetrySend:C.sender==="user"?M:void 0,onSendMessage:n,onPlayAudio:b,isPlaying:E&&(d==="playing"||d==="paused"),isLoading:E&&d==="loading",activeTimepoint:_,timepoints:N,forceTimepointRenderer:R,onWordClick:E?j=>v(C,j):void 0},C.id)}),l.jsx("div",{ref:s})]}),l.jsx(qz,{onSendMessage:C=>n(C),isSendingMessage:e,currentDocumentId:r,currentThreadId:i,onPreviewPlay:C=>m({text:C}),onPreviewStop:w,previewStatus:S})]})},Kz=()=>{var v;tr();const t=Jn(),e=Yr(),n=(v=t.state)==null?void 0:v.chatResetToken,r=k.useMemo(()=>new URLSearchParams(t.search).get("document")||void 0,[t.search]),[i,s]=k.useState([]),[o,a]=k.useState(!1),[u,d]=k.useState(()=>localStorage.getItem("active_chat_thread_id")||void 0),[h,f]=k.useState(null),[p,m]=k.useState(!1),w=k.useRef(!1),S=k.useRef(null);k.useEffect(()=>{const b=`${t.key||"initial"}:${n??"none"}`;S.current!==b&&(S.current=b,m(!1),w.current=!1)},[t.key,n]),k.useEffect(()=>{u&&localStorage.setItem("active_chat_thread_id",u)},[u]),k.useEffect(()=>{(async()=>{if(u&&i.length===0){a(!0);try{const D=await on.getChatHistory(u);if(D&&D.length>0){const M=D.map((C,E)=>({id:`history-${E}-${Date.now()}`,text:C.content,sender:C.type==="human"?"user":"agent",timestamp:new Date().toISOString(),thread_id:u,document_id:r}));s(M)}}catch(D){console.error("Failed to restore history:",D),localStorage.removeItem("active_chat_thread_id"),d(void 0)}finally{a(!1)}}})()},[u,r]),k.useEffect(()=>{(()=>{if(r)try{f({id:r,name:`Document ${r.substring(0,8)}...`})}catch(D){console.error("Error setting document details:",D),f(null)}else f(null)})()},[r]);const T=k.useCallback(async()=>{if(!r){Pe.error("A document must be loaded to start a quiz.");return}if(!w.current){a(!0),m(!0),w.current=!0;try{const b=await on.chat({query:"/start_quiz",documentId:r,threadId:void 0,mode:"quiz"});b.thread_id&&d(b.thread_id);const D={id:`ai-quiz-start-${Date.now()}`,text:b.agent_response||"Starting quiz...",sender:"agent",timestamp:new Date().toISOString(),isQuizQuestion:b.is_quiz||!1,options:b.options||void 0,document_id:r,thread_id:b.thread_id,audio_content_base64:b.audio_content_base64||null,timepoints:b.timepoints||void 0};s(M=>[...M,D])}catch(b){console.error("Error starting quiz:",b),Pe.error(b.message||"Failed to start quiz."),m(!1),w.current=!1}finally{a(!1)}}},[r]);k.useEffect(()=>{new URLSearchParams(t.search).get("start_quiz")==="true"&&r&&!w.current&&T()},[t.search,r,T]);const y=k.useCallback(async b=>{const D=`user-text-${Date.now()}`,M={id:D,text:b,sender:"user",timestamp:new Date().toISOString(),isQuizQuestion:p,isPending:!0,document_id:r||void 0,thread_id:u||void 0};s(C=>[...C,M]),a(!0);try{const C=p?"quiz":"general_chat",E=await on.chat({query:b,documentId:r||void 0,threadId:u||void 0,mode:C});E.thread_id&&!u&&d(E.thread_id),s(_=>{const N=_.map(j=>j.id===D?{...j,isPending:!1,isError:!1,thread_id:E.thread_id||u}:j),R={id:`ai-text-response-${Date.now()}`,text:E.agent_response||"Sorry, I could not process that.",sender:"agent",timestamp:new Date().toISOString(),isQuizQuestion:E.is_quiz||!1,audio_content_base64:E.audio_content_base64||null,timepoints:E.timepoints||void 0,options:E.options||void 0,document_id:r||void 0,thread_id:E.thread_id||u||void 0};return[...N,R]}),E.is_quiz?m(!0):(E.quiz_complete||E.quiz_cancelled)&&m(!1)}catch(C){console.error("Error sending message:",C),Pe.error(C.message||"Failed to send message."),s(E=>E.map(_=>_.id===D?{..._,isPending:!1,isError:!0}:_))}finally{a(!1)}},[r,u,p]);return l.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[l.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm py-4 px-6 flex items-center",children:[l.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 mr-4","aria-label":"Go back",children:l.jsx(ay,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:p?"Quiz Mode":"Chat with AI Tutor"}),r&&l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Document: ",h?h.name:`ID: ${r.substring(0,8)}...`]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx(Wz,{messages:i,isSendingMessage:o,onSendMessage:y,onStartQuiz:T,currentDocumentId:r,currentThreadId:u})})]})},Gz=()=>{const{userPreferences:t,updateUserPreferences:e}=Tn(),[n,r]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(null),[u,d]=k.useState("idle"),[h,f]=k.useState(null),[p,m]=k.useState(null),[w,S]=k.useState(0),[T,y]=k.useState(null),[v,b]=k.useState((t==null?void 0:t.answerFormulationAutoPause)??!1),[D,M]=k.useState((t==null?void 0:t.answerFormulationPauseDuration)??3),[C,E]=k.useState(null),_=k.useCallback(L=>{b(L),e({answerFormulationAutoPause:L})},[e]),N=k.useCallback(L=>{M(L),e({answerFormulationPauseDuration:L})},[e]),{startDictation:R,stopDictation:j,transcript:I}=th();k.useEffect(()=>{I.final&&s(I.final)},[I]);const P=k.useRef(null),B=k.useRef(null),Y=k.useRef(0);k.useEffect(()=>{if(!v||u!=="recording"){P.current&&(clearTimeout(P.current),P.current=null),B.current&&(clearInterval(B.current),B.current=null),E(null);return}const L=I.final.length+I.interim.length;if(L!==Y.current)Y.current=L,P.current&&(clearTimeout(P.current),P.current=null),B.current&&(clearInterval(B.current),B.current=null),E(null);else if(!P.current&&L>0){let fe=D;E(fe),B.current=setInterval(()=>{fe-=.1,E(Math.max(0,fe))},100),P.current=setTimeout(()=>{B.current&&(clearInterval(B.current),B.current=null),E(null),X()},D*1e3)}},[I,v,u,D]),k.useEffect(()=>()=>{P.current&&clearTimeout(P.current),B.current&&clearInterval(B.current)},[]);const he=k.useCallback(async()=>{try{d("recording"),y(null),Y.current=0,await R()}catch(L){console.error("Failed to start dictation:",L),y("Failed to start dictation. Please check microphone permissions."),d("idle")}},[R]),X=k.useCallback(()=>{d("idle"),j(),P.current&&(clearTimeout(P.current),P.current=null),B.current&&(clearInterval(B.current),B.current=null),E(null)},[j]),V=k.useCallback(async()=>{var L,fe;if(!i.trim()){y("No transcript to refine");return}d("refining"),y(null);try{const Ee=await on.refineAnswer({transcript:i.trim(),question:n.trim()||void 0,session_id:h||void 0});a(Ee.refined_answer),f(Ee.session_id),m(Ee.fidelity_score??null),S(Ee.iteration_count),d("refined"),console.log("[useAnswerFormulation] Refinement successful:",{session_id:Ee.session_id,iteration:Ee.iteration_count,fidelity_score:Ee.fidelity_score})}catch(Ee){console.error("Failed to refine answer:",Ee),y(((fe=(L=Ee.response)==null?void 0:L.data)==null?void 0:fe.error)||"Failed to refine answer. Please try again."),d("idle")}},[i,n,h]),H=k.useCallback(async L=>{var fe,Ee,xe,Oe;if(!h){y("No active session to edit");return}if(!L.trim()){y("No edit command provided");return}console.log("[useAnswerFormulation] Sending edit command:",L),console.log("[useAnswerFormulation] Current refined answer before edit:",o==null?void 0:o.substring(0,100)),d("editing"),y(null);try{const W=await on.editAnswer({session_id:h,edit_command:L.trim()});console.log("[useAnswerFormulation] Edit response received:",{session_id:W.session_id,iteration:W.iteration_count,status:W.status,refined_answer_preview:(fe=W.refined_answer)==null?void 0:fe.substring(0,100)}),console.log("[useAnswerFormulation] Setting refined answer to:",(Ee=W.refined_answer)==null?void 0:Ee.substring(0,100)),a(W.refined_answer),S(W.iteration_count),d("refined"),console.log("[useAnswerFormulation] Edit successful - state updated")}catch(W){console.error("[useAnswerFormulation] Failed to apply edit:",W),y(((Oe=(xe=W.response)==null?void 0:xe.data)==null?void 0:Oe.error)||"Failed to apply edit. Please try again."),d("refined")}},[h,o]),O=k.useCallback(L=>{a(L),console.log("[useAnswerFormulation] Refined answer updated manually")},[]),re=k.useCallback(()=>{if(d("finalized"),t){const L=t.answerFormulationSessionsCompleted||0;e({answerFormulationSessionsCompleted:L+1})}console.log("[useAnswerFormulation] Answer finalized")},[t,e]),ie=k.useCallback(()=>{r(""),s(""),a(null),d("idle"),f(null),m(null),S(0),y(null),E(null),P.current&&(clearTimeout(P.current),P.current=null),B.current&&(clearInterval(B.current),B.current=null),console.log("[useAnswerFormulation] State reset")},[]);return{question:n,setQuestion:r,transcript:i,refinedAnswer:o,updateRefinedAnswer:O,status:u,sessionId:h,fidelityScore:p,iterationCount:w,error:T,autoPauseEnabled:v,setAutoPauseEnabled:_,pauseDuration:D,setPauseDuration:N,pauseCountdown:C,startDictation:he,stopDictation:X,refineAnswer:V,editAnswer:H,finalizeAnswer:re,reset:ie}},vf=(...t)=>t.filter(Boolean).join(" "),Qz=t=>{const e=[];let n=[];return t.forEach(r=>{if(!r||!r.mark_name)return;const i=r.mark_name==="PARAGRAPH_BREAK",s=r.mark_name.includes(`

`),o=r.mark_name.trim();o&&!i&&n.push({...r,mark_name:o}),(i||s)&&(n.length>0&&e.push(n),n=[])}),n.length>0&&e.push(n),e},Ss=({text:t,wordTimepoints:e,activeTimepoint:n,onWordClick:r,className:i})=>{if(!e||e.length===0)return l.jsx("p",{className:vf("whitespace-pre-wrap leading-relaxed",i),"aria-live":"polite",children:t});const s=Qz(e);return l.jsx("div",{className:vf("space-y-4",i),"aria-live":"polite",children:s.map((o,a)=>l.jsx("p",{className:"leading-relaxed text-gray-900 whitespace-pre-wrap",children:o.map((u,d)=>{const h=!!n&&n.time_seconds===u.time_seconds&&n.mark_name===u.mark_name;return l.jsxs("span",{className:vf("px-0.5 rounded transition-colors duration-150",h?"bg-yellow-200 dark:bg-yellow-500/70":"bg-transparent",r?"cursor-pointer":"cursor-default"),onClick:()=>r==null?void 0:r(u.time_seconds),children:[u.mark_name," "]},`${a}-${d}`)})},a))})},Yz=({value:t,onChange:e,disabled:n=!1})=>{const r=k.useRef(null),i=500,s=i-t.length,{playAudio:o,stopAudio:a,status:u,activeTimepoint:d,wordTimepoints:h,seekAndPlay:f}=xr(null);k.useEffect(()=>{const m=r.current;m&&(m.style.height="auto",m.style.height=`${m.scrollHeight}px`)},[t]);const p=()=>{t.trim()&&(u==="playing"||u==="loading"?a():o({text:t}))};return l.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border-2 border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(y3,{className:"w-6 h-6 text-blue-600"}),l.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Your Question ",l.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(Optional but Recommended)"})]}),l.jsx("button",{onClick:p,disabled:!t.trim()||n,className:`ml-auto p-2 rounded-full hover:bg-gray-100 
                     disabled:opacity-40 disabled:cursor-not-allowed
                     transition-colors duration-200
                     focus:outline-none focus:ring-2 focus:ring-blue-300`,title:u==="playing"?"Stop reading question":"Listen to question","aria-label":u==="playing"?"Stop audio":"Play question audio",children:u==="loading"?l.jsx(an,{className:"w-5 h-5 text-blue-600 animate-spin"}):u==="playing"?l.jsx(Kr,{className:"w-5 h-5 text-blue-600"}):l.jsx(Wr,{className:"w-5 h-5 text-blue-600"})})]}),l.jsx("div",{className:"mb-3 text-sm text-gray-600 italic",children:'Example: "Explain the causes of the American Revolution"'}),u==="playing"?l.jsxs("div",{className:"p-4 bg-blue-50 border-2 border-blue-200 rounded-md",children:[l.jsx(Ss,{text:t,wordTimepoints:h,activeTimepoint:d,onWordClick:m=>f(m),className:"text-lg"}),l.jsx("p",{className:"text-xs text-blue-700 mt-2 font-medium",children:"Listening mode enabled  stop playback to edit your question."})]}):l.jsx("textarea",{ref:r,value:t,onChange:m=>e(m.target.value),disabled:n,maxLength:i,placeholder:"Type or paste your assignment question here...","aria-label":"Enter your assignment question",className:`w-full min-h-[100px] px-4 py-3 text-lg text-gray-900 bg-white border-2 border-gray-300 rounded-md 
                     focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none
                     placeholder:text-gray-400 placeholder:italic
                     disabled:bg-gray-100 disabled:cursor-not-allowed
                     resize-none overflow-hidden
                     transition-colors duration-200`,style:{fontFamily:"OpenDyslexic, sans-serif"}}),l.jsxs("div",{className:"mt-3 flex items-start justify-between gap-4",children:[l.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-600",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{children:"Tip: Adding your question helps organize your answer"})]}),l.jsxs("div",{className:`text-sm font-medium ${s<50?"text-orange-600":"text-gray-500"}`,children:[s," characters remaining"]})]})]})},Xz=({transcript:t,interimTranscript:e="",isRecording:n,onStart:r,onStop:i,onSettingsClick:s,autoPauseEnabled:o=!1,pauseCountdown:a=null,disabled:u=!1})=>{const d=k.useRef(null),h=t.split(/\s+/).filter(v=>v.length>0).length,{playAudio:f,stopAudio:p,status:m,activeTimepoint:w,wordTimepoints:S,seekAndPlay:T}=xr(null);k.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[t,e]);const y=()=>{t.trim()&&(m==="playing"||m==="loading"?p():f({text:t}))};return l.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border-2 border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ht,{className:`w-6 h-6 ${n?"text-red-600":"text-blue-600"}`}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:n?"Listening...":"Speak Your Thoughts"}),n&&l.jsxs("span",{className:"text-sm text-gray-600",children:["(",h," words)"]})]}),n&&o&&a===null&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Auto-pause enabled"})]})]}),l.jsx("div",{className:"min-h-[300px] flex flex-col items-center justify-center gap-4 p-6 bg-gray-50 rounded-lg border-2 border-gray-200",children:!n&&!t?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:r,disabled:u,className:`w-32 h-32 rounded-full bg-green-500 hover:bg-green-600 
                       flex items-center justify-center
                       shadow-lg hover:shadow-xl
                       transition-all duration-200
                       disabled:bg-gray-400 disabled:cursor-not-allowed
                       focus:outline-none focus:ring-4 focus:ring-green-300`,"aria-label":"Start Dictating",children:l.jsx(Ht,{className:"w-16 h-16 text-white"})}),l.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Start Dictating"}),l.jsx("p",{className:"text-sm text-gray-500 text-center max-w-md",children:"Speak freely. Don't worry about organization."})]}):l.jsxs(l.Fragment,{children:[n&&l.jsx("div",{className:"w-24 h-24 rounded-full bg-red-500 flex items-center justify-center animate-pulse",children:l.jsx(Ht,{className:"w-12 h-12 text-white"})}),l.jsxs("div",{className:"w-full space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Transcript"}),t&&l.jsx("button",{onClick:y,disabled:!t.trim()||n,className:`p-2 rounded-full hover:bg-gray-100 
                               disabled:opacity-40 disabled:cursor-not-allowed
                               transition-colors duration-200
                               focus:outline-none focus:ring-2 focus:ring-blue-300`,title:m==="playing"?"Stop reading transcript":"Listen to transcript","aria-label":m==="playing"?"Stop audio":"Play transcript audio",children:m==="loading"?l.jsx(an,{className:"w-4 h-4 text-blue-600 animate-spin"}):m==="playing"?l.jsx(Kr,{className:"w-4 h-4 text-blue-600"}):l.jsx(Wr,{className:"w-4 h-4 text-blue-600"})})]}),l.jsxs("div",{ref:d,className:"w-full min-h-[200px] max-h-[400px] overflow-y-auto p-4 bg-white rounded-md border border-gray-300",role:"log","aria-live":"polite","aria-label":"Transcript",children:[t&&l.jsx(Ss,{text:t,wordTimepoints:S,activeTimepoint:w,onWordClick:v=>T(v),className:"text-lg"}),e&&l.jsx("p",{className:"text-base text-gray-500 italic whitespace-pre-wrap",style:{fontFamily:"OpenDyslexic, sans-serif"},children:e}),!t&&!e&&l.jsx("p",{className:"text-gray-400 italic",children:"Your speech will appear here..."})]})]}),a!==null&&a>0&&l.jsxs("div",{className:"w-full p-4 bg-yellow-50 border-2 border-yellow-300 rounded-md",children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["Pause detected: Auto-stopping in ",a.toFixed(1),"s"]})}),l.jsx("div",{className:"w-full bg-yellow-200 rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:"bg-yellow-600 h-full transition-all duration-100",style:{width:`${a/3*100}%`}})}),l.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"(Resume speaking to cancel)"})]})]})}),n&&l.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4",children:[l.jsxs("button",{onClick:i,className:`px-8 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg
                     shadow-md hover:shadow-lg
                     transition-all duration-200
                     focus:outline-none focus:ring-4 focus:ring-red-300
                     flex items-center gap-2`,"aria-label":"Stop Dictating",children:[l.jsx(cy,{className:"w-5 h-5"}),"Stop ",a!==null?"Now":"Dictating"]}),s&&l.jsxs("button",{onClick:s,className:`px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg
                       transition-all duration-200
                       focus:outline-none focus:ring-4 focus:ring-gray-300
                       flex items-center gap-2`,"aria-label":"Dictation Settings",children:[l.jsx(Ho,{className:"w-5 h-5"}),"Settings"]})]})]})},Jz=({originalTranscript:t,refinedAnswer:e,status:n,onRefine:r,onFinalize:i,onEditWithVoice:s,onEditManually:o,onStartOver:a})=>{const u=n==="refining",d=n==="editing",{playAudio:h,stopAudio:f,status:p,activeTimepoint:m,wordTimepoints:w,seekAndPlay:S}=xr(null),{playAudio:T,stopAudio:y,status:v,activeTimepoint:b,wordTimepoints:D,seekAndPlay:M}=xr(null),C=()=>{(v==="playing"||v==="loading")&&y(),p==="playing"||p==="loading"?f():t.trim()&&h({text:t})},E=()=>{(p==="playing"||p==="loading")&&f(),v==="playing"||v==="loading"?y():e!=null&&e.trim()&&T({text:e})};return l.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border-2 border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(em,{className:"w-6 h-6 text-purple-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e?"Review Your Answer":"Ready to Refine"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Your Spoken Thoughts (Original)"}),t&&l.jsxs("button",{onClick:C,disabled:!t.trim(),className:`flex items-center gap-1 px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 
                           text-blue-700 rounded-md transition-colors duration-200
                           disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed
                           focus:outline-none focus:ring-2 focus:ring-blue-300`,"aria-label":"Listen to original transcript",children:[p==="loading"?l.jsx(an,{className:"w-4 h-4 animate-spin"}):p==="playing"?l.jsx(Kr,{className:"w-4 h-4"}):l.jsx(Wr,{className:"w-4 h-4"}),p==="playing"?"Playing...":"Listen"]})]}),l.jsx("div",{className:"flex-1 p-4 bg-gray-50 rounded-md border border-gray-300 min-h-[200px] max-h-[400px] overflow-y-auto",children:l.jsx(Ss,{text:t,wordTimepoints:w,activeTimepoint:m,onWordClick:_=>S(_),className:"text-base"})})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Refined Answer"}),e&&l.jsxs("button",{onClick:E,disabled:!e.trim(),className:`flex items-center gap-1 px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 
                           text-blue-700 rounded-md transition-colors duration-200
                           disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed
                           focus:outline-none focus:ring-2 focus:ring-blue-300`,"aria-label":"Listen to refined answer",children:[v==="loading"?l.jsx(an,{className:"w-4 h-4 animate-spin"}):v==="playing"?l.jsx(Kr,{className:"w-4 h-4"}):l.jsx(Wr,{className:"w-4 h-4"}),v==="playing"?"Playing...":"Listen"]})]}),l.jsx("div",{className:"flex-1 p-4 bg-white rounded-md border-2 border-gray-300 min-h-[200px] max-h-[400px] overflow-y-auto",children:u?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-3",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"}),l.jsx("p",{className:"text-gray-600 font-medium",children:"Refining your answer..."}),l.jsx("p",{className:"text-sm text-gray-500",children:"This may take a few seconds"})]}):d?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-3",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),l.jsx("p",{className:"text-gray-600 font-medium",children:"Applying your edit..."})]}):e?l.jsx(Ss,{text:e,wordTimepoints:D,activeTimepoint:b,onWordClick:_=>M(_),className:"text-lg"}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("p",{className:"text-gray-400 italic text-center",children:'Click "Refine My Answer" to transform your spoken thoughts into clear writing'})})})]})]}),!e&&!u?l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs("button",{onClick:r,disabled:!t.trim(),className:`px-8 py-4 bg-purple-600 hover:bg-purple-700 text-white font-semibold text-lg rounded-lg
                     shadow-md hover:shadow-lg
                     transition-all duration-200
                     disabled:bg-gray-400 disabled:cursor-not-allowed
                     focus:outline-none focus:ring-4 focus:ring-purple-300
                     flex items-center gap-2`,children:[l.jsx(em,{className:"w-6 h-6"}),"Refine My Answer"]}),a&&l.jsxs("button",{onClick:a,className:`px-4 py-2 text-gray-600 hover:text-gray-800 font-medium
                       transition-colors duration-200
                       focus:outline-none focus:underline
                       flex items-center gap-2`,children:[l.jsx(Zp,{className:"w-4 h-4"}),"Start Over"]})]}):e&&!u&&!d?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[l.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"What would you like to do?"}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("button",{onClick:i,className:`flex-1 min-w-[200px] px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg
                         shadow-md hover:shadow-lg
                         transition-all duration-200
                         focus:outline-none focus:ring-4 focus:ring-green-300
                         flex items-center justify-center gap-2`,children:[l.jsx(yn,{className:"w-5 h-5"}),"Finalize Answer"]}),l.jsxs("button",{onClick:s,className:`flex-1 min-w-[200px] px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg
                         shadow-md hover:shadow-lg
                         transition-all duration-200
                         focus:outline-none focus:ring-4 focus:ring-blue-300
                         flex items-center justify-center gap-2`,children:[l.jsx(Ht,{className:"w-5 h-5"}),"Edit with Voice"]}),l.jsxs("button",{onClick:o,className:`flex-1 min-w-[200px] px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg
                         shadow-md hover:shadow-lg
                         transition-all duration-200
                         focus:outline-none focus:ring-4 focus:ring-indigo-300
                         flex items-center justify-center gap-2`,children:[l.jsx(ly,{className:"w-5 h-5"}),"Edit Manually"]})]})]}),a&&l.jsx("div",{className:"flex justify-center",children:l.jsxs("button",{onClick:a,className:`px-4 py-2 text-gray-600 hover:text-gray-800 font-medium
                         transition-colors duration-200
                         focus:outline-none focus:underline
                         flex items-center gap-2`,children:[l.jsx(Zp,{className:"w-4 h-4"}),"Start Over"]})})]}):null]})},Zz=({refinedAnswer:t,onEditCommand:e,onDone:n,onUndo:r,canUndo:i=!1,isProcessing:s=!1,recentEdit:o=null})=>{const[a,u]=k.useState(!0),[d,h]=k.useState(null),{startDictation:f,stopDictation:p,transcript:m,status:w}=th(),{playAudio:S,stopAudio:T,status:y,activeTimepoint:v,wordTimepoints:b,seekAndPlay:D}=xr(null),M=w==="dictating",C=m.final+m.interim,E=()=>{t.trim()&&(y==="playing"||y==="loading"?T():S({text:t}))};k.useEffect(()=>{if(o&&o.after!==o.before){h(o.after);const I=setTimeout(()=>{h(null)},3e3);return()=>clearTimeout(I)}},[o]);const _=async()=>{await f()},N=()=>{p(),setTimeout(()=>{const I=(m.final+m.interim).trim();I&&e(I)},500)},R=["Change 'upset' to 'angry'","Rephrase the second sentence","Add 'in 1773' after 'Boston Tea Party'","Remove the word 'very'","Move the sentence about taxes to the end"],j=()=>{if(!d||!t.includes(d))return t;const I=t.split(d);return l.jsx(l.Fragment,{children:I.map((P,B)=>l.jsxs(a2.Fragment,{children:[P,B<I.length-1&&l.jsx("span",{className:"bg-yellow-200 px-1 rounded animate-pulse",children:d})]},B))})};return l.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border-2 border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Ht,{className:"w-6 h-6 text-blue-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Edit Your Answer with Voice"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Refined Answer"}),t&&l.jsxs("button",{onClick:E,disabled:!t.trim()||M,className:`flex items-center gap-1 px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 
                         text-blue-700 rounded-md transition-colors duration-200
                         disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed
                         focus:outline-none focus:ring-2 focus:ring-blue-300`,"aria-label":"Listen to refined answer",children:[y==="loading"?l.jsx(an,{className:"w-4 h-4 animate-spin"}):y==="playing"?l.jsx(Kr,{className:"w-4 h-4"}):l.jsx(Wr,{className:"w-4 h-4"}),y==="playing"?"Playing...":"Listen"]})]}),l.jsx("div",{className:"p-4 bg-white rounded-md border-2 border-gray-300 min-h-[150px] max-h-[300px] overflow-y-auto",children:y==="playing"?l.jsx(Ss,{text:t,wordTimepoints:b,activeTimepoint:v,onWordClick:I=>D(I),className:"text-lg"}):l.jsx("p",{className:"text-lg text-gray-900 whitespace-pre-wrap",style:{fontFamily:"OpenDyslexic, sans-serif"},children:j()})}),d&&l.jsx("p",{className:"text-xs text-yellow-700 mt-1 italic",children:" Recent change highlighted (fades in 3 seconds)"})]}),l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ht,{className:"w-5 h-5 text-blue-600"}),l.jsx("h3",{className:"text-sm font-semibold text-blue-900",children:"Say your edit command"})]}),l.jsx("button",{onClick:()=>u(!a),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:a?l.jsxs(l.Fragment,{children:[l.jsx(m3,{className:"w-4 h-4"}),"Hide examples"]}):l.jsxs(l.Fragment,{children:[l.jsx(f3,{className:"w-4 h-4"}),"Show examples"]})})]}),a&&l.jsxs("div",{className:"mb-4 p-3 bg-white rounded-md border border-blue-200",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Examples:"}),l.jsx("ul",{className:"space-y-1",children:R.map((I,P)=>l.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600",children:""}),l.jsxs("span",{className:"italic",children:['"',I,'"']})]},P))})]}),M&&C&&l.jsxs("div",{className:"mb-4 p-3 bg-white rounded-md border-2 border-blue-400",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Your command:"}),l.jsxs("p",{className:"text-base text-gray-900 italic",children:['"',C,'"']})]}),M?l.jsxs("button",{onClick:N,className:`w-full px-6 py-4 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg
                     shadow-md hover:shadow-lg
                     transition-all duration-200
                     focus:outline-none focus:ring-4 focus:ring-red-300
                     flex items-center justify-center gap-2 animate-pulse`,children:[l.jsx(cy,{className:"w-5 h-5"}),"Stop & Apply Command"]}):l.jsxs("button",{onClick:_,disabled:s,className:`w-full px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg
                     shadow-md hover:shadow-lg
                     transition-all duration-200
                     disabled:bg-gray-400 disabled:cursor-not-allowed
                     focus:outline-none focus:ring-4 focus:ring-blue-300
                     flex items-center justify-center gap-2`,children:[l.jsx(Ht,{className:"w-5 h-5"}),s?"Applying edit...":"Start Voice Command"]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[l.jsxs("button",{onClick:n,disabled:s,className:`flex-1 min-w-[200px] px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg
                   shadow-md hover:shadow-lg
                   transition-all duration-200
                   disabled:bg-gray-400 disabled:cursor-not-allowed
                   focus:outline-none focus:ring-4 focus:ring-green-300
                   flex items-center justify-center gap-2`,children:[l.jsx(yn,{className:"w-5 h-5"}),"Done Editing"]}),r&&l.jsxs("button",{onClick:r,disabled:!i||s,className:`px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg
                     transition-all duration-200
                     disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed
                     focus:outline-none focus:ring-4 focus:ring-gray-300
                     flex items-center gap-2`,children:[l.jsx(jS,{className:"w-5 h-5"}),"Undo Last Edit"]})]}),l.jsxs("p",{className:"text-xs text-gray-500 text-center mt-4",children:["Press ",l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded text-xs",children:"Esc"})," to exit edit mode"]})]})},e9=({initialAnswer:t,onUpdate:e,onDone:n,onDictateAtCursor:r})=>{var Y,he;const[i,s]=k.useState([t]),[o,a]=k.useState(0),[u,d]=k.useState(!1),[h,f]=k.useState(!1),p=k.useRef(null),m=k.useRef(0),w=k.useRef(null),{playAudio:S,stopAudio:T,status:y,activeTimepoint:v,wordTimepoints:b,seekAndPlay:D}=xr(null),M=k.useMemo(()=>{var X;return((X=p.current)==null?void 0:X.textContent)||i[o]||t},[i,o,t]),C=()=>{var V;const X=((V=p.current)==null?void 0:V.textContent)||"";X.trim()&&(y==="playing"||y==="loading"?T():S({text:X}))};k.useEffect(()=>{p.current&&!p.current.textContent&&(p.current.textContent=t)},[t]),k.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]);const E=()=>{const X=window.getSelection();if(X&&X.rangeCount>0&&p.current){const V=X.getRangeAt(0),H=V.cloneRange();H.selectNodeContents(p.current),H.setEnd(V.endContainer,V.endOffset),m.current=H.toString().length}},_=()=>{var X;if(p.current&&m.current!==void 0){const V=window.getSelection(),H=document.createRange();try{let O=0;const re=[p.current];let ie,L=!1;for(;!L&&(ie=re.pop());)if(ie.nodeType===Node.TEXT_NODE){const fe=((X=ie.textContent)==null?void 0:X.length)||0;O+fe>=m.current?(H.setStart(ie,m.current-O),H.collapse(!0),L=!0):O+=fe}else for(let fe=ie.childNodes.length-1;fe>=0;fe--)re.push(ie.childNodes[fe]);L&&(V==null||V.removeAllRanges(),V==null||V.addRange(H))}catch(O){console.error("Error restoring cursor position:",O)}}},N=X=>{const V=X.currentTarget.textContent||"";if(V!==t&&f(!0),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{e(V)},500),V!==i[o]){const H=i.slice(0,o+1);H.push(V),s(H),a(H.length-1)}},R=()=>{if(o>0){const X=o-1;a(X),p.current&&(p.current.textContent=i[X],e(i[X]))}},j=()=>{if(o<i.length-1){const X=o+1;a(X),p.current&&(p.current.textContent=i[X],e(i[X]))}},I=()=>{E(),d(!0),setTimeout(()=>{const X=" and this is new dictated text";if(p.current){const V=p.current.textContent||"",H=m.current,O=V.slice(0,H)+X+V.slice(H);p.current.textContent=O,e(O);const re=i.slice(0,o+1);re.push(O),s(re),a(re.length-1),m.current=H+X.length,requestAnimationFrame(()=>{_()})}d(!1),r&&r(X)},2e3)};k.useEffect(()=>{const X=V=>{(V.ctrlKey||V.metaKey)&&(V.key==="z"&&!V.shiftKey?(V.preventDefault(),R()):(V.key==="z"&&V.shiftKey||V.key==="y")&&(V.preventDefault(),j()))};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[o,i]);const P=o>0,B=o<i.length-1;return l.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border-2 border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(ly,{className:"w-6 h-6 text-indigo-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Edit Manually"}),l.jsx("span",{className:"text-sm text-gray-500",children:"(Keyboard + Voice)"})]}),l.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-md",children:l.jsxs("p",{className:"text-sm text-indigo-900",children:[l.jsx("strong",{children:"How to edit:"}),' Click to place your cursor, then type directly or use "Dictate at Cursor" to insert voice text.']})}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Your Answer"}),l.jsxs("div",{className:"flex items-center gap-2",children:[h&&l.jsx("span",{className:"text-xs text-green-600 font-medium",children:" Unsaved changes"}),l.jsxs("button",{onClick:C,disabled:!((he=(Y=p.current)==null?void 0:Y.textContent)!=null&&he.trim())||u,className:`flex items-center gap-1 px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 
                         text-blue-700 rounded-md transition-colors duration-200
                         disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed
                         focus:outline-none focus:ring-2 focus:ring-blue-300`,"aria-label":"Listen to answer",children:[y==="loading"?l.jsx(an,{className:"w-4 h-4 animate-spin"}):y==="playing"?l.jsx(Kr,{className:"w-4 h-4"}):l.jsx(Wr,{className:"w-4 h-4"}),y==="playing"?"Playing...":"Listen"]})]})]}),y==="playing"?l.jsxs("div",{className:"p-4 bg-indigo-50 rounded-md border-2 border-indigo-300 min-h-[200px] max-h-[400px] overflow-y-auto",children:[l.jsx(Ss,{text:M,wordTimepoints:b,activeTimepoint:v,onWordClick:X=>D(X),className:"text-lg"}),l.jsx("p",{className:"text-xs text-indigo-600 mt-2 font-medium",children:"Listening mode enabled  stop playback to resume editing."})]}):l.jsx("div",{ref:p,contentEditable:!0,onInput:N,onBlur:E,suppressContentEditableWarning:!0,className:`p-4 bg-white rounded-md border-2 border-indigo-300 min-h-[200px] max-h-[400px] overflow-y-auto
                     focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 focus:outline-none
                     text-lg text-gray-900 whitespace-pre-wrap cursor-text`,style:{fontFamily:"OpenDyslexic, sans-serif"}}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click anywhere in the text to place your cursor"})]}),l.jsxs("div",{className:"mb-6 flex flex-wrap gap-3",children:[l.jsxs("button",{onClick:I,disabled:u,className:`flex-1 min-w-[200px] px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg
                   shadow-md hover:shadow-lg
                   transition-all duration-200
                   disabled:bg-gray-400 disabled:cursor-not-allowed
                   focus:outline-none focus:ring-4 focus:ring-blue-300
                   flex items-center justify-center gap-2`,children:[l.jsx(Ht,{className:`w-5 h-5 ${u?"animate-pulse":""}`}),u?"Listening...":"Dictate at Cursor"]}),l.jsxs("button",{onClick:R,disabled:!P,className:`px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg
                   transition-all duration-200
                   disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed
                   focus:outline-none focus:ring-4 focus:ring-gray-300
                   flex items-center gap-2`,title:"Undo (Ctrl+Z)",children:[l.jsx(jS,{className:"w-5 h-5"}),"Undo"]}),l.jsxs("button",{onClick:j,disabled:!B,className:`px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg
                   transition-all duration-200
                   disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed
                   focus:outline-none focus:ring-4 focus:ring-gray-300
                   flex items-center gap-2`,title:"Redo (Ctrl+Shift+Z)",children:[l.jsx(S3,{className:"w-5 h-5"}),"Redo"]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsxs("button",{onClick:n,className:`px-8 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg
                   shadow-md hover:shadow-lg
                   transition-all duration-200
                   focus:outline-none focus:ring-4 focus:ring-green-300
                   flex items-center gap-2`,children:[l.jsx(yn,{className:"w-5 h-5"}),"Done Editing"]})}),l.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md border border-gray-200",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Keyboard Shortcuts:"}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-600",children:[l.jsxs("span",{children:[l.jsx("kbd",{className:"px-1 py-0.5 bg-white border border-gray-300 rounded",children:"Ctrl+Z"})," Undo"]}),l.jsxs("span",{children:[l.jsx("kbd",{className:"px-1 py-0.5 bg-white border border-gray-300 rounded",children:"Ctrl+Shift+Z"})," Redo"]}),l.jsxs("span",{children:[l.jsx("kbd",{className:"px-1 py-0.5 bg-white border border-gray-300 rounded",children:"Ctrl+Y"})," Redo"]})]})]})]})},t9=({answer:t,wordCount:e,iterationCount:n,onCopy:r,onDownload:i,onStartNew:s})=>{const[o,a]=k.useState(!1),u=async()=>{try{await navigator.clipboard.writeText(t),r(),a(!0),setTimeout(()=>{a(!1)},3e3)}catch(h){console.error("Failed to copy to clipboard:",h),alert("Failed to copy to clipboard. Please try selecting and copying manually.")}},d=()=>{const h=new Blob([t],{type:"text/plain"}),f=URL.createObjectURL(h),p=document.createElement("a");p.href=f,p.download=`answer-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(f),i()};return l.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border-2 border-green-200 p-6 relative",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"animate-bounce",children:l.jsx(vi,{className:"w-8 h-8 text-green-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-green-800",children:"Your Answer is Ready!"})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"p-6 bg-white rounded-lg border-2 border-gray-300 shadow-sm",children:[l.jsx("p",{className:"text-lg text-gray-900 whitespace-pre-wrap leading-relaxed select-text",style:{fontFamily:"OpenDyslexic, sans-serif"},children:t}),l.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex flex-wrap gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold",children:"Word count:"}),l.jsxs("span",{children:[e," words"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold",children:"Refinement iterations:"}),l.jsx("span",{children:n})]})]})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-blue-900 mb-3",children:"What would you like to do?"}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx("button",{onClick:u,className:`flex-1 min-w-[180px] px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg
                       shadow-md hover:shadow-lg
                       transition-all duration-200
                       focus:outline-none focus:ring-4 focus:ring-blue-300
                       flex items-center justify-center gap-2`,children:o?l.jsxs(l.Fragment,{children:[l.jsx(yn,{className:"w-5 h-5"}),"Copied!"]}):l.jsxs(l.Fragment,{children:[l.jsx(g3,{className:"w-5 h-5"}),"Copy to Clipboard"]})}),l.jsxs("button",{onClick:d,className:`flex-1 min-w-[180px] px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg
                       shadow-md hover:shadow-lg
                       transition-all duration-200
                       focus:outline-none focus:ring-4 focus:ring-indigo-300
                       flex items-center justify-center gap-2`,children:[l.jsx(IS,{className:"w-5 h-5"}),"Download as Text"]})]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsxs("button",{onClick:s,className:`px-8 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg
                     shadow-md hover:shadow-lg
                     transition-all duration-200
                     focus:outline-none focus:ring-4 focus:ring-green-300
                     flex items-center gap-2`,children:[l.jsx(Zp,{className:"w-5 h-5"}),"Start New Answer"]})})]}),l.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:l.jsxs("p",{className:"text-sm text-yellow-800 flex items-start gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Tip:"})," Paste this into your assignment document or save it for later reference."]})]})}),o&&l.jsxs("div",{className:`fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg
                      animate-slide-up flex items-center gap-2 z-50`,children:[l.jsx(yn,{className:"w-5 h-5"}),l.jsx("span",{className:"font-medium",children:"Copied to clipboard!"})]}),l.jsx("style",{children:`
        @keyframes slide-up {
          from {
            transform: translateY(100px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})},n9=({enabled:t,duration:e,onEnabledChange:n,onDurationChange:r,onSave:i,onCancel:s,onTest:o})=>{const[a,u]=k.useState(t),[d,h]=k.useState(e),[f,p]=k.useState(!1),m=()=>{u(!a),p(!0)},w=b=>{h(b),p(!0)},S=b=>{h(b),p(!0)},T=()=>{n(a),r(d),i(),p(!1)},y=()=>{u(t),h(e),p(!1),s()},v=[{label:"Fast speakers",duration:1.5,description:"1-2s"},{label:"Standard (recommended)",duration:3,description:"3-4s"},{label:"Need thinking time",duration:6,description:"5-7s"},{label:"Processing delays",duration:9,description:"8-10s"}];return l.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg border-2 border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx(Ho,{className:"w-6 h-6 text-blue-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Dictation Settings"}),f&&l.jsx("span",{className:"ml-auto text-xs text-orange-600 font-medium",children:" Unsaved changes"})]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-1",children:"Auto-Pause Detection"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Automatically stop dictating when you pause speaking"})]}),l.jsx("button",{onClick:m,className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300 ${a?"bg-blue-600":"bg-gray-300"}`,role:"switch","aria-checked":a,children:l.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform duration-200 ${a?"translate-x-9":"translate-x-1"}`})})]}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Current: ",l.jsx("span",{className:"font-medium",children:a?"Enabled":"Disabled (Manual stop only)"})]})]}),l.jsxs("div",{className:`mb-6 p-4 border border-gray-200 rounded-lg transition-opacity duration-200 ${a?"bg-white":"bg-gray-50 opacity-50"}`,children:[l.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-2",children:"Pause Duration"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How long to wait before auto-stopping"}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"1s"}),l.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:d,onChange:b=>w(parseFloat(b.target.value)),disabled:!a,className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer
                       disabled:cursor-not-allowed disabled:opacity-50
                       [&::-webkit-slider-thumb]:appearance-none
                       [&::-webkit-slider-thumb]:w-5
                       [&::-webkit-slider-thumb]:h-5
                       [&::-webkit-slider-thumb]:rounded-full
                       [&::-webkit-slider-thumb]:bg-blue-600
                       [&::-webkit-slider-thumb]:cursor-pointer
                       [&::-moz-range-thumb]:w-5
                       [&::-moz-range-thumb]:h-5
                       [&::-moz-range-thumb]:rounded-full
                       [&::-moz-range-thumb]:bg-blue-600
                       [&::-moz-range-thumb]:border-0
                       [&::-moz-range-thumb]:cursor-pointer`}),l.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"10s"})]}),l.jsxs("p",{className:"text-center mt-2 text-lg font-semibold text-blue-600",children:["Current: ",d.toFixed(1)," seconds"]})]}),l.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[l.jsxs("p",{className:"text-xs font-semibold text-blue-900 mb-2 flex items-center gap-1",children:[l.jsx(j3,{className:"w-4 h-4"}),"Recommendations:"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:v.map((b,D)=>l.jsxs("button",{onClick:()=>S(b.duration),disabled:!a,className:`px-3 py-2 text-left text-sm rounded-md transition-all duration-200
                         disabled:cursor-not-allowed disabled:opacity-50
                         ${d===b.duration?"bg-blue-600 text-white font-semibold":"bg-white hover:bg-blue-100 text-gray-700 border border-blue-200"}`,children:[l.jsx("div",{className:"font-medium",children:b.label}),l.jsx("div",{className:"text-xs opacity-80",children:b.description})]},D))})]})]}),o&&l.jsxs("div",{className:"mb-6 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[l.jsx("h3",{className:"text-base font-semibold text-purple-900 mb-2",children:"Preview"}),l.jsx("p",{className:"text-sm text-purple-700 mb-3",children:"Try speaking and pausing to see how it feels"}),l.jsx("button",{onClick:o,disabled:!a,className:`w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg
                     shadow-md hover:shadow-lg
                     transition-all duration-200
                     disabled:bg-gray-400 disabled:cursor-not-allowed
                     focus:outline-none focus:ring-4 focus:ring-purple-300
                     flex items-center justify-center gap-2`,children:" Test Auto-Pause"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:T,disabled:!f,className:`flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg
                   shadow-md hover:shadow-lg
                   transition-all duration-200
                   disabled:bg-gray-400 disabled:cursor-not-allowed
                   focus:outline-none focus:ring-4 focus:ring-green-300
                   flex items-center justify-center gap-2`,children:[l.jsx(yn,{className:"w-5 h-5"}),"Save Settings"]}),l.jsxs("button",{onClick:y,className:`px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg
                   transition-all duration-200
                   focus:outline-none focus:ring-4 focus:ring-gray-300
                   flex items-center gap-2`,children:[l.jsx(Vl,{className:"w-5 h-5"}),"Cancel"]})]})]})},r9=({onComplete:t,onSkip:e})=>{const[n,r]=k.useState(0),[i,s]=k.useState(""),[o,a]=k.useState(""),[u,d]=k.useState(!1),[h,f]=k.useState(!1),p="What makes a good friend?",m="Um, a good friend is someone who like listens and is there when you need them and stuff.",w="A good friend is someone who listens and is there when you need them.",M=[()=>l.jsxs("div",{className:"text-center space-y-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx(x3,{className:"w-20 h-20 text-blue-600 animate-bounce"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Welcome to Answer Formulation!"}),l.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"This tool helps you turn your spoken thoughts into clear, well-written answers."}),l.jsx("p",{className:"text-base text-gray-600",children:"Let's practice together with a sample question."}),l.jsxs("div",{className:"flex gap-4 justify-center pt-4",children:[l.jsxs("button",{onClick:()=>r(1),className:`px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold text-lg rounded-lg
                   shadow-md hover:shadow-lg transition-all duration-200
                   focus:outline-none focus:ring-4 focus:ring-blue-300
                   flex items-center gap-2`,children:[l.jsx(uy,{className:"w-6 h-6"}),"Start Practice"]}),l.jsxs("button",{onClick:e,className:`px-6 py-4 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg
                   transition-all duration-200
                   focus:outline-none focus:ring-4 focus:ring-gray-300
                   flex items-center gap-2`,children:[l.jsx(A3,{className:"w-5 h-5"}),"Skip to Feature"]})]})]}),()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Your Practice Question"}),l.jsx("div",{className:"p-6 bg-blue-50 border-2 border-blue-300 rounded-lg",children:l.jsxs("p",{className:"text-xl text-gray-800 font-medium italic",children:['"',p,'"']})}),l.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-300 rounded-md",children:l.jsxs("p",{className:"text-sm text-yellow-800 flex items-start gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{children:"This is just for practice. Your answer won't be saved."})]})}),l.jsx("div",{className:"flex justify-center pt-4",children:l.jsx("button",{onClick:()=>r(2),className:`px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg
                   shadow-md hover:shadow-lg transition-all duration-200
                   focus:outline-none focus:ring-4 focus:ring-blue-300`,children:"Continue"})})]}),()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Step 1: Speak Your Thoughts"}),l.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[l.jsxs("p",{className:"text-sm text-blue-900 mb-2",children:[l.jsx("strong",{children:" Tip:"})," Don't worry about being perfect! Just speak naturally."]}),l.jsx("p",{className:"text-sm text-blue-800 italic",children:'For example: "Um, a good friend is someone who, like, listens to you and is there when you need them..."'})]}),l.jsx("div",{className:"flex flex-col items-center gap-4 p-8 bg-gray-50 rounded-lg border-2 border-gray-200",children:!u&&!i?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{d(!0),setTimeout(()=>{d(!1),s(m)},3e3)},className:`w-32 h-32 rounded-full bg-green-500 hover:bg-green-600 
                       flex items-center justify-center shadow-lg hover:shadow-xl
                       transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-green-300`,children:l.jsx(Ht,{className:"w-16 h-16 text-white"})}),l.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Start Dictating"})]}):u?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-24 h-24 rounded-full bg-red-500 flex items-center justify-center animate-pulse",children:l.jsx(Ht,{className:"w-12 h-12 text-white"})}),l.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Listening..."}),l.jsx("p",{className:"text-sm text-gray-500",children:"(Simulating your speech)"})]}):l.jsxs("div",{className:"w-full",children:[l.jsx("p",{className:"text-base text-gray-700 p-4 bg-white rounded-md border border-gray-300",children:i}),l.jsx("button",{onClick:()=>r(3),className:`mt-4 w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg
                       shadow-md hover:shadow-lg transition-all duration-200
                       focus:outline-none focus:ring-4 focus:ring-blue-300`,children:"Continue"})]})})]}),()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Step 2: Refine Your Answer"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Great! You said:"}),l.jsx("div",{className:"p-4 bg-gray-50 rounded-md border border-gray-300",children:l.jsxs("p",{className:"text-base text-gray-700 italic",children:['"',i,'"']})})]}),!o&&!h?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-base text-gray-600",children:"Now let's see how the AI can help organize this."}),l.jsx("div",{className:"flex justify-center",children:l.jsxs("button",{onClick:()=>{f(!0),setTimeout(()=>{f(!1),a(w)},2e3)},className:`px-8 py-4 bg-purple-600 hover:bg-purple-700 text-white font-semibold text-lg rounded-lg
                       shadow-md hover:shadow-lg transition-all duration-200
                       focus:outline-none focus:ring-4 focus:ring-purple-300
                       flex items-center gap-2`,children:[l.jsx(em,{className:"w-6 h-6"}),"Refine My Answer"]})})]}):h?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-8",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"}),l.jsx("p",{className:"text-gray-600 font-medium",children:"Refining your answer..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Here's your refined answer:"}),l.jsx("div",{className:"p-4 bg-white rounded-md border-2 border-green-300",children:l.jsxs("p",{className:"text-lg text-gray-900 font-medium",children:['"',o,'"']})})]}),l.jsxs("div",{className:"p-4 bg-green-50 border border-green-300 rounded-md",children:[l.jsx("p",{className:"text-sm font-semibold text-green-900 mb-2",children:"Notice how it:"}),l.jsxs("ul",{className:"space-y-1 text-sm text-green-800",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(yn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:'Removed filler words ("um", "like", "and stuff")'})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(yn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"Improved grammar"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(yn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"Kept YOUR ideas (nothing added!)"})]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsxs("button",{className:`px-6 py-3 bg-blue-100 hover:bg-blue-200 text-blue-700 font-semibold rounded-lg
                       transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300
                       flex items-center gap-2`,children:[l.jsx(Wr,{className:"w-5 h-5"}),"Listen"]}),l.jsx("button",{onClick:()=>r(4),className:`px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg
                       shadow-md hover:shadow-lg transition-all duration-200
                       focus:outline-none focus:ring-4 focus:ring-blue-300`,children:"Continue"})]})]})]}),()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Step 3: Practice Editing"}),l.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[l.jsx("p",{className:"text-sm text-blue-900 mb-2",children:"Let's try making a change. Say:"}),l.jsx("p",{className:"text-base text-blue-800 font-medium italic",children:`"Change 'listens' to 'really listens'"`})]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsxs("button",{onClick:()=>{a("A good friend is someone who really listens and is there when you need them."),setTimeout(()=>r(5),1e3)},className:`px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg
                   shadow-md hover:shadow-lg transition-all duration-200
                   focus:outline-none focus:ring-4 focus:ring-blue-300
                   flex items-center gap-2`,children:[l.jsx(Ht,{className:"w-5 h-5"}),"Try Voice Command"]}),l.jsxs("button",{onClick:()=>{a("A good friend is someone who really listens and is there when you need them."),setTimeout(()=>r(5),1e3)},className:`px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg
                   shadow-md hover:shadow-lg transition-all duration-200
                   focus:outline-none focus:ring-4 focus:ring-indigo-300
                   flex items-center gap-2`,children:[l.jsx(ly,{className:"w-5 h-5"}),"Edit Manually"]})]}),o.includes("really")&&l.jsxs("div",{className:"p-4 bg-green-50 border border-green-300 rounded-md animate-fade-in",children:[l.jsxs("p",{className:"text-sm text-green-900 mb-2",children:[l.jsx("strong",{children:"Perfect!"})," The text updated to:"]}),l.jsxs("p",{className:"text-base text-green-800 font-medium italic",children:['"',o,'"']}),l.jsx("p",{className:"text-sm text-green-700 mt-2",children:"You can make as many edits as you want!"})]})]}),()=>l.jsxs("div",{className:"text-center space-y-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-24 h-24 rounded-full bg-green-100 flex items-center justify-center animate-bounce",children:l.jsx(yn,{className:"w-16 h-16 text-green-600"})})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:" You're all set!"}),l.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg max-w-md mx-auto",children:[l.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-3",children:"You've learned:"}),l.jsxs("ul",{className:"space-y-2 text-left text-sm text-blue-800",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(yn,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),l.jsx("span",{children:"How to dictate your thoughts"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(yn,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),l.jsx("span",{children:"How the AI refines your words"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(yn,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),l.jsx("span",{children:"How to edit with voice or keyboard"})]})]})]}),l.jsx("p",{className:"text-lg text-gray-600",children:"Ready to formulate your first real answer?"}),l.jsxs("button",{onClick:t,className:`px-10 py-4 bg-green-600 hover:bg-green-700 text-white font-semibold text-lg rounded-lg
                 shadow-md hover:shadow-lg transition-all duration-200
                 focus:outline-none focus:ring-4 focus:ring-green-300
                 flex items-center gap-2 mx-auto`,children:[l.jsx(T3,{className:"w-6 h-6"}),"Start My First Answer"]})]})];return l.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-white rounded-lg shadow-lg border-2 border-blue-200 p-8",children:[n>0&&n<M.length-1&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-2",children:[l.jsxs("span",{children:["Step ",n," of 4"]}),l.jsxs("span",{children:[Math.round(n/4*100),"% complete"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${n/4*100}%`}})})]}),l.jsx("div",{className:"min-h-[400px]",children:M[n]()}),n>0&&n<M.length-1&&l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:e,className:"text-sm text-gray-500 hover:text-gray-700 underline",children:"Skip tutorial"})})]})},i9=({onTryAutoPause:t,onDismiss:e,autoHideDuration:n=3e4})=>{const[r,i]=k.useState(!0),[s,o]=k.useState(!1);k.useEffect(()=>{const d=setTimeout(()=>{a()},n);return()=>clearTimeout(d)},[n]);const a=()=>{o(!0),setTimeout(()=>{i(!1),e()},300)},u=()=>{o(!0),setTimeout(()=>{i(!1),t()},300)};return r?l.jsxs("div",{className:`w-full max-w-3xl mx-auto mb-6 transition-all duration-300 ${s?"opacity-0 transform translate-y-2":"opacity-100 transform translate-y-0"}`,children:[l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-300 rounded-lg shadow-md p-4",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:l.jsx(w3,{className:"w-6 h-6 text-blue-600"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-1",children:" Pro Tip: Work Hands-Free"}),l.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["You can enable ",l.jsx("strong",{children:'"Auto-Pause"'})," in settings to automatically stop dictating when you pause speaking. No need to click the stop button!"]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:u,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm rounded-md
                         shadow-sm hover:shadow-md
                         transition-all duration-200
                         focus:outline-none focus:ring-4 focus:ring-blue-300
                         flex items-center gap-2`,children:[l.jsx(Ho,{className:"w-4 h-4"}),"Try Auto-Pause"]}),l.jsx("button",{onClick:a,className:`px-4 py-2 bg-white hover:bg-gray-100 text-gray-700 font-medium text-sm rounded-md
                         border border-gray-300
                         transition-all duration-200
                         focus:outline-none focus:ring-4 focus:ring-gray-300`,children:"No Thanks"})]})]}),l.jsx("button",{onClick:a,className:`flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 rounded-md
                     transition-colors duration-200
                     focus:outline-none focus:ring-2 focus:ring-gray-300`,"aria-label":"Dismiss tip",children:l.jsx(Vl,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-500",children:[l.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-1 overflow-hidden",children:l.jsx("div",{className:"bg-blue-400 h-full rounded-full transition-all",style:{animation:`shrink ${n}ms linear`,width:"100%"}})}),l.jsxs("span",{className:"whitespace-nowrap",children:["Auto-dismisses in ",n/1e3,"s"]})]})]}),l.jsx("style",{children:`
        @keyframes shrink {
          from {
            width: 100%;
          }
          to {
            width: 0%;
          }
        }
      `})]}):null},s9=()=>{const{userPreferences:t,updateUserPreferences:e}=Tn(),{question:n,setQuestion:r,transcript:i,refinedAnswer:s,updateRefinedAnswer:o,status:a,sessionId:u,fidelityScore:d,iterationCount:h,error:f,autoPauseEnabled:p,setAutoPauseEnabled:m,pauseDuration:w,setPauseDuration:S,pauseCountdown:T,startDictation:y,stopDictation:v,refineAnswer:b,editAnswer:D,finalizeAnswer:M,reset:C}=Gz(),[E,_]=k.useState("none"),[N,R]=k.useState(!1),[j,I]=k.useState(!1),[P,B]=k.useState(!1);k.useEffect(()=>{const se=(t==null?void 0:t.answerFormulationOnboardingCompleted)??!1;I(!se)},[t]),k.useEffect(()=>{const se=(t==null?void 0:t.answerFormulationSessionsCompleted)??0,Me=(t==null?void 0:t.answerFormulationAutoPauseSuggestionDismissed)??!1;se===3&&!p&&!Me&&a==="finalized"&&B(!0)},[t,p,a]);const Y=()=>{I(!1),e({answerFormulationOnboardingCompleted:!0}).catch(se=>{console.warn("Failed to save onboarding preference:",se)})},he=()=>{I(!1),e({answerFormulationOnboardingCompleted:!0}).catch(se=>{console.warn("Failed to save onboarding preference:",se)})},X=()=>{B(!1),R(!0),e({answerFormulationAutoPauseSuggestionDismissed:!0}).catch(se=>{console.warn("Failed to save auto-pause preference:",se)})},V=()=>{B(!1),e({answerFormulationAutoPauseSuggestionDismissed:!0}).catch(se=>{console.warn("Failed to save auto-pause preference:",se)})},H=()=>{R(!1)},O=()=>{R(!1)},re=()=>{_("voice")},ie=()=>{_("manual")},L=()=>{_("none")},fe=se=>{o(se)},Ee=()=>{console.log("Answer copied to clipboard")},xe=()=>{console.log("Answer downloaded")},Oe=()=>{C(),_("none")},W=s?s.split(/\s+/).filter(se=>se.length>0).length:0;return j?l.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:l.jsx(r9,{onComplete:Y,onSkip:he})}):N?l.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsx(n9,{enabled:p,duration:w,onEnabledChange:m,onDurationChange:S,onSave:H,onCancel:O})})}):l.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:l.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Answer Formulation"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Transform your spoken thoughts into clear, well-written answers"})]}),P&&l.jsx(i9,{onTryAutoPause:X,onDismiss:V}),f&&l.jsx("div",{className:"p-4 bg-red-50 border-2 border-red-300 rounded-lg",children:l.jsxs("p",{className:"text-red-800 font-medium",children:[" ",f]})}),a==="finalized"&&s&&l.jsx(t9,{answer:s,wordCount:W,iterationCount:h,onCopy:Ee,onDownload:xe,onStartNew:Oe}),(a==="refined"||a==="editing")&&E==="voice"&&s&&l.jsx(Zz,{refinedAnswer:s,onEditCommand:D,onDone:L,isProcessing:a==="editing"}),(a==="refined"||a==="editing")&&E==="manual"&&s&&l.jsx(e9,{initialAnswer:s,onUpdate:fe,onDone:L}),(a==="idle"||a==="recording"||a==="refining"||a==="refined"||a==="editing")&&E==="none"&&l.jsxs(l.Fragment,{children:[l.jsx(Yz,{value:n,onChange:r,disabled:a==="recording"||a==="refining"||a==="editing"}),(a==="idle"||a==="recording")&&l.jsx(Xz,{transcript:i,isRecording:a==="recording",onStart:y,onStop:v,onSettingsClick:()=>R(!0),autoPauseEnabled:p,pauseCountdown:T}),i&&(a==="idle"||a==="refining"||a==="refined"||a==="editing")&&l.jsx(Jz,{originalTranscript:i,refinedAnswer:s,status:a==="refining"?"refining":a==="editing"?"editing":"refined",onRefine:b,onFinalize:M,onEditWithVoice:re,onEditManually:ie,onStartOver:Oe})]}),u&&l.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Session ID: ",u," | Status: ",a," | Iterations: ",h,d!==null&&` | Fidelity: ${d.toFixed(2)}`]})]})})},o9={idle:"Ready to capture your thoughts",connecting:"Connecting to microphone",requesting_permission:"Awaiting microphone permission",dictating:"Listening",review:"Dictation paused"},Du=(...t)=>t.filter(Boolean).join(" "),a9=({onTranscript:t,onClear:e,disabled:n=!1,className:r})=>{const{status:i,transcript:s,error:o,startDictation:a,stopDictation:u,cancelDictation:d}=th(),h=k.useRef(0);k.useEffect(()=>{const T=s.final;if(!T){h.current=0;return}if(T.length<=h.current)return;const y=T.slice(h.current);h.current=T.length,y&&t(y)},[s.final,t]);const f=k.useCallback(async()=>{n||(h.current=0,await a())},[n,a]),p=k.useCallback(()=>{u()},[u]),m=k.useCallback(()=>{h.current=0,d(),e==null||e()},[d,e]),w=i==="dictating",S=i==="connecting"||i==="requesting_permission";return l.jsxs("div",{className:Du("flex flex-col gap-4",r),children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-xl border border-gray-800 bg-gray-900/50 p-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:Du("flex h-10 w-10 items-center justify-center rounded-full transition-colors",w?"bg-rose-500/20 text-rose-400 animate-pulse":"bg-gray-800 text-gray-400"),children:w?l.jsx(Ht,{className:"h-5 w-5"}):l.jsx(Ht,{className:"h-5 w-5"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:Du("text-sm font-medium",w?"text-rose-400":"text-gray-300"),children:w?"Recording...":"Dictation"}),l.jsx("span",{className:"text-xs text-gray-500",children:o9[i]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[w?l.jsxs("button",{type:"button",onClick:p,className:"inline-flex items-center gap-2 rounded-lg bg-rose-600 px-4 py-2 text-sm font-medium text-white hover:bg-rose-500 focus:outline-none focus:ring-2 focus:ring-rose-500/50",children:[l.jsx(cy,{className:"h-4 w-4 fill-current"}),"Stop"]}):l.jsxs("button",{type:"button",onClick:f,disabled:n||S,className:Du("inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium text-white transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/50",n||S?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500"),children:[S?l.jsx(an,{className:"h-4 w-4 animate-spin"}):l.jsx(Ht,{className:"h-4 w-4"}),S?"Connecting...":"Start Dictation"]}),l.jsx("button",{type:"button",onClick:m,title:"Clear Dictation Session",className:"inline-flex items-center justify-center rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-gray-200",children:l.jsx(Vl,{className:"h-5 w-5"})})]})]}),o&&l.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-red-500/20 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:[l.jsx(As,{className:"h-4 w-4 text-red-400"}),l.jsx("span",{children:o})]})]})},_b=[{value:"bug",label:"Bug Report"},{value:"feature",label:"Feature Request"},{value:"accessibility",label:"Accessibility Issue"},{value:"other",label:"Other"}],l9=()=>{const[t,e]=k.useState(_b[0].value),[n,r]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(!1),[u,d]=k.useState(null),[h,f]=k.useState(""),{playAudio:p,stopAudio:m,status:w,activeTimepoint:S,wordTimepoints:T,seekAndPlay:y}=xr(null);k.useEffect(()=>{s(window.navigator.userAgent)},[]);const v=k.useMemo(()=>o||n.trim().length===0,[o,n]),b=w==="playing"||w==="loading"||w==="paused",D=k.useCallback(E=>{r(_=>_?`${_.trimEnd()} ${E}`:E)},[]),M=k.useCallback(()=>{b?m():n.trim()&&p({text:n})},[b,m,n,p]),C=k.useCallback(async E=>{if(E.preventDefault(),!v){a(!0),f(""),d(null);try{const _=await on.submitFeedback({type:t,description:n.trim(),browserInfo:i});d(_.feedback_id),r("")}catch(_){const N=_ instanceof Error?_.message:"Failed to submit feedback. Please try again.";f(N)}finally{a(!1)}}},[i,n,v,t]);return l.jsxs("div",{className:"mx-auto max-w-4xl py-10",children:[l.jsxs("header",{children:[l.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-blue-400",children:"Voice-friendly feedback"}),l.jsx("h1",{className:"mt-2 text-4xl font-semibold text-white",children:"Send Feedback"}),l.jsx("p",{className:"mt-3 max-w-2xl text-lg text-gray-300",children:"Dictate or type accessibility issues, bugs, or suggestions. We review every submission directly from Firebase Console."})]}),l.jsxs("form",{onSubmit:C,className:"mt-8 space-y-8",children:[l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs("label",{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Feedback Type"}),l.jsx("select",{className:"rounded-xl border border-gray-700 bg-gray-900/80 px-4 py-3 text-gray-100 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-800",value:t,onChange:E=>e(E.target.value),children:_b.map(E=>l.jsx("option",{value:E.value,children:E.label},E.value))})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Browser Details"}),l.jsx("p",{className:"rounded-xl border border-gray-700 bg-gray-900/60 px-4 py-3 text-sm text-gray-400",children:i||"Collecting browser info"})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"feedback-description",className:"text-sm font-medium text-gray-300",children:"Description"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Explain what happened, what you expected, and any assistive tech involved."})]}),l.jsxs("button",{type:"button",onClick:M,disabled:!n.trim(),className:`inline-flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${n.trim()?b?"bg-blue-500/20 text-blue-300 hover:bg-blue-500/30":"text-blue-400 hover:bg-blue-500/10 hover:text-blue-300":"text-gray-600 cursor-not-allowed"}`,children:[w==="loading"?l.jsx(an,{className:"h-4 w-4 animate-spin"}):b?l.jsx(Kr,{className:"h-4 w-4"}):l.jsx(Wr,{className:"h-4 w-4"}),b?"Stop Reading":"Read Aloud"]})]}),l.jsxs("div",{className:"space-y-3",children:[b?l.jsx("div",{className:"min-h-[220px] w-full rounded-2xl border border-blue-500/50 bg-slate-900 p-5 text-base text-white shadow-inner overflow-y-auto","aria-live":"polite",children:l.jsx(Ss,{text:n,wordTimepoints:T,activeTimepoint:S,onWordClick:y,className:"text-white",theme:"dark"})}):l.jsx("textarea",{id:"feedback-description",className:"min-h-[220px] w-full rounded-2xl border border-gray-600 bg-slate-900 p-5 text-base text-white placeholder-gray-400 shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-800",value:n,onChange:E=>r(E.target.value),placeholder:"Start typing or use the microphone below to dictate your report..."}),l.jsx(a9,{onTranscript:D,className:"w-full",disabled:b})]})]}),h&&l.jsx("div",{className:"rounded-xl border border-red-500/40 bg-red-500/10 px-4 py-3 text-sm text-red-100",children:h}),u&&l.jsxs("div",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["Thanks! Your feedback was received. Reference ID: ",l.jsx("span",{className:"font-mono",children:u})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{type:"submit",disabled:v||b,className:"inline-flex items-center rounded-full bg-blue-600 px-6 py-3 text-sm font-semibold tracking-wide text-white transition hover:bg-blue-500 disabled:cursor-not-allowed disabled:bg-gray-600",children:o?"Sending":"Submit Feedback"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Submissions are private to the LexiAid team and reviewed weekly."})]})]})]})},_T=k.createContext(void 0),u9=({children:t})=>{const[e,n]=k.useState(null),[r,i]=k.useState(!1),s=u=>{n(u)},o=k.useCallback(async()=>{if(e){i(!0);try{await on.cancelQuiz(e),Pe.success("Quiz session ended."),n(null)}catch(u){console.error("Failed to cancel quiz session:",u),Pe.error("Could not end the quiz session. Please try again.")}finally{i(!1)}}},[e]),a={quizThreadId:e,startQuizSession:s,cancelQuizSession:o,isCancelling:r};return l.jsx(_T.Provider,{value:a,children:t})},c9=()=>{const t=k.useContext(_T);if(t===void 0)throw new Error("useQuiz must be used within a QuizProvider");return t},d9=()=>{const{currentUser:t,signOut:e}=Tn(),{toggleUiTts:n,uiTtsEnabled:r,highContrast:i,toggleHighContrast:s,speakText:o}=tr(),a=Yr(),u=Jn(),[d,h]=k.useState(!1),{activeDocumentId:f}=OS(),{quizThreadId:p,cancelQuizSession:m,isCancelling:w}=c9();k.useEffect(()=>{document.documentElement.classList.toggle("high-contrast",i)},[i]);const S=async()=>{try{await e(),a("/")}catch(M){console.error("Failed to log out:",M)}},T=M=>{r&&o(M)},y=k.useCallback(()=>{f?a(`/dashboard/documents/${f}`):(Pe.error("Please select a document first to read."),a("/dashboard/documents"))},[f,a]),v=k.useCallback(async()=>{if(w){Pe("Please wait, ending quiz session...");return}p&&await m(),f?a(`/dashboard/chat?document=${f}`,{state:{chatResetToken:`${Date.now()}`}}):(Pe.error("Please select a document first."),a("/dashboard/documents"))},[f,a,p,w,m]),b=k.useCallback(()=>{f?a(`/dashboard/documents/${f}?tab=quiz`):(Pe.error("Please select a document first to start a quiz."),a("/dashboard/documents"))},[f,a]),D=[{to:"/dashboard",text:"Dashboard",icon:l.jsx(xn,{className:"w-5 h-5"})},{to:"/dashboard/documents",text:"My Documents",icon:l.jsx(AS,{className:"w-5 h-5"})},{text:"Read document",icon:l.jsx(h3,{className:"w-5 h-5"}),onClick:y},{text:"Chat with the document",icon:l.jsx(po,{className:"w-5 h-5"}),onClick:v},{text:"Quiz",icon:l.jsx(ac,{className:"w-5 h-5"}),onClick:b},{to:"/dashboard/answer-formulation",text:"Answer Formulation",icon:l.jsx(k3,{className:"w-5 h-5"})},{to:"/dashboard/upload",text:"Upload Document",icon:l.jsx(ks,{className:"w-5 h-5"})},{to:"/dashboard/feedback",text:"Feedback",icon:l.jsx(b3,{className:"w-5 h-5"})},{to:"/dashboard/settings",text:"Settings",icon:l.jsx(Ho,{className:"w-5 h-5"})}];return l.jsxs("div",{className:`min-h-screen flex flex-col ${i?"bg-black text-white":"bg-gradient-to-b from-gray-900 to-gray-800 text-gray-100"}`,children:[l.jsxs("header",{className:`lg:hidden flex items-center justify-between p-4 ${i?"bg-black border-b border-white":"bg-gray-800"}`,children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{onClick:()=>h(!0),className:`p-2 rounded-md ${i?"bg-gray-900 text-white":"bg-gray-700 text-gray-200"}`,"aria-label":"Open sidebar menu",children:l.jsx(_3,{className:"w-6 h-6"})}),l.jsxs(Te,{to:"/dashboard",className:"flex items-center ml-4",onMouseEnter:()=>T("AI Tutor Dashboard"),children:[l.jsx(jn,{className:`mr-2 h-6 w-6 ${i?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),l.jsx("span",{className:`text-xl font-semibold ${i?"text-white":"text-blue-400"}`,children:"AI Tutor"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:n,className:`p-2 rounded-full ${r?"bg-blue-600":i?"bg-gray-900":"bg-gray-700"}`,"aria-label":r?"Disable UI text-to-speech":"Enable UI text-to-speech","aria-pressed":r,onMouseEnter:()=>T(r?"Disable UI text-to-speech":"Enable UI text-to-speech"),children:l.jsx(fo,{className:"w-5 h-5"})}),l.jsx("button",{onClick:s,className:`p-2 rounded-full ${i?"bg-white text-black":"bg-gray-700 text-gray-200"}`,"aria-label":i?"Disable high contrast":"Enable high contrast","aria-pressed":i,onMouseEnter:()=>T(i?"Disable high contrast":"Enable high contrast"),children:i?l.jsx(tm,{className:"w-5 h-5"}):l.jsx(nd,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:`fixed inset-0 flex z-40 lg:hidden ${d?"opacity-100":"opacity-0 pointer-events-none"} transition-opacity duration-300 ease-in-out`,children:[l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70",onClick:()=>h(!1),"aria-hidden":"true"}),l.jsxs("div",{className:`relative flex flex-col w-80 max-w-xs ${i?"bg-black border-r border-white":"bg-gray-800"} pb-4 flex-1 flex flex-col`,children:[l.jsx("div",{className:"absolute top-0 right-0 pt-2 pr-2",children:l.jsx("button",{className:`p-2 rounded-md ${i?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>h(!1),"aria-label":"Close sidebar",children:l.jsx(Vl,{className:"w-5 h-5"})})}),l.jsxs("div",{className:"flex-1 h-0 pt-16 pb-4 overflow-y-auto",children:[l.jsxs("div",{className:"px-4 pb-6 flex items-center",children:[l.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"}`,children:l.jsx(rd,{className:"w-6 h-6"})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm font-medium",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)})})]}),l.jsxs("nav",{className:"mt-4 px-2 space-y-1",children:[D.map(M=>{const C=typeof M.to=="string"&&u.pathname===M.to,E=`group flex items-center px-3 py-2 text-sm font-medium rounded-md ${C?i?"bg-white text-black":"bg-blue-600 text-white":i?"text-gray-900 hover:bg-gray-700":"text-gray-200 hover:bg-gray-700"} transition-colors duration-200 w-full text-left`;return typeof M.onClick=="function"?l.jsxs("button",{onClick:M.onClick,className:E,onMouseEnter:()=>T(M.text),"aria-label":M.text,children:[M.icon,l.jsx("span",{className:"ml-3",children:M.text})]},M.text):l.jsxs(Te,{to:M.to,className:E,onMouseEnter:()=>T(M.text),"aria-current":C?"page":void 0,children:[M.icon,l.jsx("span",{className:"ml-3",children:M.text})]},M.to)}),l.jsxs("a",{href:"mailto:cossil@lexiaid.com?subject=LexiAid%20Support",className:"flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-200 hover:bg-gray-700 transition-colors duration-200",onMouseEnter:()=>T("Help and Support"),children:[l.jsx(Iw,{className:"w-5 h-5"}),l.jsx("span",{className:"ml-3",children:"Help & Support"})]}),l.jsxs("button",{onClick:S,className:`w-full group flex items-center px-4 py-3 text-base font-medium rounded-md ${i?"text-white hover:bg-gray-900":"text-gray-200 hover:bg-gray-700"} transition-colors duration-200`,onMouseEnter:()=>T("Sign out"),children:[l.jsx(Aw,{className:"w-5 h-5"}),l.jsx("span",{className:"ml-4",children:"Sign out"})]})]})]})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx("div",{className:"hidden lg:block lg:flex-shrink-0 lg:w-64",children:l.jsxs("div",{className:`h-full flex flex-col ${i?"bg-black border-r border-white":"bg-gray-800"}`,children:[l.jsx("div",{className:"flex items-center h-16 flex-shrink-0 px-6",children:l.jsxs(Te,{to:"/dashboard",className:"flex items-center",onMouseEnter:()=>T("AI Tutor Dashboard"),children:[l.jsx(jn,{className:`mr-2 h-6 w-6 ${i?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),l.jsx("span",{className:`text-xl font-semibold ${i?"text-white":"text-blue-400"}`,children:"AI Tutor"})]})}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-700",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"}`,children:l.jsx(rd,{className:"w-6 h-6"})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm font-medium truncate max-w-[140px]",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)})})]})}),l.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1",children:[D.map(M=>{const C=M.to&&u.pathname===M.to,E=`group flex items-center px-4 py-3 text-base font-medium rounded-md ${C?i?"bg-white text-black":"bg-blue-600 text-white":i?"text-white hover:bg-gray-900":"text-gray-200 hover:bg-gray-700"} transition-colors duration-200 w-full text-left`;return typeof M.onClick=="function"?l.jsxs("button",{onClick:M.onClick,className:E,onMouseEnter:()=>T(M.text),"aria-label":M.text,children:[M.icon,l.jsx("span",{className:"ml-4",children:M.text})]},M.text):l.jsxs(Te,{to:M.to,className:E,onMouseEnter:()=>T(M.text),"aria-current":C?"page":void 0,children:[M.icon,l.jsx("span",{className:"ml-4",children:M.text})]},M.to)}),l.jsxs("a",{href:"mailto:cossil@lexiaid.com?subject=LexiAid%20Support",className:`group flex items-center px-4 py-3 text-base font-medium rounded-md ${i?"text-white hover:bg-gray-900":"text-gray-200 hover:bg-gray-700"} transition-colors duration-200`,onMouseEnter:()=>T("Help and Support"),children:[l.jsx(Iw,{className:"w-5 h-5"}),l.jsx("span",{className:"ml-4",children:"Help & Support"})]})]}),l.jsxs("div",{className:"px-4 py-4 border-t border-gray-700 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("button",{onClick:n,className:`p-2 rounded-md flex items-center ${r?i?"bg-white text-black":"bg-blue-600 text-white":i?"bg-gray-900 text-white":"bg-gray-700 text-gray-200"}`,"aria-label":r?"Disable UI text-to-speech":"Enable UI text-to-speech","aria-pressed":r,onMouseEnter:()=>T(r?"Disable UI text-to-speech":"Enable UI text-to-speech"),children:[l.jsx(fo,{className:"w-5 h-5"}),l.jsx("span",{className:"ml-2 text-sm",children:r?"TTS ON":"TTS OFF"})]}),l.jsxs("button",{onClick:s,className:`p-2 rounded-md flex items-center ${i?"bg-white text-black":"bg-gray-700 text-gray-200"}`,"aria-label":i?"Disable high contrast":"Enable high contrast","aria-pressed":i,onMouseEnter:()=>T(i?"Disable high contrast":"Enable high contrast"),children:[i?l.jsx(tm,{className:"w-5 h-5"}):l.jsx(nd,{className:"w-5 h-5"}),l.jsx("span",{className:"ml-2 text-sm",children:i?"High contrast":"Normal contrast"})]})]}),l.jsxs("button",{onClick:S,className:`w-full group flex items-center px-4 py-3 text-base font-medium rounded-md ${i?"text-white bg-gray-900 hover:bg-gray-800":"text-gray-200 bg-gray-700 hover:bg-gray-600"} transition-colors duration-200`,onMouseEnter:()=>T("Sign out"),children:[l.jsx(Aw,{className:"w-5 h-5"}),l.jsx("span",{className:"ml-4",children:"Sign out"})]})]})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto",children:l.jsx("main",{className:"h-full",children:l.jsx("div",{className:"h-full py-2 px-4",children:l.jsx(vI,{})})})})]})]})},h9=()=>l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white",children:[l.jsxs("nav",{className:"w-full py-4 px-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(jn,{className:"text-blue-400 mr-2",size:24,"aria-hidden":"true"}),l.jsx("span",{className:"text-blue-400 font-medium text-xl",children:"LexiAid"})]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm font-medium",children:[l.jsx(Te,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"Home"}),l.jsx(Te,{to:"/auth/signin",className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors",children:"Sign In"})]})]}),l.jsx("main",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("article",{className:"prose prose-invert max-w-none",children:[l.jsx("h1",{children:"About LexiAid: Engineering Empathy"}),l.jsx("h2",{children:"The Inspiration: A Father and Son"}),l.jsxs("p",{children:["LexiAid was not born in a boardroom; it was born at a kitchen table. It began with a single mission:",l.jsx("strong",{children:" to help my son Rafael, and hopefully many other with the same difficults, connect with the world."})]}),l.jsx("p",{children:"Rafael is a brilliant young adult who navigates life with Duchenne Muscular Dystrophy (DMD). Alongside the physical challenges of DMD, Rafa lives with severe dyslexia, alexia (the inability to read words), and dysgraphia (the inability to write)."}),l.jsx("p",{children:"But these labels do not define him. Rafa is funny, incredibly insightful, and creative. He devours documentaries on Renaissance art, delves into complex philosophical arguments via podcasts, and even guides his parents and friends through complex cooking techniques by memory. His intelligence is limitless."}),l.jsx("h2",{children:'The Reality: "Serving a Sentence"'}),l.jsxs("p",{children:["For years, we witnessed the mixture of suffering and anguish of a student with all this potential effectively",l.jsx("strong",{children:' "serving a sentence"'})," throughout middle and high school."]}),l.jsx("p",{children:`Instead of an environment where his intellect could soar, Rafa was frequently relegated to classrooms for "special" students. This wasn't because he couldn't understand the material, but because the system lacked the ability to bridge the gap imposed by his inability to decode text.`}),l.jsxs("p",{children:["We faced the frustration of an educational system where the lack of resources and structureoften coupled with a rigid unwillingness to adaptled schools to opt for the easiest path: ",l.jsx("strong",{children:"seclusion instead of inclusion."})," Bright minds like Rafa's were isolated not because they couldn't learn, but because the tools to teach them fairly did not exist."]}),l.jsx("h2",{children:"The Solution: An Auditory-First Philosophy"}),l.jsxs("p",{children:['We realized that waiting for the system to change was not an option. We decided to build the "digital ramp" ourselves. LexiAid is designed from the ground up to be ',l.jsx("strong",{children:"Auditory-First"}),", using AI to remove the friction of access."]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"We Make Documents Speak:"}),` Our "Document Understanding Agent" doesn't just read text; it analyzes the entire page. It describes charts, explains images in context, and navigates layout complexities, turning a static PDF into an interactive, narrated experience.`]}),l.jsxs("li",{children:[l.jsx("strong",{children:"We Help Thoughts Flow:"}),' Our "Answer Formulation" tool allows students to speak their messy, complex, non-linear thoughts. The AI refines these spoken words into clear, structured text',l.jsx("strong",{children:"without adding external information"}),". This ensures the final work is 100% the student's own knowledge, just translated into a format the academic world accepts."]})]}),l.jsx("h2",{children:"Our Mission"}),l.jsxs("p",{children:["LexiAid is a ",l.jsx("strong",{children:"non-profit project"}),". We believe that intelligence should never be defined by the ability to decode symbols on a page."]}),l.jsx("p",{children:"Our goal is to empower students with severe learning disabilities to demonstrate their true potential, restore their academic independence, and prove that when we design for inclusion, everyone benefits."}),l.jsx("hr",{}),l.jsx("h3",{children:"About the Founder"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Alexandre da Costa e Silva"})," is a Senior Engineering Leader in RF & Telecommunications Systems. Motivated by the frustration of seeing his son's potential stifled by inflexible systems, he applied his engineering expertise to build the technology that schools failed to provide."]}),l.jsx("blockquote",{children:"Leaving brilliant minds behind because we haven't bothered to build accessible interfaces isn't just a failure of technology; it's a failure of empathy."})]})})]}),f9=()=>l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white",children:[l.jsxs("nav",{className:"w-full py-4 px-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(jn,{className:"text-blue-400 mr-2",size:24,"aria-hidden":"true"}),l.jsx("span",{className:"text-blue-400 font-medium text-xl",children:"LexiAid"})]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm font-medium",children:[l.jsx(Te,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"Home"}),l.jsx(Te,{to:"/auth/signin",className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors",children:"Sign In"})]})]}),l.jsx("main",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("article",{className:"prose prose-invert max-w-none",children:[l.jsx("h1",{children:"Privacy Policy"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Last Updated:"})," November 2025"]}),l.jsx("h2",{children:"1. Introduction"}),l.jsx("p",{children:'LexiAid ("we," "our," or "us") is a non-profit educational platform designed to assist students with learning disabilities. We are committed to protecting your privacy and ensuring the security of the documents and audio you entrust to us.'}),l.jsx("h2",{children:"2. Information We Collect"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Account Information:"})," We use Firebase Authentication (Google) to manage your login. We store your email address and display name."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"User Content:"})," This includes the documents (PDFs, images) you upload and the audio recordings of your voice when using the Answer Formulation feature."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Usage Data:"}),' We track basic interactions (e.g., "Document Uploaded," "Quiz Completed") to improve the application stability.']})]}),l.jsx("h2",{children:"3. How We Use AI"}),l.jsx("p",{children:"LexiAid uses artificial intelligence technologies (specifically Google Cloud Vertex AI) to function."}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Document Processing:"})," Your documents are processed to extract text and describe images."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Audio Processing:"})," Your voice is transcribed into text."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Data Privacy:"})," We do not sell your data. Your documents and voice inputs are processed strictly to provide the service (reading, quizzing, drafting)."]})]}),l.jsx("h2",{children:"4. Data Storage & Security"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Storage:"})," Your files are stored securely using Google Cloud Storage."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Encryption:"})," Data is encrypted in transit and at rest."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Deletion:"}),' You have the right to delete your account at any time via the "Settings" page. Deleting your account permanently removes your personal profile and associated documents from our systems.']})]}),l.jsx("h2",{children:"5. Contact Us"}),l.jsx("p",{children:"If you have questions about this policy, please contact us at: cossil@lexiaid.com"})]})})]}),p9=()=>l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white",children:[l.jsxs("nav",{className:"w-full py-4 px-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(jn,{className:"text-blue-400 mr-2",size:24,"aria-hidden":"true"}),l.jsx("span",{className:"text-blue-400 font-medium text-xl",children:"LexiAid"})]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm font-medium",children:[l.jsx(Te,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"Home"}),l.jsx(Te,{to:"/auth/signin",className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors",children:"Sign In"})]})]}),l.jsx("main",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("article",{className:"prose prose-invert max-w-none",children:[l.jsx("h1",{children:"Terms of Service"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Last Updated:"})," November 2025"]}),l.jsx("h2",{children:"1. Acceptance of Terms"}),l.jsx("p",{children:"By accessing and using LexiAid, you accept and agree to be bound by the terms and provision of this agreement."}),l.jsx("h2",{children:"2. Description of Service"}),l.jsx("p",{children:"LexiAid is an AI-powered accessibility tool designed to help users read, understand, and formulate text. It is provided as a non-profit pilot project."}),l.jsx("h2",{children:"3. User Responsibilities"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Account Security:"})," You are responsible for maintaining the confidentiality of your login information."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Content:"})," You agree not to upload content that is illegal, harmful, or violates the copyright of others. You retain ownership of the documents you upload."]})]}),l.jsx("h2",{children:"4. Disclaimer of Warranties"}),l.jsx("p",{children:'The service is provided on an "AS IS" and "AS AVAILABLE" basis. While we strive for high accuracy in our AI transcription and reading features, LexiAid does not guarantee that the results will be error-free. This tool is an educational aid, not a replacement for professional medical or educational advice.'}),l.jsx("h2",{children:"5. Limitation of Liability"}),l.jsx("p",{children:"LexiAid and its creators shall not be liable for any indirect, incidental, or consequential damages resulting from the use or inability to use the service."})]})})]}),m9=({onInteractionComplete:t})=>(k.useEffect(()=>{const e=()=>{console.log("User interaction detected - initializing audio capabilities");try{const n=window.AudioContext||window.webkitAudioContext,r=new n,i=r.createOscillator();if(i.connect(r.destination),i.start(0),i.stop(.001),"speechSynthesis"in window){const s=new SpeechSynthesisUtterance("");window.speechSynthesis.speak(s),window.speechSynthesis.cancel()}document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e),t()}catch(n){console.error("Error initializing audio:",n),t()}};return document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0}),()=>{document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e)}},[t]),l.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-70 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg max-w-md text-center",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Welcome to AI Tutor"}),l.jsx("p",{className:"mb-6",children:"Click or tap anywhere to enable all features including text-to-speech."}),l.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",onClick:t,children:"Click to Continue"})]})})),g9=({children:t})=>{const{currentUser:e,loading:n}=Tn();return n?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800",children:l.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-blue-500 border-t-transparent rounded-full"})}):e?l.jsx(l.Fragment,{children:t}):l.jsx(fp,{to:"/auth/signin",replace:!0})},y9=()=>l.jsxs(bI,{children:[l.jsx(ct,{path:"/",element:l.jsx(D3,{})}),l.jsx(ct,{path:"/auth/signin",element:l.jsx(O3,{})}),l.jsx(ct,{path:"/auth/signup",element:l.jsx(L3,{})}),l.jsx(ct,{path:"/auth/reset-password",element:l.jsx(M3,{})}),l.jsx(ct,{path:"/about",element:l.jsx(h9,{})}),l.jsx(ct,{path:"/privacy",element:l.jsx(f9,{})}),l.jsx(ct,{path:"/terms",element:l.jsx(p9,{})}),!1,l.jsxs(ct,{path:"/dashboard",element:l.jsx(g9,{children:l.jsx(H3,{children:l.jsx(u9,{children:l.jsx(d9,{})})})}),children:[l.jsx(ct,{index:!0,element:l.jsx(F3,{})}),l.jsx(ct,{path:"upload",element:l.jsx(B3,{})}),l.jsx(ct,{path:"documents",element:l.jsx(K3,{})}),l.jsx(ct,{path:"documents/:id",element:l.jsx(W3,{})}),l.jsx(ct,{path:"chat",element:l.jsx(Kz,{})}),l.jsx(ct,{path:"answer-formulation",element:l.jsx(s9,{})}),l.jsx(ct,{path:"feedback",element:l.jsx(l9,{})}),l.jsx(ct,{path:"settings",element:l.jsx(F5,{})}),l.jsx(ct,{path:"*",element:l.jsx(fp,{to:"/dashboard",replace:!0})})]}),l.jsx(ct,{path:"*",element:l.jsx(fp,{to:"/",replace:!0})})]});function x9(){const[t,e]=k.useState(!1),n=()=>{console.log("User interaction complete - audio features unlocked"),e(!0)};return l.jsx(qI,{children:l.jsx(l3,{children:l.jsxs(u3,{children:[!t&&l.jsx(m9,{onInteractionComplete:n}),l.jsx(M5,{position:"top-right"}),l.jsx(y9,{})]})})})}O1(document.getElementById("root")).render(l.jsx(k.StrictMode,{children:l.jsx(x9,{})}));
