(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I_={exports:{}},cd={},C_={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),hI=Symbol.for("react.portal"),fI=Symbol.for("react.fragment"),pI=Symbol.for("react.strict_mode"),mI=Symbol.for("react.profiler"),gI=Symbol.for("react.provider"),yI=Symbol.for("react.context"),vI=Symbol.for("react.forward_ref"),xI=Symbol.for("react.suspense"),wI=Symbol.for("react.memo"),_I=Symbol.for("react.lazy"),S0=Symbol.iterator;function EI(t){return t===null||typeof t!="object"?null:(t=S0&&t[S0]||t["@@iterator"],typeof t=="function"?t:null)}var A_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R_=Object.assign,N_={};function No(t,e,n){this.props=t,this.context=e,this.refs=N_,this.updater=n||A_}No.prototype.isReactComponent={};No.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};No.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function P_(){}P_.prototype=No.prototype;function gm(t,e,n){this.props=t,this.context=e,this.refs=N_,this.updater=n||A_}var ym=gm.prototype=new P_;ym.constructor=gm;R_(ym,No.prototype);ym.isPureReactComponent=!0;var k0=Array.isArray,D_=Object.prototype.hasOwnProperty,vm={current:null},j_={key:!0,ref:!0,__self:!0,__source:!0};function O_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)D_.call(e,r)&&!j_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:El,type:t,key:s,ref:o,props:i,_owner:vm.current}}function bI(t,e){return{$$typeof:El,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xm(t){return typeof t=="object"&&t!==null&&t.$$typeof===El}function TI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var I0=/\/+/g;function vh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TI(""+t.key):e.toString(36)}function Ou(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case El:case hI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+vh(o,0):r,k0(i)?(n="",t!=null&&(n=t.replace(I0,"$&/")+"/"),Ou(i,e,n,"",function(c){return c})):i!=null&&(xm(i)&&(i=bI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(I0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",k0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+vh(s,a);o+=Ou(s,e,n,l,i)}else if(l=EI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+vh(s,a++),o+=Ou(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ou(t,e,n){if(t==null)return t;var r=[],i=0;return Ou(t,r,"","",function(s){return e.call(n,s,i++)}),r}function SI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},Lu={transition:null},kI={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:Lu,ReactCurrentOwner:vm};function L_(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:ou,forEach:function(t,e,n){ou(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ou(t,function(){e++}),e},toArray:function(t){return ou(t,function(e){return e})||[]},only:function(t){if(!xm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=No;Ee.Fragment=fI;Ee.Profiler=mI;Ee.PureComponent=gm;Ee.StrictMode=pI;Ee.Suspense=xI;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kI;Ee.act=L_;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)D_.call(e,l)&&!j_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:El,type:t.type,key:i,ref:s,props:r,_owner:o}};Ee.createContext=function(t){return t={$$typeof:yI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gI,_context:t},t.Consumer=t};Ee.createElement=O_;Ee.createFactory=function(t){var e=O_.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:vI,render:t}};Ee.isValidElement=xm;Ee.lazy=function(t){return{$$typeof:_I,_payload:{_status:-1,_result:t},_init:SI}};Ee.memo=function(t,e){return{$$typeof:wI,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=Lu.transition;Lu.transition={};try{t()}finally{Lu.transition=e}};Ee.unstable_act=L_;Ee.useCallback=function(t,e){return Bt.current.useCallback(t,e)};Ee.useContext=function(t){return Bt.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return Bt.current.useEffect(t,e)};Ee.useId=function(){return Bt.current.useId()};Ee.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return Bt.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};Ee.useRef=function(t){return Bt.current.useRef(t)};Ee.useState=function(t){return Bt.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return Bt.current.useTransition()};Ee.version="18.3.1";C_.exports=Ee;var C=C_.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var II=C,CI=Symbol.for("react.element"),AI=Symbol.for("react.fragment"),RI=Object.prototype.hasOwnProperty,NI=II.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PI={key:!0,ref:!0,__self:!0,__source:!0};function M_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)RI.call(e,r)&&!PI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:CI,type:t,key:s,ref:o,props:i,_owner:NI.current}}cd.Fragment=AI;cd.jsx=M_;cd.jsxs=M_;I_.exports=cd;var d=I_.exports,V_={exports:{}},_n={},F_={exports:{}},U_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,te){var R=K.length;K.push(te);e:for(;0<R;){var J=R-1>>>1,ne=K[J];if(0<i(ne,te))K[J]=te,K[R]=ne,R=J;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var te=K[0],R=K.pop();if(R!==te){K[0]=R;e:for(var J=0,ne=K.length,L=ne>>>1;J<L;){var Fe=2*(J+1)-1,pe=K[Fe],re=Fe+1,je=K[re];if(0>i(pe,R))re<ne&&0>i(je,pe)?(K[J]=je,K[re]=R,J=re):(K[J]=pe,K[Fe]=R,J=Fe);else if(re<ne&&0>i(je,R))K[J]=je,K[re]=R,J=re;else break e}}return te}function i(K,te){var R=K.sortIndex-te.sortIndex;return R!==0?R:K.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,g=!1,w=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(K){for(var te=n(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=K)r(c),te.sortIndex=te.expirationTime,e(l,te);else break;te=n(c)}}function A(K){if(b=!1,_(K),!w)if(n(l)!==null)w=!0,ve(M);else{var te=n(c);te!==null&&he(A,te.startTime-K)}}function M(K,te){w=!1,b&&(b=!1,y(E),E=-1),g=!0;var R=m;try{for(_(te),f=n(l);f!==null&&(!(f.expirationTime>te)||K&&!j());){var J=f.callback;if(typeof J=="function"){f.callback=null,m=f.priorityLevel;var ne=J(f.expirationTime<=te);te=t.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(l)&&r(l),_(te)}else r(l);f=n(l)}if(f!==null)var L=!0;else{var Fe=n(c);Fe!==null&&he(A,Fe.startTime-te),L=!1}return L}finally{f=null,m=R,g=!1}}var P=!1,S=null,E=-1,k=5,N=-1;function j(){return!(t.unstable_now()-N<k)}function O(){if(S!==null){var K=t.unstable_now();N=K;var te=!0;try{te=S(!0,K)}finally{te?D():(P=!1,S=null)}}else P=!1}var D;if(typeof x=="function")D=function(){x(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,X=B.port2;B.port1.onmessage=O,D=function(){X.postMessage(null)}}else D=function(){T(O,0)};function ve(K){S=K,P||(P=!0,D())}function he(K,te){E=T(function(){K(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,ve(M))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var te=3;break;default:te=m}var R=m;m=te;try{return K()}finally{m=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var R=m;m=K;try{return te()}finally{m=R}},t.unstable_scheduleCallback=function(K,te,R){var J=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?J+R:J):R=J,K){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=R+ne,K={id:h++,callback:te,priorityLevel:K,startTime:R,expirationTime:ne,sortIndex:-1},R>J?(K.sortIndex=R,e(c,K),n(l)===null&&K===n(c)&&(b?(y(E),E=-1):b=!0,he(A,R-J))):(K.sortIndex=ne,e(l,K),w||g||(w=!0,ve(M))),K},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(K){var te=m;return function(){var R=m;m=te;try{return K.apply(this,arguments)}finally{m=R}}}})(U_);F_.exports=U_;var DI=F_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI=C,wn=DI;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z_=new Set,qa={};function bs(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(qa[t]=e,t=0;t<e.length;t++)z_.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=Object.prototype.hasOwnProperty,OI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C0={},A0={};function LI(t){return Ef.call(A0,t)?!0:Ef.call(C0,t)?!1:OI.test(t)?A0[t]=!0:(C0[t]=!0,!1)}function MI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VI(t,e,n,r){if(e===null||typeof e>"u"||MI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var wm=/[\-:]([a-z])/g;function _m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wm,_m);_t[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wm,_m);_t[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wm,_m);_t[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Em(t,e,n,r){var i=_t.hasOwnProperty(e)?_t[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VI(e,n,i,r)&&(n=null),r||i===null?LI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gr=jI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,au=Symbol.for("react.element"),zs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),bm=Symbol.for("react.strict_mode"),bf=Symbol.for("react.profiler"),$_=Symbol.for("react.provider"),B_=Symbol.for("react.context"),Tm=Symbol.for("react.forward_ref"),Tf=Symbol.for("react.suspense"),Sf=Symbol.for("react.suspense_list"),Sm=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),H_=Symbol.for("react.offscreen"),R0=Symbol.iterator;function oa(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,xh;function va(t){if(xh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xh=e&&e[1]||""}return`
`+xh+t}var wh=!1;function _h(t,e){if(!t||wh)return"";wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?va(t):""}function FI(t){switch(t.tag){case 5:return va(t.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return t=_h(t.type,!1),t;case 11:return t=_h(t.type.render,!1),t;case 1:return t=_h(t.type,!0),t;default:return""}}function kf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case zs:return"Portal";case bf:return"Profiler";case bm:return"StrictMode";case Tf:return"Suspense";case Sf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case B_:return(t.displayName||"Context")+".Consumer";case $_:return(t._context.displayName||"Context")+".Provider";case Tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sm:return e=t.displayName||null,e!==null?e:kf(t.type)||"Memo";case ai:e=t._payload,t=t._init;try{return kf(t(e))}catch{}}return null}function UI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kf(e);case 8:return e===bm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function q_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zI(t){var e=q_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lu(t){t._valueTracker||(t._valueTracker=zI(t))}function W_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=q_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function If(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function N0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ri(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function K_(t,e){e=e.checked,e!=null&&Em(t,"checked",e,!1)}function Cf(t,e){K_(t,e);var n=Ri(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Af(t,e.type,n):e.hasOwnProperty("defaultValue")&&Af(t,e.type,Ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function P0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Af(t,e,n){(e!=="number"||hc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xa=Array.isArray;function Zs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ri(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function D0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(xa(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ri(n)}}function G_(t,e){var n=Ri(e.value),r=Ri(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function j0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Q_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Q_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uu,Y_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uu=uu||document.createElement("div"),uu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$I=["Webkit","ms","Moz","O"];Object.keys(Ia).forEach(function(t){$I.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ia[e]=Ia[t]})});function X_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ia.hasOwnProperty(t)&&Ia[t]?(""+e).trim():e+"px"}function J_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=X_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var BI=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pf(t,e){if(e){if(BI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Df(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=null;function km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Of=null,eo=null,to=null;function O0(t){if(t=Sl(t)){if(typeof Of!="function")throw Error(W(280));var e=t.stateNode;e&&(e=md(e),Of(t.stateNode,t.type,e))}}function Z_(t){eo?to?to.push(t):to=[t]:eo=t}function eE(){if(eo){var t=eo,e=to;if(to=eo=null,O0(t),e)for(t=0;t<e.length;t++)O0(e[t])}}function tE(t,e){return t(e)}function nE(){}var Eh=!1;function rE(t,e,n){if(Eh)return t(e,n);Eh=!0;try{return tE(t,e,n)}finally{Eh=!1,(eo!==null||to!==null)&&(nE(),eE())}}function Ka(t,e){var n=t.stateNode;if(n===null)return null;var r=md(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Lf=!1;if(Vr)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{Lf=!1}function HI(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ca=!1,fc=null,pc=!1,Mf=null,qI={onError:function(t){Ca=!0,fc=t}};function WI(t,e,n,r,i,s,o,a,l){Ca=!1,fc=null,HI.apply(qI,arguments)}function KI(t,e,n,r,i,s,o,a,l){if(WI.apply(this,arguments),Ca){if(Ca){var c=fc;Ca=!1,fc=null}else throw Error(W(198));pc||(pc=!0,Mf=c)}}function Ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function L0(t){if(Ts(t)!==t)throw Error(W(188))}function GI(t){var e=t.alternate;if(!e){if(e=Ts(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return L0(i),t;if(s===r)return L0(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function sE(t){return t=GI(t),t!==null?oE(t):null}function oE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=oE(t);if(e!==null)return e;t=t.sibling}return null}var aE=wn.unstable_scheduleCallback,M0=wn.unstable_cancelCallback,QI=wn.unstable_shouldYield,YI=wn.unstable_requestPaint,rt=wn.unstable_now,XI=wn.unstable_getCurrentPriorityLevel,Im=wn.unstable_ImmediatePriority,lE=wn.unstable_UserBlockingPriority,mc=wn.unstable_NormalPriority,JI=wn.unstable_LowPriority,uE=wn.unstable_IdlePriority,dd=null,ar=null;function ZI(t){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(dd,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:nC,eC=Math.log,tC=Math.LN2;function nC(t){return t>>>=0,t===0?32:31-(eC(t)/tC|0)|0}var cu=64,du=4194304;function wa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=wa(a):(s&=o,s!==0&&(r=wa(s)))}else o=n&~i,o!==0?r=wa(o):s!==0&&(r=wa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),i=1<<n,r|=t[n],e&=~i;return r}function rC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Wn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=rC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cE(){var t=cu;return cu<<=1,!(cu&4194240)&&(cu=64),t}function bh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function sC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Cm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Pe=0;function dE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hE,Am,fE,pE,mE,Ff=!1,hu=[],vi=null,xi=null,wi=null,Ga=new Map,Qa=new Map,ui=[],oC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V0(t,e){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":Ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(e.pointerId)}}function la(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Sl(e),e!==null&&Am(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aC(t,e,n,r,i){switch(e){case"focusin":return vi=la(vi,t,e,n,r,i),!0;case"dragenter":return xi=la(xi,t,e,n,r,i),!0;case"mouseover":return wi=la(wi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ga.set(s,la(Ga.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Qa.set(s,la(Qa.get(s)||null,t,e,n,r,i)),!0}return!1}function gE(t){var e=Zi(t.target);if(e!==null){var n=Ts(e);if(n!==null){if(e=n.tag,e===13){if(e=iE(n),e!==null){t.blockedOn=e,mE(t.priority,function(){fE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jf=r,n.target.dispatchEvent(r),jf=null}else return e=Sl(n),e!==null&&Am(e),t.blockedOn=n,!1;e.shift()}return!0}function F0(t,e,n){Mu(t)&&n.delete(e)}function lC(){Ff=!1,vi!==null&&Mu(vi)&&(vi=null),xi!==null&&Mu(xi)&&(xi=null),wi!==null&&Mu(wi)&&(wi=null),Ga.forEach(F0),Qa.forEach(F0)}function ua(t,e){t.blockedOn===e&&(t.blockedOn=null,Ff||(Ff=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,lC)))}function Ya(t){function e(i){return ua(i,t)}if(0<hu.length){ua(hu[0],t);for(var n=1;n<hu.length;n++){var r=hu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vi!==null&&ua(vi,t),xi!==null&&ua(xi,t),wi!==null&&ua(wi,t),Ga.forEach(e),Qa.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)gE(n),n.blockedOn===null&&ui.shift()}var no=Gr.ReactCurrentBatchConfig,yc=!0;function uC(t,e,n,r){var i=Pe,s=no.transition;no.transition=null;try{Pe=1,Rm(t,e,n,r)}finally{Pe=i,no.transition=s}}function cC(t,e,n,r){var i=Pe,s=no.transition;no.transition=null;try{Pe=4,Rm(t,e,n,r)}finally{Pe=i,no.transition=s}}function Rm(t,e,n,r){if(yc){var i=Uf(t,e,n,r);if(i===null)Dh(t,e,r,vc,n),V0(t,r);else if(aC(i,t,e,n,r))r.stopPropagation();else if(V0(t,r),e&4&&-1<oC.indexOf(t)){for(;i!==null;){var s=Sl(i);if(s!==null&&hE(s),s=Uf(t,e,n,r),s===null&&Dh(t,e,r,vc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dh(t,e,r,null,n)}}var vc=null;function Uf(t,e,n,r){if(vc=null,t=km(r),t=Zi(t),t!==null)if(e=Ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vc=t,null}function yE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XI()){case Im:return 1;case lE:return 4;case mc:case JI:return 16;case uE:return 536870912;default:return 16}default:return 16}}var mi=null,Nm=null,Vu=null;function vE(){if(Vu)return Vu;var t,e=Nm,n=e.length,r,i="value"in mi?mi.value:mi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Vu=i.slice(t,1<r?1-r:void 0)}function Fu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fu(){return!0}function U0(){return!1}function En(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fu:U0,this.isPropagationStopped=U0,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fu)},persist:function(){},isPersistent:fu}),e}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pm=En(Po),Tl=Ye({},Po,{view:0,detail:0}),dC=En(Tl),Th,Sh,ca,hd=Ye({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ca&&(ca&&t.type==="mousemove"?(Th=t.screenX-ca.screenX,Sh=t.screenY-ca.screenY):Sh=Th=0,ca=t),Th)},movementY:function(t){return"movementY"in t?t.movementY:Sh}}),z0=En(hd),hC=Ye({},hd,{dataTransfer:0}),fC=En(hC),pC=Ye({},Tl,{relatedTarget:0}),kh=En(pC),mC=Ye({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),gC=En(mC),yC=Ye({},Po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vC=En(yC),xC=Ye({},Po,{data:0}),$0=En(xC),wC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_C={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EC[t])?!!e[t]:!1}function Dm(){return bC}var TC=Ye({},Tl,{key:function(t){if(t.key){var e=wC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_C[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(t){return t.type==="keypress"?Fu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SC=En(TC),kC=Ye({},hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B0=En(kC),IC=Ye({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),CC=En(IC),AC=Ye({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),RC=En(AC),NC=Ye({},hd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PC=En(NC),DC=[9,13,27,32],jm=Vr&&"CompositionEvent"in window,Aa=null;Vr&&"documentMode"in document&&(Aa=document.documentMode);var jC=Vr&&"TextEvent"in window&&!Aa,xE=Vr&&(!jm||Aa&&8<Aa&&11>=Aa),H0=" ",q0=!1;function wE(t,e){switch(t){case"keyup":return DC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _E(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bs=!1;function OC(t,e){switch(t){case"compositionend":return _E(e);case"keypress":return e.which!==32?null:(q0=!0,H0);case"textInput":return t=e.data,t===H0&&q0?null:t;default:return null}}function LC(t,e){if(Bs)return t==="compositionend"||!jm&&wE(t,e)?(t=vE(),Vu=Nm=mi=null,Bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xE&&e.locale!=="ko"?null:e.data;default:return null}}var MC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MC[t.type]:e==="textarea"}function EE(t,e,n,r){Z_(r),e=xc(e,"onChange"),0<e.length&&(n=new Pm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ra=null,Xa=null;function VC(t){DE(t,0)}function fd(t){var e=Ws(t);if(W_(e))return t}function FC(t,e){if(t==="change")return e}var bE=!1;if(Vr){var Ih;if(Vr){var Ch="oninput"in document;if(!Ch){var K0=document.createElement("div");K0.setAttribute("oninput","return;"),Ch=typeof K0.oninput=="function"}Ih=Ch}else Ih=!1;bE=Ih&&(!document.documentMode||9<document.documentMode)}function G0(){Ra&&(Ra.detachEvent("onpropertychange",TE),Xa=Ra=null)}function TE(t){if(t.propertyName==="value"&&fd(Xa)){var e=[];EE(e,Xa,t,km(t)),rE(VC,e)}}function UC(t,e,n){t==="focusin"?(G0(),Ra=e,Xa=n,Ra.attachEvent("onpropertychange",TE)):t==="focusout"&&G0()}function zC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fd(Xa)}function $C(t,e){if(t==="click")return fd(e)}function BC(t,e){if(t==="input"||t==="change")return fd(e)}function HC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:HC;function Ja(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ef.call(e,i)||!Qn(t[i],e[i]))return!1}return!0}function Q0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Y0(t,e){var n=Q0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Q0(n)}}function SE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kE(){for(var t=window,e=hc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hc(t.document)}return e}function Om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qC(t){var e=kE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&SE(n.ownerDocument.documentElement,n)){if(r!==null&&Om(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Y0(n,s);var o=Y0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WC=Vr&&"documentMode"in document&&11>=document.documentMode,Hs=null,zf=null,Na=null,$f=!1;function X0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$f||Hs==null||Hs!==hc(r)||(r=Hs,"selectionStart"in r&&Om(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Na&&Ja(Na,r)||(Na=r,r=xc(zf,"onSelect"),0<r.length&&(e=new Pm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hs)))}function pu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:pu("Animation","AnimationEnd"),animationiteration:pu("Animation","AnimationIteration"),animationstart:pu("Animation","AnimationStart"),transitionend:pu("Transition","TransitionEnd")},Ah={},IE={};Vr&&(IE=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function pd(t){if(Ah[t])return Ah[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IE)return Ah[t]=e[n];return t}var CE=pd("animationend"),AE=pd("animationiteration"),RE=pd("animationstart"),NE=pd("transitionend"),PE=new Map,J0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(t,e){PE.set(t,e),bs(e,[t])}for(var Rh=0;Rh<J0.length;Rh++){var Nh=J0[Rh],KC=Nh.toLowerCase(),GC=Nh[0].toUpperCase()+Nh.slice(1);Fi(KC,"on"+GC)}Fi(CE,"onAnimationEnd");Fi(AE,"onAnimationIteration");Fi(RE,"onAnimationStart");Fi("dblclick","onDoubleClick");Fi("focusin","onFocus");Fi("focusout","onBlur");Fi(NE,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QC=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function Z0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,KI(r,e,void 0,t),t.currentTarget=null}function DE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Z0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Z0(i,a,c),s=l}}}if(pc)throw t=Mf,pc=!1,Mf=null,t}function $e(t,e){var n=e[Kf];n===void 0&&(n=e[Kf]=new Set);var r=t+"__bubble";n.has(r)||(jE(e,t,2,!1),n.add(r))}function Ph(t,e,n){var r=0;e&&(r|=4),jE(n,t,r,e)}var mu="_reactListening"+Math.random().toString(36).slice(2);function Za(t){if(!t[mu]){t[mu]=!0,z_.forEach(function(n){n!=="selectionchange"&&(QC.has(n)||Ph(n,!1,t),Ph(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mu]||(e[mu]=!0,Ph("selectionchange",!1,e))}}function jE(t,e,n,r){switch(yE(e)){case 1:var i=uC;break;case 4:i=cC;break;default:i=Rm}n=i.bind(null,e,n,t),i=void 0,!Lf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Dh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}rE(function(){var c=s,h=km(n),f=[];e:{var m=PE.get(t);if(m!==void 0){var g=Pm,w=t;switch(t){case"keypress":if(Fu(n)===0)break e;case"keydown":case"keyup":g=SC;break;case"focusin":w="focus",g=kh;break;case"focusout":w="blur",g=kh;break;case"beforeblur":case"afterblur":g=kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=fC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=CC;break;case CE:case AE:case RE:g=gC;break;case NE:g=RC;break;case"scroll":g=dC;break;case"wheel":g=PC;break;case"copy":case"cut":case"paste":g=vC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=B0}var b=(e&4)!==0,T=!b&&t==="scroll",y=b?m!==null?m+"Capture":null:m;b=[];for(var x=c,_;x!==null;){_=x;var A=_.stateNode;if(_.tag===5&&A!==null&&(_=A,y!==null&&(A=Ka(x,y),A!=null&&b.push(el(x,A,_)))),T)break;x=x.return}0<b.length&&(m=new g(m,w,null,n,h),f.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==jf&&(w=n.relatedTarget||n.fromElement)&&(Zi(w)||w[Fr]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=c,w=w?Zi(w):null,w!==null&&(T=Ts(w),w!==T||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(b=z0,A="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=B0,A="onPointerLeave",y="onPointerEnter",x="pointer"),T=g==null?m:Ws(g),_=w==null?m:Ws(w),m=new b(A,x+"leave",g,n,h),m.target=T,m.relatedTarget=_,A=null,Zi(h)===c&&(b=new b(y,x+"enter",w,n,h),b.target=_,b.relatedTarget=T,A=b),T=A,g&&w)t:{for(b=g,y=w,x=0,_=b;_;_=Os(_))x++;for(_=0,A=y;A;A=Os(A))_++;for(;0<x-_;)b=Os(b),x--;for(;0<_-x;)y=Os(y),_--;for(;x--;){if(b===y||y!==null&&b===y.alternate)break t;b=Os(b),y=Os(y)}b=null}else b=null;g!==null&&ev(f,m,g,b,!1),w!==null&&T!==null&&ev(f,T,w,b,!0)}}e:{if(m=c?Ws(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var M=FC;else if(W0(m))if(bE)M=BC;else{M=zC;var P=UC}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=$C);if(M&&(M=M(t,c))){EE(f,M,n,h);break e}P&&P(t,m,c),t==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&Af(m,"number",m.value)}switch(P=c?Ws(c):window,t){case"focusin":(W0(P)||P.contentEditable==="true")&&(Hs=P,zf=c,Na=null);break;case"focusout":Na=zf=Hs=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,X0(f,n,h);break;case"selectionchange":if(WC)break;case"keydown":case"keyup":X0(f,n,h)}var S;if(jm)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Bs?wE(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(xE&&n.locale!=="ko"&&(Bs||E!=="onCompositionStart"?E==="onCompositionEnd"&&Bs&&(S=vE()):(mi=h,Nm="value"in mi?mi.value:mi.textContent,Bs=!0)),P=xc(c,E),0<P.length&&(E=new $0(E,t,null,n,h),f.push({event:E,listeners:P}),S?E.data=S:(S=_E(n),S!==null&&(E.data=S)))),(S=jC?OC(t,n):LC(t,n))&&(c=xc(c,"onBeforeInput"),0<c.length&&(h=new $0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=S))}DE(f,e)})}function el(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ka(t,n),s!=null&&r.unshift(el(t,s,i)),s=Ka(t,e),s!=null&&r.push(el(t,s,i))),t=t.return}return r}function Os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ev(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ka(n,s),l!=null&&o.unshift(el(n,l,a))):i||(l=Ka(n,s),l!=null&&o.push(el(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var YC=/\r\n?/g,XC=/\u0000|\uFFFD/g;function tv(t){return(typeof t=="string"?t:""+t).replace(YC,`
`).replace(XC,"")}function gu(t,e,n){if(e=tv(e),tv(t)!==e&&n)throw Error(W(425))}function wc(){}var Bf=null,Hf=null;function qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wf=typeof setTimeout=="function"?setTimeout:void 0,JC=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,ZC=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(t){return nv.resolve(null).then(t).catch(eA)}:Wf;function eA(t){setTimeout(function(){throw t})}function jh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ya(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ya(e)}function _i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Do=Math.random().toString(36).slice(2),sr="__reactFiber$"+Do,tl="__reactProps$"+Do,Fr="__reactContainer$"+Do,Kf="__reactEvents$"+Do,tA="__reactListeners$"+Do,nA="__reactHandles$"+Do;function Zi(t){var e=t[sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rv(t);t!==null;){if(n=t[sr])return n;t=rv(t)}return e}t=n,n=t.parentNode}return null}function Sl(t){return t=t[sr]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function md(t){return t[tl]||null}var Gf=[],Ks=-1;function Ui(t){return{current:t}}function He(t){0>Ks||(t.current=Gf[Ks],Gf[Ks]=null,Ks--)}function Me(t,e){Ks++,Gf[Ks]=t.current,t.current=e}var Ni={},Pt=Ui(Ni),tn=Ui(!1),us=Ni;function yo(t,e){var n=t.type.contextTypes;if(!n)return Ni;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nn(t){return t=t.childContextTypes,t!=null}function _c(){He(tn),He(Pt)}function iv(t,e,n){if(Pt.current!==Ni)throw Error(W(168));Me(Pt,e),Me(tn,n)}function OE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,UI(t)||"Unknown",i));return Ye({},n,r)}function Ec(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ni,us=Pt.current,Me(Pt,t),Me(tn,tn.current),!0}function sv(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=OE(t,e,us),r.__reactInternalMemoizedMergedChildContext=t,He(tn),He(Pt),Me(Pt,t)):He(tn),Me(tn,n)}var Ir=null,gd=!1,Oh=!1;function LE(t){Ir===null?Ir=[t]:Ir.push(t)}function rA(t){gd=!0,LE(t)}function zi(){if(!Oh&&Ir!==null){Oh=!0;var t=0,e=Pe;try{var n=Ir;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,gd=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(t+1)),aE(Im,zi),i}finally{Pe=e,Oh=!1}}return null}var Gs=[],Qs=0,bc=null,Tc=0,Tn=[],Sn=0,cs=null,Rr=1,Nr="";function Qi(t,e){Gs[Qs++]=Tc,Gs[Qs++]=bc,bc=t,Tc=e}function ME(t,e,n){Tn[Sn++]=Rr,Tn[Sn++]=Nr,Tn[Sn++]=cs,cs=t;var r=Rr;t=Nr;var i=32-Wn(r)-1;r&=~(1<<i),n+=1;var s=32-Wn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rr=1<<32-Wn(e)+i|n<<i|r,Nr=s+t}else Rr=1<<s|n<<i|r,Nr=t}function Lm(t){t.return!==null&&(Qi(t,1),ME(t,1,0))}function Mm(t){for(;t===bc;)bc=Gs[--Qs],Gs[Qs]=null,Tc=Gs[--Qs],Gs[Qs]=null;for(;t===cs;)cs=Tn[--Sn],Tn[Sn]=null,Nr=Tn[--Sn],Tn[Sn]=null,Rr=Tn[--Sn],Tn[Sn]=null}var vn=null,gn=null,We=!1,$n=null;function VE(t,e){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ov(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,gn=_i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:Rr,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,gn=null,!0):!1;default:return!1}}function Qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yf(t){if(We){var e=gn;if(e){var n=e;if(!ov(t,e)){if(Qf(t))throw Error(W(418));e=_i(n.nextSibling);var r=vn;e&&ov(t,e)?VE(r,n):(t.flags=t.flags&-4097|2,We=!1,vn=t)}}else{if(Qf(t))throw Error(W(418));t.flags=t.flags&-4097|2,We=!1,vn=t}}}function av(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function yu(t){if(t!==vn)return!1;if(!We)return av(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qf(t.type,t.memoizedProps)),e&&(e=gn)){if(Qf(t))throw FE(),Error(W(418));for(;e;)VE(t,e),e=_i(e.nextSibling)}if(av(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=_i(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=vn?_i(t.stateNode.nextSibling):null;return!0}function FE(){for(var t=gn;t;)t=_i(t.nextSibling)}function vo(){gn=vn=null,We=!1}function Vm(t){$n===null?$n=[t]:$n.push(t)}var iA=Gr.ReactCurrentBatchConfig;function da(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function vu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lv(t){var e=t._init;return e(t._payload)}function UE(t){function e(y,x){if(t){var _=y.deletions;_===null?(y.deletions=[x],y.flags|=16):_.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Si(y,x),y.index=0,y.sibling=null,y}function s(y,x,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<x?(y.flags|=2,x):_):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,_,A){return x===null||x.tag!==6?(x=$h(_,y.mode,A),x.return=y,x):(x=i(x,_),x.return=y,x)}function l(y,x,_,A){var M=_.type;return M===$s?h(y,x,_.props.children,A,_.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ai&&lv(M)===x.type)?(A=i(x,_.props),A.ref=da(y,x,_),A.return=y,A):(A=Wu(_.type,_.key,_.props,null,y.mode,A),A.ref=da(y,x,_),A.return=y,A)}function c(y,x,_,A){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=Bh(_,y.mode,A),x.return=y,x):(x=i(x,_.children||[]),x.return=y,x)}function h(y,x,_,A,M){return x===null||x.tag!==7?(x=as(_,y.mode,A,M),x.return=y,x):(x=i(x,_),x.return=y,x)}function f(y,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=$h(""+x,y.mode,_),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case au:return _=Wu(x.type,x.key,x.props,null,y.mode,_),_.ref=da(y,null,x),_.return=y,_;case zs:return x=Bh(x,y.mode,_),x.return=y,x;case ai:var A=x._init;return f(y,A(x._payload),_)}if(xa(x)||oa(x))return x=as(x,y.mode,_,null),x.return=y,x;vu(y,x)}return null}function m(y,x,_,A){var M=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return M!==null?null:a(y,x,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case au:return _.key===M?l(y,x,_,A):null;case zs:return _.key===M?c(y,x,_,A):null;case ai:return M=_._init,m(y,x,M(_._payload),A)}if(xa(_)||oa(_))return M!==null?null:h(y,x,_,A,null);vu(y,_)}return null}function g(y,x,_,A,M){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(_)||null,a(x,y,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case au:return y=y.get(A.key===null?_:A.key)||null,l(x,y,A,M);case zs:return y=y.get(A.key===null?_:A.key)||null,c(x,y,A,M);case ai:var P=A._init;return g(y,x,_,P(A._payload),M)}if(xa(A)||oa(A))return y=y.get(_)||null,h(x,y,A,M,null);vu(x,A)}return null}function w(y,x,_,A){for(var M=null,P=null,S=x,E=x=0,k=null;S!==null&&E<_.length;E++){S.index>E?(k=S,S=null):k=S.sibling;var N=m(y,S,_[E],A);if(N===null){S===null&&(S=k);break}t&&S&&N.alternate===null&&e(y,S),x=s(N,x,E),P===null?M=N:P.sibling=N,P=N,S=k}if(E===_.length)return n(y,S),We&&Qi(y,E),M;if(S===null){for(;E<_.length;E++)S=f(y,_[E],A),S!==null&&(x=s(S,x,E),P===null?M=S:P.sibling=S,P=S);return We&&Qi(y,E),M}for(S=r(y,S);E<_.length;E++)k=g(S,y,E,_[E],A),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?E:k.key),x=s(k,x,E),P===null?M=k:P.sibling=k,P=k);return t&&S.forEach(function(j){return e(y,j)}),We&&Qi(y,E),M}function b(y,x,_,A){var M=oa(_);if(typeof M!="function")throw Error(W(150));if(_=M.call(_),_==null)throw Error(W(151));for(var P=M=null,S=x,E=x=0,k=null,N=_.next();S!==null&&!N.done;E++,N=_.next()){S.index>E?(k=S,S=null):k=S.sibling;var j=m(y,S,N.value,A);if(j===null){S===null&&(S=k);break}t&&S&&j.alternate===null&&e(y,S),x=s(j,x,E),P===null?M=j:P.sibling=j,P=j,S=k}if(N.done)return n(y,S),We&&Qi(y,E),M;if(S===null){for(;!N.done;E++,N=_.next())N=f(y,N.value,A),N!==null&&(x=s(N,x,E),P===null?M=N:P.sibling=N,P=N);return We&&Qi(y,E),M}for(S=r(y,S);!N.done;E++,N=_.next())N=g(S,y,E,N.value,A),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?E:N.key),x=s(N,x,E),P===null?M=N:P.sibling=N,P=N);return t&&S.forEach(function(O){return e(y,O)}),We&&Qi(y,E),M}function T(y,x,_,A){if(typeof _=="object"&&_!==null&&_.type===$s&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case au:e:{for(var M=_.key,P=x;P!==null;){if(P.key===M){if(M=_.type,M===$s){if(P.tag===7){n(y,P.sibling),x=i(P,_.props.children),x.return=y,y=x;break e}}else if(P.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ai&&lv(M)===P.type){n(y,P.sibling),x=i(P,_.props),x.ref=da(y,P,_),x.return=y,y=x;break e}n(y,P);break}else e(y,P);P=P.sibling}_.type===$s?(x=as(_.props.children,y.mode,A,_.key),x.return=y,y=x):(A=Wu(_.type,_.key,_.props,null,y.mode,A),A.ref=da(y,x,_),A.return=y,y=A)}return o(y);case zs:e:{for(P=_.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(y,x.sibling),x=i(x,_.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Bh(_,y.mode,A),x.return=y,y=x}return o(y);case ai:return P=_._init,T(y,x,P(_._payload),A)}if(xa(_))return w(y,x,_,A);if(oa(_))return b(y,x,_,A);vu(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,_),x.return=y,y=x):(n(y,x),x=$h(_,y.mode,A),x.return=y,y=x),o(y)):n(y,x)}return T}var xo=UE(!0),zE=UE(!1),Sc=Ui(null),kc=null,Ys=null,Fm=null;function Um(){Fm=Ys=kc=null}function zm(t){var e=Sc.current;He(Sc),t._currentValue=e}function Xf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ro(t,e){kc=t,Fm=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(Fm!==t)if(t={context:t,memoizedValue:e,next:null},Ys===null){if(kc===null)throw Error(W(308));Ys=t,kc.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return e}var es=null;function $m(t){es===null?es=[t]:es.push(t)}function $E(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$m(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var li=!1;function Bm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ur(t,n)}return i=r.interleaved,i===null?(e.next=e,$m(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ur(t,n)}function Uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cm(t,n)}}function uv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ic(t,e,n,r){var i=t.updateQueue;li=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,b=a;switch(m=e,g=n,b.tag){case 1:if(w=b.payload,typeof w=="function"){f=w.call(g,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=b.payload,m=typeof w=="function"?w.call(g,f,m):w,m==null)break e;f=Ye({},f,m);break e;case 2:li=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=f):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);hs|=o,t.lanes=o,t.memoizedState=f}}function cv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var kl={},lr=Ui(kl),nl=Ui(kl),rl=Ui(kl);function ts(t){if(t===kl)throw Error(W(174));return t}function Hm(t,e){switch(Me(rl,e),Me(nl,t),Me(lr,kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nf(e,t)}He(lr),Me(lr,e)}function wo(){He(lr),He(nl),He(rl)}function HE(t){ts(rl.current);var e=ts(lr.current),n=Nf(e,t.type);e!==n&&(Me(nl,t),Me(lr,n))}function qm(t){nl.current===t&&(He(lr),He(nl))}var Ge=Ui(0);function Cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lh=[];function Wm(){for(var t=0;t<Lh.length;t++)Lh[t]._workInProgressVersionPrimary=null;Lh.length=0}var zu=Gr.ReactCurrentDispatcher,Mh=Gr.ReactCurrentBatchConfig,ds=0,Qe=null,lt=null,pt=null,Ac=!1,Pa=!1,il=0,sA=0;function St(){throw Error(W(321))}function Km(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function Gm(t,e,n,r,i,s){if(ds=s,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zu.current=t===null||t.memoizedState===null?uA:cA,t=n(r,i),Pa){s=0;do{if(Pa=!1,il=0,25<=s)throw Error(W(301));s+=1,pt=lt=null,e.updateQueue=null,zu.current=dA,t=n(r,i)}while(Pa)}if(zu.current=Rc,e=lt!==null&&lt.next!==null,ds=0,pt=lt=Qe=null,Ac=!1,e)throw Error(W(300));return t}function Qm(){var t=il!==0;return il=0,t}function nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Qe.memoizedState=pt=t:pt=pt.next=t,pt}function Pn(){if(lt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=pt===null?Qe.memoizedState:pt.next;if(e!==null)pt=e,lt=t;else{if(t===null)throw Error(W(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},pt===null?Qe.memoizedState=pt=t:pt=pt.next=t}return pt}function sl(t,e){return typeof e=="function"?e(t):e}function Vh(t){var e=Pn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((ds&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Qe.lanes|=h,hs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Qn(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qe.lanes|=s,hs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fh(t){var e=Pn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Qn(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function qE(){}function WE(t,e){var n=Qe,r=Pn(),i=e(),s=!Qn(r.memoizedState,i);if(s&&(r.memoizedState=i,en=!0),r=r.queue,Ym(QE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,ol(9,GE.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(W(349));ds&30||KE(n,e,i)}return i}function KE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GE(t,e,n,r){e.value=n,e.getSnapshot=r,YE(e)&&XE(t)}function QE(t,e,n){return n(function(){YE(e)&&XE(t)})}function YE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function XE(t){var e=Ur(t,1);e!==null&&Kn(e,t,1,-1)}function dv(t){var e=nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:t},e.queue=t,t=t.dispatch=lA.bind(null,Qe,t),[e.memoizedState,t]}function ol(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JE(){return Pn().memoizedState}function $u(t,e,n,r){var i=nr();Qe.flags|=t,i.memoizedState=ol(1|e,n,void 0,r===void 0?null:r)}function yd(t,e,n,r){var i=Pn();r=r===void 0?null:r;var s=void 0;if(lt!==null){var o=lt.memoizedState;if(s=o.destroy,r!==null&&Km(r,o.deps)){i.memoizedState=ol(e,n,s,r);return}}Qe.flags|=t,i.memoizedState=ol(1|e,n,s,r)}function hv(t,e){return $u(8390656,8,t,e)}function Ym(t,e){return yd(2048,8,t,e)}function ZE(t,e){return yd(4,2,t,e)}function e1(t,e){return yd(4,4,t,e)}function t1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function n1(t,e,n){return n=n!=null?n.concat([t]):null,yd(4,4,t1.bind(null,e,t),n)}function Xm(){}function r1(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Km(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function i1(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Km(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function s1(t,e,n){return ds&21?(Qn(n,e)||(n=cE(),Qe.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function oA(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=Mh.transition;Mh.transition={};try{t(!1),e()}finally{Pe=n,Mh.transition=r}}function o1(){return Pn().memoizedState}function aA(t,e,n){var r=Ti(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},a1(t))l1(e,n);else if(n=$E(t,e,n,r),n!==null){var i=zt();Kn(n,t,r,i),u1(n,e,r)}}function lA(t,e,n){var r=Ti(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(a1(t))l1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,o)){var l=e.interleaved;l===null?(i.next=i,$m(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=$E(t,e,i,r),n!==null&&(i=zt(),Kn(n,t,r,i),u1(n,e,r))}}function a1(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function l1(t,e){Pa=Ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cm(t,n)}}var Rc={readContext:Nn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},uA={readContext:Nn,useCallback:function(t,e){return nr().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:hv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$u(4194308,4,t1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $u(4194308,4,t,e)},useInsertionEffect:function(t,e){return $u(4,2,t,e)},useMemo:function(t,e){var n=nr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aA.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=nr();return t={current:t},e.memoizedState=t},useState:dv,useDebugValue:Xm,useDeferredValue:function(t){return nr().memoizedState=t},useTransition:function(){var t=dv(!1),e=t[0];return t=oA.bind(null,t[1]),nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=nr();if(We){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),mt===null)throw Error(W(349));ds&30||KE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,hv(QE.bind(null,r,s,t),[t]),r.flags|=2048,ol(9,GE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nr(),e=mt.identifierPrefix;if(We){var n=Nr,r=Rr;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=il++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cA={readContext:Nn,useCallback:r1,useContext:Nn,useEffect:Ym,useImperativeHandle:n1,useInsertionEffect:ZE,useLayoutEffect:e1,useMemo:i1,useReducer:Vh,useRef:JE,useState:function(){return Vh(sl)},useDebugValue:Xm,useDeferredValue:function(t){var e=Pn();return s1(e,lt.memoizedState,t)},useTransition:function(){var t=Vh(sl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:qE,useSyncExternalStore:WE,useId:o1,unstable_isNewReconciler:!1},dA={readContext:Nn,useCallback:r1,useContext:Nn,useEffect:Ym,useImperativeHandle:n1,useInsertionEffect:ZE,useLayoutEffect:e1,useMemo:i1,useReducer:Fh,useRef:JE,useState:function(){return Fh(sl)},useDebugValue:Xm,useDeferredValue:function(t){var e=Pn();return lt===null?e.memoizedState=t:s1(e,lt.memoizedState,t)},useTransition:function(){var t=Fh(sl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:qE,useSyncExternalStore:WE,useId:o1,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vd={isMounted:function(t){return(t=t._reactInternals)?Ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),i=Ti(t),s=jr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ei(t,s,i),e!==null&&(Kn(e,t,i,r),Uu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),i=Ti(t),s=jr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ei(t,s,i),e!==null&&(Kn(e,t,i,r),Uu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=Ti(t),i=jr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ei(t,i,r),e!==null&&(Kn(e,t,r,n),Uu(e,t,r))}};function fv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ja(n,r)||!Ja(i,s):!0}function c1(t,e,n){var r=!1,i=Ni,s=e.contextType;return typeof s=="object"&&s!==null?s=Nn(s):(i=nn(e)?us:Pt.current,r=e.contextTypes,s=(r=r!=null)?yo(t,i):Ni),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vd.enqueueReplaceState(e,e.state,null)}function Zf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Bm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nn(s):(s=nn(e)?us:Pt.current,i.context=yo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vd.enqueueReplaceState(i,i.state,null),Ic(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _o(t,e){try{var n="",r=e;do n+=FI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Uh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ep(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hA=typeof WeakMap=="function"?WeakMap:Map;function d1(t,e,n){n=jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pc||(Pc=!0,cp=r),ep(t,e)},n}function h1(t,e,n){n=jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ep(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ep(t,e),typeof r!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kA.bind(null,t,e,n),e.then(t,t))}function gv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jr(-1,1),e.tag=2,Ei(n,e,1))),n.lanes|=1),t)}var fA=Gr.ReactCurrentOwner,en=!1;function Ut(t,e,n,r){e.child=t===null?zE(e,null,n,r):xo(e,t.child,n,r)}function vv(t,e,n,r,i){n=n.render;var s=e.ref;return ro(e,i),r=Gm(t,e,n,r,s,i),n=Qm(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(We&&n&&Lm(e),e.flags|=1,Ut(t,e,r,i),e.child)}function xv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!sg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,f1(t,e,s,r,i)):(t=Wu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ja,n(o,r)&&t.ref===e.ref)return zr(t,e,i)}return e.flags|=1,t=Si(s,r),t.ref=e.ref,t.return=e,e.child=t}function f1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ja(s,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,zr(t,e,i)}return tp(t,e,n,r,i)}function p1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Js,mn),mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Js,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Me(Js,mn),mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Me(Js,mn),mn|=r;return Ut(t,e,i,n),e.child}function m1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tp(t,e,n,r,i){var s=nn(n)?us:Pt.current;return s=yo(e,s),ro(e,i),n=Gm(t,e,n,r,s,i),r=Qm(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(We&&r&&Lm(e),e.flags|=1,Ut(t,e,n,i),e.child)}function wv(t,e,n,r,i){if(nn(n)){var s=!0;Ec(e)}else s=!1;if(ro(e,i),e.stateNode===null)Bu(t,e),c1(e,n,r),Zf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Nn(c):(c=nn(n)?us:Pt.current,c=yo(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&pv(e,o,r,c),li=!1;var m=e.memoizedState;o.state=m,Ic(e,r,o,i),l=e.memoizedState,a!==r||m!==l||tn.current||li?(typeof h=="function"&&(Jf(e,n,h,r),l=e.memoizedState),(a=li||fv(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Un(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Nn(l):(l=nn(n)?us:Pt.current,l=yo(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&pv(e,o,r,l),li=!1,m=e.memoizedState,o.state=m,Ic(e,r,o,i);var w=e.memoizedState;a!==f||m!==w||tn.current||li?(typeof g=="function"&&(Jf(e,n,g,r),w=e.memoizedState),(c=li||fv(e,n,c,r,m,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return np(t,e,n,r,s,i)}function np(t,e,n,r,i,s){m1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&sv(e,n,!1),zr(t,e,s);r=e.stateNode,fA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xo(e,t.child,null,s),e.child=xo(e,null,a,s)):Ut(t,e,a,s),e.memoizedState=r.state,i&&sv(e,n,!0),e.child}function g1(t){var e=t.stateNode;e.pendingContext?iv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iv(t,e.context,!1),Hm(t,e.containerInfo)}function _v(t,e,n,r,i){return vo(),Vm(i),e.flags|=256,Ut(t,e,n,r),e.child}var rp={dehydrated:null,treeContext:null,retryLane:0};function ip(t){return{baseLanes:t,cachePool:null,transitions:null}}function y1(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(Ge,i&1),t===null)return Yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=_d(o,r,0,null),t=as(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ip(n),e.memoizedState=rp,t):Jm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return pA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Si(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Si(a,s):(s=as(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ip(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=rp,r}return s=t.child,t=s.sibling,r=Si(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jm(t,e){return e=_d({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xu(t,e,n,r){return r!==null&&Vm(r),xo(e,t.child,null,n),t=Jm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Uh(Error(W(422))),xu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=_d({mode:"visible",children:r.children},i,0,null),s=as(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xo(e,t.child,null,o),e.child.memoizedState=ip(o),e.memoizedState=rp,s);if(!(e.mode&1))return xu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Uh(s,r,void 0),xu(t,e,o,r)}if(a=(o&t.childLanes)!==0,en||a){if(r=mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ur(t,i),Kn(r,t,i,-1))}return ig(),r=Uh(Error(W(421))),xu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=IA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,gn=_i(i.nextSibling),vn=e,We=!0,$n=null,t!==null&&(Tn[Sn++]=Rr,Tn[Sn++]=Nr,Tn[Sn++]=cs,Rr=t.id,Nr=t.overflow,cs=e),e=Jm(e,r.children),e.flags|=4096,e)}function Ev(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xf(t.return,e,n)}function zh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function v1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ut(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,n,e);else if(t.tag===19)Ev(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),zh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}zh(e,!0,n,null,s);break;case"together":zh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mA(t,e,n){switch(e.tag){case 3:g1(e),vo();break;case 5:HE(e);break;case 1:nn(e.type)&&Ec(e);break;case 4:Hm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Me(Sc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?y1(t,e,n):(Me(Ge,Ge.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Me(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return v1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,p1(t,e,n)}return zr(t,e,n)}var x1,sp,w1,_1;x1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sp=function(){};w1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ts(lr.current);var s=null;switch(n){case"input":i=If(t,i),r=If(t,r),s=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),s=[];break;case"textarea":i=Rf(t,i),r=Rf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wc)}Pf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$e("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};_1=function(t,e,n,r){n!==r&&(e.flags|=4)};function ha(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gA(t,e,n){var r=e.pendingProps;switch(Mm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return nn(e.type)&&_c(),kt(e),null;case 3:return r=e.stateNode,wo(),He(tn),He(Pt),Wm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$n!==null&&(fp($n),$n=null))),sp(t,e),kt(e),null;case 5:qm(e);var i=ts(rl.current);if(n=e.type,t!==null&&e.stateNode!=null)w1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return kt(e),null}if(t=ts(lr.current),yu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sr]=e,r[tl]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<_a.length;i++)$e(_a[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":N0(r,s),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$e("invalid",r);break;case"textarea":D0(r,s),$e("invalid",r)}Pf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&gu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gu(r.textContent,a,t),i=["children",""+a]):qa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":lu(r),P0(r,s,!0);break;case"textarea":lu(r),j0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Q_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[sr]=e,t[tl]=r,x1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Df(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<_a.length;i++)$e(_a[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":N0(t,r),i=If(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),$e("invalid",t);break;case"textarea":D0(t,r),i=Rf(t,r),$e("invalid",t);break;default:i=r}Pf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?J_(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Y_(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Wa(t,l):typeof l=="number"&&Wa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$e("scroll",t):l!=null&&Em(t,s,l,o))}switch(n){case"input":lu(t),P0(t,r,!1);break;case"textarea":lu(t),j0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ri(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)_1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=ts(rl.current),ts(lr.current),yu(e)){if(r=e.stateNode,n=e.memoizedProps,r[sr]=e,(s=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:gu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sr]=e,e.stateNode=r}return kt(e),null;case 13:if(He(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&gn!==null&&e.mode&1&&!(e.flags&128))FE(),vo(),e.flags|=98560,s=!1;else if(s=yu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[sr]=e}else vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else $n!==null&&(fp($n),$n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ct===0&&(ct=3):ig())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return wo(),sp(t,e),t===null&&Za(e.stateNode.containerInfo),kt(e),null;case 10:return zm(e.type._context),kt(e),null;case 17:return nn(e.type)&&_c(),kt(e),null;case 19:if(He(Ge),s=e.memoizedState,s===null)return kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ha(s,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cc(t),o!==null){for(e.flags|=128,ha(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>Eo&&(e.flags|=128,r=!0,ha(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ha(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!We)return kt(e),null}else 2*rt()-s.renderingStartTime>Eo&&n!==1073741824&&(e.flags|=128,r=!0,ha(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=Ge.current,Me(Ge,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return rg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function yA(t,e){switch(Mm(e),e.tag){case 1:return nn(e.type)&&_c(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wo(),He(tn),He(Pt),Wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qm(e),null;case 13:if(He(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(Ge),null;case 4:return wo(),null;case 10:return zm(e.type._context),null;case 22:case 23:return rg(),null;case 24:return null;default:return null}}var wu=!1,At=!1,vA=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function op(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var bv=!1;function xA(t,e){if(Bf=yc,t=kE(),Om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hf={focusedElem:t,selectionRange:n},yc=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,T=w.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?b:Un(e.type,b),T);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(A){Ze(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return w=bv,bv=!1,w}function Da(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&op(e,n,s)}i=i.next}while(i!==r)}}function xd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ap(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function E1(t){var e=t.alternate;e!==null&&(t.alternate=null,E1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sr],delete e[tl],delete e[Kf],delete e[tA],delete e[nA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function b1(t){return t.tag===5||t.tag===3||t.tag===4}function Tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||b1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wc));else if(r!==4&&(t=t.child,t!==null))for(lp(t,e,n),t=t.sibling;t!==null;)lp(t,e,n),t=t.sibling}function up(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(up(t,e,n),t=t.sibling;t!==null;)up(t,e,n),t=t.sibling}var yt=null,zn=!1;function ii(t,e,n){for(n=n.child;n!==null;)T1(t,e,n),n=n.sibling}function T1(t,e,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(dd,n)}catch{}switch(n.tag){case 5:At||Xs(n,e);case 6:var r=yt,i=zn;yt=null,ii(t,e,n),yt=r,zn=i,yt!==null&&(zn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(zn?(t=yt,n=n.stateNode,t.nodeType===8?jh(t.parentNode,n):t.nodeType===1&&jh(t,n),Ya(t)):jh(yt,n.stateNode));break;case 4:r=yt,i=zn,yt=n.stateNode.containerInfo,zn=!0,ii(t,e,n),yt=r,zn=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&op(n,e,o),i=i.next}while(i!==r)}ii(t,e,n);break;case 1:if(!At&&(Xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}ii(t,e,n);break;case 21:ii(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,ii(t,e,n),At=r):ii(t,e,n);break;default:ii(t,e,n)}}function Sv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vA),e.forEach(function(r){var i=CA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yt=a.stateNode,zn=!1;break e;case 3:yt=a.stateNode.containerInfo,zn=!0;break e;case 4:yt=a.stateNode.containerInfo,zn=!0;break e}a=a.return}if(yt===null)throw Error(W(160));T1(s,o,i),yt=null,zn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S1(e,t),e=e.sibling}function S1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),er(t),r&4){try{Da(3,t,t.return),xd(3,t)}catch(b){Ze(t,t.return,b)}try{Da(5,t,t.return)}catch(b){Ze(t,t.return,b)}}break;case 1:Vn(e,t),er(t),r&512&&n!==null&&Xs(n,n.return);break;case 5:if(Vn(e,t),er(t),r&512&&n!==null&&Xs(n,n.return),t.flags&32){var i=t.stateNode;try{Wa(i,"")}catch(b){Ze(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&K_(i,s),Df(a,o);var c=Df(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?J_(i,f):h==="dangerouslySetInnerHTML"?Y_(i,f):h==="children"?Wa(i,f):Em(i,h,f,c)}switch(a){case"input":Cf(i,s);break;case"textarea":G_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Zs(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Zs(i,!!s.multiple,s.defaultValue,!0):Zs(i,!!s.multiple,s.multiple?[]:"",!1))}i[tl]=s}catch(b){Ze(t,t.return,b)}}break;case 6:if(Vn(e,t),er(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){Ze(t,t.return,b)}}break;case 3:if(Vn(e,t),er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(e.containerInfo)}catch(b){Ze(t,t.return,b)}break;case 4:Vn(e,t),er(t);break;case 13:Vn(e,t),er(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(tg=rt())),r&4&&Sv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(At=(c=At)||h,Vn(e,t),At=c):Vn(e,t),er(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(f=ee=h;ee!==null;){switch(m=ee,g=m.child,m.tag){case 0:case 11:case 14:case 15:Da(4,m,m.return);break;case 1:Xs(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(b){Ze(r,n,b)}}break;case 5:Xs(m,m.return);break;case 22:if(m.memoizedState!==null){Iv(f);continue}}g!==null?(g.return=m,ee=g):Iv(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=X_("display",o))}catch(b){Ze(t,t.return,b)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(b){Ze(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Vn(e,t),er(t),r&4&&Sv(t);break;case 21:break;default:Vn(e,t),er(t)}}function er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(b1(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wa(i,""),r.flags&=-33);var s=Tv(t);up(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Tv(t);lp(t,a,o);break;default:throw Error(W(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wA(t,e,n){ee=t,k1(t)}function k1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||wu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||At;a=wu;var c=At;if(wu=o,(At=l)&&!c)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?Cv(i):l!==null?(l.return=o,ee=l):Cv(i);for(;s!==null;)ee=s,k1(s),s=s.sibling;ee=i,wu=a,At=c}kv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):kv(t)}}function kv(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||xd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ya(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}At||e.flags&512&&ap(e)}catch(m){Ze(e,e.return,m)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Iv(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Cv(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xd(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var s=e.return;try{ap(e)}catch(l){Ze(e,s,l)}break;case 5:var o=e.return;try{ap(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var _A=Math.ceil,Nc=Gr.ReactCurrentDispatcher,Zm=Gr.ReactCurrentOwner,An=Gr.ReactCurrentBatchConfig,ke=0,mt=null,ot=null,wt=0,mn=0,Js=Ui(0),ct=0,al=null,hs=0,wd=0,eg=0,ja=null,Xt=null,tg=0,Eo=1/0,kr=null,Pc=!1,cp=null,bi=null,_u=!1,gi=null,Dc=0,Oa=0,dp=null,Hu=-1,qu=0;function zt(){return ke&6?rt():Hu!==-1?Hu:Hu=rt()}function Ti(t){return t.mode&1?ke&2&&wt!==0?wt&-wt:iA.transition!==null?(qu===0&&(qu=cE()),qu):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:yE(t.type)),t):1}function Kn(t,e,n,r){if(50<Oa)throw Oa=0,dp=null,Error(W(185));bl(t,n,r),(!(ke&2)||t!==mt)&&(t===mt&&(!(ke&2)&&(wd|=n),ct===4&&ci(t,wt)),rn(t,r),n===1&&ke===0&&!(e.mode&1)&&(Eo=rt()+500,gd&&zi()))}function rn(t,e){var n=t.callbackNode;iC(t,e);var r=gc(t,t===mt?wt:0);if(r===0)n!==null&&M0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&M0(n),e===1)t.tag===0?rA(Av.bind(null,t)):LE(Av.bind(null,t)),ZC(function(){!(ke&6)&&zi()}),n=null;else{switch(dE(r)){case 1:n=Im;break;case 4:n=lE;break;case 16:n=mc;break;case 536870912:n=uE;break;default:n=mc}n=j1(n,I1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function I1(t,e){if(Hu=-1,qu=0,ke&6)throw Error(W(327));var n=t.callbackNode;if(io()&&t.callbackNode!==n)return null;var r=gc(t,t===mt?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jc(t,r);else{e=r;var i=ke;ke|=2;var s=A1();(mt!==t||wt!==e)&&(kr=null,Eo=rt()+500,os(t,e));do try{TA();break}catch(a){C1(t,a)}while(!0);Um(),Nc.current=s,ke=i,ot!==null?e=0:(mt=null,wt=0,e=ct)}if(e!==0){if(e===2&&(i=Vf(t),i!==0&&(r=i,e=hp(t,i))),e===1)throw n=al,os(t,0),ci(t,r),rn(t,rt()),n;if(e===6)ci(t,r);else{if(i=t.current.alternate,!(r&30)&&!EA(i)&&(e=jc(t,r),e===2&&(s=Vf(t),s!==0&&(r=s,e=hp(t,s))),e===1))throw n=al,os(t,0),ci(t,r),rn(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Yi(t,Xt,kr);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=tg+500-rt(),10<e)){if(gc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wf(Yi.bind(null,t,Xt,kr),e);break}Yi(t,Xt,kr);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Wn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_A(r/1960))-r,10<r){t.timeoutHandle=Wf(Yi.bind(null,t,Xt,kr),r);break}Yi(t,Xt,kr);break;case 5:Yi(t,Xt,kr);break;default:throw Error(W(329))}}}return rn(t,rt()),t.callbackNode===n?I1.bind(null,t):null}function hp(t,e){var n=ja;return t.current.memoizedState.isDehydrated&&(os(t,e).flags|=256),t=jc(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&fp(e)),t}function fp(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function EA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~eg,e&=~wd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function Av(t){if(ke&6)throw Error(W(327));io();var e=gc(t,0);if(!(e&1))return rn(t,rt()),null;var n=jc(t,e);if(t.tag!==0&&n===2){var r=Vf(t);r!==0&&(e=r,n=hp(t,r))}if(n===1)throw n=al,os(t,0),ci(t,e),rn(t,rt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yi(t,Xt,kr),rn(t,rt()),null}function ng(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Eo=rt()+500,gd&&zi())}}function fs(t){gi!==null&&gi.tag===0&&!(ke&6)&&io();var e=ke;ke|=1;var n=An.transition,r=Pe;try{if(An.transition=null,Pe=1,t)return t()}finally{Pe=r,An.transition=n,ke=e,!(ke&6)&&zi()}}function rg(){mn=Js.current,He(Js)}function os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JC(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Mm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_c();break;case 3:wo(),He(tn),He(Pt),Wm();break;case 5:qm(r);break;case 4:wo();break;case 13:He(Ge);break;case 19:He(Ge);break;case 10:zm(r.type._context);break;case 22:case 23:rg()}n=n.return}if(mt=t,ot=t=Si(t.current,null),wt=mn=e,ct=0,al=null,eg=wd=hs=0,Xt=ja=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}es=null}return t}function C1(t,e){do{var n=ot;try{if(Um(),zu.current=Rc,Ac){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ac=!1}if(ds=0,pt=lt=Qe=null,Pa=!1,il=0,Zm.current=null,n===null||n.return===null){ct=1,al=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=gv(o);if(g!==null){g.flags&=-257,yv(g,o,a,s,e),g.mode&1&&mv(s,c,e),e=g,l=c;var w=e.updateQueue;if(w===null){var b=new Set;b.add(l),e.updateQueue=b}else w.add(l);break e}else{if(!(e&1)){mv(s,c,e),ig();break e}l=Error(W(426))}}else if(We&&a.mode&1){var T=gv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),yv(T,o,a,s,e),Vm(_o(l,a));break e}}s=l=_o(l,a),ct!==4&&(ct=2),ja===null?ja=[s]:ja.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=d1(s,l,e);uv(s,y);break e;case 1:a=l;var x=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(bi===null||!bi.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=h1(s,a,e);uv(s,A);break e}}s=s.return}while(s!==null)}N1(n)}catch(M){e=M,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function A1(){var t=Nc.current;return Nc.current=Rc,t===null?Rc:t}function ig(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(hs&268435455)&&!(wd&268435455)||ci(mt,wt)}function jc(t,e){var n=ke;ke|=2;var r=A1();(mt!==t||wt!==e)&&(kr=null,os(t,e));do try{bA();break}catch(i){C1(t,i)}while(!0);if(Um(),ke=n,Nc.current=r,ot!==null)throw Error(W(261));return mt=null,wt=0,ct}function bA(){for(;ot!==null;)R1(ot)}function TA(){for(;ot!==null&&!QI();)R1(ot)}function R1(t){var e=D1(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?N1(t):ot=e,Zm.current=null}function N1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yA(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,ot=null;return}}else if(n=gA(n,e,mn),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ct===0&&(ct=5)}function Yi(t,e,n){var r=Pe,i=An.transition;try{An.transition=null,Pe=1,SA(t,e,n,r)}finally{An.transition=i,Pe=r}return null}function SA(t,e,n,r){do io();while(gi!==null);if(ke&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sC(t,s),t===mt&&(ot=mt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_u||(_u=!0,j1(mc,function(){return io(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=An.transition,An.transition=null;var o=Pe;Pe=1;var a=ke;ke|=4,Zm.current=null,xA(t,n),S1(n,t),qC(Hf),yc=!!Bf,Hf=Bf=null,t.current=n,wA(n),YI(),ke=a,Pe=o,An.transition=s}else t.current=n;if(_u&&(_u=!1,gi=t,Dc=i),s=t.pendingLanes,s===0&&(bi=null),ZI(n.stateNode),rn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pc)throw Pc=!1,t=cp,cp=null,t;return Dc&1&&t.tag!==0&&io(),s=t.pendingLanes,s&1?t===dp?Oa++:(Oa=0,dp=t):Oa=0,zi(),null}function io(){if(gi!==null){var t=dE(Dc),e=An.transition,n=Pe;try{if(An.transition=null,Pe=16>t?16:t,gi===null)var r=!1;else{if(t=gi,gi=null,Dc=0,ke&6)throw Error(W(331));var i=ke;for(ke|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:Da(8,h,s)}var f=h.child;if(f!==null)f.return=h,ee=f;else for(;ee!==null;){h=ee;var m=h.sibling,g=h.return;if(E1(h),h===c){ee=null;break}if(m!==null){m.return=g,ee=m;break}ee=g}}}var w=s.alternate;if(w!==null){var b=w.child;if(b!==null){w.child=null;do{var T=b.sibling;b.sibling=null,b=T}while(b!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Da(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ee=y;break e}ee=s.return}}var x=t.current;for(ee=x;ee!==null;){o=ee;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ee=_;else e:for(o=x;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xd(9,a)}}catch(M){Ze(a,a.return,M)}if(a===o){ee=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,ee=A;break e}ee=a.return}}if(ke=i,zi(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(dd,t)}catch{}r=!0}return r}finally{Pe=n,An.transition=e}}return!1}function Rv(t,e,n){e=_o(n,e),e=d1(t,e,1),t=Ei(t,e,1),e=zt(),t!==null&&(bl(t,1,e),rn(t,e))}function Ze(t,e,n){if(t.tag===3)Rv(t,t,n);else for(;e!==null;){if(e.tag===3){Rv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bi===null||!bi.has(r))){t=_o(n,t),t=h1(e,t,1),e=Ei(e,t,1),t=zt(),e!==null&&(bl(e,1,t),rn(e,t));break}}e=e.return}}function kA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(wt&n)===n&&(ct===4||ct===3&&(wt&130023424)===wt&&500>rt()-tg?os(t,0):eg|=n),rn(t,e)}function P1(t,e){e===0&&(t.mode&1?(e=du,du<<=1,!(du&130023424)&&(du=4194304)):e=1);var n=zt();t=Ur(t,e),t!==null&&(bl(t,e,n),rn(t,n))}function IA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P1(t,n)}function CA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),P1(t,n)}var D1;D1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,mA(t,e,n);en=!!(t.flags&131072)}else en=!1,We&&e.flags&1048576&&ME(e,Tc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bu(t,e),t=e.pendingProps;var i=yo(e,Pt.current);ro(e,n),i=Gm(null,e,r,t,i,n);var s=Qm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(s=!0,Ec(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Bm(e),i.updater=vd,e.stateNode=i,i._reactInternals=e,Zf(e,r,t,n),e=np(null,e,r,!0,s,n)):(e.tag=0,We&&s&&Lm(e),Ut(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=RA(r),t=Un(r,t),i){case 0:e=tp(null,e,r,t,n);break e;case 1:e=wv(null,e,r,t,n);break e;case 11:e=vv(null,e,r,t,n);break e;case 14:e=xv(null,e,r,Un(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),tp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),wv(t,e,r,i,n);case 3:e:{if(g1(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,BE(t,e),Ic(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_o(Error(W(423)),e),e=_v(t,e,r,n,i);break e}else if(r!==i){i=_o(Error(W(424)),e),e=_v(t,e,r,n,i);break e}else for(gn=_i(e.stateNode.containerInfo.firstChild),vn=e,We=!0,$n=null,n=zE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vo(),r===i){e=zr(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return HE(e),t===null&&Yf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qf(r,i)?o=null:s!==null&&qf(r,s)&&(e.flags|=32),m1(t,e),Ut(t,e,o,n),e.child;case 6:return t===null&&Yf(e),null;case 13:return y1(t,e,n);case 4:return Hm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xo(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),vv(t,e,r,i,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Me(Sc,r._currentValue),r._currentValue=o,s!==null)if(Qn(s.value,o)){if(s.children===i.children&&!tn.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=jr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ut(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ro(e,n),i=Nn(i),r=r(i),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,i=Un(r,e.pendingProps),i=Un(r.type,i),xv(t,e,r,i,n);case 15:return f1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Bu(t,e),e.tag=1,nn(r)?(t=!0,Ec(e)):t=!1,ro(e,n),c1(e,r,i),Zf(e,r,i,n),np(null,e,r,!0,t,n);case 19:return v1(t,e,n);case 22:return p1(t,e,n)}throw Error(W(156,e.tag))};function j1(t,e){return aE(t,e)}function AA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,n,r){return new AA(t,e,n,r)}function sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RA(t){if(typeof t=="function")return sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tm)return 11;if(t===Sm)return 14}return 2}function Si(t,e){var n=t.alternate;return n===null?(n=Cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")sg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $s:return as(n.children,i,s,e);case bm:o=8,i|=8;break;case bf:return t=Cn(12,n,e,i|2),t.elementType=bf,t.lanes=s,t;case Tf:return t=Cn(13,n,e,i),t.elementType=Tf,t.lanes=s,t;case Sf:return t=Cn(19,n,e,i),t.elementType=Sf,t.lanes=s,t;case H_:return _d(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $_:o=10;break e;case B_:o=9;break e;case Tm:o=11;break e;case Sm:o=14;break e;case ai:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function as(t,e,n,r){return t=Cn(7,t,r,e),t.lanes=n,t}function _d(t,e,n,r){return t=Cn(22,t,r,e),t.elementType=H_,t.lanes=n,t.stateNode={isHidden:!1},t}function $h(t,e,n){return t=Cn(6,t,null,e),t.lanes=n,t}function Bh(t,e,n){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function NA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bh(0),this.expirationTimes=bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function og(t,e,n,r,i,s,o,a,l){return t=new NA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bm(s),t}function PA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function O1(t){if(!t)return Ni;t=t._reactInternals;e:{if(Ts(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(nn(n))return OE(t,n,e)}return e}function L1(t,e,n,r,i,s,o,a,l){return t=og(n,r,!0,t,i,s,o,a,l),t.context=O1(null),n=t.current,r=zt(),i=Ti(n),s=jr(r,i),s.callback=e??null,Ei(n,s,i),t.current.lanes=i,bl(t,i,r),rn(t,r),t}function Ed(t,e,n,r){var i=e.current,s=zt(),o=Ti(i);return n=O1(n),e.context===null?e.context=n:e.pendingContext=n,e=jr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ei(i,e,o),t!==null&&(Kn(t,i,o,s),Uu(t,i,o)),o}function Oc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ag(t,e){Nv(t,e),(t=t.alternate)&&Nv(t,e)}function DA(){return null}var M1=typeof reportError=="function"?reportError:function(t){console.error(t)};function lg(t){this._internalRoot=t}bd.prototype.render=lg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Ed(t,e,null,null)};bd.prototype.unmount=lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Ed(null,t,null,null)}),e[Fr]=null}};function bd(t){this._internalRoot=t}bd.prototype.unstable_scheduleHydration=function(t){if(t){var e=pE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&gE(t)}};function ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pv(){}function jA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Oc(o);s.call(c)}}var o=L1(e,r,t,0,null,!1,!1,"",Pv);return t._reactRootContainer=o,t[Fr]=o.current,Za(t.nodeType===8?t.parentNode:t),fs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Oc(l);a.call(c)}}var l=og(t,0,!1,null,null,!1,!1,"",Pv);return t._reactRootContainer=l,t[Fr]=l.current,Za(t.nodeType===8?t.parentNode:t),fs(function(){Ed(e,l,n,r)}),l}function Sd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Oc(o);a.call(l)}}Ed(e,o,t,i)}else o=jA(n,e,t,i,r);return Oc(o)}hE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wa(e.pendingLanes);n!==0&&(Cm(e,n|1),rn(e,rt()),!(ke&6)&&(Eo=rt()+500,zi()))}break;case 13:fs(function(){var r=Ur(t,1);if(r!==null){var i=zt();Kn(r,t,1,i)}}),ag(t,1)}};Am=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=zt();Kn(e,t,134217728,n)}ag(t,134217728)}};fE=function(t){if(t.tag===13){var e=Ti(t),n=Ur(t,e);if(n!==null){var r=zt();Kn(n,t,e,r)}ag(t,e)}};pE=function(){return Pe};mE=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};Of=function(t,e,n){switch(e){case"input":if(Cf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=md(r);if(!i)throw Error(W(90));W_(r),Cf(r,i)}}}break;case"textarea":G_(t,n);break;case"select":e=n.value,e!=null&&Zs(t,!!n.multiple,e,!1)}};tE=ng;nE=fs;var OA={usingClientEntryPoint:!1,Events:[Sl,Ws,md,Z_,eE,ng]},fa={findFiberByHostInstance:Zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LA={bundleType:fa.bundleType,version:fa.version,rendererPackageName:fa.rendererPackageName,rendererConfig:fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sE(t),t===null?null:t.stateNode},findFiberByHostInstance:fa.findFiberByHostInstance||DA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{dd=Eu.inject(LA),ar=Eu}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OA;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ug(e))throw Error(W(200));return PA(t,e,null,n)};_n.createRoot=function(t,e){if(!ug(t))throw Error(W(299));var n=!1,r="",i=M1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=og(t,1,!1,null,null,n,!1,r,i),t[Fr]=e.current,Za(t.nodeType===8?t.parentNode:t),new lg(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=sE(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return fs(t)};_n.hydrate=function(t,e,n){if(!Td(e))throw Error(W(200));return Sd(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!ug(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=M1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=L1(e,null,t,1,n??null,i,!1,s,o),t[Fr]=e.current,Za(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new bd(e)};_n.render=function(t,e,n){if(!Td(e))throw Error(W(200));return Sd(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Td(t))throw Error(W(40));return t._reactRootContainer?(fs(function(){Sd(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};_n.unstable_batchedUpdates=ng;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Td(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Sd(t,e,n,!1,r)};_n.version="18.3.1-next-f1338f8080-20240426";function V1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V1)}catch(t){console.error(t)}}V1(),V_.exports=_n;var MA=V_.exports,F1,Dv=MA;F1=Dv.createRoot,Dv.hydrateRoot;var cg={};Object.defineProperty(cg,"__esModule",{value:!0});cg.parse=HA;cg.serialize=qA;const VA=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,FA=/^[\u0021-\u003A\u003C-\u007E]*$/,UA=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,zA=/^[\u0020-\u003A\u003D-\u007E]*$/,$A=Object.prototype.toString,BA=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function HA(t,e){const n=new BA,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||WA;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const a=t.indexOf(";",s),l=a===-1?r:a;if(o>l){s=t.lastIndexOf(";",o-1)+1;continue}const c=jv(t,s,o),h=Ov(t,o,c),f=t.slice(c,h);if(n[f]===void 0){let m=jv(t,o+1,l),g=Ov(t,l,m);const w=i(t.slice(m,g));n[f]=w}s=l+1}while(s<r);return n}function jv(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function Ov(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function qA(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!VA.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!FA.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!UA.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!zA.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!KA(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function WA(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function KA(t){return $A.call(t)==="[object Date]"}var Lv="popstate";function GA(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return pp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ll(i)}return YA(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QA(){return Math.random().toString(36).substring(2,10)}function Mv(t,e){return{usr:t.state,key:t.key,idx:e}}function pp(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:n,key:e&&e.key||r||QA()}}function ll({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function YA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let T=h(),y=T==null?null:T-c;c=T,l&&l({action:a,location:b.location,delta:y})}function m(T,y){a="PUSH";let x=pp(b.location,T,y);c=h()+1;let _=Mv(x,c),A=b.createHref(x);try{o.pushState(_,"",A)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(A)}s&&l&&l({action:a,location:b.location,delta:1})}function g(T,y){a="REPLACE";let x=pp(b.location,T,y);c=h();let _=Mv(x,c),A=b.createHref(x);o.replaceState(_,"",A),s&&l&&l({action:a,location:b.location,delta:0})}function w(T){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof T=="string"?T:ll(T);return x=x.replace(/ $/,"%20"),Ke(y,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,y)}let b={get action(){return a},get location(){return t(i,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Lv,f),l=T,()=>{i.removeEventListener(Lv,f),l=null}},createHref(T){return e(i,T)},createURL:w,encodeLocation(T){let y=w(T);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:g,go(T){return o.go(T)}};return b}function U1(t,e,n="/"){return XA(t,e,n,!1)}function XA(t,e,n,r){let i=typeof e=="string"?jo(e):e,s=$r(i.pathname||"/",n);if(s==null)return null;let o=z1(t);JA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=uR(s);a=aR(o[l],c,r)}return a}function z1(t,e=[],n=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ke(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Or([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Ke(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),z1(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:sR(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of $1(s.path))i(s,o,l)}),e}function $1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=$1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ZA=/^:[\w-]+$/,eR=3,tR=2,nR=1,rR=10,iR=-2,Vv=t=>t==="*";function sR(t,e){let n=t.split("/"),r=n.length;return n.some(Vv)&&(r+=iR),e&&(r+=tR),n.filter(i=>!Vv(i)).reduce((i,s)=>i+(ZA.test(s)?eR:s===""?nR:rR),r)}function oR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function aR(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Lc({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=Lc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Or([s,f.pathname]),pathnameBase:fR(Or([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Or([s,f.pathnameBase]))}return o}function Lc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:f},m)=>{if(h==="*"){let w=a[m]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const g=a[m];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function lR(t,e=!1,n=!0){Yn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function $r(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cR(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?jo(t):t;return{pathname:n?n.startsWith("/")?n:dR(n,e):e,search:pR(r),hash:mR(i)}}function dR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dg(t){let e=hR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function hg(t,e,n,r=!1){let i;typeof t=="string"?i=jo(t):(i={...t},Ke(!i.pathname||!i.pathname.includes("?"),Hh("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),Hh("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),Hh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=cR(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var Or=t=>t.join("/").replace(/\/\/+/g,"/"),fR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var B1=["POST","PUT","PATCH","DELETE"];new Set(B1);var yR=["GET",...B1];new Set(yR);var Oo=C.createContext(null);Oo.displayName="DataRouter";var kd=C.createContext(null);kd.displayName="DataRouterState";var H1=C.createContext({isTransitioning:!1});H1.displayName="ViewTransition";var vR=C.createContext(new Map);vR.displayName="Fetchers";var xR=C.createContext(null);xR.displayName="Await";var Xn=C.createContext(null);Xn.displayName="Navigation";var Il=C.createContext(null);Il.displayName="Location";var jn=C.createContext({outlet:null,matches:[],isDataRoute:!1});jn.displayName="Route";var fg=C.createContext(null);fg.displayName="RouteError";function wR(t,{relative:e}={}){Ke(Lo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=C.useContext(Xn),{hash:i,pathname:s,search:o}=Cl(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Or([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Lo(){return C.useContext(Il)!=null}function Jn(){return Ke(Lo(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Il).location}var q1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W1(t){C.useContext(Xn).static||C.useLayoutEffect(t)}function Qr(){let{isDataRoute:t}=C.useContext(jn);return t?LR():_R()}function _R(){Ke(Lo(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(Oo),{basename:e,navigator:n}=C.useContext(Xn),{matches:r}=C.useContext(jn),{pathname:i}=Jn(),s=JSON.stringify(dg(r)),o=C.useRef(!1);return W1(()=>{o.current=!0}),C.useCallback((l,c={})=>{if(Yn(o.current,q1),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=hg(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Or([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,i,t])}var ER=C.createContext(null);function bR(t){let e=C.useContext(jn).outlet;return e&&C.createElement(ER.Provider,{value:t},e)}function TR(){let{matches:t}=C.useContext(jn),e=t[t.length-1];return e?e.params:{}}function Cl(t,{relative:e}={}){let{matches:n}=C.useContext(jn),{pathname:r}=Jn(),i=JSON.stringify(dg(n));return C.useMemo(()=>hg(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function SR(t,e){return K1(t,e)}function K1(t,e,n,r){var x;Ke(Lo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=C.useContext(Xn),{matches:o}=C.useContext(jn),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let _=f&&f.path||"";G1(c,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let m=Jn(),g;if(e){let _=typeof e=="string"?jo(e):e;Ke(h==="/"||((x=_.pathname)==null?void 0:x.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=m;let w=g.pathname||"/",b=w;if(h!=="/"){let _=h.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let T=!s&&n&&n.matches&&n.matches.length>0?n.matches:U1(t,{pathname:b});Yn(f||T!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Yn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=RR(T&&T.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Or([h,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:Or([h,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&y?C.createElement(Il.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},y):y}function kR(){let t=OR(),e=gR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:s},"ErrorBoundary")," or"," ",C.createElement("code",{style:s},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,o)}var IR=C.createElement(kR,null),CR=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?C.createElement(jn.Provider,{value:this.props.routeContext},C.createElement(fg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AR({routeContext:t,match:e,children:n}){let r=C.useContext(Oo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(jn.Provider,{value:t},n)}function RR(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Ke(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:h,errors:f}=n,m=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,h)=>{let f,m=!1,g=null,w=null;n&&(f=s&&c.route.id?s[c.route.id]:void 0,g=c.route.errorElement||IR,o&&(a<0&&h===0?(G1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,w=null):a===h&&(m=!0,w=c.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,h+1)),T=()=>{let y;return f?y=g:m?y=w:c.route.Component?y=C.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=l,C.createElement(AR,{match:c,routeContext:{outlet:l,matches:b,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?C.createElement(CR,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}function pg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NR(t){let e=C.useContext(Oo);return Ke(e,pg(t)),e}function PR(t){let e=C.useContext(kd);return Ke(e,pg(t)),e}function DR(t){let e=C.useContext(jn);return Ke(e,pg(t)),e}function mg(t){let e=DR(t),n=e.matches[e.matches.length-1];return Ke(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function jR(){return mg("useRouteId")}function OR(){var r;let t=C.useContext(fg),e=PR("useRouteError"),n=mg("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function LR(){let{router:t}=NR("useNavigate"),e=mg("useNavigate"),n=C.useRef(!1);return W1(()=>{n.current=!0}),C.useCallback(async(i,s={})=>{Yn(n.current,q1),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Fv={};function G1(t,e,n){!e&&!Fv[t]&&(Fv[t]=!0,Yn(!1,n))}C.memo(MR);function MR({routes:t,future:e,state:n}){return K1(t,void 0,n,e)}function mp({to:t,replace:e,state:n,relative:r}){Ke(Lo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=C.useContext(Xn);Yn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=C.useContext(jn),{pathname:o}=Jn(),a=Qr(),l=hg(t,dg(s),o,r==="path"),c=JSON.stringify(l);return C.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function VR(t){return bR(t.context)}function Kt(t){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Ke(!Lo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=C.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=jo(n));let{pathname:l="/",search:c="",hash:h="",state:f=null,key:m="default"}=n,g=C.useMemo(()=>{let w=$r(l,o);return w==null?null:{location:{pathname:w,search:c,hash:h,state:f,key:m},navigationType:r}},[o,l,c,h,f,m,r]);return Yn(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:C.createElement(Xn.Provider,{value:a},C.createElement(Il.Provider,{children:e,value:g}))}function UR({children:t,location:e}){return SR(gp(t),e)}function gp(t,e=[]){let n=[];return C.Children.forEach(t,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){n.push.apply(n,gp(r.props.children,s));return}Ke(r.type===Kt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=gp(r.props.children,s)),n.push(o)}),n}var Ku="get",Gu="application/x-www-form-urlencoded";function Id(t){return t!=null&&typeof t.tagName=="string"}function zR(t){return Id(t)&&t.tagName.toLowerCase()==="button"}function $R(t){return Id(t)&&t.tagName.toLowerCase()==="form"}function BR(t){return Id(t)&&t.tagName.toLowerCase()==="input"}function HR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qR(t,e){return t.button===0&&(!e||e==="_self")&&!HR(t)}var bu=null;function WR(){if(bu===null)try{new FormData(document.createElement("form"),0),bu=!1}catch{bu=!0}return bu}var KR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qh(t){return t!=null&&!KR.has(t)?(Yn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gu}"`),null):t}function GR(t,e){let n,r,i,s,o;if($R(t)){let a=t.getAttribute("action");r=a?$r(a,e):null,n=t.getAttribute("method")||Ku,i=qh(t.getAttribute("enctype"))||Gu,s=new FormData(t)}else if(zR(t)||BR(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?$r(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Ku,i=qh(t.getAttribute("formenctype"))||qh(a.getAttribute("enctype"))||Gu,s=new FormData(a,t),!WR()){let{name:c,type:h,value:f}=t;if(h==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,f)}}else{if(Id(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ku,r=null,i=Gu,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function gg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function QR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function XR(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await QR(s,n);return o.links?o.links():[]}return[]}));return tN(r.flat(1).filter(YR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Uv(t,e,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var f;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function JR(t,e,{includeHydrateFallback:n}={}){return ZR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function ZR(t){return[...new Set(t)]}function eN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function tN(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(eN(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}var nN=new Set([100,101,204,205]);function rN(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&$r(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Q1(){let t=C.useContext(Oo);return gg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function iN(){let t=C.useContext(kd);return gg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var yg=C.createContext(void 0);yg.displayName="FrameworkContext";function Y1(){let t=C.useContext(yg);return gg(t,"You must render this element inside a <HydratedRouter> element"),t}function sN(t,e){let n=C.useContext(yg),[r,i]=C.useState(!1),[s,o]=C.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,m=C.useRef(null);C.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let b=y=>{y.forEach(x=>{o(x.isIntersecting)})},T=new IntersectionObserver(b,{threshold:.5});return m.current&&T.observe(m.current),()=>{T.disconnect()}}},[t]),C.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let g=()=>{i(!0)},w=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:pa(a,g),onBlur:pa(l,w),onMouseEnter:pa(c,g),onMouseLeave:pa(h,w),onTouchStart:pa(f,g)}]:[!1,m,{}]}function pa(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function oN({page:t,...e}){let{router:n}=Q1(),r=C.useMemo(()=>U1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?C.createElement(lN,{page:t,matches:r,...e}):null}function aN(t){let{manifest:e,routeModules:n}=Y1(),[r,i]=C.useState([]);return C.useEffect(()=>{let s=!1;return XR(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function lN({page:t,matches:e,...n}){let r=Jn(),{manifest:i,routeModules:s}=Y1(),{basename:o}=Q1(),{loaderData:a,matches:l}=iN(),c=C.useMemo(()=>Uv(t,e,l,i,r,"data"),[t,e,l,i,r]),h=C.useMemo(()=>Uv(t,e,l,i,r,"assets"),[t,e,l,i,r]),f=C.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,b=!1;if(e.forEach(y=>{var _;let x=i.routes[y.route.id];!x||!x.hasLoader||(!c.some(A=>A.route.id===y.route.id)&&y.route.id in a&&((_=s[y.route.id])!=null&&_.shouldRevalidate)||x.hasClientLoader?b=!0:w.add(y.route.id))}),w.size===0)return[];let T=rN(t,o);return b&&w.size>0&&T.searchParams.set("_routes",e.filter(y=>w.has(y.route.id)).map(y=>y.route.id).join(",")),[T.pathname+T.search]},[o,a,r,i,c,e,t,s]),m=C.useMemo(()=>JR(h,i),[h,i]),g=aN(h);return C.createElement(C.Fragment,null,f.map(w=>C.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),m.map(w=>C.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),g.map(({key:w,link:b})=>C.createElement("link",{key:w,...b})))}function uN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var X1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{X1&&(window.__reactRouterVersion="7.5.3")}catch{}function cN({basename:t,children:e,window:n}){let r=C.useRef();r.current==null&&(r.current=GA({window:n,v5Compat:!0}));let i=r.current,[s,o]=C.useState({action:i.action,location:i.location}),a=C.useCallback(l=>{C.startTransition(()=>o(l))},[o]);return C.useLayoutEffect(()=>i.listen(a),[i,a]),C.createElement(FR,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var J1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=C.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f,...m},g){let{basename:w}=C.useContext(Xn),b=typeof c=="string"&&J1.test(c),T,y=!1;if(typeof c=="string"&&b&&(T=c,X1))try{let k=new URL(window.location.href),N=c.startsWith("//")?new URL(k.protocol+c):new URL(c),j=$r(N.pathname,w);N.origin===k.origin&&j!=null?c=j+N.search+N.hash:y=!0}catch{Yn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=wR(c,{relative:i}),[_,A,M]=sN(r,m),P=pN(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function S(k){e&&e(k),k.defaultPrevented||P(k)}let E=C.createElement("a",{...m,...M,href:T||x,onClick:y||s?e:S,ref:uN(g,A),target:l,"data-discover":!b&&n==="render"?"true":void 0});return _&&!b?C.createElement(C.Fragment,null,E,C.createElement(oN,{page:x})):E});Ce.displayName="Link";var dN=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},h){let f=Cl(o,{relative:c.relative}),m=Jn(),g=C.useContext(kd),{navigator:w,basename:b}=C.useContext(Xn),T=g!=null&&xN(f)&&a===!0,y=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,x=m.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(x=x.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&b&&(_=$r(_,b)||_);const A=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let M=x===y||!i&&x.startsWith(y)&&x.charAt(A)==="/",P=_!=null&&(_===y||!i&&_.startsWith(y)&&_.charAt(y.length)==="/"),S={isActive:M,isPending:P,isTransitioning:T},E=M?e:void 0,k;typeof r=="function"?k=r(S):k=[r,M?"active":null,P?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let N=typeof s=="function"?s(S):s;return C.createElement(Ce,{...c,"aria-current":E,className:k,ref:h,style:N,to:o,viewTransition:a},typeof l=="function"?l(S):l)});dN.displayName="NavLink";var hN=C.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Ku,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:f,...m},g)=>{let w=yN(),b=vN(a,{relative:c}),T=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&J1.test(a),x=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let A=_.nativeEvent.submitter,M=(A==null?void 0:A.getAttribute("formmethod"))||o;w(A||_.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:f})};return C.createElement("form",{ref:g,method:T,action:b,onSubmit:r?l:x,...m,"data-discover":!y&&t==="render"?"true":void 0})});hN.displayName="Form";function fN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z1(t){let e=C.useContext(Oo);return Ke(e,fN(t)),e}function pN(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Qr(),l=Jn(),c=Cl(t,{relative:s});return C.useCallback(h=>{if(qR(h,e)){h.preventDefault();let f=n!==void 0?n:ll(l)===ll(c);a(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,e,t,i,s,o])}var mN=0,gN=()=>`__${String(++mN)}__`;function yN(){let{router:t}=Z1("useSubmit"),{basename:e}=C.useContext(Xn),n=jR();return C.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=GR(r,e);if(i.navigate===!1){let h=i.fetcherKey||gN();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function vN(t,{relative:e}={}){let{basename:n}=C.useContext(Xn),r=C.useContext(jn);Ke(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Cl(t||".",{relative:e})},o=Jn();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Or([n,s.pathname])),ll(s)}function xN(t,e={}){let n=C.useContext(H1);Ke(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Z1("useViewTransitionState"),i=Cl(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=$r(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=$r(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lc(i.pathname,o)!=null||Lc(i.pathname,s)!=null}new TextEncoder;[...nN];const wN=()=>{};var zv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_N=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},tb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),r.push(n[h],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_N(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new EN;const m=s<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bN=function(t){const e=eb(t);return tb.encodeByteArray(e,!0)},Mc=function(t){return bN(t).replace(/\./g,"")},nb=function(t){try{return tb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=()=>TN().__FIREBASE_DEFAULTS__,kN=()=>{if(typeof process>"u"||typeof zv>"u")return;const t=zv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nb(t[1]);return e&&JSON.parse(e)},Cd=()=>{try{return wN()||SN()||kN()||IN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rb=t=>{var e,n;return(n=(e=Cd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ib=t=>{const e=rb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sb=()=>{var t;return(t=Cd())===null||t===void 0?void 0:t.config},ob=t=>{var e;return(e=Cd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mc(JSON.stringify(n)),Mc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function RN(){var t;const e=(t=Cd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jN(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ON(){return!RN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LN(){try{return typeof indexedDB=="object"}catch{return!1}}function MN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VN,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?FN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yr(i,a,r)}}function FN(t,e){return t.replace(UN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UN=/\{\$([^}]+)}/g;function zN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ps(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if($v(s)&&$v(o)){if(!ps(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $v(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ea(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ba(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $N(t,e){const n=new BN(t,e);return n.subscribe.bind(n)}class BN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Wh),i.error===void 0&&(i.error=Wh),i.complete===void 0&&(i.complete=Wh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t&&t._delegate?t._delegate:t}class Pi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new CN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KN(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WN(t){return t===Xi?void 0:t}function KN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const QN={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},YN=be.INFO,XN={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},JN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=XN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vg{constructor(e){this.name=e,this._logLevel=YN,this._logHandler=JN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const ZN=(t,e)=>e.some(n=>t instanceof n);let Bv,Hv;function e2(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t2(){return Hv||(Hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lb=new WeakMap,yp=new WeakMap,ub=new WeakMap,Kh=new WeakMap,xg=new WeakMap;function n2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ki(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lb.set(n,t)}).catch(()=>{}),xg.set(e,t),e}function r2(t){if(yp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yp.set(t,e)}let vp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ub.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function i2(t){vp=t(vp)}function s2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gh(this),e,...n);return ub.set(r,e.sort?e.sort():[e]),ki(r)}:t2().includes(t)?function(...e){return t.apply(Gh(this),e),ki(lb.get(this))}:function(...e){return ki(t.apply(Gh(this),e))}}function o2(t){return typeof t=="function"?s2(t):(t instanceof IDBTransaction&&r2(t),ZN(t,e2())?new Proxy(t,vp):t)}function ki(t){if(t instanceof IDBRequest)return n2(t);if(Kh.has(t))return Kh.get(t);const e=o2(t);return e!==t&&(Kh.set(t,e),xg.set(e,t)),e}const Gh=t=>xg.get(t);function a2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ki(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ki(o.result),l.oldVersion,l.newVersion,ki(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const l2=["get","getKey","getAll","getAllKeys","count"],u2=["put","add","delete","clear"],Qh=new Map;function qv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qh.get(e))return Qh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=u2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||l2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Qh.set(e,s),s}i2(t=>({...t,get:(e,n,r)=>qv(e,n)||t.get(e,n,r),has:(e,n)=>!!qv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function d2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xp="@firebase/app",Wv="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new vg("@firebase/app"),h2="@firebase/app-compat",f2="@firebase/analytics-compat",p2="@firebase/analytics",m2="@firebase/app-check-compat",g2="@firebase/app-check",y2="@firebase/auth",v2="@firebase/auth-compat",x2="@firebase/database",w2="@firebase/data-connect",_2="@firebase/database-compat",E2="@firebase/functions",b2="@firebase/functions-compat",T2="@firebase/installations",S2="@firebase/installations-compat",k2="@firebase/messaging",I2="@firebase/messaging-compat",C2="@firebase/performance",A2="@firebase/performance-compat",R2="@firebase/remote-config",N2="@firebase/remote-config-compat",P2="@firebase/storage",D2="@firebase/storage-compat",j2="@firebase/firestore",O2="@firebase/vertexai",L2="@firebase/firestore-compat",M2="firebase",V2="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]",F2={[xp]:"fire-core",[h2]:"fire-core-compat",[p2]:"fire-analytics",[f2]:"fire-analytics-compat",[g2]:"fire-app-check",[m2]:"fire-app-check-compat",[y2]:"fire-auth",[v2]:"fire-auth-compat",[x2]:"fire-rtdb",[w2]:"fire-data-connect",[_2]:"fire-rtdb-compat",[E2]:"fire-fn",[b2]:"fire-fn-compat",[T2]:"fire-iid",[S2]:"fire-iid-compat",[k2]:"fire-fcm",[I2]:"fire-fcm-compat",[C2]:"fire-perf",[A2]:"fire-perf-compat",[R2]:"fire-rc",[N2]:"fire-rc-compat",[P2]:"fire-gcs",[D2]:"fire-gcs-compat",[j2]:"fire-fst",[L2]:"fire-fst-compat",[O2]:"fire-vertex","fire-js":"fire-js",[M2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new Map,U2=new Map,_p=new Map;function Kv(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ms(t){const e=t.name;if(_p.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;_p.set(e,t);for(const n of Vc.values())Kv(n,t);for(const n of U2.values())Kv(n,t);return!0}function Ad(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Al("app","Firebase",z2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=V2;function cb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ii.create("bad-app-name",{appName:String(i)});if(n||(n=sb()),!n)throw Ii.create("no-options");const s=Vc.get(i);if(s){if(ps(n,s.options)&&ps(r,s.config))return s;throw Ii.create("duplicate-app",{appName:i})}const o=new GN(i);for(const l of _p.values())o.addComponent(l);const a=new $2(n,r,o);return Vc.set(i,a),a}function wg(t=wp){const e=Vc.get(t);if(!e&&t===wp&&sb())return cb();if(!e)throw Ii.create("no-app",{appName:t});return e}function ur(t,e,n){var r;let i=(r=F2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(a.join(" "));return}ms(new Pi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="firebase-heartbeat-database",H2=1,ul="firebase-heartbeat-store";let Yh=null;function db(){return Yh||(Yh=a2(B2,H2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),Yh}async function q2(t){try{const n=(await db()).transaction(ul),r=await n.objectStore(ul).get(hb(t));return await n.done,r}catch(e){if(e instanceof yr)Br.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(n.message)}}}async function Gv(t,e){try{const r=(await db()).transaction(ul,"readwrite");await r.objectStore(ul).put(e,hb(t)),await r.done}catch(n){if(n instanceof yr)Br.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Br.warn(r.message)}}}function hb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=1024,K2=30;class G2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Y2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Qv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>K2){const o=X2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qv(),{heartbeatsToSend:r,unsentEntries:i}=Q2(this._heartbeatsCache.heartbeats),s=Mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Br.warn(n),""}}}function Qv(){return new Date().toISOString().substring(0,10)}function Q2(t,e=W2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Yv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Yv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Y2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LN()?MN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yv(t){return Mc(JSON.stringify({version:2,heartbeats:t})).length}function X2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){ms(new Pi("platform-logger",e=>new c2(e),"PRIVATE")),ms(new Pi("heartbeat",e=>new G2(e),"PRIVATE")),ur(xp,Wv,t),ur(xp,Wv,"esm2017"),ur("fire-js","")}J2("");function _g(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z2=fb,pb=new Al("auth","Firebase",fb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new vg("@firebase/auth");function eP(t,...e){Fc.logLevel<=be.WARN&&Fc.warn(`Auth (${Ss}): ${t}`,...e)}function Qu(t,...e){Fc.logLevel<=be.ERROR&&Fc.error(`Auth (${Ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw bg(t,...e)}function Gn(t,...e){return bg(t,...e)}function Eg(t,e,n){const r=Object.assign(Object.assign({},Z2()),{[e]:n});return new Al("auth","Firebase",r).create(e,{appName:t.name})}function Lr(t){return Eg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tP(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),Eg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return pb.create(t,...e)}function oe(t,e,...n){if(!t)throw bg(e,...n)}function Pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qu(e),new Error(e)}function Hr(t,e){t||Pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nP(){return Xv()==="http:"||Xv()==="https:"}function Xv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nP()||PN()||"connection"in navigator)?navigator.onLine:!0}function iP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=AN()||DN()}get(){return rP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t,e){Hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aP=new Nl(3e4,6e4);function Yr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vr(t,e,n,r,i={}){return gb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Rl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return NN()||(c.referrerPolicy="no-referrer"),mb.fetch()(await yb(t,t.config.apiHost,n,a),c)})}async function gb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sP),e);try{const i=new uP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Tu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Tu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Tu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Eg(t,h,c);Dn(t,h)}}catch(i){if(i instanceof yr)throw i;Dn(t,"network-request-failed",{message:String(i)})}}async function Pl(t,e,n,r,i={}){const s=await vr(t,e,n,r,i);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function yb(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Tg(t.config,i):`${t.config.apiScheme}://${i}`;return oP.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function lP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gn(this.auth,"network-request-failed")),aP.get())})}}function Tu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gn(t,e,r);return i.customData._tokenResponse=n,i}function Jv(t){return t!==void 0&&t.enterprise!==void 0}class cP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dP(t,e){return vr(t,"GET","/v2/recaptchaConfig",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(t,e){return vr(t,"POST","/v1/accounts:delete",e)}async function Uc(t,e){return vr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fP(t,e=!1){const n=$t(t),r=await n.getIdToken(e),i=Sg(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:La(Xh(i.auth_time)),issuedAtTime:La(Xh(i.iat)),expirationTime:La(Xh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Xh(t){return Number(t)*1e3}function Sg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const i=nb(n);return i?JSON.parse(i):(Qu("Failed to decode base64 JWT payload"),null)}catch(i){return Qu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zv(t){const e=Sg(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&pP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=La(this.lastLoginAt),this.creationTime=La(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await bo(t,Uc(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vb(s.providerUserInfo):[],a=yP(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function gP(t){const e=$t(t);await zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vb(t){return t.map(e=>{var{providerId:n}=e,r=_g(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e){const n=await gb(t,{},async()=>{const r=Rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await yb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",mb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xP(t,e){return vr(t,"POST","/v2/accounts:revokeToken",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=Zv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await vP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new so;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=_g(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bo(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fP(this,e)}reload(){return gP(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zt(this.auth.app))return Promise.reject(Lr(this.auth));const e=await this.getIdToken();return await bo(this,hP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:A,isAnonymous:M,providerData:P,stsTokenManager:S}=n;oe(_&&S,e,"internal-error");const E=so.fromJSON(this.name,S);oe(typeof _=="string",e,"internal-error"),si(f,e.name),si(m,e.name),oe(typeof A=="boolean",e,"internal-error"),oe(typeof M=="boolean",e,"internal-error"),si(g,e.name),si(w,e.name),si(b,e.name),si(T,e.name),si(y,e.name),si(x,e.name);const k=new Bn({uid:_,auth:e,email:m,emailVerified:A,displayName:f,isAnonymous:M,photoURL:w,phoneNumber:g,tenantId:b,stsTokenManager:E,createdAt:y,lastLoginAt:x});return P&&Array.isArray(P)&&(k.providerData=P.map(N=>Object.assign({},N))),T&&(k._redirectEventId=T),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new so;i.updateFromServerResponse(n);const s=new Bn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?vb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new so;a.updateFromIdToken(r);const l=new Bn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new bp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new Map;function Dr(t){Hr(t instanceof Function,"Expected a class definition");let e=ex.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ex.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xb.type="NONE";const tx=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e,n){return`firebase:${t}:${e}:${n}`}class oo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Yu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uc(this.auth,{idToken:e}).catch(()=>{});return n?Bn._fromGetAccountInfoResponse(this.auth,n,e):null}return Bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oo(Dr(tx),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Dr(tx);const o=Yu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const m=await Uc(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Bn._fromGetAccountInfoResponse(e,m,h)}else f=Bn._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new oo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new oo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sb(e))return"Blackberry";if(kb(e))return"Webos";if(_b(e))return"Safari";if((e.includes("chrome/")||Eb(e))&&!e.includes("edge/"))return"Chrome";if(Tb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wb(t=Dt()){return/firefox\//i.test(t)}function _b(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Eb(t=Dt()){return/crios\//i.test(t)}function bb(t=Dt()){return/iemobile/i.test(t)}function Tb(t=Dt()){return/android/i.test(t)}function Sb(t=Dt()){return/blackberry/i.test(t)}function kb(t=Dt()){return/webos/i.test(t)}function kg(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wP(t=Dt()){var e;return kg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _P(){return jN()&&document.documentMode===10}function Ib(t=Dt()){return kg(t)||Tb(t)||kb(t)||Sb(t)||/windows phone/i.test(t)||bb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t,e=[]){let n;switch(t){case"Browser":n=nx(Dt());break;case"Worker":n=`${nx(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP(t,e={}){return vr(t,"GET","/v2/passwordPolicy",Yr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=6;class SP{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rx(this),this.idTokenSubscription=new rx(this),this.beforeStateQueue=new EP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await oo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uc(this,{idToken:e}),r=await Bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zt(this.app))return Promise.reject(Lr(this));const n=e?$t(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zt(this.app)?Promise.reject(Lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zt(this.app)?Promise.reject(Lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bP(this),n=new SP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await oo.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&eP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Xr(t){return $t(t)}class rx{constructor(e){this.auth=e,this.observer=null,this.addObserver=$N(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IP(t){Rd=t}function Ab(t){return Rd.loadJS(t)}function CP(){return Rd.recaptchaEnterpriseScript}function AP(){return Rd.gapiScript}function RP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class NP{constructor(){this.enterprise=new PP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class PP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const DP="recaptcha-enterprise",Rb="NO_RECAPTCHA";class jP{constructor(e){this.type=DP,this.auth=Xr(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{dP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new cP(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Jv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Rb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NP().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Jv(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=CP();l.length!==0&&(l+=a),Ab(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function ix(t,e,n,r=!1,i=!1){const s=new jP(t);let o;if(i)o=Rb;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function $c(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ix(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ix(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t,e){const n=Ad(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ps(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function LP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MP(t,e,n){const r=Xr(t);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Nb(e),{host:o,port:a}=VP(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(ps(c,r.config.emulator)&&ps(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,FP()}function Nb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VP(t){const e=Nb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:sx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:sx(o)}}}function sx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,n){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}async function UP(t,e){return vr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e){return Pl(t,"POST","/v1/accounts:signInWithPassword",Yr(t,e))}async function $P(t,e){return vr(t,"POST","/v1/accounts:sendOobCode",Yr(t,e))}async function BP(t,e){return $P(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e){return Pl(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,e))}async function qP(t,e){return Pl(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Ig{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new cl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new cl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $c(e,n,"signInWithPassword",zP);case"emailLink":return HP(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $c(e,r,"signUpPassword",UP);case"emailLink":return qP(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t,e){return Pl(t,"POST","/v1/accounts:signInWithIdp",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="http://localhost";class gs extends Ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=_g(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ao(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ao(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ao(e,n)}buildRequest(){const e={requestUri:WP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GP(t){const e=Ea(ba(t)).link,n=e?Ea(ba(e)).deep_link_id:null,r=Ea(ba(t)).deep_link_id;return(r?Ea(ba(r)).link:null)||r||n||e||t}class Cg{constructor(e){var n,r,i,s,o,a;const l=Ea(ba(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=KP((i=l.mode)!==null&&i!==void 0?i:null);oe(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=GP(e);try{return new Cg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.providerId=Mo.PROVIDER_ID}static credential(e,n){return cl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cg.parseLink(n);return oe(r,"argument-error"),cl._fromEmailAndCode(e,r.code,r.tenantId)}}Mo.PROVIDER_ID="password";Mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends Ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Dl{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gs._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Dl{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Dl{constructor(){super("twitter.com")}static credential(e,n){return gs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t,e){return Pl(t,"POST","/v1/accounts:signUp",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Bn._fromIdTokenResponse(e,r,i),o=ox(r);return new ys({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ox(r);return new ys({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ox(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends yr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Bc(e,n,r,i)}}function Pb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bc._fromErrorAndOperation(t,s,e,r):s})}async function YP(t,e,n=!1){const r=await bo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ys._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e,n=!1){const{auth:r}=t;if(Zt(r.app))return Promise.reject(Lr(r));const i="reauthenticate";try{const s=await bo(t,Pb(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=Sg(s.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),ys._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e,n=!1){if(Zt(t.app))return Promise.reject(Lr(t));const r="signIn",i=await Pb(t,r,e),s=await ys._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function JP(t,e){return Db(Xr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t){const e=Xr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZP(t,e,n){const r=Xr(t);await $c(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BP)}async function eD(t,e,n){if(Zt(t.app))return Promise.reject(Lr(t));const r=Xr(t),o=await $c(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QP).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&jb(t),l}),a=await ys._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function tD(t,e,n){return Zt(t.app)?Promise.reject(Lr(t)):JP($t(t),Mo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jb(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e){return vr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$t(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await bo(r,nD(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function iD(t,e,n,r){return $t(t).onIdTokenChanged(e,n,r)}function sD(t,e,n){return $t(t).beforeAuthStateChanged(e,n)}function oD(t,e,n,r){return $t(t).onAuthStateChanged(e,n,r)}function aD(t){return $t(t).signOut()}const Hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=1e3,uD=10;class Lb extends Ob{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ib(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);_P()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,uD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lb.type="LOCAL";const cD=Lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends Ob{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Mb.type="SESSION";const Vb=Mb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Nd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await dD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Rg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function fD(t){cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function pD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gD(){return Fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firebaseLocalStorageDb",yD=1,qc="firebaseLocalStorage",zb="fbase_key";class jl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pd(t,e){return t.transaction([qc],e?"readwrite":"readonly").objectStore(qc)}function vD(){const t=indexedDB.deleteDatabase(Ub);return new jl(t).toPromise()}function Tp(){const t=indexedDB.open(Ub,yD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qc,{keyPath:zb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qc)?e(r):(r.close(),await vD(),e(await Tp()))})})}async function ax(t,e,n){const r=Pd(t,!0).put({[zb]:e,value:n});return new jl(r).toPromise()}async function xD(t,e){const n=Pd(t,!1).get(e),r=await new jl(n).toPromise();return r===void 0?null:r.value}function lx(t,e){const n=Pd(t,!0).delete(e);return new jl(n).toPromise()}const wD=800,_D=3;class $b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_D)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nd._getInstance(gD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pD(),!this.activeServiceWorker)return;this.sender=new hD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tp();return await ax(e,Hc,"1"),await lx(e,Hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ax(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Pd(i,!1).getAll();return new jl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$b.type="LOCAL";const ED=$b;new Nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t,e){return e?Dr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends Ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bD(t){return Db(t.auth,new Ng(t),t.bypassAuthState)}function TD(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),XP(n,new Ng(t),t.bypassAuthState)}async function SD(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),YP(n,new Ng(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bD;case"linkViaPopup":case"linkViaRedirect":return SD;case"reauthViaPopup":case"reauthViaRedirect":return TD;default:Dn(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new Nl(2e3,1e4);async function ID(t,e,n){if(Zt(t.app))return Promise.reject(Gn(t,"operation-not-supported-in-this-environment"));const r=Xr(t);tP(t,e,Ag);const i=Bb(r,n);return new ns(r,"signInViaPopup",e,i).executeNotNull()}class ns extends Hb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kD.get())};e()}}ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="pendingRedirect",Xu=new Map;class AD extends Hb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const r=await RD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RD(t,e){const n=DD(e),r=PD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ND(t,e){Xu.set(t._key(),e)}function PD(t){return Dr(t._redirectPersistence)}function DD(t){return Yu(CD,t.config.apiKey,t.name)}async function jD(t,e,n=!1){if(Zt(t.app))return Promise.reject(Lr(t));const r=Xr(t),i=Bb(r,e),o=await new AD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=10*60*1e3;class LD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OD&&this.cachedEventUids.clear(),this.cachedEventUids.has(ux(e))}saveEventToCache(e){this.cachedEventUids.add(ux(e)),this.lastProcessedEventTime=Date.now()}}function ux(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(t,e={}){return vr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UD=/^https?/;async function zD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VD(t);for(const n of e)try{if($D(n))return}catch{}Dn(t,"unauthorized-domain")}function $D(t){const e=Ep(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!UD.test(n))return!1;if(FD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new Nl(3e4,6e4);function cx(){const t=cr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HD(t){return new Promise((e,n)=>{var r,i,s;function o(){cx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cx(),n(Gn(t,"network-request-failed"))},timeout:BD.get()})}if(!((i=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=cr().gapi)===null||s===void 0)&&s.load)o();else{const a=RP("iframefcb");return cr()[a]=()=>{gapi.load?o():n(Gn(t,"network-request-failed"))},Ab(`${AP()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function qD(t){return Ju=Ju||HD(t),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new Nl(5e3,15e3),KD="__/auth/iframe",GD="emulator/auth/iframe",QD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XD(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tg(e,GD):`https://${t.config.authDomain}/${KD}`,r={apiKey:e.apiKey,appName:t.name,v:Ss},i=YD.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rl(r).slice(1)}`}async function JD(t){const e=await qD(t),n=cr().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:XD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QD,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Gn(t,"network-request-failed"),a=cr().setTimeout(()=>{s(o)},WD.get());function l(){cr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ej=500,tj=600,nj="_blank",rj="http://localhost";class dx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ij(t,e,n,r=ej,i=tj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ZD),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Dt().toLowerCase();n&&(a=Eb(c)?nj:n),wb(c)&&(e=e||rj,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,w])=>`${m}${g}=${w},`,"");if(wP(c)&&a!=="_self")return sj(e||"",a),new dx(null);const f=window.open(e||"",a,h);oe(f,t,"popup-blocked");try{f.focus()}catch{}return new dx(f)}function sj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="__/auth/handler",aj="emulator/auth/handler",lj=encodeURIComponent("fac");async function hx(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ss,eventId:i};if(e instanceof Ag){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Dl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${lj}=${encodeURIComponent(l)}`:"";return`${uj(t)}?${Rl(a).slice(1)}${c}`}function uj({config:t}){return t.emulator?Tg(t,aj):`https://${t.authDomain}/${oj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="webStorageSupport";class cj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vb,this._completeRedirectFn=jD,this._overrideRedirectResult=ND}async _openPopup(e,n,r,i){var s;Hr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await hx(e,n,r,Ep(),i);return ij(e,o,Rg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await hx(e,n,r,Ep(),i);return fD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Hr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await JD(e),r=new LD(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jh,{type:Jh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Jh];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ib()||_b()||kg()}}const dj=cj;var fx="@firebase/auth",px="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pj(t){ms(new Pi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cb(t)},c=new kP(r,i,s,l);return LP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ms(new Pi("auth-internal",e=>{const n=Xr(e.getProvider("auth").getImmediate());return(r=>new hj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(fx,px,fj(t)),ur(fx,px,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=5*60,gj=ob("authIdTokenMaxAge")||mj;let mx=null;const yj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gj)return;const i=n==null?void 0:n.token;mx!==i&&(mx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function vj(t=wg()){const e=Ad(t,"auth");if(e.isInitialized())return e.getImmediate();const n=OP(t,{popupRedirectResolver:dj,persistence:[ED,cD,Vb]}),r=ob("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=yj(s.toString());sD(n,o,()=>o(n.currentUser)),iD(n,a=>o(a))}}const i=rb("auth");return i&&MP(n,`http://${i}`),n}function xj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Gn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",xj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pj("Browser");var wj="firebase",_j="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(wj,_j,"app");var gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,Wb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function k(){}k.prototype=E.prototype,S.D=E.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(N,j,O){for(var D=Array(arguments.length-2),B=2;B<arguments.length;B++)D[B-2]=arguments[B];return E.prototype[j].apply(N,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,k){k||(k=0);var N=Array(16);if(typeof E=="string")for(var j=0;16>j;++j)N[j]=E.charCodeAt(k++)|E.charCodeAt(k++)<<8|E.charCodeAt(k++)<<16|E.charCodeAt(k++)<<24;else for(j=0;16>j;++j)N[j]=E[k++]|E[k++]<<8|E[k++]<<16|E[k++]<<24;E=S.g[0],k=S.g[1],j=S.g[2];var O=S.g[3],D=E+(O^k&(j^O))+N[0]+3614090360&4294967295;E=k+(D<<7&4294967295|D>>>25),D=O+(j^E&(k^j))+N[1]+3905402710&4294967295,O=E+(D<<12&4294967295|D>>>20),D=j+(k^O&(E^k))+N[2]+606105819&4294967295,j=O+(D<<17&4294967295|D>>>15),D=k+(E^j&(O^E))+N[3]+3250441966&4294967295,k=j+(D<<22&4294967295|D>>>10),D=E+(O^k&(j^O))+N[4]+4118548399&4294967295,E=k+(D<<7&4294967295|D>>>25),D=O+(j^E&(k^j))+N[5]+1200080426&4294967295,O=E+(D<<12&4294967295|D>>>20),D=j+(k^O&(E^k))+N[6]+2821735955&4294967295,j=O+(D<<17&4294967295|D>>>15),D=k+(E^j&(O^E))+N[7]+4249261313&4294967295,k=j+(D<<22&4294967295|D>>>10),D=E+(O^k&(j^O))+N[8]+1770035416&4294967295,E=k+(D<<7&4294967295|D>>>25),D=O+(j^E&(k^j))+N[9]+2336552879&4294967295,O=E+(D<<12&4294967295|D>>>20),D=j+(k^O&(E^k))+N[10]+4294925233&4294967295,j=O+(D<<17&4294967295|D>>>15),D=k+(E^j&(O^E))+N[11]+2304563134&4294967295,k=j+(D<<22&4294967295|D>>>10),D=E+(O^k&(j^O))+N[12]+1804603682&4294967295,E=k+(D<<7&4294967295|D>>>25),D=O+(j^E&(k^j))+N[13]+4254626195&4294967295,O=E+(D<<12&4294967295|D>>>20),D=j+(k^O&(E^k))+N[14]+2792965006&4294967295,j=O+(D<<17&4294967295|D>>>15),D=k+(E^j&(O^E))+N[15]+1236535329&4294967295,k=j+(D<<22&4294967295|D>>>10),D=E+(j^O&(k^j))+N[1]+4129170786&4294967295,E=k+(D<<5&4294967295|D>>>27),D=O+(k^j&(E^k))+N[6]+3225465664&4294967295,O=E+(D<<9&4294967295|D>>>23),D=j+(E^k&(O^E))+N[11]+643717713&4294967295,j=O+(D<<14&4294967295|D>>>18),D=k+(O^E&(j^O))+N[0]+3921069994&4294967295,k=j+(D<<20&4294967295|D>>>12),D=E+(j^O&(k^j))+N[5]+3593408605&4294967295,E=k+(D<<5&4294967295|D>>>27),D=O+(k^j&(E^k))+N[10]+38016083&4294967295,O=E+(D<<9&4294967295|D>>>23),D=j+(E^k&(O^E))+N[15]+3634488961&4294967295,j=O+(D<<14&4294967295|D>>>18),D=k+(O^E&(j^O))+N[4]+3889429448&4294967295,k=j+(D<<20&4294967295|D>>>12),D=E+(j^O&(k^j))+N[9]+568446438&4294967295,E=k+(D<<5&4294967295|D>>>27),D=O+(k^j&(E^k))+N[14]+3275163606&4294967295,O=E+(D<<9&4294967295|D>>>23),D=j+(E^k&(O^E))+N[3]+4107603335&4294967295,j=O+(D<<14&4294967295|D>>>18),D=k+(O^E&(j^O))+N[8]+1163531501&4294967295,k=j+(D<<20&4294967295|D>>>12),D=E+(j^O&(k^j))+N[13]+2850285829&4294967295,E=k+(D<<5&4294967295|D>>>27),D=O+(k^j&(E^k))+N[2]+4243563512&4294967295,O=E+(D<<9&4294967295|D>>>23),D=j+(E^k&(O^E))+N[7]+1735328473&4294967295,j=O+(D<<14&4294967295|D>>>18),D=k+(O^E&(j^O))+N[12]+2368359562&4294967295,k=j+(D<<20&4294967295|D>>>12),D=E+(k^j^O)+N[5]+4294588738&4294967295,E=k+(D<<4&4294967295|D>>>28),D=O+(E^k^j)+N[8]+2272392833&4294967295,O=E+(D<<11&4294967295|D>>>21),D=j+(O^E^k)+N[11]+1839030562&4294967295,j=O+(D<<16&4294967295|D>>>16),D=k+(j^O^E)+N[14]+4259657740&4294967295,k=j+(D<<23&4294967295|D>>>9),D=E+(k^j^O)+N[1]+2763975236&4294967295,E=k+(D<<4&4294967295|D>>>28),D=O+(E^k^j)+N[4]+1272893353&4294967295,O=E+(D<<11&4294967295|D>>>21),D=j+(O^E^k)+N[7]+4139469664&4294967295,j=O+(D<<16&4294967295|D>>>16),D=k+(j^O^E)+N[10]+3200236656&4294967295,k=j+(D<<23&4294967295|D>>>9),D=E+(k^j^O)+N[13]+681279174&4294967295,E=k+(D<<4&4294967295|D>>>28),D=O+(E^k^j)+N[0]+3936430074&4294967295,O=E+(D<<11&4294967295|D>>>21),D=j+(O^E^k)+N[3]+3572445317&4294967295,j=O+(D<<16&4294967295|D>>>16),D=k+(j^O^E)+N[6]+76029189&4294967295,k=j+(D<<23&4294967295|D>>>9),D=E+(k^j^O)+N[9]+3654602809&4294967295,E=k+(D<<4&4294967295|D>>>28),D=O+(E^k^j)+N[12]+3873151461&4294967295,O=E+(D<<11&4294967295|D>>>21),D=j+(O^E^k)+N[15]+530742520&4294967295,j=O+(D<<16&4294967295|D>>>16),D=k+(j^O^E)+N[2]+3299628645&4294967295,k=j+(D<<23&4294967295|D>>>9),D=E+(j^(k|~O))+N[0]+4096336452&4294967295,E=k+(D<<6&4294967295|D>>>26),D=O+(k^(E|~j))+N[7]+1126891415&4294967295,O=E+(D<<10&4294967295|D>>>22),D=j+(E^(O|~k))+N[14]+2878612391&4294967295,j=O+(D<<15&4294967295|D>>>17),D=k+(O^(j|~E))+N[5]+4237533241&4294967295,k=j+(D<<21&4294967295|D>>>11),D=E+(j^(k|~O))+N[12]+1700485571&4294967295,E=k+(D<<6&4294967295|D>>>26),D=O+(k^(E|~j))+N[3]+2399980690&4294967295,O=E+(D<<10&4294967295|D>>>22),D=j+(E^(O|~k))+N[10]+4293915773&4294967295,j=O+(D<<15&4294967295|D>>>17),D=k+(O^(j|~E))+N[1]+2240044497&4294967295,k=j+(D<<21&4294967295|D>>>11),D=E+(j^(k|~O))+N[8]+1873313359&4294967295,E=k+(D<<6&4294967295|D>>>26),D=O+(k^(E|~j))+N[15]+4264355552&4294967295,O=E+(D<<10&4294967295|D>>>22),D=j+(E^(O|~k))+N[6]+2734768916&4294967295,j=O+(D<<15&4294967295|D>>>17),D=k+(O^(j|~E))+N[13]+1309151649&4294967295,k=j+(D<<21&4294967295|D>>>11),D=E+(j^(k|~O))+N[4]+4149444226&4294967295,E=k+(D<<6&4294967295|D>>>26),D=O+(k^(E|~j))+N[11]+3174756917&4294967295,O=E+(D<<10&4294967295|D>>>22),D=j+(E^(O|~k))+N[2]+718787259&4294967295,j=O+(D<<15&4294967295|D>>>17),D=k+(O^(j|~E))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(j+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+j&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var k=E-this.blockSize,N=this.B,j=this.h,O=0;O<E;){if(j==0)for(;O<=k;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<E;)if(N[j++]=S.charCodeAt(O++),j==this.blockSize){i(this,N),j=0;break}}else for(;O<E;)if(N[j++]=S[O++],j==this.blockSize){i(this,N),j=0;break}}this.h=j,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var k=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=k&255,k/=256;for(this.u(S),S=Array(16),E=k=0;4>E;++E)for(var N=0;32>N;N+=8)S[k++]=this.g[E]>>>N&255;return S};function s(S,E){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=E(S)}function o(S,E){this.h=E;for(var k=[],N=!0,j=S.length-1;0<=j;j--){var O=S[j]|0;N&&O==E||(k[j]=O,N=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return T(c(-S));for(var E=[],k=1,N=0;S>=k;N++)E[N]=S/k|0,k*=4294967296;return new o(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return T(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(E,8)),N=f,j=0;j<S.length;j+=8){var O=Math.min(8,S.length-j),D=parseInt(S.substring(j,j+O),E);8>O?(O=c(Math.pow(E,O)),N=N.j(O).add(c(D))):(N=N.j(k),N=N.add(c(D)))}return N}var f=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-T(this).m();for(var S=0,E=1,k=0;k<this.g.length;k++){var N=this.i(k);S+=(0<=N?N:4294967296+N)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(b(this))return"-"+T(this).toString(S);for(var E=c(Math.pow(S,6)),k=this,N="";;){var j=A(k,E).g;k=y(k,j.j(E));var O=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=j,w(k))return O+N;for(;6>O.length;)O="0"+O;N=O+N}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function b(S){return S.h==-1}t.l=function(S){return S=y(this,S),b(S)?-1:w(S)?0:1};function T(S){for(var E=S.g.length,k=[],N=0;N<E;N++)k[N]=~S.g[N];return new o(k,~S.h).add(m)}t.abs=function(){return b(this)?T(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),k=[],N=0,j=0;j<=E;j++){var O=N+(this.i(j)&65535)+(S.i(j)&65535),D=(O>>>16)+(this.i(j)>>>16)+(S.i(j)>>>16);N=D>>>16,O&=65535,D&=65535,k[j]=D<<16|O}return new o(k,k[k.length-1]&-2147483648?-1:0)};function y(S,E){return S.add(T(E))}t.j=function(S){if(w(this)||w(S))return f;if(b(this))return b(S)?T(this).j(T(S)):T(T(this).j(S));if(b(S))return T(this.j(T(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var E=this.g.length+S.g.length,k=[],N=0;N<2*E;N++)k[N]=0;for(N=0;N<this.g.length;N++)for(var j=0;j<S.g.length;j++){var O=this.i(N)>>>16,D=this.i(N)&65535,B=S.i(j)>>>16,X=S.i(j)&65535;k[2*N+2*j]+=D*X,x(k,2*N+2*j),k[2*N+2*j+1]+=O*X,x(k,2*N+2*j+1),k[2*N+2*j+1]+=D*B,x(k,2*N+2*j+1),k[2*N+2*j+2]+=O*B,x(k,2*N+2*j+2)}for(N=0;N<E;N++)k[N]=k[2*N+1]<<16|k[2*N];for(N=E;N<2*E;N++)k[N]=0;return new o(k,0)};function x(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function _(S,E){this.g=S,this.h=E}function A(S,E){if(w(E))throw Error("division by zero");if(w(S))return new _(f,f);if(b(S))return E=A(T(S),E),new _(T(E.g),T(E.h));if(b(E))return E=A(S,T(E)),new _(T(E.g),E.h);if(30<S.g.length){if(b(S)||b(E))throw Error("slowDivide_ only works with positive integers.");for(var k=m,N=E;0>=N.l(S);)k=M(k),N=M(N);var j=P(k,1),O=P(N,1);for(N=P(N,2),k=P(k,2);!w(N);){var D=O.add(N);0>=D.l(S)&&(j=j.add(k),O=D),N=P(N,1),k=P(k,1)}return E=y(S,j.j(E)),new _(j,E)}for(j=f;0<=S.l(E);){for(k=Math.max(1,Math.floor(S.m()/E.m())),N=Math.ceil(Math.log(k)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),O=c(k),D=O.j(E);b(D)||0<D.l(S);)k-=N,O=c(k),D=O.j(E);w(O)&&(O=m),j=j.add(O),S=y(S,D)}return new _(j,S)}t.A=function(S){return A(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),k=[],N=0;N<E;N++)k[N]=this.i(N)&S.i(N);return new o(k,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),k=[],N=0;N<E;N++)k[N]=this.i(N)|S.i(N);return new o(k,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),k=[],N=0;N<E;N++)k[N]=this.i(N)^S.i(N);return new o(k,this.h^S.h)};function M(S){for(var E=S.g.length+1,k=[],N=0;N<E;N++)k[N]=S.i(N)<<1|S.i(N-1)>>>31;return new o(k,S.h)}function P(S,E){var k=E>>5;E%=32;for(var N=S.g.length-k,j=[],O=0;O<N;O++)j[O]=0<E?S.i(O+k)>>>E|S.i(O+k+1)<<32-E:S.i(O+k);return new o(j,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ci=o}).apply(typeof gx<"u"?gx:typeof self<"u"?self:typeof window<"u"?window:{});var Su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kb,Ta,Gb,Zu,Sp,Qb,Yb,Xb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Su=="object"&&Su];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var v=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var V=u[I];if(!(V in v))break e;v=v[V]}u=u[u.length-1],I=v[u],p=p(I),p!=I&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var v=0,I=!1,V={next:function(){if(!I&&v<u.length){var U=v++;return{value:p(U,u[U]),done:!1}}return I=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,v){return u.call.apply(u.bind,arguments)}function f(u,p,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,I),u.apply(p,V)}}return function(){return u.apply(p,arguments)}}function m(u,p,v){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function w(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,V,U){for(var Y=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Y[Oe-2]=arguments[Oe];return p.prototype[V].apply(I,Y)}}function b(u){const p=u.length;if(0<p){const v=Array(p);for(let I=0;I<p;I++)v[I]=u[I];return v}return[]}function T(u,p){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(l(I)){const V=u.length||0,U=I.length||0;u.length=V+U;for(let Y=0;Y<U;Y++)u[V+Y]=I[Y]}else u.push(I)}}class y{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function x(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function A(u){return A[" "](u),u}A[" "]=function(){};var M=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function P(u,p,v){for(const I in u)p.call(v,u[I],I,u)}function S(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function E(u){const p={};for(const v in u)p[v]=u[v];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,p){let v,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(v in I)u[v]=I[v];for(let U=0;U<k.length;U++)v=k[U],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function j(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function O(u){a.setTimeout(()=>{throw u},0)}function D(){var u=te;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class B{constructor(){this.h=this.g=null}add(p,v){const I=X.get();I.set(p,v),this.h?this.h.next=I:this.g=I,this.h=I}}var X=new y(()=>new ve,u=>u.reset());class ve{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let he,K=!1,te=new B,R=()=>{const u=a.Promise.resolve(void 0);he=()=>{u.then(J)}};var J=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(v){O(v)}var p=X;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}K=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};a.addEventListener("test",v,p),a.removeEventListener("test",v,p)}catch{}return u}();function pe(u,p){if(L.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(M){e:{try{A(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:re[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&pe.aa.h.call(this)}}w(pe,L);var re={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Q=0;function _e(u,p,v,I,V){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!I,this.ha=V,this.key=++Q,this.da=this.fa=!1}function qe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function at(u){this.src=u,this.g={},this.h=0}at.prototype.add=function(u,p,v,I,V){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var Y=Ot(u,p,I,V);return-1<Y?(p=u[Y],v||(p.fa=!1)):(p=new _e(p,this.src,U,!!I,V),p.fa=v,u.push(p)),p};function tt(u,p){var v=p.type;if(v in u.g){var I=u.g[v],V=Array.prototype.indexOf.call(I,p,void 0),U;(U=0<=V)&&Array.prototype.splice.call(I,V,1),U&&(qe(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Ot(u,p,v,I){for(var V=0;V<u.length;++V){var U=u[V];if(!U.da&&U.listener==p&&U.capture==!!v&&U.ha==I)return V}return-1}var un="closure_lm_"+(1e6*Math.random()|0),Lt={};function qt(u,p,v,I,V){if(Array.isArray(p)){for(var U=0;U<p.length;U++)qt(u,p[U],v,I,V);return null}return v=Hl(v),u&&u[je]?u.K(p,v,c(I)?!!I.capture:!!I,V):me(u,p,v,!1,I,V)}function me(u,p,v,I,V,U){if(!p)throw Error("Invalid event type");var Y=c(V)?!!V.capture:!!V,Oe=Wo(u);if(Oe||(u[un]=Oe=new at(u)),v=Oe.add(p,v,I,Y,U),v.proxy)return v;if(I=Wt(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)Fe||(V=Y),V===void 0&&(V=!1),u.addEventListener(p.toString(),I,V);else if(u.attachEvent)u.attachEvent(Jr(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Wt(){function u(v){return p.call(u.src,u.listener,v)}const p=rh;return u}function Mt(u,p,v,I,V){if(Array.isArray(p))for(var U=0;U<p.length;U++)Mt(u,p[U],v,I,V);else I=c(I)?!!I.capture:!!I,v=Hl(v),u&&u[je]?(u=u.i,p=String(p).toString(),p in u.g&&(U=u.g[p],v=Ot(U,v,I,V),-1<v&&(qe(U[v]),Array.prototype.splice.call(U,v,1),U.length==0&&(delete u.g[p],u.h--)))):u&&(u=Wo(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ot(p,v,I,V)),(v=-1<u?p[u]:null)&&Ln(v))}function Ln(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[je])tt(p.i,u);else{var v=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(v,I,u.capture):p.detachEvent?p.detachEvent(Jr(v),I):p.addListener&&p.removeListener&&p.removeListener(I),(v=Wo(p))?(tt(v,u),v.h==0&&(v.src=null,p[un]=null)):qe(u)}}}function Jr(u){return u in Lt?Lt[u]:Lt[u]="on"+u}function rh(u,p){if(u.da)u=!0;else{p=new pe(p,this);var v=u.listener,I=u.ha||u.src;u.fa&&Ln(u),u=v.call(I,p)}return u}function Wo(u){return u=u[un],u instanceof at?u:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hl(u){return typeof u=="function"?u:(u[Ko]||(u[Ko]=function(p){return u.handleEvent(p)}),u[Ko])}function z(){ne.call(this),this.i=new at(this),this.M=this,this.F=null}w(z,ne),z.prototype[je]=!0,z.prototype.removeEventListener=function(u,p,v,I){Mt(this,u,p,v,I)};function H(u,p){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new L(p,u);else if(p instanceof L)p.target=p.target||u;else{var V=p;p=new L(I,u),N(p,V)}if(V=!0,v)for(var U=v.length-1;0<=U;U--){var Y=p.g=v[U];V=ae(Y,I,!0,p)&&V}if(Y=p.g=u,V=ae(Y,I,!0,p)&&V,V=ae(Y,I,!1,p)&&V,v)for(U=0;U<v.length;U++)Y=p.g=v[U],V=ae(Y,I,!1,p)&&V}z.prototype.N=function(){if(z.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],I=0;I<v.length;I++)qe(v[I]);delete u.g[p],u.h--}}this.F=null},z.prototype.K=function(u,p,v,I){return this.i.add(String(u),p,!1,v,I)},z.prototype.L=function(u,p,v,I){return this.i.add(String(u),p,!0,v,I)};function ae(u,p,v,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,U=0;U<p.length;++U){var Y=p[U];if(Y&&!Y.da&&Y.capture==v){var Oe=Y.listener,gt=Y.ha||Y.src;Y.fa&&tt(u.i,Y),V=Oe.call(gt,I)!==!1&&V}}return V&&!I.defaultPrevented}function we(u,p,v){if(typeof u=="function")v&&(u=m(u,v));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Re(u){u.g=we(()=>{u.g=null,u.i&&(u.i=!1,Re(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class cn extends ne{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dn(u){ne.call(this),this.h=u,this.g={}}w(dn,ne);var bn=[];function Zr(u){P(u.g,function(p,v){this.g.hasOwnProperty(v)&&Ln(p)},u),u.g={}}dn.prototype.N=function(){dn.aa.N.call(this),Zr(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=a.JSON.stringify,Vt=a.JSON.parse,ei=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function hn(){}hn.prototype.h=null;function jy(u){return u.h||(u.h=u.i())}function Oy(){}var Go={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ih(){L.call(this,"d")}w(ih,L);function sh(){L.call(this,"c")}w(sh,L);var Hi={},Ly=null;function ql(){return Ly=Ly||new z}Hi.La="serverreachability";function My(u){L.call(this,Hi.La,u)}w(My,L);function Qo(u){const p=ql();H(p,new My(p))}Hi.STAT_EVENT="statevent";function Vy(u,p){L.call(this,Hi.STAT_EVENT,u),this.stat=p}w(Vy,L);function Ft(u){const p=ql();H(p,new Vy(p,u))}Hi.Ma="timingevent";function Fy(u,p){L.call(this,Hi.Ma,u),this.size=p}w(Fy,L);function Yo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Xo(){this.g=!0}Xo.prototype.xa=function(){this.g=!1};function Bk(u,p,v,I,V,U){u.info(function(){if(u.g)if(U)for(var Y="",Oe=U.split("&"),gt=0;gt<Oe.length;gt++){var Ie=Oe[gt].split("=");if(1<Ie.length){var bt=Ie[0];Ie=Ie[1];var Tt=bt.split("_");Y=2<=Tt.length&&Tt[1]=="type"?Y+(bt+"="+Ie+"&"):Y+(bt+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+p+`
`+v+`
`+Y})}function Hk(u,p,v,I,V,U,Y){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+p+`
`+v+`
`+U+" "+Y})}function Ns(u,p,v,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Wk(u,v)+(I?" "+I:"")})}function qk(u,p){u.info(function(){return"TIMEOUT: "+p})}Xo.prototype.info=function(){};function Wk(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var V=I[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<V.length;Y++)V[Y]=""}}}}return _r(v)}catch{return p}}var Wl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Uy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oh;function Kl(){}w(Kl,hn),Kl.prototype.g=function(){return new XMLHttpRequest},Kl.prototype.i=function(){return{}},oh=new Kl;function ti(u,p,v,I){this.j=u,this.i=p,this.l=v,this.R=I||1,this.U=new dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zy}function zy(){this.i=null,this.g="",this.h=!1}var $y={},ah={};function lh(u,p,v){u.L=1,u.v=Xl(Er(p)),u.m=v,u.P=!0,By(u,null)}function By(u,p){u.F=Date.now(),Gl(u),u.A=Er(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),r0(v.i,"t",I),u.C=0,v=u.j.J,u.h=new zy,u.g=_0(u.j,v?p:null,!u.m),0<u.O&&(u.M=new cn(m(u.Y,u,u.g),u.O)),p=u.U,v=u.g,I=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(bn[0]=V.toString()),V=bn);for(var U=0;U<V.length;U++){var Y=qt(v,V[U],I||p.handleEvent,!1,p.h||p);if(!Y)break;p.g[Y.key]=Y}p=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Qo(),Bk(u.i,u.u,u.A,u.l,u.R,u.m)}ti.prototype.ca=function(u){u=u.target;const p=this.M;p&&br(u)==3?p.j():this.Y(u)},ti.prototype.Y=function(u){try{if(u==this.g)e:{const Tt=br(this.g);var p=this.g.Ba();const js=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||c0(this.g)))){this.J||Tt!=4||p==7||(p==8||0>=js?Qo(3):Qo(2)),uh(this);var v=this.g.Z();this.X=v;t:if(Hy(this)){var I=c0(this.g);u="";var V=I.length,U=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qi(this),Jo(this);var Y="";break t}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(U&&p==V-1)});I.length=0,this.h.g+=u,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=v==200,Hk(this.i,this.u,this.A,this.l,this.R,Tt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,gt=this.g;if((Oe=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Oe)){var Ie=Oe;break t}}Ie=null}if(v=Ie)Ns(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ch(this,v);else{this.o=!1,this.s=3,Ft(12),qi(this),Jo(this);break e}}if(this.P){v=!0;let Mn;for(;!this.J&&this.C<Y.length;)if(Mn=Kk(this,Y),Mn==ah){Tt==4&&(this.s=4,Ft(14),v=!1),Ns(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==$y){this.s=4,Ft(15),Ns(this.i,this.l,Y,"[Invalid Chunk]"),v=!1;break}else Ns(this.i,this.l,Mn,null),ch(this,Mn);if(Hy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||Y.length!=0||this.h.h||(this.s=1,Ft(16),v=!1),this.o=this.o&&v,!v)Ns(this.i,this.l,Y,"[Invalid Chunked Response]"),qi(this),Jo(this);else if(0<Y.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),gh(bt),bt.M=!0,Ft(11))}}else Ns(this.i,this.l,Y,null),ch(this,Y);Tt==4&&qi(this),this.o&&!this.J&&(Tt==4?y0(this.j,this):(this.o=!1,Gl(this)))}else cI(this.g),v==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),qi(this),Jo(this)}}}catch{}finally{}};function Hy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kk(u,p){var v=u.C,I=p.indexOf(`
`,v);return I==-1?ah:(v=Number(p.substring(v,I)),isNaN(v)?$y:(I+=1,I+v>p.length?ah:(p=p.slice(I,I+v),u.C=I+v,p)))}ti.prototype.cancel=function(){this.J=!0,qi(this)};function Gl(u){u.S=Date.now()+u.I,qy(u,u.I)}function qy(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Yo(m(u.ba,u),p)}function uh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ti.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(qk(this.i,this.A),this.L!=2&&(Qo(),Ft(17)),qi(this),this.s=2,Jo(this)):qy(this,this.S-u)};function Jo(u){u.j.G==0||u.J||y0(u.j,u)}function qi(u){uh(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Zr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function ch(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||dh(v.h,u))){if(!u.K&&dh(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)ru(v),tu(v);else break e;mh(v),Ft(18)}}else v.za=V[1],0<v.za-v.T&&37500>V[2]&&v.F&&v.v==0&&!v.C&&(v.C=Yo(m(v.Za,v),6e3));if(1>=Gy(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ki(v,11)}else if((u.K||v.g==u)&&ru(v),!x(p))for(V=v.Da.g.parse(p),p=0;p<V.length;p++){let Ie=V[p];if(v.T=Ie[0],Ie=Ie[1],v.G==2)if(Ie[0]=="c"){v.K=Ie[1],v.ia=Ie[2];const bt=Ie[3];bt!=null&&(v.la=bt,v.j.info("VER="+v.la));const Tt=Ie[4];Tt!=null&&(v.Aa=Tt,v.j.info("SVER="+v.Aa));const js=Ie[5];js!=null&&typeof js=="number"&&0<js&&(I=1.5*js,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const Mn=u.g;if(Mn){const su=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(su){var U=I.h;U.g||su.indexOf("spdy")==-1&&su.indexOf("quic")==-1&&su.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(hh(U,U.h),U.h=null))}if(I.D){const yh=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;yh&&(I.ya=yh,Ue(I.I,I.D,yh))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var Y=u;if(I.qa=w0(I,I.J?I.ia:null,I.W),Y.K){Qy(I.h,Y);var Oe=Y,gt=I.L;gt&&(Oe.I=gt),Oe.B&&(uh(Oe),Gl(Oe)),I.g=Y}else m0(I);0<v.i.length&&nu(v)}else Ie[0]!="stop"&&Ie[0]!="close"||Ki(v,7);else v.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Ki(v,7):ph(v):Ie[0]!="noop"&&v.l&&v.l.ta(Ie),v.v=0)}}Qo(4)}catch{}}var Gk=class{constructor(u,p){this.g=u,this.map=p}};function Wy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ky(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gy(u){return u.h?1:u.g?u.g.size:0}function dh(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function hh(u,p){u.g?u.g.add(p):u.h=p}function Qy(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Wy.prototype.cancel=function(){if(this.i=Yy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return b(u.i)}function Qk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],v=u.length,I=0;I<v;I++)p.push(u[I]);return p}p=[],v=0;for(I in u)p[v++]=u[I];return p}function Yk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const I in u)p[v++]=I;return p}}}function Xy(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=Yk(u),I=Qk(u),V=I.length,U=0;U<V;U++)p.call(void 0,I[U],v&&v[U],u)}var Jy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xk(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),V=null;if(0<=I){var U=u[v].substring(0,I);V=u[v].substring(I+1)}else U=u[v];p(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Wi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Wi){this.h=u.h,Ql(this,u.j),this.o=u.o,this.g=u.g,Yl(this,u.s),this.l=u.l;var p=u.i,v=new ta;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Zy(this,v),this.m=u.m}else u&&(p=String(u).match(Jy))?(this.h=!1,Ql(this,p[1]||"",!0),this.o=Zo(p[2]||""),this.g=Zo(p[3]||"",!0),Yl(this,p[4]),this.l=Zo(p[5]||"",!0),Zy(this,p[6]||"",!0),this.m=Zo(p[7]||"")):(this.h=!1,this.i=new ta(null,this.h))}Wi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ea(p,e0,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ea(p,e0,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ea(v,v.charAt(0)=="/"?eI:Zk,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ea(v,nI)),u.join("")};function Er(u){return new Wi(u)}function Ql(u,p,v){u.j=v?Zo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Yl(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Zy(u,p,v){p instanceof ta?(u.i=p,rI(u.i,u.h)):(v||(p=ea(p,tI)),u.i=new ta(p,u.h))}function Ue(u,p,v){u.i.set(p,v)}function Xl(u){return Ue(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Zo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ea(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,Jk),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var e0=/[#\/\?@]/g,Zk=/[#\?:]/g,eI=/[#\?]/g,tI=/[#\?@]/g,nI=/#/g;function ta(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ni(u){u.g||(u.g=new Map,u.h=0,u.i&&Xk(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=ta.prototype,t.add=function(u,p){ni(this),this.i=null,u=Ps(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function t0(u,p){ni(u),p=Ps(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function n0(u,p){return ni(u),p=Ps(u,p),u.g.has(p)}t.forEach=function(u,p){ni(this),this.g.forEach(function(v,I){v.forEach(function(V){u.call(p,V,I,this)},this)},this)},t.na=function(){ni(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let I=0;I<p.length;I++){const V=u[I];for(let U=0;U<V.length;U++)v.push(p[I])}return v},t.V=function(u){ni(this);let p=[];if(typeof u=="string")n0(this,u)&&(p=p.concat(this.g.get(Ps(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},t.set=function(u,p){return ni(this),this.i=null,u=Ps(this,u),n0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function r0(u,p,v){t0(u,p),0<v.length&&(u.i=null,u.g.set(Ps(u,p),b(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var I=p[v];const U=encodeURIComponent(String(I)),Y=this.V(I);for(I=0;I<Y.length;I++){var V=U;Y[I]!==""&&(V+="="+encodeURIComponent(String(Y[I]))),u.push(V)}}return this.i=u.join("&")};function Ps(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function rI(u,p){p&&!u.j&&(ni(u),u.i=null,u.g.forEach(function(v,I){var V=I.toLowerCase();I!=V&&(t0(this,I),r0(this,V,v))},u)),u.j=p}function iI(u,p){const v=new Xo;if(a.Image){const I=new Image;I.onload=g(ri,v,"TestLoadImage: loaded",!0,p,I),I.onerror=g(ri,v,"TestLoadImage: error",!1,p,I),I.onabort=g(ri,v,"TestLoadImage: abort",!1,p,I),I.ontimeout=g(ri,v,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function sI(u,p){const v=new Xo,I=new AbortController,V=setTimeout(()=>{I.abort(),ri(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(U=>{clearTimeout(V),U.ok?ri(v,"TestPingServer: ok",!0,p):ri(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),ri(v,"TestPingServer: error",!1,p)})}function ri(u,p,v,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(v)}catch{}}function oI(){this.g=new ei}function aI(u,p,v){const I=v||"";try{Xy(u,function(V,U){let Y=V;c(V)&&(Y=_r(V)),p.push(I+U+"="+encodeURIComponent(Y))})}catch(V){throw p.push(I+"type="+encodeURIComponent("_badmap")),V}}function Jl(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Jl,hn),Jl.prototype.g=function(){return new Zl(this.l,this.j)},Jl.prototype.i=function(u){return function(){return u}}({});function Zl(u,p){z.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Zl,z),t=Zl.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,ra(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;i0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function i0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?na(this):ra(this),this.readyState==3&&i0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,na(this))},t.Qa=function(u){this.g&&(this.response=u,na(this))},t.ga=function(){this.g&&na(this)};function na(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ra(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function ra(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function s0(u){let p="";return P(u,function(v,I){p+=I,p+=":",p+=v,p+=`\r
`}),p}function fh(u,p,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=s0(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Ue(u,p,v))}function Je(u){z.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Je,z);var lI=/^https?$/i,uI=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oh.g(),this.v=this.o?jy(this.o):jy(oh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){o0(this,U);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)v.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())v.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uI,p,void 0))||I||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Y]of v)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{u0(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){o0(this,U)}};function o0(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,a0(u),eu(u)}function a0(u){u.A||(u.A=!0,H(u,"complete"),H(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,H(this,"complete"),H(this,"abort"),eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eu(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?l0(this):this.bb())},t.bb=function(){l0(this)};function l0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||br(u)!=4||u.Z()!=2)){if(u.u&&br(u)==4)we(u.Ea,0,u);else if(H(u,"readystatechange"),br(u)==4){u.h=!1;try{const Y=u.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var I;if(I=Y===0){var V=String(u.D).match(Jy)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),I=!lI.test(V?V.toLowerCase():"")}v=I}if(v)H(u,"complete"),H(u,"success");else{u.m=6;try{var U=2<br(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",a0(u)}}finally{eu(u)}}}}function eu(u,p){if(u.g){u0(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||H(u,"ready");try{v.onreadystatechange=I}catch{}}}function u0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function br(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Vt(p)}};function c0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cI(u){const p={};u=(u.g&&2<=br(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(x(u[I]))continue;var v=j(u[I]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const U=p[V]||[];p[V]=U,U.push(v)}S(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function d0(u){this.Aa=0,this.i=[],this.j=new Xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ia("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ia("baseRetryDelayMs",5e3,u),this.cb=ia("retryDelaySeedMs",1e4,u),this.Wa=ia("forwardChannelMaxRetries",2,u),this.wa=ia("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Wy(u&&u.concurrentRequestLimit),this.Da=new oI,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=d0.prototype,t.la=8,t.G=1,t.connect=function(u,p,v,I){Ft(0),this.W=u,this.H=p||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=w0(this,null,this.W),nu(this)};function ph(u){if(h0(u),u.G==3){var p=u.U++,v=Er(u.I);if(Ue(v,"SID",u.K),Ue(v,"RID",p),Ue(v,"TYPE","terminate"),sa(u,v),p=new ti(u,u.j,p),p.L=2,p.v=Xl(Er(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=p.v,v=!0),v||(p.g=_0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Gl(p)}x0(u)}function tu(u){u.g&&(gh(u),u.g.cancel(),u.g=null)}function h0(u){tu(u),u.u&&(a.clearTimeout(u.u),u.u=null),ru(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function nu(u){if(!Ky(u.h)&&!u.s){u.s=!0;var p=u.Ga;he||R(),K||(he(),K=!0),te.add(p,u),u.B=0}}function dI(u,p){return Gy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Yo(m(u.Ga,u,p),v0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new ti(this,this.j,u);let U=this.o;if(this.S&&(U?(U=E(U),N(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=p0(this,V,p),v=Er(this.I),Ue(v,"RID",u),Ue(v,"CVER",22),this.D&&Ue(v,"X-HTTP-Session-Id",this.D),sa(this,v),U&&(this.O?p="headers="+encodeURIComponent(String(s0(U)))+"&"+p:this.m&&fh(v,this.m,U)),hh(this.h,V),this.Ua&&Ue(v,"TYPE","init"),this.P?(Ue(v,"$req",p),Ue(v,"SID","null"),V.T=!0,lh(V,v,null)):lh(V,v,p),this.G=2}}else this.G==3&&(u?f0(this,u):this.i.length==0||Ky(this.h)||f0(this))};function f0(u,p){var v;p?v=p.l:v=u.U++;const I=Er(u.I);Ue(I,"SID",u.K),Ue(I,"RID",v),Ue(I,"AID",u.T),sa(u,I),u.m&&u.o&&fh(I,u.m,u.o),v=new ti(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=p0(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),hh(u.h,v),lh(v,I,p)}function sa(u,p){u.H&&P(u.H,function(v,I){Ue(p,I,v)}),u.l&&Xy({},function(v,I){Ue(p,I,v)})}function p0(u,p,v){v=Math.min(u.i.length,v);var I=u.l?m(u.l.Na,u.l,u):null;e:{var V=u.i;let U=-1;for(;;){const Y=["count="+v];U==-1?0<v?(U=V[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Oe=!0;for(let gt=0;gt<v;gt++){let Ie=V[gt].g;const bt=V[gt].map;if(Ie-=U,0>Ie)U=Math.max(0,V[gt].g-100),Oe=!1;else try{aI(bt,Y,"req"+Ie+"_")}catch{I&&I(bt)}}if(Oe){I=Y.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,I}function m0(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;he||R(),K||(he(),K=!0),te.add(p,u),u.v=0}}function mh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Yo(m(u.Fa,u),v0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,g0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Yo(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),tu(this),g0(this))};function gh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function g0(u){u.g=new ti(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Er(u.qa);Ue(p,"RID","rpc"),Ue(p,"SID",u.K),Ue(p,"AID",u.T),Ue(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ue(p,"TO",u.ja),Ue(p,"TYPE","xmlhttp"),sa(u,p),u.m&&u.o&&fh(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Xl(Er(p)),v.m=null,v.P=!0,By(v,u)}t.Za=function(){this.C!=null&&(this.C=null,tu(this),mh(this),Ft(19))};function ru(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function y0(u,p){var v=null;if(u.g==p){ru(u),gh(u),u.g=null;var I=2}else if(dh(u.h,p))v=p.D,Qy(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var V=u.B;I=ql(),H(I,new Fy(I,v)),nu(u)}else m0(u);else if(V=p.s,V==3||V==0&&0<p.X||!(I==1&&dI(u,p)||I==2&&mh(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),V){case 1:Ki(u,5);break;case 4:Ki(u,10);break;case 3:Ki(u,6);break;default:Ki(u,2)}}}function v0(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function Ki(u,p){if(u.j.info("Error code "+p),p==2){var v=m(u.fb,u),I=u.Xa;const V=!I;I=new Wi(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ql(I,"https"),Xl(I),V?iI(I.toString(),v):sI(I.toString(),v)}else Ft(2);u.G=0,u.l&&u.l.sa(p),x0(u),h0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function x0(u){if(u.G=0,u.ka=[],u.l){const p=Yy(u.h);(p.length!=0||u.i.length!=0)&&(T(u.ka,p),T(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function w0(u,p,v){var I=v instanceof Wi?Er(v):new Wi(v);if(I.g!="")p&&(I.g=p+"."+I.g),Yl(I,I.s);else{var V=a.location;I=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var U=new Wi(null);I&&Ql(U,I),p&&(U.g=p),V&&Yl(U,V),v&&(U.l=v),I=U}return v=u.D,p=u.ya,v&&p&&Ue(I,v,p),Ue(I,"VER",u.la),sa(u,I),I}function _0(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Je(new Jl({eb:v})):new Je(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function E0(){}t=E0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function iu(){}iu.prototype.g=function(u,p){return new fn(u,p)};function fn(u,p){z.call(this),this.g=new d0(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!x(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!x(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Ds(this)}w(fn,z),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){ph(this.g)},fn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=_r(u),u=v);p.i.push(new Gk(p.Ya++,u)),p.G==3&&nu(p)},fn.prototype.N=function(){this.g.l=null,delete this.j,ph(this.g),delete this.g,fn.aa.N.call(this)};function b0(u){ih.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}w(b0,ih);function T0(){sh.call(this),this.status=1}w(T0,sh);function Ds(u){this.g=u}w(Ds,E0),Ds.prototype.ua=function(){H(this.g,"a")},Ds.prototype.ta=function(u){H(this.g,new b0(u))},Ds.prototype.sa=function(u){H(this.g,new T0)},Ds.prototype.ra=function(){H(this.g,"b")},iu.prototype.createWebChannel=iu.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Xb=function(){return new iu},Yb=function(){return ql()},Qb=Hi,Sp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wl.NO_ERROR=0,Wl.TIMEOUT=8,Wl.HTTP_ERROR=6,Zu=Wl,Uy.COMPLETE="complete",Gb=Uy,Oy.EventType=Go,Go.OPEN="a",Go.CLOSE="b",Go.ERROR="c",Go.MESSAGE="d",z.prototype.listen=z.prototype.K,Ta=Oy,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Kb=Je}).apply(typeof Su<"u"?Su:typeof self<"u"?self:typeof window<"u"?window:{});const yx="@firebase/firestore",vx="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new vg("@firebase/firestore");function Ms(){return vs.logLevel}function Z(t,...e){if(vs.logLevel<=be.DEBUG){const n=e.map(Pg);vs.debug(`Firestore (${Vo}): ${t}`,...n)}}function qr(t,...e){if(vs.logLevel<=be.ERROR){const n=e.map(Pg);vs.error(`Firestore (${Vo}): ${t}`,...n)}}function To(t,...e){if(vs.logLevel<=be.WARN){const n=e.map(Pg);vs.warn(`Firestore (${Vo}): ${t}`,...n)}}function Pg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Jb(t,r,n)}function Jb(t,e,n){let r=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qr(r),new Error(r)}function Ne(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Jb(e,i,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ej{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class bj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Tj{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ai,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ai)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new Zb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class Sj{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kj{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Sj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ij{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ne(this.o===void 0,3512);const r=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Cj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function kp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return xe(r,i);{const s=eT(),o=Aj(s.encode(wx(t,n)),s.encode(wx(e,n)));return o!==0?o:xe(r,i)}}n+=r>65535?2:1}return xe(t.length,e.length)}function wx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Aj(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return xe(t[n],e[n]);return xe(t.length,e.length)}function So(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=-62135596800,Ex=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ex);return new dt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_x)throw new ie(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ex}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-_x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new dt(0,0))}static max(){return new ce(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="__name__";class ir{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&le(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ir.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return xe(e.length,n.length)}static compareSegments(e,n){const r=ir.isNumericId(e),i=ir.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ir.extractNumericId(e).compare(ir.extractNumericId(n)):kp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class et extends ir{construct(e,n,r){return new et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new et(n)}static emptyPath(){return new et([])}}const Rj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends ir{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return Rj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bx}static keyField(){return new xt([bx])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ie(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ie(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ie(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(et.fromString(e))}static fromName(e){return new se(et.fromString(e).popFirst(5))}static empty(){return new se(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function Nj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new dt(n+1,0):new dt(n,r));return new Di(i,se.empty(),e)}function Pj(t){return new Di(t.readTime,t.key,dl)}class Di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Di(ce.min(),se.empty(),dl)}static max(){return new Di(ce.max(),se.empty(),dl)}}function Dj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Oj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==jj)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Lj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Uo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Dd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=-1;function jd(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function Mj(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="";function Vj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Tx(e)),e=Fj(t.get(n),e);return Tx(e)}function Fj(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case nT:n+="";break;default:n+=s}}return n}function Tx(t){return t+nT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??vt.RED,this.left=i??vt.EMPTY,this.right=s??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new vt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kx(this.data.getIterator())}getIteratorFrom(e){return new kx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class kx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new ht(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iT("Invalid base64 string: "+s):s}}(e);return new Et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const Uj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(Ne(!!t,39018),typeof t=="string"){let e=0;const n=Uj.exec(t);if(Ne(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oi(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="server_timestamp",oT="__type__",aT="__previous_value__",lT="__local_write_time__";function jg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[oT])===null||n===void 0?void 0:n.stringValue)===sT}function Od(t){const e=t.mapValue.fields[aT];return jg(e)?Od(e):e}function hl(t){const e=ji(t.mapValue.fields[lT].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const Ip="(default)";class fl{constructor(e,n){this.projectId=e,this.database=n||Ip}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===Ip}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="__type__",cT="__max__",Iu={mapValue:{fields:{__type__:{stringValue:cT}}}},dT="__vector__",Kc="value";function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jg(t)?4:Bj(t)?9007199254740991:$j(t)?10:11:le(28295,{value:t})}function fr(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hl(t).isEqual(hl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ji(i.timestampValue),a=ji(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Oi(i.bytesValue).isEqual(Oi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nt(i.doubleValue),a=nt(s.doubleValue);return o===a?Wc(o)===Wc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return So(t.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Sx(o)!==Sx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!fr(o[l],a[l])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function pl(t,e){return(t.values||[]).find(n=>fr(n,e))!==void 0}function ko(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nt(s.integerValue||s.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Ix(t.timestampValue,e.timestampValue);case 4:return Ix(hl(t),hl(e));case 5:return kp(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Oi(s),l=Oi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=xe(a[c],l[c]);if(h!==0)return h}return xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=xe(nt(s.latitude),nt(o.latitude));return a!==0?a:xe(nt(s.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const f=s.fields||{},m=o.fields||{},g=(a=f[Kc])===null||a===void 0?void 0:a.arrayValue,w=(l=m[Kc])===null||l===void 0?void 0:l.arrayValue,b=xe(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:Cx(g,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Iu.mapValue&&o===Iu.mapValue)return 0;if(s===Iu.mapValue)return 1;if(o===Iu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=kp(l[f],h[f]);if(m!==0)return m;const g=ko(a[l[f]],c[h[f]]);if(g!==0)return g}return xe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw le(23264,{Pe:n})}}function Ix(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=ji(t),r=ji(e),i=xe(n.seconds,r.seconds);return i!==0?i:xe(n.nanos,r.nanos)}function Cx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ko(n[i],r[i]);if(s)return s}return xe(n.length,r.length)}function Io(t){return Cp(t)}function Cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Cp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Cp(n.fields[o])}`;return i+"}"}(t.mapValue):le(61005,{value:t})}function ec(t){switch(Li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Od(t);return e?16+ec(e):16;case 5:return 2*t.stringValue.length;case 6:return Oi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ec(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ks(r.fields,(s,o)=>{i+=s.length+ec(o)}),i}(t.mapValue);default:throw le(13486,{value:t})}}function Ap(t){return!!t&&"integerValue"in t}function Og(t){return!!t&&"arrayValue"in t}function Ax(t){return!!t&&"nullValue"in t}function Rx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tc(t){return!!t&&"mapValue"in t}function $j(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[uT])===null||n===void 0?void 0:n.stringValue)===dT}function Ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ma(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ma(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Bj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ma(n)}setAll(e){let n=xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ma(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ks(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new In(Ma(this.value))}}function hT(t){const e=[];return ks(t.fields,(n,r)=>{const i=new xt([n]);if(tc(r)){const s=hT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,ce.min(),ce.min(),ce.min(),In.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,ce.min(),ce.min(),In.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,ce.min(),ce.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.position=e,this.inclusive=n}}function Nx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=ko(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Px(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function Hj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{}class ut extends fT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Wj(e,n,r):n==="array-contains"?new Qj(e,r):n==="in"?new Yj(e,r):n==="not-in"?new Xj(e,r):n==="array-contains-any"?new Jj(e,r):new ut(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Kj(e,r):new Gj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ko(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends fT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new pr(e,n)}matches(e){return pT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function pT(t){return t.op==="and"}function mT(t){return qj(t)&&pT(t)}function qj(t){for(const e of t.filters)if(e instanceof pr)return!1;return!0}function Rp(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Io(t.value);if(mT(t))return t.filters.map(e=>Rp(e)).join(",");{const e=t.filters.map(n=>Rp(n)).join(",");return`${t.op}(${e})`}}function gT(t,e){return t instanceof ut?function(r,i){return i instanceof ut&&r.op===i.op&&r.field.isEqual(i.field)&&fr(r.value,i.value)}(t,e):t instanceof pr?function(r,i){return i instanceof pr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&gT(o,i.filters[a]),!0):!1}(t,e):void le(19439)}function yT(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`}(t):t instanceof pr?function(n){return n.op.toString()+" {"+n.getFilters().map(yT).join(" ,")+"}"}(t):"Filter"}class Wj extends ut{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class Kj extends ut{constructor(e,n){super(e,"in",n),this.keys=vT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Gj extends ut{constructor(e,n){super(e,"not-in",n),this.keys=vT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class Qj extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Og(n)&&pl(n.arrayValue,this.value)}}class Yj extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pl(this.value.arrayValue,n)}}class Xj extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pl(this.value.arrayValue,n)}}class Jj extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}}function Dx(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Zj(t,e,n,r,i,s,o)}function Lg(t){const e=fe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Io(r)).join(",")),e.Ie=n}return e.Ie}function Mg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Hj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Px(t.startAt,e.startAt)&&Px(t.endAt,e.endAt)}function Np(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function eO(t,e,n,r,i,s,o,a){return new Ld(t,e,n,r,i,s,o,a)}function Vg(t){return new Ld(t)}function jx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tO(t){return t.collectionGroup!==null}function Va(t){const e=fe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ht(xt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Qc(s,r))}),n.has(xt.keyField().canonicalString())||e.Ee.push(new Qc(xt.keyField(),r))}return e.Ee}function dr(t){const e=fe(t);return e.de||(e.de=nO(e,Va(t))),e.de}function nO(t,e){if(t.limitType==="F")return Dx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Qc(i.field,s)});const n=t.endAt?new Gc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gc(t.startAt.position,t.startAt.inclusive):null;return Dx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Pp(t,e,n){return new Ld(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Md(t,e){return Mg(dr(t),dr(e))&&t.limitType===e.limitType}function xT(t){return`${Lg(dr(t))}|lt:${t.limitType}`}function Vs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yT(i)).join(", ")}]`),jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Io(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Io(i)).join(",")),`Target(${r})`}(dr(t))}; limitType=${t.limitType})`}function Vd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Va(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Nx(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Va(r),i)||r.endAt&&!function(o,a,l){const c=Nx(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Va(r),i))}(t,e)}function rO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wT(t){return(e,n)=>{let r=!1;for(const i of Va(t)){const s=iO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function iO(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ko(l,c):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Xe(se.comparator);function Wr(){return sO}const _T=new Xe(se.comparator);function Sa(...t){let e=_T;for(const n of t)e=e.insert(n.key,n);return e}function ET(t){let e=_T;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rs(){return Fa()}function bT(){return Fa()}function Fa(){return new Is(t=>t.toString(),(t,e)=>t.isEqual(e))}const oO=new Xe(se.comparator),aO=new ht(se.comparator);function Te(...t){let e=aO;for(const n of t)e=e.add(n);return e}const lO=new ht(xe);function uO(){return lO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function TT(t){return{integerValue:""+t}}function cO(t,e){return Mj(e)?TT(e):Fg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this._=void 0}}function dO(t,e,n){return t instanceof Yc?function(i,s){const o={fields:{[oT]:{stringValue:sT},[lT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jg(s)&&(s=Od(s)),s&&(o.fields[aT]=s),{mapValue:o}}(n,e):t instanceof ml?kT(t,e):t instanceof gl?IT(t,e):function(i,s){const o=ST(i,s),a=Ox(o)+Ox(i.Re);return Ap(o)&&Ap(i.Re)?TT(a):Fg(i.serializer,a)}(t,e)}function hO(t,e,n){return t instanceof ml?kT(t,e):t instanceof gl?IT(t,e):n}function ST(t,e){return t instanceof Xc?function(r){return Ap(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Yc extends Fd{}class ml extends Fd{constructor(e){super(),this.elements=e}}function kT(t,e){const n=CT(e);for(const r of t.elements)n.some(i=>fr(i,r))||n.push(r);return{arrayValue:{values:n}}}class gl extends Fd{constructor(e){super(),this.elements=e}}function IT(t,e){let n=CT(e);for(const r of t.elements)n=n.filter(i=>!fr(i,r));return{arrayValue:{values:n}}}class Xc extends Fd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Ox(t){return nt(t.integerValue||t.doubleValue)}function CT(t){return Og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ml&&i instanceof ml||r instanceof gl&&i instanceof gl?So(r.elements,i.elements,fr):r instanceof Xc&&i instanceof Xc?fr(r.Re,i.Re):r instanceof Yc&&i instanceof Yc}(t.transform,e.transform)}class pO{constructor(e,n){this.version=e,this.transformResults=n}}class Mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ud{}function AT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new NT(t.key,Mr.none()):new Ol(t.key,t.data,Mr.none());{const n=t.data,r=In.empty();let i=new ht(xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Cs(t.key,r,new Hn(i.toArray()),Mr.none())}}function mO(t,e,n){t instanceof Ol?function(i,s,o){const a=i.value.clone(),l=Mx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Cs?function(i,s,o){if(!nc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Mx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(RT(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ua(t,e,n,r){return t instanceof Ol?function(s,o,a,l){if(!nc(s.precondition,o))return a;const c=s.value.clone(),h=Vx(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Cs?function(s,o,a,l){if(!nc(s.precondition,o))return a;const c=Vx(s.fieldTransforms,l,o),h=o.data;return h.setAll(RT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return nc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ST(r.transform,i||null);s!=null&&(n===null&&(n=In.empty()),n.set(r.field,s))}return n||null}function Lx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&So(r,i,(s,o)=>fO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ol extends Ud{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cs extends Ud{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function RT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Mx(t,e,n){const r=new Map;Ne(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hO(o,a,n[i]))}return r}function Vx(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,dO(s,o,e))}return r}class NT extends Ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yO extends Ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&mO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ua(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ua(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=AT(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(n,r)=>Lx(n,r))&&So(this.baseMutations,e.baseMutations,(n,r)=>Lx(n,r))}}class Ug{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ne(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return oO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ug(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,Se;function _O(t){switch(t){case q.OK:return le(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function PT(t){if(t===void 0)return qr("GRPC error has no .code"),q.UNKNOWN;switch(t){case it.OK:return q.OK;case it.CANCELLED:return q.CANCELLED;case it.UNKNOWN:return q.UNKNOWN;case it.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case it.INTERNAL:return q.INTERNAL;case it.UNAVAILABLE:return q.UNAVAILABLE;case it.UNAUTHENTICATED:return q.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case it.NOT_FOUND:return q.NOT_FOUND;case it.ALREADY_EXISTS:return q.ALREADY_EXISTS;case it.PERMISSION_DENIED:return q.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case it.ABORTED:return q.ABORTED;case it.OUT_OF_RANGE:return q.OUT_OF_RANGE;case it.UNIMPLEMENTED:return q.UNIMPLEMENTED;case it.DATA_LOSS:return q.DATA_LOSS;default:return le(39323,{code:t})}}(Se=it||(it={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new Ci([4294967295,4294967295],0);function Fx(t){const e=eT().encode(t),n=new Wb;return n.update(e),new Uint8Array(n.digest())}function Ux(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ci([n,r],0),new Ci([i,s],0)]}class zg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ka(`Invalid padding: ${n}`);if(r<0)throw new ka(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ka(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ka(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ci.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(Ci.fromNumber(r)));return i.compare(EO)===1&&(i=new Ci([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Fx(e),[r,i]=Ux(n);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=Fx(e),[r,i]=Ux(n);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zd(ce.min(),i,new Xe(xe),Wr(),Te())}}class Ll{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ll(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class DT{constructor(e,n){this.targetId=e,this.Ce=n}}class jT{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zx{constructor(){this.Fe=0,this.Me=$x(),this.xe=Et.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Te(),n=Te(),r=Te();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le(38017,{changeType:s})}}),new Ll(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=$x()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class bO{constructor(e){this.ze=e,this.je=new Map,this.He=Wr(),this.Je=Cu(),this.Ye=Cu(),this.Ze=new Xe(xe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const s=i.target;if(Np(s))if(r===0){const o=new se(s.path);this.tt(n,o,Rt.newNoDocument(o,ce.min()))}else Ne(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Oi(r).toUint8Array()}catch(l){if(l instanceof iT)return To("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zg(o,i,s)}catch(l){return To(l instanceof ka?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,s,null),i++)}),i}It(e){const n=new Map;this.je.forEach((s,o)=>{const a=this._t(o);if(a){if(s.current&&Np(a.target)){const l=new se(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Rt.newNoDocument(l,e))}s.Le&&(n.set(o,s.qe()),s.Qe())}});let r=Te();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new zd(e,n,this.Ze,this.He,r);return this.He=Wr(),this.Je=Cu(),this.Ye=Cu(),this.Ze=new Xe(xe),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new zx,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ht(xe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ht(xe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new zx),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Cu(){return new Xe(se.comparator)}function $x(){return new Xe(se.comparator)}const TO={asc:"ASCENDING",desc:"DESCENDING"},SO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kO={and:"AND",or:"OR"};class IO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dp(t,e){return t.useProto3Json||jd(e)?e:{value:e}}function Jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CO(t,e){return Jc(t,e.toTimestamp())}function hr(t){return Ne(!!t,49232),ce.fromTimestamp(function(n){const r=ji(n);return new dt(r.seconds,r.nanos)}(t))}function $g(t,e){return jp(t,e).canonicalString()}function jp(t,e){const n=function(i){return new et(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LT(t){const e=et.fromString(t);return Ne(zT(e),10190,{key:e.toString()}),e}function Op(t,e){return $g(t.databaseId,e.path)}function Zh(t,e){const n=LT(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(VT(n))}function MT(t,e){return $g(t.databaseId,e)}function AO(t){const e=LT(t);return e.length===4?et.emptyPath():VT(e)}function Lp(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VT(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Bx(t,e,n){return{name:Op(t,e),fields:n.value.mapValue.fields}}function RO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ne(h===void 0||typeof h=="string",58123),Et.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?q.UNKNOWN:PT(c.code);return new ie(h,c.message||"")}(o);n=new jT(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zh(t,r.document.name),s=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):ce.min(),a=new In({mapValue:{fields:r.document.fields}}),l=Rt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new rc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Zh(t,r.document),s=r.readTime?hr(r.readTime):ce.min(),o=Rt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Zh(t,r.document),s=r.removedTargetIds||[];n=new rc([],s,i,null)}else{if(!("filter"in e))return le(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new wO(i,s),a=r.targetId;n=new DT(a,o)}}return n}function NO(t,e){let n;if(e instanceof Ol)n={update:Bx(t,e.key,e.value)};else if(e instanceof NT)n={delete:Op(t,e.key)};else if(e instanceof Cs)n={update:Bx(t,e.key,e.data),updateMask:UO(e.fieldMask)};else{if(!(e instanceof yO))return le(16599,{ft:e.type});n={verify:Op(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Yc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ml)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof gl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xc)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw le(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:CO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le(27497)}(t,e.precondition)),n}function PO(t,e){return t&&t.length>0?(Ne(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?hr(i.updateTime):hr(s);return o.isEqual(ce.min())&&(o=hr(s)),new pO(o,i.transformResults||[])}(n,e))):[]}function DO(t,e){return{documents:[MT(t,e.path)]}}function jO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=MT(t,i);const s=function(c){if(c.length!==0)return UT(pr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Fs(m.field),direction:MO(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Dp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:i}}function OO(t){let e=AO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ne(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=FT(f);return m instanceof pr&&mT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(w){return new Qc(Us(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,jd(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new Gc(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new Gc(g,m)}(n.endAt)),eO(e,i,o,s,a,"F",l,c)}function LO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Us(n.unaryFilter.field);return ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Us(n.unaryFilter.field);return ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Us(n.unaryFilter.field);return ut.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Us(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return ut.create(Us(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pr.create(n.compositeFilter.filters.map(r=>FT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function MO(t){return TO[t]}function VO(t){return SO[t]}function FO(t){return kO[t]}function Fs(t){return{fieldPath:t.canonicalString()}}function Us(t){return xt.fromServerFormat(t.fieldPath)}function UT(t){return t instanceof ut?function(n){if(n.op==="=="){if(Rx(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if(Ax(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rx(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if(Ax(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:VO(n.op),value:n.value}}}(t):t instanceof pr?function(n){const r=n.getFilters().map(i=>UT(i));return r.length===1?r[0]:{compositeFilter:{op:FO(n.op),filters:r}}}(t):le(54877,{filter:t})}function UO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r,i,s=ce.min(),o=ce.min(),a=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.wt=e}}function $O(t){const e=OO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.yn=new HO}addToCollectionParentIndex(e,n){return this.yn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Di.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class HO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ht(et.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ht(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$T=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt($T,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Co(0)}static ir(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LruGarbageCollector",qO=1048576;function Wx([t,e],[n,r]){const i=xe(t,n);return i===0?xe(e,r):i}class WO{constructor(e){this.cr=e,this.buffer=new ht(Wx),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Wx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Z(qx,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Uo(n)?Z(qx,"Ignoring IndexedDB error during garbage collection: ",n):await Fo(n)}await this.Ir(3e5)})}}class GO{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Dd.le);const r=new WO(n);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Hx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hx):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Ms()<=be.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function QO(t,e){return new GO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.changes=new Is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ua(r.mutation,i,Hn.empty(),dt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const i=rs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Sa();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wr();const o=Fa(),a=function(){return Fa()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Cs)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ua(h.mutation,c,h.mutation.getFieldMask(),dt.now())):o.set(c.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new XO(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Fa();let i=new Xe((o,a)=>o-a),s=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Hn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||Te()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=bT();h.forEach(m=>{if(!s.has(m)){const g=AT(n.get(m),r.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(rs());let a=dl,l=s;return o.next(c=>$.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Te())).next(h=>({batchId:a,changes:ET(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=Sa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Sa();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,l=>{const c=function(f,m){return new Ld(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Rt.newInvalidDocument(h)))});let a=Sa();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Ua(h.mutation,c,Hn.empty(),dt.now()),Vd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return $.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hr(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(i){return{name:i.name,query:$O(i.bundledQuery),readTime:hr(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this.overlays=new Xe(se.comparator),this.Or=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rs();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=rs(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=rs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=rs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return $.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xO(n,r));let s=this.Or.get(n);s===void 0&&(s=Te(),this.Or.set(n,s)),this.Or.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.Nr=new ht(ft.Br),this.Lr=new ht(ft.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new ft(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new se(new et([])),r=new ft(n,e),i=new ft(n,e+1),s=[];return this.Lr.forEachInRange([r,i],o=>{this.Qr(o),s.push(o.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new se(new et([])),r=new ft(n,e),i=new ft(n,e+1);let s=Te();return this.Lr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ft(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return se.comparator(e.key,n.key)||xe(e.Gr,n.Gr)}static kr(e,n){return xe(e.Gr,n.Gr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new ht(ft.Br)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vO(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.zr=this.zr.add(new ft(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Hr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Dg:this.Jn-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),i=new ft(n,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],o=>{const a=this.jr(o.Gr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(xe);return n.forEach(i=>{const s=new ft(i,0),o=new ft(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,o],a=>{r=r.add(a.Gr)})}),$.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new ft(new se(s),0);let a=new ht(xe);return this.zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Gr)),!0)},o),$.resolve(this.Jr(a))}Jr(e){const n=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ne(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return $.forEach(n.mutations,i=>{const s=new ft(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new ft(n,0),i=this.zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.Zr=e,this.docs=function(){return new Xe(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wr();const o=n.path,a=new se(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Dj(Pj(h),r)<=0||(i.has(h.key)||Vd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le(9500)}Xr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new i4(this)}getSize(e){return $.resolve(this.size)}}class i4 extends YO{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.persistence=e,this.ei=new Is(n=>Lg(n),Mg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.ti=0,this.ni=new Bg,this.targetCount=0,this.ri=Co.rr()}forEachTarget(e,n){return this.ei.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),$.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.ar(n),$.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ei.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n){this.ii={},this.overlays={},this.si=new Dd(0),this.oi=!1,this.oi=!0,this._i=new t4,this.referenceDelegate=e(this),this.ai=new s4(this),this.indexManager=new BO,this.remoteDocumentCache=function(i){return new r4(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new zO(n),this.ci=new ZO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new e4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new n4(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const i=new o4(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,n){return $.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class o4 extends Oj{constructor(e){super(),this.currentSequenceNumber=e}}class Hg{constructor(e){this.persistence=e,this.Ti=new Bg,this.Ii=null}static Ei(e){return new Hg(e)}get di(){if(this.Ii)return this.Ii;throw le(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.di,r=>{const i=se.fromPath(r);return this.Ai(e,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return $.or([()=>$.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class Zc{constructor(e,n){this.persistence=e,this.Ri=new Is(r=>Vj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=QO(this,n)}static Ei(e,n){return new Zc(e,n)}li(){}hi(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return $.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?$.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,o=>this.gr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ce.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),$.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ec(e.data.value)),n}gr(e,n,r){return $.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.Ri.get(n);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=i}static Ps(e,n){let r=Te(),i=Te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return ON()?8:Lj(Dt())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Rs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Vs(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new a4;return this.fs(e,n,o).next(a=>{if(s.result=a,this.Is)return this.gs(e,n,o,a.size)})}).next(()=>s.result)}gs(e,n,r,i){return r.documentReadCount<this.Es?(Ms()<=be.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Vs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),$.resolve()):(Ms()<=be.DEBUG&&Z("QueryEngine","Query:",Vs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Ms()<=be.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Vs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):$.resolve())}Rs(e,n){if(jx(n))return $.resolve(null);let r=dr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Pp(n,null,"F"),r=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Te(...s);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ps(n,a);return this.ys(n,c,o,l.readTime)?this.Rs(e,Pp(n,null,"F")):this.ws(e,c,n,l)}))})))}Vs(e,n,r,i){return jx(n)||i.isEqual(ce.min())?$.resolve(null):this.As.getDocuments(e,r).next(s=>{const o=this.ps(n,s);return this.ys(n,o,r,i)?$.resolve(null):(Ms()<=be.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vs(n)),this.ws(e,o,n,Nj(i,dl)).next(a=>a))})}ps(e,n){let r=new ht(wT(e));return n.forEach((i,s)=>{Vd(e,s)&&(r=r.add(s))}),r}ys(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,n,r){return Ms()<=be.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Vs(n)),this.As.getDocumentsMatchingQuery(e,n,Di.min(),r)}ws(e,n,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="LocalStore",u4=3e8;class c4{constructor(e,n,r,i){this.persistence=e,this.bs=n,this.serializer=i,this.Ss=new Xe(xe),this.Ds=new Is(s=>Lg(s),Mg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JO(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function d4(t,e,n,r){return new c4(t,e,n,r)}async function HT(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Te();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ms:c,removedBatchIds:o,addedBatchIds:a}))})})}function h4(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,m=f.keys();let g=$.resolve();return m.forEach(w=>{g=g.next(()=>h.getEntry(l,w)).next(b=>{const T=c.docVersions.get(w);Ne(T!==null,48541),b.version.compareTo(T)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qT(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function f4(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Cs.newChangeBuffer({trackRemovals:!0});i=n.Ss;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(n.ai.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.ai.addMatchingKeys(s,h.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Et.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(f,g),function(b,T,y){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=u4?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,g,h)&&a.push(n.ai.updateTargetData(s,g))});let l=Wr(),c=Te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(p4(s,o,e.documentUpdates).next(h=>{l=h.xs,c=h.Os})),!r.isEqual(ce.min())){const h=n.ai.getLastRemoteSnapshotVersion(s).next(f=>n.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ss=i,s))}function p4(t,e,n){let r=Te(),i=Te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z(Wg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{xs:o,Os:i}})}function m4(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g4(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.ai.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.ai.allocateTargetId(r).next(o=>(i=new yi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function Mp(t,e,n){const r=fe(t),i=r.Ss.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Uo(o))throw o;Z(Wg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function Kx(t,e,n){const r=fe(t);let i=ce.min(),s=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=fe(l),m=f.Ds.get(h);return m!==void 0?$.resolve(f.Ss.get(m)):f.ai.getTargetData(c,h)}(r,o,dr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?s:Te())).next(a=>(y4(r,rO(e),a),{documents:a,Ns:s})))}function y4(t,e,n){let r=t.vs.get(e)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.vs.set(e,r)}class Gx{constructor(){this.activeTargetIds=uO()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v4{constructor(){this.So=new Gx,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Gx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="ConnectivityMonitor";class Yx{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Z(Qx,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Z(Qx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au=null;function Vp(){return Au===null?Au=function(){return 268435456+Math.round(2147483648*Math.random())}():Au++,"0x"+Au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="RestConnection",w4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _4{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Ip?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,n,r,i,s){const o=Vp(),a=this.$o(e,n.toUriEncodedString());Z(ef,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(l,i,s),this.Ko(e,a,l,r).then(c=>(Z(ef,`Received RPC '${e}' ${o}: `,c),c),c=>{throw To(ef,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Wo(e,n,r,i,s,o){return this.Qo(e,n,r,i,s)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,n){const r=w4[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class b4 extends _4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,i){const s=Vp();return new Promise((o,a)=>{const l=new Kb;l.setWithCredentials(!0),l.listenOnce(Gb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zu.NO_ERROR:const h=l.getResponseJson();Z(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Zu.TIMEOUT:Z(It,`RPC '${e}' ${s} timed out`),a(new ie(q.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const f=l.getStatus();if(Z(It,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const w=function(T){const y=T.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(y)>=0?y:q.UNKNOWN}(g.status);a(new ie(w,g.message))}else a(new ie(q.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ie(q.UNAVAILABLE,"Connection failed."));break;default:le(9055,{s_:e,streamId:s,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{Z(It,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Z(It,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}a_(e,n,r){const i=Vp(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xb(),a=Yb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Z(It,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,g=!1;const w=new E4({Go:T=>{g?Z(It,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(m||(Z(It,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),Z(It,`RPC '${e}' stream ${i} sending:`,T),f.send(T))},zo:()=>f.close()}),b=(T,y,x)=>{T.listen(y,_=>{try{x(_)}catch(A){setTimeout(()=>{throw A},0)}})};return b(f,Ta.EventType.OPEN,()=>{g||(Z(It,`RPC '${e}' stream ${i} transport opened.`),w.t_())}),b(f,Ta.EventType.CLOSE,()=>{g||(g=!0,Z(It,`RPC '${e}' stream ${i} transport closed`),w.r_())}),b(f,Ta.EventType.ERROR,T=>{g||(g=!0,To(It,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),w.r_(new ie(q.UNAVAILABLE,"The operation could not be completed")))}),b(f,Ta.EventType.MESSAGE,T=>{var y;if(!g){const x=T.data[0];Ne(!!x,16349);const _=x,A=(_==null?void 0:_.error)||((y=_[0])===null||y===void 0?void 0:y.error);if(A){Z(It,`RPC '${e}' stream ${i} received error:`,A);const M=A.status;let P=function(k){const N=it[k];if(N!==void 0)return PT(N)}(M),S=A.message;P===void 0&&(P=q.INTERNAL,S="Unknown error status: "+M+" with message "+A.message),g=!0,w.r_(new ie(P,S)),f.close()}else Z(It,`RPC '${e}' stream ${i} received:`,x),w.i_(x)}}),b(a,Qb.STAT_EVENT,T=>{T.stat===Sp.PROXY?Z(It,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Sp.NOPROXY&&Z(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.n_()},0),w}}function tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){return new IO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,n-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="PersistentStream";class KT{constructor(e,n,r,i,s,o,a,l){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new WT(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===n&&this.B_(r,i)},r=>{e(()=>{const i=new ie(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Z(Xx,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(Z(Xx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T4 extends KT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=RO(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?hr(o.readTime):ce.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=Lp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Np(l)?{documents:DO(s,l)}:{query:jO(s,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OT(s,o.resumeToken);const c=Dp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Jc(s,o.snapshotVersion.toTimestamp());const c=Dp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=LO(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=Lp(this.serializer),n.removeTarget=e,this.F_(n)}}class S4 extends KT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=PO(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.j_(r,n)}H_(){const e={};e.database=Lp(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>NO(this.serializer,r))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{}class I4 extends k4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new ie(q.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Qo(e,jp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(q.UNKNOWN,s.toString())})}Wo(e,n,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,jp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(q.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class C4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(qr(n),this.ea=!1):Z("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="RemoteStore";class A4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(o=>{r.enqueueAndForget(async()=>{As(this)&&(Z(xs,"Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.aa.add(4),await Ml(c),c.la.set("Unknown"),c.aa.delete(4),await Bd(c)}(this))})}),this.la=new C4(r,i)}}async function Bd(t){if(As(t))for(const e of t.ua)await e(!0)}async function Ml(t){for(const e of t.ua)await e(!1)}function GT(t,e){const n=fe(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),Yg(n)?Qg(n):zo(n).b_()&&Gg(n,e))}function Kg(t,e){const n=fe(t),r=zo(n);n._a.delete(e),r.b_()&&QT(n,e),n._a.size===0&&(r.b_()?r.v_():As(n)&&n.la.set("Unknown"))}function Gg(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(t).U_(e)}function QT(t,e){t.ha.Ke(e),zo(t).K_(e)}function Qg(t){t.ha=new bO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),zo(t).start(),t.la.ta()}function Yg(t){return As(t)&&!zo(t).w_()&&t._a.size>0}function As(t){return fe(t).aa.size===0}function YT(t){t.ha=void 0}async function R4(t){t.la.set("Online")}async function N4(t){t._a.forEach((e,n)=>{Gg(t,e)})}async function P4(t,e){YT(t),Yg(t)?(t.la.ia(e),Qg(t)):t.la.set("Unknown")}async function D4(t,e,n){if(t.la.set("Online"),e instanceof jT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i._a.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i._a.delete(a),i.ha.removeTarget(a))}(t,e)}catch(r){Z(xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ed(t,r)}else if(e instanceof rc?t.ha.Xe(e):e instanceof DT?t.ha.ot(e):t.ha.nt(e),!n.isEqual(ce.min()))try{const r=await qT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.ha.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s._a.get(c);h&&s._a.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s._a.get(l);if(!h)return;s._a.set(l,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),QT(s,l);const f=new yi(h.target,l,c,h.sequenceNumber);Gg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z(xs,"Failed to raise snapshot:",r),await ed(t,r)}}async function ed(t,e,n){if(!Uo(e))throw e;t.aa.add(1),await Ml(t),t.la.set("Offline"),n||(n=()=>qT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z(xs,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await Bd(t)})}function XT(t,e){return e().catch(n=>ed(t,n,e))}async function Hd(t){const e=fe(t),n=Mi(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:Dg;for(;j4(e);)try{const i=await m4(e.localStore,r);if(i===null){e.oa.length===0&&n.v_();break}r=i.batchId,O4(e,i)}catch(i){await ed(e,i)}JT(e)&&ZT(e)}function j4(t){return As(t)&&t.oa.length<10}function O4(t,e){t.oa.push(e);const n=Mi(t);n.b_()&&n.W_&&n.G_(e.mutations)}function JT(t){return As(t)&&!Mi(t).w_()&&t.oa.length>0}function ZT(t){Mi(t).start()}async function L4(t){Mi(t).H_()}async function M4(t){const e=Mi(t);for(const n of t.oa)e.G_(n.mutations)}async function V4(t,e,n){const r=t.oa.shift(),i=Ug.from(r,e,n);await XT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Hd(t)}async function F4(t,e){e&&Mi(t).W_&&await async function(r,i){if(function(o){return _O(o)&&o!==q.ABORTED}(i.code)){const s=r.oa.shift();Mi(r).D_(),await XT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Hd(r)}}(t,e),JT(t)&&ZT(t)}async function Jx(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),Z(xs,"RemoteStore received new credentials");const r=As(n);n.aa.add(3),await Ml(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await Bd(n)}async function U4(t,e){const n=fe(t);e?(n.aa.delete(2),await Bd(n)):e||(n.aa.add(2),await Ml(n),n.la.set("Unknown"))}function zo(t){return t.Pa||(t.Pa=function(n,r,i){const s=fe(n);return s.Y_(),new T4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{jo:R4.bind(null,t),Jo:N4.bind(null,t),Zo:P4.bind(null,t),Q_:D4.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),Yg(t)?Qg(t):t.la.set("Unknown")):(await t.Pa.stop(),YT(t))})),t.Pa}function Mi(t){return t.Ta||(t.Ta=function(n,r,i){const s=fe(n);return s.Y_(),new S4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:L4.bind(null,t),Zo:F4.bind(null,t),z_:M4.bind(null,t),j_:V4.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Hd(t)):(await t.Ta.stop(),t.oa.length>0&&(Z(xs,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Xg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jg(t,e){if(qr("AsyncQueue",`${e}: ${t}`),Uo(t))return new ie(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{static emptySet(e){return new lo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Sa(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new lo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.Ia=new Xe(se.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):le(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ao{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ao(e,n,lo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class $4{constructor(){this.queries=ew(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=ew(),s.forEach((o,a)=>{for(const l of a.Ra)l.onError(r)})})(this,new ie(q.ABORTED,"Firestore shutting down"))}}function ew(){return new Is(t=>xT(t),Md)}async function B4(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new z4,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await n.onListen(i,!0);break;case 1:s.Aa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Jg(o,`Initialization of query '${Vs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Ra.push(e),e.ga(n.onlineState),s.Aa&&e.pa(s.Aa)&&Zg(n)}async function H4(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Ra.indexOf(e);o>=0&&(s.Ra.splice(o,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function q4(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Ra)a.pa(i)&&(r=!0);o.Aa=i}}r&&Zg(n)}function W4(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(n);r.queries.delete(e)}function Zg(t){t.fa.forEach(e=>{e.next()})}var Fp,tw;(tw=Fp||(Fp={})).ya="default",tw.Cache="cache";class K4{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.key=e}}class tS{constructor(e){this.key=e}}class G4{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Te(),this.mutatedKeys=Te(),this.Ua=wT(e),this.Ka=new lo(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new Zx,i=n?n.Ka:this.Ka;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),g=Vd(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;m&&g?m.data.isEqual(g.data)?w!==b&&(r.track({type:3,doc:g}),T=!0):this.ja(m,g)||(r.track({type:2,doc:g}),T=!0,(l&&this.Ua(g,l)>0||c&&this.Ua(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),T=!0):m&&!g&&(r.track({type:1,doc:m}),T=!0,(l||c)&&(a=!0)),T&&(g?(o=o.add(g),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:a,mutatedKeys:s}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((h,f)=>function(g,w){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Vt:T})}};return b(g)-b(w)}(h.type,f.type)||this.Ua(h.doc,f.doc)),this.Ha(r),i=i!=null&&i;const a=n&&!i?this.Ja():[],l=this.$a.size===0&&this.current&&!i?1:0,c=l!==this.Qa;return this.Qa=l,o.length!==0||c?{snapshot:new Ao(this.query,e.Ka,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Zx,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Te(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new tS(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new eS(r))}),n}Xa(e){this.qa=e.Ns,this.$a=Te();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Ao.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const ey="SyncEngine";class Q4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Y4{constructor(e){this.key=e,this.tu=!1}}class X4{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new Is(a=>xT(a),Md),this.iu=new Map,this.su=new Set,this.ou=new Xe(se.comparator),this._u=new Map,this.au=new Bg,this.uu={},this.cu=new Map,this.lu=Co.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function J4(t,e,n=!0){const r=aS(t);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await nS(r,e,n,!0),i}async function Z4(t,e){const n=aS(t);await nS(n,e,!0,!1)}async function nS(t,e,n,r){const i=await g4(t.localStore,dr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await eL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&GT(t.remoteStore,i),a}async function eL(t,e,n,r,i){t.Pu=(f,m,g)=>async function(b,T,y,x){let _=T.view.Ga(y);_.ys&&(_=await Kx(b.localStore,T.query,!1).then(({documents:S})=>T.view.Ga(S,_)));const A=x&&x.targetChanges.get(T.targetId),M=x&&x.targetMismatches.get(T.targetId)!=null,P=T.view.applyChanges(_,b.isPrimaryClient,A,M);return rw(b,T.targetId,P.Ya),P.snapshot}(t,f,m,g);const s=await Kx(t.localStore,e,!0),o=new G4(e,s.Ns),a=o.Ga(s.documents),l=Ll.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);rw(t,n,c.Ya);const h=new Q4(e,n,o);return t.ru.set(e,h),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),c.snapshot}async function tL(t,e,n){const r=fe(t),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(o=>!Md(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Mp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Kg(r.remoteStore,i.targetId),Up(r,i.targetId)}).catch(Fo)):(Up(r,i.targetId),await Mp(r.localStore,i.targetId,!0))}async function nL(t,e){const n=fe(t),r=n.ru.get(e),i=n.iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kg(n.remoteStore,r.targetId))}async function rL(t,e,n){const r=cL(t);try{const i=await function(o,a){const l=fe(o),c=dt.now(),h=a.reduce((g,w)=>g.add(w.key),Te());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Wr(),b=Te();return l.Cs.getEntries(g,h).next(T=>{w=T,w.forEach((y,x)=>{x.isValidDocument()||(b=b.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(T=>{f=T;const y=[];for(const x of a){const _=gO(x,f.get(x.key).overlayedDocument);_!=null&&y.push(new Cs(x.key,_,hT(_.value.mapValue),Mr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,y,a)}).next(T=>{m=T;const y=T.applyToLocalDocumentSet(f,b);return l.documentOverlayCache.saveOverlays(g,T.batchId,y)})}).then(()=>({batchId:m.batchId,changes:ET(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.uu[o.currentUser.toKey()];c||(c=new Xe(xe)),c=c.insert(a,l),o.uu[o.currentUser.toKey()]=c}(r,i.batchId,n),await Vl(r,i.changes),await Hd(r.remoteStore)}catch(i){const s=Jg(i,"Failed to persist write");n.reject(s)}}async function rS(t,e){const n=fe(t);try{const r=await f4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n._u.get(s);o&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.tu=!0:i.modifiedDocuments.size>0?Ne(o.tu,14607):i.removedDocuments.size>0&&(Ne(o.tu,42227),o.tu=!1))}),await Vl(n,r,e)}catch(r){await Fo(r)}}function nw(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ru.forEach((s,o)=>{const a=o.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const m of f.Ra)m.ga(a)&&(c=!0)}),c&&Zg(l)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iL(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r._u.get(e),s=i&&i.key;if(s){let o=new Xe(se.comparator);o=o.insert(s,Rt.newNoDocument(s,ce.min()));const a=Te().add(s),l=new zd(ce.min(),new Map,new Xe(xe),o,a);await rS(r,l),r.ou=r.ou.remove(s),r._u.delete(e),ty(r)}else await Mp(r.localStore,e,!1).then(()=>Up(r,e,n)).catch(Fo)}async function sL(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await h4(n.localStore,e);sS(n,r,null),iS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vl(n,i)}catch(i){await Fo(i)}}async function oL(t,e,n){const r=fe(t);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ne(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);sS(r,e,n),iS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vl(r,i)}catch(i){await Fo(i)}}function iS(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function sS(t,e,n){const r=fe(t);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function Up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||oS(t,r)})}function oS(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(Kg(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),ty(t))}function rw(t,e,n){for(const r of n)r instanceof eS?(t.au.addReference(r.key,e),aL(t,r)):r instanceof tS?(Z(ey,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||oS(t,r.key)):le(19791,{Iu:r})}function aL(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(Z(ey,"New document in limbo: "+n),t.su.add(r),ty(t))}function ty(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new se(et.fromString(e)),r=t.lu.next();t._u.set(r,new Y4(n)),t.ou=t.ou.insert(n,r),GT(t.remoteStore,new yi(dr(Vg(n.path)),r,"TargetPurposeLimboResolution",Dd.le))}}async function Vl(t,e,n){const r=fe(t),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{o.push(r.Pu(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=qg.Ps(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.nu.Q_(i),await async function(l,c){const h=fe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(c,m=>$.forEach(m.ls,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>$.forEach(m.hs,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Uo(f))throw f;Z(Wg,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=h.Ss.get(m),w=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(w);h.Ss=h.Ss.insert(m,b)}}}(r.localStore,s))}async function lL(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){Z(ey,"User change. New user:",e.toKey());const r=await HT(n.localStore,e);n.currentUser=e,function(s,o){s.cu.forEach(a=>{a.forEach(l=>{l.reject(new ie(q.CANCELLED,o))})}),s.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vl(n,r.Ms)}}function uL(t,e){const n=fe(t),r=n._u.get(e);if(r&&r.tu)return Te().add(r.key);{let i=Te();const s=n.iu.get(e);if(!s)return i;for(const o of s){const a=n.ru.get(o);i=i.unionWith(a.view.Wa)}return i}}function aS(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iL.bind(null,e),e.nu.Q_=q4.bind(null,e.eventManager),e.nu.Tu=W4.bind(null,e.eventManager),e}function cL(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oL.bind(null,e),e}class td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return d4(this.persistence,new l4,e.initialUser,this.serializer)}Ru(e){return new BT(Hg.Ei,this.serializer)}Au(e){return new v4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}td.provider={build:()=>new td};class dL extends td{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){Ne(this.persistence.referenceDelegate instanceof Zc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KO(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new BT(r=>Zc.Ei(r,n),this.serializer)}}class zp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lL.bind(null,this.syncEngine),await U4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $4}()}createDatastore(e){const n=$d(e.databaseInfo.databaseId),r=function(s){return new b4(s)}(e.databaseInfo);return function(s,o,a,l){return new I4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new A4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>nw(this.syncEngine,n,0),function(){return Yx.C()?new Yx:new x4}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new X4(i,s,o,a,l,c);return h&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);Z(xs,"RemoteStore shutting down."),s.aa.add(5),await Ml(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zp.provider={build:()=>new zp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class fL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=tT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Z(Vi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z(Vi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nf(t,e){t.asyncQueue.verifyOperationInProgress(),Z(Vi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await HT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pL(t);Z(Vi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Jx(e.remoteStore,i)),t._onlineComponents=e}async function pL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(Vi,"Using user provided OfflineComponentProvider");try{await nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await nf(t,new td)}}else Z(Vi,"Using default OfflineComponentProvider"),await nf(t,new dL(void 0));return t._offlineComponents}async function lS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(Vi,"Using user provided OnlineComponentProvider"),await iw(t,t._uninitializedComponentsProvider._online)):(Z(Vi,"Using default OnlineComponentProvider"),await iw(t,new zp))),t._onlineComponents}function mL(t){return lS(t).then(e=>e.syncEngine)}async function gL(t){const e=await lS(t),n=e.eventManager;return n.onListen=J4.bind(null,e.syncEngine),n.onUnlisten=tL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Z4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nL.bind(null,e.syncEngine),n}function yL(t,e,n={}){const r=new Ai;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new hL({next:m=>{h.yu(),o.enqueueAndForget(()=>H4(s,f));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new ie(q.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new ie(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new K4(Vg(a.path),h,{includeMetadataChanges:!0,Fa:!0});return B4(s,f)}(await gL(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e,n){if(!n)throw new ie(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xL(t,e,n,r){if(e===!0&&r===!0)throw new ie(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ow(t){if(!se.isDocumentKey(t))throw new ie(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ny(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function yl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ny(t);throw new ie(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="firestore.googleapis.com",aw=!0;class lw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cS,this.ssl=aw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:aw;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qO)throw new ie(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ry{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ej;switch(r.type){case"firstParty":return new kj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sw.get(n);r&&(Z("ComponentProvider","Removing Datastore"),sw.delete(n),r.terminate())}(this),Promise.resolve()}}function wL(t,e,n,r={}){var i;const s=(t=yl(t,ry))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;s.host!==cS&&s.host!==a&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!ps(l,o)&&(t._setSettings(l),r.mockUserToken)){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=Ct.MOCK_USER;else{c=ab(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ie(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ct(f)}t._authCredentials=new bj(new Zb(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new iy(this.firestore,e,this._query)}}class Rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class vl extends iy{constructor(e,n,r){super(e,n,Vg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new se(e))}withConverter(e){return new vl(this.firestore,e,this._path)}}function rf(t,e,...n){if(t=$t(t),arguments.length===1&&(e=tT.newId()),vL("doc","path",e),t instanceof ry){const r=et.fromString(e,...n);return ow(r),new Rn(t,null,new se(r))}{if(!(t instanceof Rn||t instanceof vl))throw new ie(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return ow(r),new Rn(t.firestore,t instanceof vl?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="AsyncQueue";class cw{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new WT(this,"async_queue_retry"),this.ju=()=>{const r=tf();r&&Z(uw,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Ai;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Uo(e))throw e;Z(uw,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,qr("INTERNAL UNHANDLED ERROR: ",dw(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const i=Xg.createAndSchedule(this,e,n,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&le(47125,{ec:dw(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function dw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class sy extends ry{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cw(e),this._firestoreClient=void 0,await e}}}function _L(t,e){const n=typeof t=="object"?t:wg(),r=typeof t=="string"?t:e,i=Ad(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ib("firestore");s&&wL(i,...s)}return i}function dS(t){if(t._terminated)throw new ie(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EL(t),t._firestoreClient}function EL(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new zj(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,uS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new fL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ro(Et.fromBase64String(e))}catch(n){throw new ie(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ro(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=/^__.*__$/;class TL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ol(e,this.data,n,this.fieldTransforms)}}function fS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{oc:t})}}class uy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new uy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return nd(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(fS(this.oc)&&bL.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class SL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$d(e)}dc(e,n,r,i=!1){return new uy({oc:e,methodName:n,Ec:r,path:xt.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kL(t){const e=t._freezeSettings(),n=$d(t._databaseId);return new SL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IL(t,e,n,r,i,s={}){const o=t.dc(s.merge||s.mergeFields?2:0,e,n,i);yS("Data must be an object, but it was:",o,r);const a=mS(r,o);let l,c;if(s.merge)l=new Hn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=CL(e,f,n);if(!o.contains(m))throw new ie(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);RL(h,m)||h.push(m)}l=new Hn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new TL(new In(a),l,c)}function pS(t,e){if(gS(t=$t(t)))return yS("Unsupported field value:",e,t),mS(t,e);if(t instanceof hS)return function(r,i){if(!fS(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=pS(a,i.Pc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=$t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=dt.fromDate(r);return{timestampValue:Jc(i.serializer,s)}}if(r instanceof dt){const s=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jc(i.serializer,s)}}if(r instanceof ay)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ro)return{bytesValue:OT(i.serializer,r._byteString)};if(r instanceof Rn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$g(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ly)return function(o,a){return{mapValue:{fields:{[uT]:{stringValue:dT},[Kc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Tc("VectorValues must only contain numeric values.");return Fg(a.serializer,c)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${ny(r)}`)}(t,e)}function mS(t,e){const n={};return rT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,(r,i)=>{const s=pS(i,e.uc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function gS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof ay||t instanceof Ro||t instanceof Rn||t instanceof hS||t instanceof ly)}function yS(t,e,n){if(!gS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ny(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function CL(t,e,n){if((e=$t(e))instanceof oy)return e._internalPath;if(typeof e=="string")return vS(t,e);throw nd("Field path arguments must be of type string or ",t,!1,void 0,n)}const AL=new RegExp("[~\\*/\\[\\]]");function vS(t,e,n){if(e.search(AL)>=0)throw nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oy(...e.split("."))._internalPath}catch{throw nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ie(q.INVALID_ARGUMENT,a+t+l)}function RL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NL extends xS{data(){return super.data()}}function wS(t,e){return typeof e=="string"?vS(t,e):e instanceof oy?e._internalPath:e._delegate._internalPath}class PL{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ks(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Kc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nt(o.doubleValue));return new ly(s)}convertGeoPoint(e){return new ay(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Od(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const n=ji(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=et.fromString(e);Ne(zT(r),9688,{name:e});const i=new fl(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _S extends xS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new OL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class OL extends _S{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t){t=yl(t,Rn);const e=yl(t.firestore,sy);return yL(dS(e),t._key).then(n=>FL(e,t,n))}class ML extends PL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function Ru(t,e,n){t=yl(t,Rn);const r=yl(t.firestore,sy),i=DL(t.converter,e,n);return VL(r,[IL(kL(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Mr.none())])}function VL(t,e){return function(r,i){const s=new Ai;return r.asyncQueue.enqueueAndForget(async()=>rL(await mL(r),i,s)),s.promise}(dS(t),e)}function FL(t,e,n){const r=n.docs.get(e._key),i=new ML(t);return new _S(t,i,e._key,r,new jL(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Vo=i})(Ss),ms(new Pi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new sy(new Tj(r.getProvider("auth-internal")),new Ij(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ur(yx,vx,e),ur(yx,vx,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebasestorage.googleapis.com",UL="storageBucket",zL=2*60*1e3,$L=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends yr{constructor(e,n,r=0){super(sf(e),`Firebase Storage: ${n} (${sf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mr||(mr={}));function sf(t){return"storage/"+t}function BL(){const t="An unknown error occurred, please check the error payload for server response.";return new xr(mr.UNKNOWN,t)}function HL(){return new xr(mr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qL(){return new xr(mr.CANCELED,"User canceled the upload/download.")}function WL(t){return new xr(mr.INVALID_URL,"Invalid URL '"+t+"'.")}function KL(t){return new xr(mr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hw(t){return new xr(mr.INVALID_ARGUMENT,t)}function bS(){return new xr(mr.APP_DELETED,"The Firebase app was deleted.")}function GL(t){return new xr(mr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qn.makeFromUrl(e,n)}catch{return new qn(e,"")}if(r.path==="")return r;throw KL(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${i}/o${m}`,"i"),w={bucket:1,path:3},b=n===ES?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",y=new RegExp(`^https?://${b}/${i}/${T}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:g,indices:w,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<_.length;A++){const M=_[A],P=M.regex.exec(e);if(P){const S=P[M.indices.bucket];let E=P[M.indices.path];E||(E=""),r=new qn(S,E),M.postModify(r);break}}if(r==null)throw WL(e);return r}}class QL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...T){c||(c=!0,e.apply(null,T))}function f(T){i=setTimeout(()=>{i=null,t(g,l())},T)}function m(){s&&clearTimeout(s)}function g(T,...y){if(c){m();return}if(T){m(),h.call(null,T,...y);return}if(l()||o){m(),h.call(null,T,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let w=!1;function b(T){w||(w=!0,m(),!c&&(i!==null?(T||(a=2),clearTimeout(i),f(0)):T||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,b(!0)},n),b}function XL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){return t!==void 0}function fw(t,e,n,r){if(r<e)throw hw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hw(`Invalid value for '${t}'. Expected ${n} or less.`)}function ZL(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var rd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(rd||(rd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n,r,i,s,o,a,l,c,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,w)=>{this.resolve_=g,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Nu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===rd.NO_ERROR,l=s.getStatus();if(!a||eM(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===rd.ABORT;r(!1,new Nu(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Nu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());JL(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=BL();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?bS():qL();o(l)}else{const l=HL();o(l)}};this.canceled_?n(!1,new Nu(!1,null,!0)):this.backoffId_=YL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oM(t,e,n,r,i,s,o=!0){const a=ZL(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return iM(c,e),nM(c,n),rM(c,s),sM(c,r),new tM(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this._service=e,n instanceof qn?this._location=n:this._location=qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new id(e,n)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lM(this._location.path)}get storage(){return this._service}get parent(){const e=aM(this._location.path);if(e===null)return null;const n=new qn(this._location.bucket,e);return new id(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw GL(e)}}function pw(t,e){const n=e==null?void 0:e[UL];return n==null?null:qn.makeFromBucketSpec(n,t)}function uM(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ab(i,t.app.options.projectId))}class cM{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ES,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zL,this._maxUploadRetryTime=$L,this._requests=new Set,i!=null?this._bucket=qn.makeFromBucketSpec(i,this._host):this._bucket=pw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=pw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new id(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new QL(bS());{const o=oM(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const mw="@firebase/storage",gw="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="storage";function dM(t=wg(),e){t=$t(t);const r=Ad(t,TS).getImmediate({identifier:e}),i=ib("storage");return i&&hM(r,...i),r}function hM(t,e,n,r={}){uM(t,e,n,r)}function fM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new cM(n,r,i,e,Ss)}function pM(){ms(new Pi(TS,fM,"PUBLIC").setMultipleInstances(!0)),ur(mw,gw,""),ur(mw,gw,"esm2017")}pM();const mM={apiKey:"AIzaSyBLVREytbAcmjQpPBeUYv5SVSDsCrr3Vss",authDomain:"ai-tutor-dev-457802.firebaseapp.com",projectId:"ai-tutor-dev-457802",storageBucket:"ai-tutor-dev-457802.firebasestorage.app",messagingSenderId:"459030890739",appId:"1:459030890739:web:38c19c0f0534f619614f86"},cy=cb(mM),Cr=vj(cy),of=_L(cy,"default");dM(cy);const Gi={fontSize:16,fontFamily:"OpenDyslexic",lineSpacing:1.5,wordSpacing:1.2,textColor:"#000000",backgroundColor:"#f8f9fa",highContrast:!1,uiTtsEnabled:!0,ttsVoice:"en-US-Wavenet-D",ttsSpeed:1,ttsPitch:0,cloudTtsEnabled:!1,cloudTtsVoice:"en-US-Neural2-F"},SS=C.createContext(void 0),gM=({children:t})=>{const[e,n]=C.useState(null),[r,i]=C.useState(Gi),[s,o]=C.useState(!0);C.useEffect(()=>oD(Cr,async y=>{var x;if(y)try{await y.getIdToken(!0);const _=rf(of,"users",y.uid),A=await LL(_);if(A.exists()){console.log(`[AuthContext:onAuthStateChanged] User doc found for ${y.uid}. Loading preferences.`);const M=A.data();i(M.preferences||Gi),Ru(_,{lastLogin:new Date},{merge:!0}).catch(P=>console.error("[AuthContext] Failed to update lastLogin",P))}else{console.warn(`[AuthContext:onAuthStateChanged] User doc for ${y.uid} not found. Creating new doc.`);const M={uid:y.uid,email:y.email,displayName:y.displayName||((x=y.email)==null?void 0:x.split("@")[0]),createdAt:new Date,lastLogin:new Date,preferences:Gi,gamification:{points:0,streak:0,level:1,badges:[]}};await Ru(_,M),i(Gi)}n(y)}catch(_){console.error("[AuthContext:onAuthStateChanged] Error processing user state:",_),n(y),i(Gi)}finally{o(!1)}else n(null),i(Gi),o(!1)}),[]);const a=C.useCallback(async(T=!0)=>{if(!e)throw console.warn("[AuthContext:getAuthTokenCallback] Attempted to get token without a current user."),new Error("User not authenticated to get token.");return console.log(`[AuthContext] Getting auth token, forceRefresh: ${T}`),e.getIdToken(T)},[e]),l=C.useCallback(async(T,y)=>{await tD(Cr,T,y)},[]),c=C.useCallback(async(T,y,x)=>{var M,P;let _,A=!1;try{console.log("[AuthContext:signUpCallback] Starting user creation in Firebase Auth"),_=await eD(Cr,T,y),console.log("[AuthContext:signUpCallback] User created successfully in Firebase Auth");try{console.log("[AuthContext:signUpCallback] Setting displayName in Firebase Auth user profile"),await rD(_.user,{displayName:x||((M=_.user.email)==null?void 0:M.split("@")[0])}),console.log("[AuthContext:signUpCallback] DisplayName set successfully in Firebase Auth user profile")}catch(S){console.error("[AuthContext:signUpCallback] Error setting displayName in Firebase Auth:",S)}try{const S=_.user;console.log("[AuthContext:signUpCallback] Attempting to create user document in Firestore"),await Ru(rf(of,"users",S.uid),{uid:S.uid,email:S.email,displayName:x||((P=S.email)==null?void 0:P.split("@")[0]),createdAt:new Date,lastLogin:new Date,preferences:Gi,gamification:{points:0,streak:0,level:1,badges:[]}}),console.log("[AuthContext:signUpCallback] User document created successfully in Firestore")}catch(S){console.error("[AuthContext:signUpCallback] Firestore document creation failed:",S),A=!0}return A?{user:_.user,partial:!0,error:"Created account but failed to set up user profile. Some features may be limited."}:{user:_.user,partial:!1}}catch(S){if(console.error("[AuthContext:signUpCallback] Firebase Auth signup failed:",S),_!=null&&_.user)try{console.log("[AuthContext:signUpCallback] Cleaning up auth user after error"),await _.user.delete()}catch(E){console.error("[AuthContext:signUpCallback] Error cleaning up auth user:",E)}throw S}},[]),h=C.useCallback(async()=>{await aD(Cr)},[]),f=C.useCallback(async()=>{const T=new Ar;try{console.log("[AuthContext:signInWithGoogleCallback] Attempting Google Sign-In via popup..."),await ID(Cr,T),console.log("[AuthContext:signInWithGoogleCallback] Google Sign-In popup initiated successfully.")}catch(y){throw console.error("[AuthContext:signInWithGoogleCallback] Error during Google Sign-In popup:",y),y.code&&console.error("[AuthContext] Firebase Error Code (signInWithPopup):",y.code),y.message&&console.error("[AuthContext] Firebase Error Message (signInWithPopup):",y.message),y}},[]),m=C.useCallback(async T=>{await ZP(Cr,T)},[]),g=C.useCallback(async T=>{if(!e)throw new Error("No user logged in to update preferences");const y={...r,...T},{getAuthToken:x,..._}=y;await Ru(rf(of,"users",e.uid),{preferences:_},{merge:!0}),i(y),console.log("[AuthContext:updateUserPreferencesCallback] User preferences updated.")},[e,r]),w=C.useMemo(()=>({...r,getAuthToken:a}),[r,a]),b=C.useMemo(()=>({currentUser:e,userPreferences:w,loading:s,signIn:l,signUp:c,signOut:h,signInWithGoogle:f,resetPassword:m,updateUserPreferences:g,getAuthToken:a}),[e,w,s,l,c,h,f,m,g,a]);return d.jsx(SS.Provider,{value:b,children:!s&&t})},wr=()=>{const t=C.useContext(SS);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};function kS(t,e){return function(){return t.apply(e,arguments)}}const{toString:yM}=Object.prototype,{getPrototypeOf:dy}=Object,{iterator:qd,toStringTag:IS}=Symbol,Wd=(t=>e=>{const n=yM.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Zn=t=>(t=t.toLowerCase(),e=>Wd(e)===t),Kd=t=>e=>typeof e===t,{isArray:$o}=Array,xl=Kd("undefined");function vM(t){return t!==null&&!xl(t)&&t.constructor!==null&&!xl(t.constructor)&&sn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const CS=Zn("ArrayBuffer");function xM(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&CS(t.buffer),e}const wM=Kd("string"),sn=Kd("function"),AS=Kd("number"),Gd=t=>t!==null&&typeof t=="object",_M=t=>t===!0||t===!1,ic=t=>{if(Wd(t)!=="object")return!1;const e=dy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(IS in t)&&!(qd in t)},EM=Zn("Date"),bM=Zn("File"),TM=Zn("Blob"),SM=Zn("FileList"),kM=t=>Gd(t)&&sn(t.pipe),IM=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||sn(t.append)&&((e=Wd(t))==="formdata"||e==="object"&&sn(t.toString)&&t.toString()==="[object FormData]"))},CM=Zn("URLSearchParams"),[AM,RM,NM,PM]=["ReadableStream","Request","Response","Headers"].map(Zn),DM=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),$o(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function RS(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const is=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,NS=t=>!xl(t)&&t!==is;function $p(){const{caseless:t}=NS(this)&&this||{},e={},n=(r,i)=>{const s=t&&RS(e,i)||i;ic(e[s])&&ic(r)?e[s]=$p(e[s],r):ic(r)?e[s]=$p({},r):$o(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Fl(arguments[r],n);return e}const jM=(t,e,n,{allOwnKeys:r}={})=>(Fl(e,(i,s)=>{n&&sn(i)?t[s]=kS(i,n):t[s]=i},{allOwnKeys:r}),t),OM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),LM=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},MM=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&dy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},VM=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},FM=t=>{if(!t)return null;if($o(t))return t;let e=t.length;if(!AS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},UM=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&dy(Uint8Array)),zM=(t,e)=>{const r=(t&&t[qd]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},$M=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},BM=Zn("HTMLFormElement"),HM=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),yw=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),qM=Zn("RegExp"),PS=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Fl(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},WM=t=>{PS(t,(e,n)=>{if(sn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(sn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},KM=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return $o(t)?r(t):r(String(t).split(e)),n},GM=()=>{},QM=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function YM(t){return!!(t&&sn(t.append)&&t[IS]==="FormData"&&t[qd])}const XM=t=>{const e=new Array(10),n=(r,i)=>{if(Gd(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=$o(r)?[]:{};return Fl(r,(o,a)=>{const l=n(o,i+1);!xl(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},JM=Zn("AsyncFunction"),ZM=t=>t&&(Gd(t)||sn(t))&&sn(t.then)&&sn(t.catch),DS=((t,e)=>t?setImmediate:e?((n,r)=>(is.addEventListener("message",({source:i,data:s})=>{i===is&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),is.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",sn(is.postMessage)),eV=typeof queueMicrotask<"u"?queueMicrotask.bind(is):typeof process<"u"&&process.nextTick||DS,tV=t=>t!=null&&sn(t[qd]),F={isArray:$o,isArrayBuffer:CS,isBuffer:vM,isFormData:IM,isArrayBufferView:xM,isString:wM,isNumber:AS,isBoolean:_M,isObject:Gd,isPlainObject:ic,isReadableStream:AM,isRequest:RM,isResponse:NM,isHeaders:PM,isUndefined:xl,isDate:EM,isFile:bM,isBlob:TM,isRegExp:qM,isFunction:sn,isStream:kM,isURLSearchParams:CM,isTypedArray:UM,isFileList:SM,forEach:Fl,merge:$p,extend:jM,trim:DM,stripBOM:OM,inherits:LM,toFlatObject:MM,kindOf:Wd,kindOfTest:Zn,endsWith:VM,toArray:FM,forEachEntry:zM,matchAll:$M,isHTMLForm:BM,hasOwnProperty:yw,hasOwnProp:yw,reduceDescriptors:PS,freezeMethods:WM,toObjectSet:KM,toCamelCase:HM,noop:GM,toFiniteNumber:QM,findKey:RS,global:is,isContextDefined:NS,isSpecCompliantForm:YM,toJSONObject:XM,isAsyncFn:JM,isThenable:ZM,setImmediate:DS,asap:eV,isIterable:tV};function ge(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}F.inherits(ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const jS=ge.prototype,OS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{OS[t]={value:t}});Object.defineProperties(ge,OS);Object.defineProperty(jS,"isAxiosError",{value:!0});ge.from=(t,e,n,r,i,s)=>{const o=Object.create(jS);return F.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ge.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const nV=null;function Bp(t){return F.isPlainObject(t)||F.isArray(t)}function LS(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function vw(t,e,n){return t?t.concat(e).map(function(i,s){return i=LS(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function rV(t){return F.isArray(t)&&!t.some(Bp)}const iV=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function Qd(t,e,n){if(!F.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=F.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,T){return!F.isUndefined(T[b])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(i))throw new TypeError("visitor must be a function");function c(w){if(w===null)return"";if(F.isDate(w))return w.toISOString();if(!l&&F.isBlob(w))throw new ge("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(w)||F.isTypedArray(w)?l&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function h(w,b,T){let y=w;if(w&&!T&&typeof w=="object"){if(F.endsWith(b,"{}"))b=r?b:b.slice(0,-2),w=JSON.stringify(w);else if(F.isArray(w)&&rV(w)||(F.isFileList(w)||F.endsWith(b,"[]"))&&(y=F.toArray(w)))return b=LS(b),y.forEach(function(_,A){!(F.isUndefined(_)||_===null)&&e.append(o===!0?vw([b],A,s):o===null?b:b+"[]",c(_))}),!1}return Bp(w)?!0:(e.append(vw(T,b,s),c(w)),!1)}const f=[],m=Object.assign(iV,{defaultVisitor:h,convertValue:c,isVisitable:Bp});function g(w,b){if(!F.isUndefined(w)){if(f.indexOf(w)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(w),F.forEach(w,function(y,x){(!(F.isUndefined(y)||y===null)&&i.call(e,y,F.isString(x)?x.trim():x,b,m))===!0&&g(y,b?b.concat(x):[x])}),f.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return g(t),e}function xw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function hy(t,e){this._pairs=[],t&&Qd(t,this,e)}const MS=hy.prototype;MS.append=function(e,n){this._pairs.push([e,n])};MS.toString=function(e){const n=e?function(r){return e.call(this,r,xw)}:xw;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function sV(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function VS(t,e,n){if(!e)return t;const r=n&&n.encode||sV;F.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=F.isURLSearchParams(e)?e.toString():new hy(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class ww{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(r){r!==null&&e(r)})}}const FS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oV=typeof URLSearchParams<"u"?URLSearchParams:hy,aV=typeof FormData<"u"?FormData:null,lV=typeof Blob<"u"?Blob:null,uV={isBrowser:!0,classes:{URLSearchParams:oV,FormData:aV,Blob:lV},protocols:["http","https","file","blob","url","data"]},fy=typeof window<"u"&&typeof document<"u",Hp=typeof navigator=="object"&&navigator||void 0,cV=fy&&(!Hp||["ReactNative","NativeScript","NS"].indexOf(Hp.product)<0),dV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hV=fy&&window.location.href||"http://localhost",fV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fy,hasStandardBrowserEnv:cV,hasStandardBrowserWebWorkerEnv:dV,navigator:Hp,origin:hV},Symbol.toStringTag,{value:"Module"})),Nt={...fV,...uV};function pV(t,e){return Qd(t,new Nt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Nt.isNode&&F.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function mV(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function gV(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function US(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&F.isArray(i)?i.length:o,l?(F.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!F.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&F.isArray(i[o])&&(i[o]=gV(i[o])),!a)}if(F.isFormData(t)&&F.isFunction(t.entries)){const n={};return F.forEachEntry(t,(r,i)=>{e(mV(r),i,n,0)}),n}return null}function yV(t,e,n){if(F.isString(t))try{return(e||JSON.parse)(t),F.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Ul={transitional:FS,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=F.isObject(e);if(s&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return i?JSON.stringify(US(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)||F.isReadableStream(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return pV(e,this.formSerializer).toString();if((a=F.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Qd(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),yV(e)):e}],transformResponse:[function(e){const n=this.transitional||Ul.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(F.isResponse(e)||F.isReadableStream(e))return e;if(e&&F.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ge.from(a,ge.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nt.classes.FormData,Blob:Nt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],t=>{Ul.headers[t]={}});const vV=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xV=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&vV[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_w=Symbol("internals");function ma(t){return t&&String(t).trim().toLowerCase()}function sc(t){return t===!1||t==null?t:F.isArray(t)?t.map(sc):String(t)}function wV(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const _V=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function af(t,e,n,r,i){if(F.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!F.isString(e)){if(F.isString(r))return e.indexOf(r)!==-1;if(F.isRegExp(r))return r.test(e)}}function EV(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function bV(t,e){const n=F.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class on{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const h=ma(l);if(!h)throw new Error("header name must be a non-empty string");const f=F.findKey(i,h);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=sc(a))}const o=(a,l)=>F.forEach(a,(c,h)=>s(c,h,l));if(F.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(F.isString(e)&&(e=e.trim())&&!_V(e))o(xV(e),n);else if(F.isObject(e)&&F.isIterable(e)){let a={},l,c;for(const h of e){if(!F.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(l=a[c])?F.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=ma(e),e){const r=F.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return wV(i);if(F.isFunction(n))return n.call(this,i,r);if(F.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ma(e),e){const r=F.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||af(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ma(o),o){const a=F.findKey(r,o);a&&(!n||af(r,r[a],a,n))&&(delete r[a],i=!0)}}return F.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||af(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return F.forEach(this,(i,s)=>{const o=F.findKey(r,s);if(o){n[o]=sc(i),delete n[s];return}const a=e?EV(s):String(s).trim();a!==s&&delete n[s],n[a]=sc(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return F.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&F.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[_w]=this[_w]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ma(o);r[a]||(bV(i,o),r[a]=!0)}return F.isArray(e)?e.forEach(s):s(e),this}}on.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(on.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});F.freezeMethods(on);function lf(t,e){const n=this||Ul,r=e||n,i=on.from(r.headers);let s=r.data;return F.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function zS(t){return!!(t&&t.__CANCEL__)}function Bo(t,e,n){ge.call(this,t??"canceled",ge.ERR_CANCELED,e,n),this.name="CanceledError"}F.inherits(Bo,ge,{__CANCEL__:!0});function $S(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ge("Request failed with status code "+n.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function TV(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function SV(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),n[i]=l,r[i]=c;let f=s,m=0;for(;f!==i;)m+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const g=h&&c-h;return g?Math.round(m*1e3/g):void 0}}function kV(t,e){let n=0,r=1e3/e,i,s;const o=(c,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const h=Date.now(),f=h-n;f>=r?o(c,h):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-f)))},()=>i&&o(i)]}const sd=(t,e,n=3)=>{let r=0;const i=SV(50,250);return kV(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},Ew=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},bw=t=>(...e)=>F.asap(()=>t(...e)),IV=Nt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Nt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Nt.origin),Nt.navigator&&/(msie|trident)/i.test(Nt.navigator.userAgent)):()=>!0,CV=Nt.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];F.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),F.isString(r)&&o.push("path="+r),F.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function AV(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function RV(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function BS(t,e,n){let r=!AV(e);return t&&(r||n==!1)?RV(t,e):e}const Tw=t=>t instanceof on?{...t}:t;function ws(t,e){e=e||{};const n={};function r(c,h,f,m){return F.isPlainObject(c)&&F.isPlainObject(h)?F.merge.call({caseless:m},c,h):F.isPlainObject(h)?F.merge({},h):F.isArray(h)?h.slice():h}function i(c,h,f,m){if(F.isUndefined(h)){if(!F.isUndefined(c))return r(void 0,c,f,m)}else return r(c,h,f,m)}function s(c,h){if(!F.isUndefined(h))return r(void 0,h)}function o(c,h){if(F.isUndefined(h)){if(!F.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,f){if(f in e)return r(c,h);if(f in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,f)=>i(Tw(c),Tw(h),f,!0)};return F.forEach(Object.keys(Object.assign({},t,e)),function(h){const f=l[h]||i,m=f(t[h],e[h],h);F.isUndefined(m)&&f!==a||(n[h]=m)}),n}const HS=t=>{const e=ws({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=on.from(o),e.url=VS(BS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(F.isFormData(n)){if(Nt.hasStandardBrowserEnv||Nt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(Nt.hasStandardBrowserEnv&&(r&&F.isFunction(r)&&(r=r(e)),r||r!==!1&&IV(e.url))){const c=i&&s&&CV.read(s);c&&o.set(i,c)}return e},NV=typeof XMLHttpRequest<"u",PV=NV&&function(t){return new Promise(function(n,r){const i=HS(t);let s=i.data;const o=on.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,h,f,m,g,w;function b(){g&&g(),w&&w(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function y(){if(!T)return;const _=on.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:_,config:t,request:T};$S(function(S){n(S),b()},function(S){r(S),b()},M),T=null}"onloadend"in T?T.onloadend=y:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(y)},T.onabort=function(){T&&(r(new ge("Request aborted",ge.ECONNABORTED,t,T)),T=null)},T.onerror=function(){r(new ge("Network Error",ge.ERR_NETWORK,t,T)),T=null},T.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||FS;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),r(new ge(A,M.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,t,T)),T=null},s===void 0&&o.setContentType(null),"setRequestHeader"in T&&F.forEach(o.toJSON(),function(A,M){T.setRequestHeader(M,A)}),F.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),a&&a!=="json"&&(T.responseType=i.responseType),c&&([m,w]=sd(c,!0),T.addEventListener("progress",m)),l&&T.upload&&([f,g]=sd(l),T.upload.addEventListener("progress",f),T.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(h=_=>{T&&(r(!_||_.type?new Bo(null,t,T):_),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const x=TV(i.url);if(x&&Nt.protocols.indexOf(x)===-1){r(new ge("Unsupported protocol "+x+":",ge.ERR_BAD_REQUEST,t));return}T.send(s||null)})},DV=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof ge?h:new Bo(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new ge(`timeout ${e} of ms exceeded`,ge.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>F.asap(a),l}},jV=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},OV=async function*(t,e){for await(const n of LV(t))yield*jV(n,e)},LV=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Sw=(t,e,n,r)=>{const i=OV(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){a(),l.close();return}let f=h.byteLength;if(n){let m=s+=f;n(m)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Yd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qS=Yd&&typeof ReadableStream=="function",MV=Yd&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),WS=(t,...e)=>{try{return!!t(...e)}catch{return!1}},VV=qS&&WS(()=>{let t=!1;const e=new Request(Nt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),kw=64*1024,qp=qS&&WS(()=>F.isReadableStream(new Response("").body)),od={stream:qp&&(t=>t.body)};Yd&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!od[e]&&(od[e]=F.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new ge(`Response type '${e}' is not supported`,ge.ERR_NOT_SUPPORT,r)})})})(new Response);const FV=async t=>{if(t==null)return 0;if(F.isBlob(t))return t.size;if(F.isSpecCompliantForm(t))return(await new Request(Nt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(F.isArrayBufferView(t)||F.isArrayBuffer(t))return t.byteLength;if(F.isURLSearchParams(t)&&(t=t+""),F.isString(t))return(await MV(t)).byteLength},UV=async(t,e)=>{const n=F.toFiniteNumber(t.getContentLength());return n??FV(e)},zV=Yd&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:f="same-origin",fetchOptions:m}=HS(t);c=c?(c+"").toLowerCase():"text";let g=DV([i,s&&s.toAbortSignal()],o),w;const b=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let T;try{if(l&&VV&&n!=="get"&&n!=="head"&&(T=await UV(h,r))!==0){let M=new Request(e,{method:"POST",body:r,duplex:"half"}),P;if(F.isFormData(r)&&(P=M.headers.get("content-type"))&&h.setContentType(P),M.body){const[S,E]=Ew(T,sd(bw(l)));r=Sw(M.body,kw,S,E)}}F.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;w=new Request(e,{...m,signal:g,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:y?f:void 0});let x=await fetch(w);const _=qp&&(c==="stream"||c==="response");if(qp&&(a||_&&b)){const M={};["status","statusText","headers"].forEach(k=>{M[k]=x[k]});const P=F.toFiniteNumber(x.headers.get("content-length")),[S,E]=a&&Ew(P,sd(bw(a),!0))||[];x=new Response(Sw(x.body,kw,S,()=>{E&&E(),b&&b()}),M)}c=c||"text";let A=await od[F.findKey(od,c)||"text"](x,t);return!_&&b&&b(),await new Promise((M,P)=>{$S(M,P,{data:A,headers:on.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:w})})}catch(y){throw b&&b(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new ge("Network Error",ge.ERR_NETWORK,t,w),{cause:y.cause||y}):ge.from(y,y&&y.code,t,w)}}),Wp={http:nV,xhr:PV,fetch:zV};F.forEach(Wp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Iw=t=>`- ${t}`,$V=t=>F.isFunction(t)||t===null||t===!1,KS={getAdapter:t=>{t=F.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!$V(n)&&(r=Wp[(o=String(n)).toLowerCase()],r===void 0))throw new ge(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Iw).join(`
`):" "+Iw(s[0]):"as no adapter specified";throw new ge("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Wp};function uf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Bo(null,t)}function Cw(t){return uf(t),t.headers=on.from(t.headers),t.data=lf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),KS.getAdapter(t.adapter||Ul.adapter)(t).then(function(r){return uf(t),r.data=lf.call(t,t.transformResponse,r),r.headers=on.from(r.headers),r},function(r){return zS(r)||(uf(t),r&&r.response&&(r.response.data=lf.call(t,t.transformResponse,r.response),r.response.headers=on.from(r.response.headers))),Promise.reject(r)})}const GS="1.9.0",Xd={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Xd[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Aw={};Xd.transitional=function(e,n,r){function i(s,o){return"[Axios v"+GS+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ge(i(o," has been removed"+(n?" in "+n:"")),ge.ERR_DEPRECATED);return n&&!Aw[o]&&(Aw[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Xd.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function BV(t,e,n){if(typeof t!="object")throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new ge("option "+s+" must be "+l,ge.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ge("Unknown option "+s,ge.ERR_BAD_OPTION)}}const oc={assertOptions:BV,validators:Xd},tr=oc.validators;class ls{constructor(e){this.defaults=e||{},this.interceptors={request:new ww,response:new ww}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ws(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&oc.assertOptions(r,{silentJSONParsing:tr.transitional(tr.boolean),forcedJSONParsing:tr.transitional(tr.boolean),clarifyTimeoutError:tr.transitional(tr.boolean)},!1),i!=null&&(F.isFunction(i)?n.paramsSerializer={serialize:i}:oc.assertOptions(i,{encode:tr.function,serialize:tr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),oc.assertOptions(n,{baseUrl:tr.spelling("baseURL"),withXsrfToken:tr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&F.merge(s.common,s[n.method]);s&&F.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),n.headers=on.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(l=l&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let h,f=0,m;if(!l){const w=[Cw.bind(this),void 0];for(w.unshift.apply(w,a),w.push.apply(w,c),m=w.length,h=Promise.resolve(n);f<m;)h=h.then(w[f++],w[f++]);return h}m=a.length;let g=n;for(f=0;f<m;){const w=a[f++],b=a[f++];try{g=w(g)}catch(T){b.call(this,T);break}}try{h=Cw.call(this,g)}catch(w){return Promise.reject(w)}for(f=0,m=c.length;f<m;)h=h.then(c[f++],c[f++]);return h}getUri(e){e=ws(this.defaults,e);const n=BS(e.baseURL,e.url,e.allowAbsoluteUrls);return VS(n,e.params,e.paramsSerializer)}}F.forEach(["delete","get","head","options"],function(e){ls.prototype[e]=function(n,r){return this.request(ws(r||{},{method:e,url:n,data:(r||{}).data}))}});F.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(ws(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ls.prototype[e]=n(),ls.prototype[e+"Form"]=n(!0)});class py{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Bo(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new py(function(i){e=i}),cancel:e}}}function HV(t){return function(n){return t.apply(null,n)}}function qV(t){return F.isObject(t)&&t.isAxiosError===!0}const Kp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kp).forEach(([t,e])=>{Kp[e]=t});function QS(t){const e=new ls(t),n=kS(ls.prototype.request,e);return F.extend(n,ls.prototype,e,{allOwnKeys:!0}),F.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return QS(ws(t,i))},n}const De=QS(Ul);De.Axios=ls;De.CanceledError=Bo;De.CancelToken=py;De.isCancel=zS;De.VERSION=GS;De.toFormData=Qd;De.AxiosError=ge;De.Cancel=De.CanceledError;De.all=function(e){return Promise.all(e)};De.spread=HV;De.isAxiosError=qV;De.mergeConfig=ws;De.AxiosHeaders=on;De.formToJSON=t=>US(F.isHTMLForm(t)?new FormData(t):t);De.getAdapter=KS.getAdapter;De.HttpStatusCode=Kp;De.default=De;const Rw=async(t,e)=>{var n,r;try{console.log("[TTS Utils] Sending TTS request with options:",{text:t.text.substring(0,50)+"...",voice_name:t.voice_name,speaking_rate:t.speaking_rate,pitch:t.pitch});const s="http://localhost:5000/api/tts";console.log("[TTS Utils] API URL:",s);const o=await De.post(s,t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(o.data.status==="success")return console.log("[TTS Utils] TTS API call successful",{audio_size:((n=o.data.audio_data)==null?void 0:n.length)||0,format:o.data.audio_format,voice:(r=o.data.metadata)==null?void 0:r.voice_name}),o.data;throw console.error("[TTS Utils] TTS API returned error status:",o.data),new Error(o.data.message||"Failed to synthesize speech")}catch(i){throw console.error("[TTS Utils] Error in TTS API call:",i),i}},Nw=(t,e="mp3")=>{if(!t)throw console.error("[TTS Utils] No audio data received"),new Error("No audio data received");if(t.length<100)throw console.error("[TTS Utils] Audio data too short, likely invalid. Length:",t.length),new Error("Audio data too short, likely invalid");if(!/^[A-Za-z0-9+/=]+$/.test(t))throw console.error("[TTS Utils] Audio data contains invalid base64 characters"),new Error("Invalid base64 audio data format");console.log("[TTS Utils] Creating audio element with base64 data, length:",t.length);const n=new Audio;return n.addEventListener("loadedmetadata",()=>{console.log("[TTS Utils] Audio metadata loaded, duration:",n.duration),n.duration&&!isNaN(n.duration)?n.play().catch(r=>{console.error("[TTS Utils] Error playing audio:",r)}):console.error("[TTS Utils] Audio has invalid duration after metadata loaded:",n.duration)}),n.addEventListener("play",()=>{console.log("[TTS Utils] Audio playback started")}),n.addEventListener("canplaythrough",()=>{console.log("[TTS Utils] Audio can play through completely, duration:",n.duration)}),n.addEventListener("error",r=>{console.error("[TTS Utils] Audio element error:",r)}),n.src=`data:audio/${e};base64,${t}`,n.load(),n};var Sr=(t=>(t[t.Off=0]="Off",t[t.Short=500]="Short",t[t.Medium=1e3]="Medium",t[t.Long=1500]="Long",t))(Sr||{});const YS=C.createContext(void 0),WV=({children:t})=>{const{userPreferences:e,updateUserPreferences:n}=wr(),[r,i]=C.useState(e.uiTtsEnabled),[s,o]=C.useState(e.highContrast),[a,l]=C.useState(e.fontSize),[c,h]=C.useState(e.fontFamily),[f,m]=C.useState(e.lineSpacing),[g,w]=C.useState(e.wordSpacing),[b,T]=C.useState(e.cloudTtsEnabled||!1),[y,x]=C.useState(e.ttsDelay||500),[_,A]=C.useState(!1),[M,P]=C.useState(!1),[S,E]=C.useState(0),k=C.useRef(null),N=C.useRef(!1),j=C.useRef(null);C.useEffect(()=>{i(e.uiTtsEnabled),o(e.highContrast),l(e.fontSize),h(e.fontFamily),m(e.lineSpacing),w(e.wordSpacing),T(e.cloudTtsEnabled||!1),x(e.ttsDelay!==void 0?e.ttsDelay:500)},[e]);const O=async()=>{const Q=!r;i(Q),await n({uiTtsEnabled:Q})},D=async()=>{re();const Q=!b;console.log("[AccessibilityContext] Toggling cloud TTS:",Q),T(Q),await n({cloudTtsEnabled:Q}),Q&&!e.cloudTtsVoice&&(console.log("[AccessibilityContext] Setting default cloud TTS voice"),await n({cloudTtsVoice:"en-US-Standard-C"})),console.log("[AccessibilityContext] Cloud TTS is now",Q?"enabled":"disabled")},B=async()=>{const Q=!s;o(Q),await n({highContrast:Q})},X=async Q=>{l(Q),await n({fontSize:Q})},ve=async Q=>{h(Q),await n({fontFamily:Q})},he=async Q=>{m(Q),await n({lineSpacing:Q})},K=async Q=>{w(Q),await n({wordSpacing:Q})},te=async Q=>{x(Q),await n({ttsDelay:Q}),console.log(`[AccessibilityContext] TTS delay set to ${Q}ms`)},R=(Q,_e={})=>{if(!Q||Q.trim()===""){console.log("[AccessibilityContext] Empty text provided, skipping TTS");return}if(j.current&&(clearTimeout(j.current),j.current=null),_e.ignoreDelay||y===0){J(Q,_e);return}console.log(`[AccessibilityContext] Scheduling speech with ${y}ms delay`),j.current=setTimeout(()=>{J(Q,_e),j.current=null},y)},J=(Q,_e={})=>{console.log("[AccessibilityContext] Executing speech with options:",_e),re(),ne(_e)?(console.log("[AccessibilityContext] Using cloud TTS for speech synthesis"),Fe(Q)):"speechSynthesis"in window&&(console.log("[AccessibilityContext] Using browser TTS for speech synthesis"),L(Q))},ne=(Q={})=>Q.forceBasic?!1:Q.forcePremium?!0:!Q.isDocumentContent&&!Q.forcePremium?!1:b,L=Q=>{if(!("speechSynthesis"in window)){console.warn("[AccessibilityContext] Speech synthesis not supported in this browser");return}if(!(!Q||Q.trim()===""))try{je.current||console.log("[AccessibilityContext] Speech requested but browser not yet initialized - waiting for user interaction"),re();const _e=new SpeechSynthesisUtterance(Q);_e.rate=e.ttsSpeed||1,_e.pitch=e.ttsPitch||1;let qe=window.speechSynthesis.getVoices();if(qe.length===0)console.log("[AccessibilityContext] No voices available yet, using default voice");else{const at=qe.find(tt=>tt.name===e.ttsVoice);at&&(_e.voice=at)}_e.onstart=()=>{console.log("[AccessibilityContext] Speech started:",Q.substring(0,20)+(Q.length>20?"...":"")),A(!0)},_e.onend=()=>{console.log("[AccessibilityContext] Speech ended successfully"),A(!1)},_e.onerror=at=>{if(console.error("[AccessibilityContext] Speech error:",at),A(!1),!je.current){console.log("[AccessibilityContext] Attempting to initialize speech after error"),je.current=!0;try{const tt=new SpeechSynthesisUtterance("");window.speechSynthesis.speak(tt),window.speechSynthesis.cancel()}catch(tt){console.error("[AccessibilityContext] Failed to initialize speech:",tt)}}},window.speechSynthesis.speak(_e)}catch(_e){console.error("[AccessibilityContext] Error in speakWithBrowserTts:",_e),A(!1)}},Fe=async Q=>{var _e,qe,at;try{re(),P(!0),A(!0),E(0),N.current=!1,console.log("[AccessibilityContext] Force refreshing auth token for TTS API call");const tt=await((_e=e.getAuthToken)==null?void 0:_e.call(e,!0))||"";if(!tt)throw new Error("Failed to get a valid authentication token after refresh");console.log("[AccessibilityContext] Got refreshed auth token");let Ot=e.cloudTtsVoice||"en-US-Standard-C";Ot.match(/^[a-z]{2,5}-[A-Z]{2,5}-(Standard|Neural|Wavenet|Studio)-[A-Z]$/)||(console.warn("[AccessibilityContext] Invalid voice name format, falling back to default:",Ot),Ot="en-US-Standard-C"),console.log("[AccessibilityContext] Using cloud TTS voice:",Ot);const un=15e3,Lt=new Promise((me,Wt)=>{setTimeout(()=>Wt(new Error("TTS API call timed out")),un)}),qt=await Promise.race([Rw({text:Q,voice_name:Ot,speaking_rate:e.ttsSpeed||1,pitch:e.ttsPitch||0},tt),Lt]);if(console.log("[AccessibilityContext] TTS API call successful, received audio data length:",((qe=qt.audio_data)==null?void 0:qe.length)||0),!qt.audio_data||qt.audio_data.length<100)throw new Error("Received invalid or empty audio data from TTS API");if(N.current){console.log("[AccessibilityContext] TTS was cancelled during API call"),P(!1),A(!1);return}try{console.log("[AccessibilityContext] Creating audio element from base64 data");const me=Nw(qt.audio_data,qt.audio_format||"mp3");k.current=me,me.addEventListener("ended",()=>{console.log("[AccessibilityContext] Audio playback ended"),A(!1),E(0),k.current=null}),me.addEventListener("timeupdate",()=>{if(me.duration&&!isNaN(me.duration)&&me.duration>0&&me.currentTime>=0&&!isNaN(me.currentTime)){const Wt=me.currentTime/me.duration,Mt=Math.max(0,Math.min(1,Wt));console.log(`[AccessibilityContext] Audio progress: ${Math.round(Mt*100)}%`,`(${me.currentTime.toFixed(1)}s / ${me.duration.toFixed(1)}s)`),E(Mt)}else console.warn("[AccessibilityContext] Invalid audio timing values:",{duration:me.duration,currentTime:me.currentTime})}),me.addEventListener("error",Wt=>{console.error("[AccessibilityContext] Audio playback error:",Wt),A(!1),P(!1),E(0)}),me.addEventListener("canplay",()=>{console.log("[AccessibilityContext] Audio can play, initial duration:",me.duration),P(!1)}),me.addEventListener("canplaythrough",()=>{if(console.log("[AccessibilityContext] Audio can play through completely, final duration:",me.duration),me.duration&&!isNaN(me.duration)&&me.duration>0){const Wt=me.currentTime/me.duration;E(Math.max(0,Math.min(1,Wt)))}})}catch(me){throw console.error("[AccessibilityContext] Error setting up audio playback:",me),me}}catch(tt){console.error("[AccessibilityContext] Error using cloud TTS:",tt),De.isAxiosError(tt)&&((at=tt.response)==null?void 0:at.status)===401&&console.error("[AccessibilityContext] TTS API call failed due to authorization (401). Token might be invalid or expired."),console.log("[AccessibilityContext] Falling back to browser TTS due to Cloud TTS error."),L(Q),P(!1),A(!1),E(0),"speechSynthesis"in window&&b&&(console.log("[AccessibilityContext] Falling back to browser TTS due to cloud TTS error"),L(Q))}},pe=async(Q,_e={})=>{var tt;if(!Q||Q.trim()===""){console.log("[AccessibilityContext] Empty text provided to speakLongText, skipping TTS");return}const at=_e.forcePremium||b;if(Q.length<=3e3||!at){R(Q,{isDocumentContent:!0,forcePremium:_e.forcePremium,ignoreDelay:_e.ignoreDelay});return}try{re(),P(!0),A(!0),N.current=!1;const Ot=Q.match(/[^.!?]+[.!?]+/g)||[];let un=[],Lt="";for(const me of Ot)Lt.length+me.length>3e3?(un.push(Lt),Lt=me):Lt+=me;Lt&&un.push(Lt);const qt=await((tt=e.getAuthToken)==null?void 0:tt.call(e))||"";if(!qt)throw new Error("Failed to get authentication token");for(let me=0;me<un.length&&!N.current;me++){const Wt=await Rw({text:un[me],voice_name:e.cloudTtsVoice||"en-US-Neural2-F",speaking_rate:e.ttsSpeed||1,pitch:e.ttsPitch||0},qt),Mt=Nw(Wt.audio_data,Wt.audio_format);if(k.current=Mt,Mt.ontimeupdate=()=>{if(Mt.duration){const Ln=Mt.currentTime/Mt.duration,Jr=(me+Ln)/un.length;E(Jr)}},await new Promise(Ln=>{Mt.onended=()=>{Ln()};const Jr=setInterval(()=>{N.current&&(clearInterval(Jr),Ln())},100)}),N.current)break}P(!1),A(!1),E(0),k.current=null}catch(Ot){console.error("Error processing long text with TTS:",Ot),P(!1),A(!1),"speechSynthesis"in window&&L(Q)}},re=()=>{if(console.log("[AccessibilityContext] Cancelling all speech"),j.current&&(console.log("[AccessibilityContext] Clearing pending TTS timer"),clearTimeout(j.current),j.current=null),"speechSynthesis"in window&&window.speechSynthesis.cancel(),N.current=!0,k.current){try{const Q=k.current;Q.onended=null,Q.ontimeupdate=null,Q.onerror=null,Q.oncanplay=null,Q.pause(),Q.currentTime=0,Q.src="",console.log("[AccessibilityContext] Stopped playing audio")}catch(Q){console.error("[AccessibilityContext] Error stopping audio:",Q)}k.current=null}A(!1),P(!1),E(0)},je=C.useRef(!1);return C.useEffect(()=>{if("speechSynthesis"in window){window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices()};const Q=()=>{if(!je.current)try{console.log("[AccessibilityContext] Initializing speech synthesis after user interaction"),je.current=!0;const _e=new SpeechSynthesisUtterance("");_e.onerror=qe=>{console.log("[AccessibilityContext] Silent utterance error (expected during initialization):",qe)},window.speechSynthesis.speak(_e),setTimeout(()=>{try{window.speechSynthesis.cancel()}catch(qe){console.log("[AccessibilityContext] Error canceling speech:",qe)}},100),console.log("[AccessibilityContext] Speech synthesis initialized successfully")}catch(_e){console.error("[AccessibilityContext] Error initializing speech synthesis:",_e),je.current=!0}finally{document.removeEventListener("click",Q),document.removeEventListener("keydown",Q),document.removeEventListener("touchstart",Q)}};document.addEventListener("click",Q),document.addEventListener("keydown",Q),document.addEventListener("touchstart",Q)}return()=>{"speechSynthesis"in window&&window.speechSynthesis.cancel()}},[]),d.jsx(YS.Provider,{value:{uiTtsEnabled:r,highContrast:s,fontSize:a,fontFamily:c,lineSpacing:f,wordSpacing:g,cloudTtsEnabled:b,ttsDelay:y,toggleUiTts:O,toggleHighContrast:B,toggleCloudTts:D,setFontSize:X,setFontFamily:ve,setLineSpacing:he,setWordSpacing:K,setTtsDelay:te,speakText:R,speakLongText:pe,cancelSpeech:re,isSpeaking:_,ttsLoading:M,audioProgress:S},children:t})},On=()=>{const t=C.useContext(YS);if(t===void 0)throw new Error("useAccessibility must be used within an AccessibilityProvider");return t};var KV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QV=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>C.createElement("svg",{ref:c,...KV,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${GV(t)}`,...l},[...e.map(([h,f])=>C.createElement(h,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var de=QV;const _s=de("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),my=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Gp=de("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),YV=de("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),XV=de("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),xn=de("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Qp=de("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ss=de("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Yp=de("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),JV=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),XS=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),gy=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ZV=de("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),eF=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Jt=de("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ac=de("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),JS=de("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),uo=de("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),tF=de("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),lc=de("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),co=de("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),za=de("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Xp=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Pw=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),yy=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),nF=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ho=de("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ZS=de("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),ad=de("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),rF=de("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Jp=de("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),iF=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Zp=de("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ek=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),sF=de("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]),em=de("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),oF=de("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),aF=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Dw=de("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),lF=de("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),Es=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),tm=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),uF=de("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),cF=de("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),wl=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ze=({text:t,className:e="",isDocumentContent:n=!1,onMouseEnter:r,onMouseLeave:i,ariaLabel:s})=>{const o=C.useRef(!1),{speakText:a,uiTtsEnabled:l,cloudTtsEnabled:c}=On(),h=()=>{l&&(o.current=!0,r&&r(),a(t))},f=()=>{o.current=!1,i&&i()};return d.jsx("span",{className:e,onMouseEnter:h,onMouseLeave:f,"aria-label":s||t,children:t})},dF=()=>{const{speakText:t,uiTtsEnabled:e,toggleUiTts:n,toggleHighContrast:r,highContrast:i}=On(),s=o=>{e&&t(o)};return C.useEffect(()=>{document.documentElement.classList.toggle("high-contrast",i)},[i]),d.jsxs("div",{className:i?"min-h-screen bg-black text-white":"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white",children:[d.jsxs("nav",{className:"w-full py-4 px-6 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(xn,{className:i?"text-white mr-2":"text-blue-400 mr-2",size:24,"aria-hidden":"true"}),d.jsx("span",{className:i?"text-white font-medium text-xl":"text-blue-400 font-medium text-xl",children:"AI Tutor"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("button",{className:`p-2 rounded-full ${i?"bg-white text-black hover:bg-gray-200":"text-gray-300 hover:bg-gray-800"} transition-colors duration-200`,"aria-label":i?"Disable high contrast mode":"Enable high contrast mode","aria-pressed":i,onClick:r,children:[d.jsx(ad,{size:20}),d.jsx("span",{className:"sr-only",children:d.jsx("span",{onMouseEnter:()=>s(i?"Disable high contrast mode":"Enable high contrast mode"),children:i?"Disable high contrast mode":"Enable high contrast mode"})})]}),d.jsx("button",{className:`p-2 rounded-full ${e?i?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700":i?"bg-gray-800 text-white hover:bg-gray-700":"text-gray-300 hover:bg-gray-800"} transition-colors duration-200`,"aria-label":e?"Disable audio support":"Enable audio support","aria-pressed":e,onClick:n,onMouseEnter:()=>s(e?"Disable audio support":"Enable audio support"),children:d.jsx(uo,{size:20})}),d.jsx(Ce,{to:"/auth/signin",className:`${i?"bg-white text-black hover:bg-gray-200":"bg-blue-600 hover:bg-blue-700 text-white"} py-2 px-4 rounded-md transition-colors duration-200`,children:d.jsx(ze,{text:"Sign In",className:"inline-block"})})]})]}),d.jsxs("div",{className:"text-center py-20 px-6 max-w-3xl mx-auto",children:[d.jsx("h1",{className:"text-white text-4xl sm:text-5xl font-bold mb-4 leading-tight",onMouseEnter:()=>s("AI Tutor for Students with Dyslexia"),children:"AI Tutor for Students with Dyslexia"}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} text-lg sm:text-xl leading-relaxed mb-8`,onMouseEnter:()=>s("An accessible learning platform designed to help students with dyslexia learn more effectively through personalized AI assistance."),children:"An accessible learning platform designed to help students with dyslexia learn more effectively through personalized AI assistance."}),d.jsxs(Ce,{to:"/auth/signup",className:`inline-flex items-center ${i?"bg-white text-black hover:bg-gray-200":"bg-blue-600 hover:bg-blue-700 text-white"} py-3 px-8 rounded-md text-lg font-medium transition-all duration-200 transform hover:scale-105`,onMouseEnter:()=>s("Get Started Now - It's Free"),children:["Get Started Now - It's Free",d.jsx(Gp,{className:"ml-2",size:20})]})]}),d.jsxs("div",{className:"w-full max-w-7xl mx-auto px-6 py-16",children:[d.jsx("h2",{className:"text-white text-3xl font-bold text-center mb-12",children:d.jsx(ze,{text:"Features Designed for Accessibility"})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[d.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-8 flex flex-col items-center text-center transition-transform duration-300 hover:transform hover:scale-105`,children:[d.jsx("div",{className:i?"text-white mb-6":"text-blue-400 mb-6",children:d.jsx(xn,{size:48,"aria-hidden":"true"})}),d.jsx("h3",{className:"text-white text-xl font-semibold mb-4",children:d.jsx(ze,{text:"Accessible Learning"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} leading-relaxed`,children:d.jsx(ze,{text:"Customizable text display with dyslexia-friendly options. Integrated text-to-speech for better comprehension."})})]}),d.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-8 flex flex-col items-center text-center transition-transform duration-300 hover:transform hover:scale-105`,children:[d.jsx("div",{className:i?"text-white mb-6":"text-green-400 mb-6",children:d.jsx(Jt,{size:48,"aria-hidden":"true"})}),d.jsx("h3",{className:"text-white text-xl font-semibold mb-4",children:d.jsx(ze,{text:"Document Support"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} leading-relaxed`,children:d.jsx(ze,{text:"Upload any document for instant help. AI breaks down complex content into manageable parts."})})]}),d.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-8 flex flex-col items-center text-center transition-transform duration-300 hover:transform hover:scale-105`,children:[d.jsx("div",{className:i?"text-white mb-6":"text-purple-400 mb-6",children:d.jsx(ho,{size:48,"aria-hidden":"true"})}),d.jsx("h3",{className:"text-white text-xl font-semibold mb-4",children:d.jsx(ze,{text:"AI Conversation"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} leading-relaxed`,children:d.jsx(ze,{text:"Talk naturally with your AI Tutor. Get explanations, summaries, and personalized help."})})]})]})]}),d.jsx("div",{className:`${i?"bg-gray-900":"bg-gray-900/50"} py-16`,children:d.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[d.jsx("h2",{className:"text-white text-3xl font-bold text-center mb-12",children:d.jsx(ze,{text:"How AI Tutor Works"})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[d.jsxs("div",{className:`${i?"bg-black border border-white":"bg-gray-800/70"} rounded-lg p-6 relative`,children:[d.jsx("div",{className:`absolute -top-4 -left-4 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"} font-bold text-lg`,children:"1"}),d.jsx("h3",{className:"text-white text-lg font-semibold mb-3 mt-2",children:d.jsx(ze,{text:"Upload Your Documents"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:d.jsx(ze,{text:"Simply upload any document you're studying - PDF, Word, or even images with text."})})]}),d.jsxs("div",{className:`${i?"bg-black border border-white":"bg-gray-800/70"} rounded-lg p-6 relative`,children:[d.jsx("div",{className:`absolute -top-4 -left-4 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"} font-bold text-lg`,children:"2"}),d.jsx("h3",{className:"text-white text-lg font-semibold mb-3 mt-2",children:d.jsx(ze,{text:"AI Processes Content"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:d.jsx(ze,{text:"Our AI extracts and analyzes text, making it accessible for your learning style."})})]}),d.jsxs("div",{className:`${i?"bg-black border border-white":"bg-gray-800/70"} rounded-lg p-6 relative`,children:[d.jsx("div",{className:`absolute -top-4 -left-4 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"} font-bold text-lg`,children:"3"}),d.jsx("h3",{className:"text-white text-lg font-semibold mb-3 mt-2",children:d.jsx(ze,{text:"Interact and Learn"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:d.jsx(ze,{text:"Ask questions, get summaries, or take quizzes on the material."})})]}),d.jsxs("div",{className:`${i?"bg-black border border-white":"bg-gray-800/70"} rounded-lg p-6 relative`,children:[d.jsx("div",{className:`absolute -top-4 -left-4 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"} font-bold text-lg`,children:"4"}),d.jsx("h3",{className:"text-white text-lg font-semibold mb-3 mt-2",children:d.jsx(ze,{text:"Track Your Progress"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:d.jsx(ze,{text:"Monitor learning achievements with detailed progress tracking."})})]})]})]})}),d.jsxs("div",{className:"w-full max-w-7xl mx-auto px-6 py-16",children:[d.jsx("h2",{className:"text-white text-3xl font-bold text-center mb-12",onMouseEnter:()=>s("Student Success Stories"),children:"Student Success Stories"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-6`,onMouseEnter:()=>s("AI Tutor helped me understand my science textbook better than ever before. The text customization options are perfect for my needs. - Jamie, 15"),children:[d.jsx("div",{className:"flex items-start mb-4",children:d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} italic`,children:'"AI Tutor helped me understand my science textbook better than ever before. The text customization options are perfect for my needs."'})}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-10 h-10 rounded-full ${i?"bg-white text-black":"bg-blue-600 text-white"} flex items-center justify-center font-bold`,children:"J"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-white font-medium",children:"Jamie, 15"}),d.jsx("p",{className:`${i?"text-gray-300":"text-gray-400"} text-sm`,children:"High School Student"})]})]})]}),d.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-6`,onMouseEnter:()=>s("The AI tutor is patient and explains things in different ways until I understand. It's like having a personal teacher 24/7. - Michael, 19"),children:[d.jsx("div",{className:"flex items-start mb-4",children:d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} italic`,children:`"The AI tutor is patient and explains things in different ways until I understand. It's like having a personal teacher 24/7."`})}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-10 h-10 rounded-full ${i?"bg-white text-black":"bg-blue-600 text-white"} flex items-center justify-center font-bold`,children:"M"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-white font-medium",children:"Michael, 19"}),d.jsx("p",{className:`${i?"text-gray-300":"text-gray-400"} text-sm`,children:"College Freshman"})]})]})]}),d.jsxs("div",{className:`${i?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg p-6`,onMouseEnter:()=>s("As a parent, I've seen a remarkable improvement in my daughter's confidence with reading since using AI Tutor. - Sarah, Parent"),children:[d.jsx("div",{className:"flex items-start mb-4",children:d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} italic`,children:`"As a parent, I've seen a remarkable improvement in my daughter's confidence with reading since using AI Tutor."`})}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-10 h-10 rounded-full ${i?"bg-white text-black":"bg-blue-600 text-white"} flex items-center justify-center font-bold`,children:"S"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-white font-medium",children:"Sarah"}),d.jsx("p",{className:`${i?"text-gray-300":"text-gray-400"} text-sm`,children:"Parent"})]})]})]})]})]}),d.jsx("div",{className:`${i?"bg-black":"bg-blue-600/20"} py-16 px-6`,children:d.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[d.jsx("h2",{className:"text-white text-3xl font-bold mb-6",children:"Ready to transform your learning experience?"}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"} text-lg mb-8 max-w-2xl mx-auto`,children:"Join thousands of students who are already benefiting from AI Tutor's personalized learning assistance."}),d.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[d.jsxs(Ce,{to:"/auth/signup",className:`inline-flex items-center justify-center ${i?"bg-white text-black hover:bg-gray-200":"bg-blue-600 hover:bg-blue-700 text-white"} py-3 px-6 rounded-md text-lg font-medium transition-colors duration-200`,onMouseEnter:()=>s("Create Free Account"),children:["Create Free Account",d.jsx(Gp,{className:"ml-2",size:20})]}),d.jsx(Ce,{to:"/auth/signin",className:`inline-flex items-center justify-center ${i?"bg-gray-900 text-white border border-white hover:bg-gray-800":"bg-gray-800 text-white hover:bg-gray-700"} py-3 px-6 rounded-md text-lg font-medium transition-colors duration-200`,onMouseEnter:()=>s("Sign In"),children:"Sign In"})]})]})}),d.jsxs("div",{className:"w-full max-w-7xl mx-auto px-6 py-16",children:[d.jsx("h2",{className:"text-white text-3xl font-bold text-center mb-12",children:"Why Choose AI Tutor?"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"flex items-start text-white",onMouseEnter:()=>s("Designed specifically for students with dyslexia"),children:[d.jsx("div",{className:`flex-shrink-0 ${i?"text-white":"text-green-400"} mr-4`,children:d.jsx(ss,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium mb-2",children:d.jsx(ze,{text:"Designed specifically for students with dyslexia"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:d.jsx(ze,{text:"Every feature is built with dyslexic students in mind, from font choices to color schemes."})})]})]}),d.jsxs("div",{className:"flex items-start text-white",onMouseEnter:()=>s("Personalized learning pace"),children:[d.jsx("div",{className:`flex-shrink-0 ${i?"text-white":"text-green-400"} mr-4`,children:d.jsx(ss,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium mb-2",children:d.jsx(ze,{text:"Personalized learning pace"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:d.jsx(ze,{text:"Move at your own speed without pressure, with an AI tutor that adapts to your needs."})})]})]}),d.jsxs("div",{className:"flex items-start text-white",children:[d.jsx("div",{className:`flex-shrink-0 ${i?"text-white":"text-green-400"} mr-4`,children:d.jsx(ss,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium mb-2",children:d.jsx(ze,{text:"Multi-sensory learning approach"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:d.jsx(ze,{text:"Combines visual, auditory, and interactive elements to strengthen learning and comprehension."})})]})]}),d.jsxs("div",{className:"flex items-start text-white",children:[d.jsx("div",{className:`flex-shrink-0 ${i?"text-white":"text-green-400"} mr-4`,children:d.jsx(ss,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium mb-2",children:d.jsx(ze,{text:"Builds confidence and independence"})}),d.jsx("p",{className:`${i?"text-gray-100":"text-gray-300"}`,children:d.jsx(ze,{text:"Helps students develop self-reliance and confidence in their academic abilities."})})]})]})]})]}),d.jsx("footer",{className:`w-full py-12 px-6 ${i?"bg-gray-900 border-t border-white":"bg-gray-900"}`,children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[d.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[d.jsx(xn,{className:i?"text-white mr-2":"text-blue-400 mr-2",size:24,"aria-hidden":"true"}),d.jsx("span",{className:i?"text-white font-medium text-xl":"text-blue-400 font-medium text-xl",children:"AI Tutor"})]}),d.jsxs("div",{className:"flex space-x-6",children:[d.jsx(Ce,{to:"/about",className:`${i?"text-white hover:text-gray-300":"text-gray-300 hover:text-white"} transition-colors duration-200`,onMouseEnter:()=>s("About"),children:"About"}),d.jsx(Ce,{to:"/privacy",className:`${i?"text-white hover:text-gray-300":"text-gray-300 hover:text-white"} transition-colors duration-200`,onMouseEnter:()=>s("Privacy"),children:"Privacy"}),d.jsx(Ce,{to:"/terms",className:`${i?"text-white hover:text-gray-300":"text-gray-300 hover:text-white"} transition-colors duration-200`,onMouseEnter:()=>s("Terms"),children:"Terms"}),d.jsx(Ce,{to:"/contact",className:`${i?"text-white hover:text-gray-300":"text-gray-300 hover:text-white"} transition-colors duration-200`,onMouseEnter:()=>s("Contact"),children:"Contact"})]})]}),d.jsxs("div",{className:"border-t border-gray-700 pt-8",children:[d.jsx("p",{className:`${i?"text-gray-300":"text-gray-400"} text-center text-sm`,children:"AI Tutor - Helping students with dyslexia learn more effectively"}),d.jsx("p",{className:`${i?"text-gray-400":"text-gray-500"} text-center text-sm mt-1`,children:" 2025. All rights reserved."})]})]})})]})},hF=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(""),[o,a]=C.useState(!1),{signIn:l,signInWithGoogle:c}=wr(),{speakText:h,uiTtsEnabled:f}=On(),m=Qr(),g=T=>{f&&h(T)},w=async T=>{if(T.preventDefault(),!t||!n){s("Please fill in all fields");return}try{s(""),a(!0),await l(t,n),m("/dashboard")}catch(y){s("Failed to sign in. Please check your credentials."),console.error(y)}finally{a(!1)}},b=async()=>{try{s(""),a(!0),await c(),m("/dashboard")}catch(T){s("Failed to sign in with Google."),console.error(T)}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800 px-4 py-12 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-md w-full bg-gray-800/50 rounded-lg shadow-lg p-8",children:[d.jsx("div",{className:"flex justify-center mb-8",children:d.jsx(xn,{className:"h-12 w-12 text-blue-400","aria-hidden":"true"})}),d.jsx("h2",{className:"text-center text-3xl font-extrabold text-white mb-6",onMouseEnter:()=>g("Sign in to AI Tutor"),children:"Sign in to AI Tutor"}),i&&d.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-md p-4 mb-6",role:"alert",onMouseEnter:()=>g(`Error: ${i}`),children:d.jsxs("div",{className:"flex",children:[d.jsx(_s,{className:"h-5 w-5 text-red-400 mr-2","aria-hidden":"true"}),d.jsx("span",{className:"text-red-300",children:i})]})}),d.jsxs("form",{className:"space-y-6",onSubmit:w,children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>g("Email address"),children:"Email address"}),d.jsxs("div",{className:"mt-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(yy,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:T=>e(T.target.value),onFocus:()=>g("Email address field"),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address","aria-required":"true"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>g("Password"),children:"Password"}),d.jsxs("div",{className:"mt-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Xp,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),d.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:T=>r(T.target.value),onFocus:()=>g("Password field"),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Password","aria-required":"true"})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",onFocus:()=>g("Remember me checkbox"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),d.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-300",onMouseEnter:()=>g("Remember me"),children:"Remember me"})]}),d.jsx("div",{className:"text-sm",children:d.jsx(Ce,{to:"/auth/reset-password",className:"font-medium text-blue-400 hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800",onMouseEnter:()=>g("Forgot your password?"),onFocus:()=>g("Forgot your password?"),children:"Forgot your password?"})})]}),d.jsx("div",{children:d.jsxs("button",{type:"submit",disabled:o,onMouseEnter:()=>g(o?"Signing in...":"Sign in"),onFocus:()=>g(o?"Signing in...":"Sign in"),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 font-medium transition-colors duration-200","aria-label":"Sign in to your account",children:[d.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:o?d.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-opacity-60 border-t-transparent rounded-full"}):d.jsx(Gp,{className:"h-5 w-5 text-blue-400 group-hover:text-blue-300","aria-hidden":"true"})}),o?"Signing in...":"Sign in"]})})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-600"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-gray-800 text-gray-400",onMouseEnter:()=>g("Or continue with"),children:"Or continue with"})})]}),d.jsx("div",{className:"mt-6",children:d.jsx("button",{onClick:b,disabled:o,onMouseEnter:()=>g("Sign in with Google"),onFocus:()=>g("Sign in with Google"),className:"w-full flex justify-center py-2 px-4 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-sm font-medium text-white hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-200","aria-label":"Sign in with Google",children:d.jsxs("span",{className:"flex items-center",children:[d.jsx("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.798-1.677-4.202-2.701-6.735-2.701-5.539 0-10.032 4.493-10.032 10.032s4.493 10.032 10.032 10.032c8.445 0 10.154-7.889 9.321-11.731h-9.321z"})}),"Sign in with Google"]})})})]}),d.jsx("div",{className:"mt-8 text-center",children:d.jsxs("p",{className:"text-sm text-gray-400",children:[d.jsxs("span",{onMouseEnter:()=>g("Don't have an account?"),children:["Don't have an account?"," "]}),d.jsx(Ce,{to:"/auth/signup",className:"font-medium text-blue-400 hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500",onMouseEnter:()=>g("Sign up"),onFocus:()=>g("Sign up"),children:"Sign up"})]})})]})})},fF=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(""),[o,a]=C.useState(""),[l,c]=C.useState(""),[h,f]=C.useState(!1),[m,g]=C.useState(!1),{signUp:w}=wr(),{speakText:b,uiTtsEnabled:T}=On(),y=Qr(),x=A=>{T&&b(A)};C.useEffect(()=>{let A;return m&&(console.log("[SignUp] Success detected, scheduling navigation"),A=window.setTimeout(()=>{console.log("[SignUp] Navigation timer fired, redirecting to dashboard"),y("/dashboard")},1500)),()=>{A&&(console.log("[SignUp] Clearing navigation timer"),clearTimeout(A))}},[m,y]),console.log("[SignUp] Render state:",{loading:h,success:m,error:l});const _=async A=>{if(A.preventDefault(),console.log("[SignUp] Form submitted"),!t||!n||!i||!o){c("Please fill in all fields"),console.log("[SignUp] Validation failed: empty fields");return}if(i!==o){c("Passwords do not match"),console.log("[SignUp] Validation failed: passwords mismatch");return}if(i.length<6){c("Password must be at least 6 characters"),console.log("[SignUp] Validation failed: password too short");return}console.log("[SignUp] Validation passed, proceeding with signup"),c(""),f(!0),g(!1);try{console.log("[SignUp] Calling Firebase signUp...");const M=await w(n,i,t);console.log("[SignUp] Firebase signUp returned:",M),M.partial?(console.log("[SignUp] Partial success - user created but Firestore failed"),setTimeout(()=>{c(M.error||"Account created but user profile setup was incomplete."),g(!0),f(!1)},0)):(console.log("[SignUp] Complete success"),setTimeout(()=>{g(!0),f(!1),c("")},0))}catch(M){console.error("[SignUp] Firebase signUp failed:",M);let P="Failed to create an account. Please try again.";M.code==="auth/email-already-in-use"&&(P="An account with this email already exists"),setTimeout(()=>{c(P),g(!1),f(!1),console.log("[SignUp] Error state set")},0)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800 px-4 py-12 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-md w-full bg-gray-800/50 rounded-lg shadow-lg p-8",children:[d.jsx("div",{className:"flex justify-center mb-8",children:d.jsx(xn,{className:"h-12 w-12 text-blue-400","aria-hidden":"true",onMouseEnter:()=>x("AI Tutor logo")})}),d.jsx("h2",{className:"text-center text-3xl font-extrabold text-white mb-6",onMouseEnter:()=>x("Create your account"),children:"Create your account"}),l&&d.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-md p-4 mb-6",role:"alert",children:d.jsxs("div",{className:"flex",children:[d.jsx(_s,{className:"h-5 w-5 text-red-400 mr-2","aria-hidden":"true"}),d.jsx("span",{className:"text-red-300",children:l})]})}),d.jsxs("form",{className:"space-y-6",onSubmit:_,children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>x("Full name"),children:"Full name"}),d.jsxs("div",{className:"mt-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(tm,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),d.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:t,onChange:A=>e(A.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your name","aria-required":"true"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>x("Email address"),children:"Email address"}),d.jsxs("div",{className:"mt-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(yy,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:A=>r(A.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address","aria-required":"true"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>x("Password"),children:"Password"}),d.jsxs("div",{className:"mt-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Xp,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),d.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:i,onChange:A=>s(A.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Password (min. 6 characters)","aria-required":"true"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300",onMouseEnter:()=>x("Confirm password"),children:"Confirm password"}),d.jsxs("div",{className:"mt-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Xp,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),d.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:o,onChange:A=>a(A.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirm password","aria-required":"true"})]})]}),d.jsx("div",{children:d.jsxs("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 font-medium transition-colors duration-200","aria-label":"Create your account",onMouseEnter:()=>x(h?"Creating account...":m?"Account created!":"Sign up"),children:[h&&!m?d.jsx("div",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:d.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-opacity-60 border-t-transparent rounded-full"})}):m?d.jsx("div",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:d.jsx(ss,{className:"h-5 w-5 text-green-400"})}):null,h&&!m?"Creating account...":m?"Account created!":"Sign up"]})})]}),d.jsx("div",{className:"mt-8 text-center",children:d.jsxs("p",{className:"text-sm text-gray-400",onMouseEnter:()=>x("Already have an account?"),children:["Already have an account?"," ",d.jsx(Ce,{to:"/auth/signin",className:"font-medium text-blue-400 hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500",onMouseEnter:()=>x("Sign in"),children:"Sign in"})]})}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("p",{className:"text-xs text-gray-500",onMouseEnter:()=>x("By signing up, you agree to our Terms of Service and Privacy Policy"),children:["By signing up, you agree to our"," ",d.jsx(Ce,{to:"/terms",className:"text-blue-400 hover:text-blue-300",onMouseEnter:()=>x("Terms of Service"),children:"Terms of Service"})," ","and"," ",d.jsx(Ce,{to:"/privacy",className:"text-blue-400 hover:text-blue-300",onMouseEnter:()=>x("Privacy Policy"),children:"Privacy Policy"})]})})]})})},pF=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(""),[o,a]=C.useState(!1),{resetPassword:l}=wr(),c=async h=>{if(h.preventDefault(),!t){r("Please enter your email address");return}try{r(""),s(""),a(!0),await l(t),s("Check your email for password reset instructions")}catch(f){r("Failed to reset password. Please check if the email is correct."),console.error(f)}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800 px-4 py-12 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-md w-full bg-gray-800/50 rounded-lg shadow-lg p-8",children:[d.jsx("div",{className:"flex justify-center mb-8",children:d.jsx(xn,{className:"h-12 w-12 text-blue-400","aria-hidden":"true"})}),d.jsx("h2",{className:"text-center text-3xl font-extrabold text-white mb-6",children:"Reset your password"}),d.jsx("p",{className:"text-center text-gray-300 mb-8",children:"Enter your email address and we'll send you a link to reset your password."}),n&&d.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-md p-4 mb-6",role:"alert",children:d.jsxs("div",{className:"flex",children:[d.jsx(_s,{className:"h-5 w-5 text-red-400 mr-2","aria-hidden":"true"}),d.jsx("span",{className:"text-red-300",children:n})]})}),i&&d.jsx("div",{className:"bg-green-500/20 border border-green-500 rounded-md p-4 mb-6",role:"alert",children:d.jsxs("div",{className:"flex",children:[d.jsx(ss,{className:"h-5 w-5 text-green-400 mr-2","aria-hidden":"true"}),d.jsx("span",{className:"text-green-300",children:i})]})}),d.jsxs("form",{className:"space-y-6",onSubmit:c,children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),d.jsxs("div",{className:"mt-1 relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(yy,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:h=>e(h.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address","aria-required":"true"})]})]}),d.jsx("div",{children:d.jsxs("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 font-medium transition-colors duration-200","aria-label":"Send password reset email",children:[o?d.jsx("div",{className:"mr-2 animate-spin h-5 w-5 border-2 border-white border-opacity-60 border-t-transparent rounded-full"}):null,o?"Sending...":"Reset password"]})})]}),d.jsx("div",{className:"mt-8 text-center",children:d.jsxs(Ce,{to:"/auth/signin",className:"flex items-center justify-center text-sm font-medium text-blue-400 hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx(my,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Back to sign in"]})})]})})},mF=()=>{const{currentUser:t}=wr(),{speakText:e,uiTtsEnabled:n,highContrast:r}=On(),[i,s]=C.useState([]),[o,a]=C.useState(null),[l,c]=C.useState(0),[h,f]=C.useState(!0),[m,g]=C.useState(null),w=y=>{n&&e(y)};C.useEffect(()=>{(async()=>{if(t)try{const x=await t.getIdToken();if(!x)throw new Error("Authentication token not available");const P=((await De.get("http://localhost:5000/api/documents",{headers:{Authorization:`Bearer ${x}`}})).data.data||[]).map(S=>({id:S.id,title:S.name||"Untitled Document",uploadedAt:new Date(S.created_at),lastAccessed:new Date(S.updated_at||S.created_at),pageCount:S.page_count||0,processingStatus:S.processing_status||"completed"})).sort((S,E)=>E.lastAccessed.getTime()-S.lastAccessed.getTime()).slice(0,4);s(P),console.log("Recent documents loaded:",P.length)}catch(x){console.error("Error fetching recent documents:",x)}})()},[t]),C.useEffect(()=>{(async()=>{var x,_,A,M;if(t)try{const P=await t.getIdToken();if(!P)throw new Error("Authentication token not available");const S="http://localhost:5000";console.log("[Dashboard] Fetching user profile data from backend");const E=await De.get(`${S}/api/users/profile`,{headers:{Authorization:`Bearer ${P}`}}).catch(k=>(console.log("[Dashboard] User profile API not available, using Firebase Auth profile instead:",k),{data:null}));if((x=E.data)!=null&&x.data){const k=E.data.data;g({displayName:k.displayName||t.displayName||((_=t.email)==null?void 0:_.split("@")[0])||"Student",uid:k.uid,email:k.email}),console.log("[Dashboard] User profile loaded from backend API")}else g({displayName:t.displayName||((A=t.email)==null?void 0:A.split("@")[0])||"Student",uid:t.uid,email:t.email||""}),console.log("[Dashboard] Using Firebase Auth profile data as fallback")}catch(P){console.error("Error fetching user profile:",P),g({displayName:t.displayName||((M=t.email)==null?void 0:M.split("@")[0])||"Student",uid:t.uid,email:t.email||""})}})()},[t]),C.useEffect(()=>{(async()=>{if(t)try{if(!await t.getIdToken())throw new Error("Authentication token not available");a({date:new Date,studyDuration:120,quizzesTaken:5,questionsAsked:15,documentsRead:i.length||0,wordsMastered:25}),c(3)}catch(x){console.error("Error fetching progress data:",x)}finally{f(!1)}})()},[t,i.length]);const b=y=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(y),T=y=>{const x=Math.floor(y/60),_=y%60;return x>0?`${x}h ${_}m`:`${_}m`};return d.jsxs("div",{className:"pb-12",children:[d.jsxs("div",{className:`mb-8 ${r?"border-b border-white pb-6":"pb-6"}`,children:[d.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",onMouseEnter:()=>w(`Welcome back, ${(m==null?void 0:m.displayName)||"Student"}`),children:["Welcome back, ",(m==null?void 0:m.displayName)||(t==null?void 0:t.displayName)||"Student"]}),d.jsx("p",{className:`${r?"text-gray-200":"text-gray-300"}`,onMouseEnter:()=>w("Continue your learning journey with AI Tutor"),children:"Continue your learning journey with AI Tutor"})]}),d.jsxs("section",{className:"mb-10","aria-labelledby":"quick-actions-heading",children:[d.jsx("h2",{id:"quick-actions-heading",className:"text-xl font-semibold mb-4 text-white",onMouseEnter:()=>w("Quick Actions"),children:"Quick Actions"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[d.jsxs(Ce,{to:"/dashboard/upload",className:`flex flex-col items-center justify-center p-6 rounded-lg ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>w("Upload Document"),children:[d.jsx(Es,{className:`h-10 w-10 mb-3 ${r?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),d.jsx("span",{className:"text-lg font-medium text-white",children:"Upload Document"})]}),d.jsxs(Ce,{to:"/dashboard/study",className:`flex flex-col items-center justify-center p-6 rounded-lg ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>w("Start Studying"),children:[d.jsx(xn,{className:`h-10 w-10 mb-3 ${r?"text-white":"text-green-400"}`,"aria-hidden":"true"}),d.jsx("span",{className:"text-lg font-medium text-white",children:"Start Studying"})]}),d.jsxs(Ce,{to:"/dashboard/chat",className:`flex flex-col items-center justify-center p-6 rounded-lg ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>w("Chat with AI Tutor"),children:[d.jsx(ho,{className:`h-10 w-10 mb-3 ${r?"text-white":"text-purple-400"}`,"aria-hidden":"true"}),d.jsx("span",{className:"text-lg font-medium text-white",children:"Chat with AI Tutor"})]}),d.jsxs(Ce,{to:"/dashboard/progress",className:`flex flex-col items-center justify-center p-6 rounded-lg ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>w("View Progress"),children:[d.jsx(Dw,{className:`h-10 w-10 mb-3 ${r?"text-white":"text-yellow-400"}`,"aria-hidden":"true"}),d.jsx("span",{className:"text-lg font-medium text-white",children:"View Progress"})]})]})]}),d.jsxs("section",{className:"mb-10","aria-labelledby":"recent-documents-heading",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{id:"recent-documents-heading",className:"text-xl font-semibold text-white",onMouseEnter:()=>w("Recent Documents"),children:"Recent Documents"}),d.jsxs(Ce,{to:"/dashboard/documents",className:`flex items-center text-sm font-medium ${r?"text-white hover:underline":"text-blue-400 hover:text-blue-300"}`,onMouseEnter:()=>w("View all documents"),children:["View all",d.jsx(XS,{className:"h-4 w-4 ml-1","aria-hidden":"true"})]})]}),h?d.jsx("div",{className:`rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"} p-6 flex justify-center`,children:d.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-t-transparent rounded-full border-white"})}):i.length>0?d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map(y=>d.jsxs(Ce,{to:`/dashboard/documents/${y.id}`,className:`block rounded-lg p-5 ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>w(y.title),children:[d.jsxs("div",{className:"flex items-start mb-3",children:[d.jsx(Jt,{className:`h-6 w-6 mr-2 flex-shrink-0 ${r?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),d.jsx("h3",{className:"text-base font-medium truncate text-white",children:y.title})]}),d.jsxs("div",{className:`flex items-center text-xs ${r?"text-gray-200":"text-gray-400"}`,children:[d.jsx(Qp,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),d.jsxs("span",{children:["Last accessed: ",b(y.lastAccessed)]})]}),d.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[d.jsxs("span",{className:`text-xs ${r?"text-gray-200":"text-gray-400"}`,children:[y.pageCount," ",y.pageCount===1?"page":"pages"]}),y.processingStatus==="pending"&&d.jsx("span",{className:"text-xs bg-yellow-700/30 text-yellow-300 px-2 py-1 rounded",children:"Processing"}),y.processingStatus==="completed"&&d.jsx("span",{className:"text-xs bg-green-700/30 text-green-300 px-2 py-1 rounded",children:"Ready"}),y.processingStatus==="error"&&d.jsx("span",{className:"text-xs bg-red-700/30 text-red-300 px-2 py-1 rounded",children:"Error"})]})]},y.id))}):d.jsxs("div",{className:`rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"} p-8 text-center`,children:[d.jsx("p",{className:`mb-4 ${r?"text-white":"text-gray-300"}`,children:"You haven't uploaded any documents yet."}),d.jsxs(Ce,{to:"/dashboard/upload",className:`inline-flex items-center px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} font-medium transition-colors duration-200`,onMouseEnter:()=>w("Upload your first document"),children:[d.jsx(Es,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload your first document"]})]})]}),d.jsxs("section",{"aria-labelledby":"progress-summary-heading",children:[d.jsx("h2",{id:"progress-summary-heading",className:"text-xl font-semibold mb-4 text-white",onMouseEnter:()=>w("Your Progress"),children:"Your Progress"}),h?d.jsx("div",{className:`rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"} p-6 flex justify-center`,children:d.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-t-transparent rounded-full border-white"})}):o?d.jsxs("div",{children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[d.jsxs("div",{className:`rounded-lg p-5 ${r?"bg-gray-900 border border-white":"bg-gray-800/50"}`,onMouseEnter:()=>w(`Total study time: ${T(o.studyDuration)}`),children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("span",{className:`text-sm ${r?"text-gray-200":"text-gray-400"}`,children:"Study time"}),d.jsx(gy,{className:`h-5 w-5 ${r?"text-white":"text-blue-400"}`,"aria-hidden":"true"})]}),d.jsx("p",{className:"text-2xl font-bold text-white",children:T(o.studyDuration)})]}),d.jsxs("div",{className:`rounded-lg p-5 ${r?"bg-gray-900 border border-white":"bg-gray-800/50"}`,onMouseEnter:()=>w(`Documents read: ${o.documentsRead}`),children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("span",{className:`text-sm ${r?"text-gray-200":"text-gray-400"}`,children:"Documents read"}),d.jsx(Jt,{className:`h-5 w-5 ${r?"text-white":"text-green-400"}`,"aria-hidden":"true"})]}),d.jsx("p",{className:"text-2xl font-bold text-white",children:o.documentsRead})]}),d.jsxs("div",{className:`rounded-lg p-5 ${r?"bg-gray-900 border border-white":"bg-gray-800/50"}`,onMouseEnter:()=>w(`Quizzes taken: ${o.quizzesTaken}`),children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("span",{className:`text-sm ${r?"text-gray-200":"text-gray-400"}`,children:"Quizzes taken"}),d.jsx(xn,{className:`h-5 w-5 ${r?"text-white":"text-purple-400"}`,"aria-hidden":"true"})]}),d.jsx("p",{className:"text-2xl font-bold text-white",children:o.quizzesTaken})]}),d.jsxs("div",{className:`rounded-lg p-5 ${r?"bg-gray-900 border border-white":"bg-gray-800/50"}`,onMouseEnter:()=>w(`${l} day streak`),children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("span",{className:`text-sm ${r?"text-gray-200":"text-gray-400"}`,children:"Current streak"}),d.jsx(Dw,{className:`h-5 w-5 ${r?"text-white":"text-yellow-400"}`,"aria-hidden":"true"})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[l," ",l===1?"day":"days"]})]})]}),d.jsx(Ce,{to:"/dashboard/progress",className:`block w-full py-3 rounded-lg text-center ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} font-medium transition-colors duration-200`,onMouseEnter:()=>w("View detailed progress"),children:"View detailed progress"})]}):d.jsxs("div",{className:`rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"} p-8 text-center`,children:[d.jsx("p",{className:`mb-4 ${r?"text-white":"text-gray-300"}`,children:"Start studying to see your progress."}),d.jsxs(Ce,{to:"/dashboard/study",className:`inline-flex items-center px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} font-medium transition-colors duration-200`,onMouseEnter:()=>w("Start studying now"),children:[d.jsx(xn,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Start studying now"]})]})]})]})},gF=["application/pdf","image/png","image/jpeg","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],yF={"application/pdf":d.jsx(Jt,{className:"text-red-400"}),"image/png":d.jsx(ac,{className:"text-blue-400"}),"image/jpeg":d.jsx(ac,{className:"text-blue-400"}),"text/plain":d.jsx(ac,{className:"text-gray-400"}),"application/msword":d.jsx(Jt,{className:"text-blue-400"}),"application/vnd.openxmlformats-officedocument.wordprocessingml.document":d.jsx(Jt,{className:"text-blue-400"})},vF={"application/pdf":"PDF Document","image/png":"PNG Image","image/jpeg":"JPEG Image","text/plain":"Text File","application/msword":"Word Document","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word Document"},xF=15*1024*1024,wF=()=>{const{currentUser:t}=wr(),{speakText:e,uiTtsEnabled:n,highContrast:r}=On(),[i,s]=C.useState([]),[o,a]=C.useState(""),[l,c]=C.useState(!1),[h,f]=C.useState(0),[m,g]=C.useState(!1),[w,b]=C.useState(""),T=C.useRef(null),y=Qr(),x=O=>{n&&e(O)},_=C.useCallback(O=>{if(O.length===0)return;const D=O[0];if(!gF.includes(D.type)){a("File type not supported. Please upload a PDF, image, or document file.");return}if(D.size>xF){a("File is too large. Maximum file size is 15MB.");return}a("");const B=D.name.split(".").slice(0,-1).join(".");if(b(B),s([D]),D.type.startsWith("image/")){const X=Object.assign(D,{preview:URL.createObjectURL(D)});s([X])}},[]),A=O=>{O.preventDefault(),O.stopPropagation()},M=O=>{O.preventDefault(),O.stopPropagation()},P=O=>{O.preventDefault(),O.stopPropagation()},S=O=>{O.preventDefault(),O.stopPropagation(),O.dataTransfer.files&&O.dataTransfer.files.length>0&&_(Array.from(O.dataTransfer.files))},E=()=>{T.current&&T.current.click()},k=O=>{O.target.files&&O.target.files.length>0&&_(Array.from(O.target.files))},N=()=>{s([]),b(""),T.current&&(T.current.value="")},j=async()=>{if(i.length===0){a("Please select a file to upload");return}if(!w.trim()){a("Please enter a document name");return}c(!0),f(0),a("");const O=new FormData;O.append("file",i[0]),O.append("name",w);try{const B="http://localhost:5000/api/documents/upload";console.log("Attempting to POST to URL:",B);const X=await(t==null?void 0:t.getIdToken());if(!X)throw new Error("Authentication token not available");const ve=await De.post(B,O,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${X}`},onUploadProgress:he=>{const K=Math.round(he.loaded*100/(he.total||100));f(K)}});g(!0),setTimeout(()=>{y(`/dashboard/documents/${ve.data.document.id}`)},1500)}catch(D){console.error("Error uploading document:",D),a("Failed to upload document. Please try again.")}finally{c(!1)}};return d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6 text-white",onMouseEnter:()=>x("Upload Document"),children:"Upload Document"}),d.jsx("div",{className:`mb-6 p-4 rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/60"}`,children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(tF,{className:`mr-3 h-5 w-5 flex-shrink-0 ${r?"text-white":"text-blue-400"}`}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium text-white mb-2",children:"Document Processing with AI Tutor"}),d.jsxs("ul",{className:`list-disc list-inside space-y-1 ${r?"text-gray-200":"text-gray-300"}`,children:[d.jsx("li",{children:"Upload any document: PDF, image with text, Word document, or text file"}),d.jsx("li",{children:"AI Tutor will process the text content, making it accessible for your learning"}),d.jsx("li",{children:"Once processed, you can read, get summaries, and ask questions about the material"}),d.jsx("li",{children:"Maximum file size: 15MB"})]})]})]})}),o&&d.jsx("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/50 rounded-lg",role:"alert","aria-live":"assertive",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(_s,{className:`h-5 w-5 ${r?"text-white":"text-red-400"} mr-2`,"aria-hidden":"true"}),d.jsx("p",{className:`${r?"text-white":"text-red-300"}`,children:o})]})}),m?d.jsxs("div",{className:"flex flex-col items-center justify-center p-10 text-center",children:[d.jsx(ss,{className:`h-16 w-16 mb-4 ${r?"text-white":"text-green-500"}`,"aria-hidden":"true"}),d.jsx("h2",{className:"text-xl font-bold mb-2 text-white",children:"Upload Successful!"}),d.jsx("p",{className:`mb-6 ${r?"text-gray-200":"text-gray-300"}`,children:"Your document is being processed. You'll be redirected shortly..."})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`mb-6 border-2 border-dashed rounded-lg p-10 text-center ${r?"border-white hover:border-gray-300 bg-gray-900":"border-gray-600 hover:border-blue-500 bg-gray-800/30"} transition-colors duration-200 cursor-pointer`,onDragOver:A,onDragEnter:M,onDragLeave:P,onDrop:S,onClick:E,onMouseEnter:()=>x("Drag and drop your file here, or click to browse"),role:"button","aria-label":"Upload document area",tabIndex:0,children:[d.jsx("input",{ref:T,type:"file",className:"hidden",accept:".pdf,.png,.jpg,.jpeg,.txt,.doc,.docx",onChange:k,"aria-hidden":"true"}),i.length===0?d.jsxs("div",{className:"space-y-3",children:[d.jsx(Es,{className:`mx-auto h-12 w-12 ${r?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),d.jsx("h3",{className:"text-lg font-medium text-white",children:"Drag and drop your file here"}),d.jsxs("p",{className:`${r?"text-gray-300":"text-gray-400"}`,children:["or ",d.jsx("span",{className:`${r?"text-white underline":"text-blue-400"}`,children:"browse"})," to upload"]}),d.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"Supported formats: PDF, PNG, JPG, TXT, DOC, DOCX"})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"flex justify-center",children:i[0].type.startsWith("image/")&&i[0].preview?d.jsx("img",{src:i[0].preview,alt:"Document preview",className:"h-32 object-contain rounded border border-gray-700"}):d.jsx("div",{className:`h-16 w-16 flex items-center justify-center rounded-full ${r?"bg-white":"bg-gray-700"}`,children:yF[i[0].type]||d.jsx(ac,{className:r?"text-black":"text-gray-300"})})}),d.jsx("h3",{className:"text-lg font-medium text-white",children:i[0].name}),d.jsxs("p",{className:`text-sm ${r?"text-gray-300":"text-gray-400"}`,children:[vF[i[0].type]||"Document","  ",(i[0].size/1024/1024).toFixed(2)," MB"]}),d.jsxs("button",{type:"button",onClick:O=>{O.stopPropagation(),N()},className:`inline-flex items-center px-3 py-1 rounded ${r?"bg-white text-black hover:bg-gray-200":"bg-gray-700 text-gray-200 hover:bg-gray-600"} text-sm transition-colors duration-200`,"aria-label":"Remove file",onMouseEnter:()=>x("Remove file"),children:[d.jsx(wl,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Remove"]})]})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("label",{htmlFor:"document-name",className:`block text-sm font-medium mb-2 ${r?"text-white":"text-gray-300"}`,children:"Document Name"}),d.jsx("input",{type:"text",id:"document-name",value:w,onChange:O=>b(O.target.value),className:`block w-full px-4 py-3 rounded-md ${r?"bg-gray-900 text-white border border-white focus:border-blue-500":"bg-gray-700 text-white border border-gray-600 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Enter a name for your document","aria-required":"true",disabled:l}),d.jsx("p",{className:`mt-1 text-sm ${r?"text-gray-300":"text-gray-400"}`,children:"This name will help you identify the document later"})]}),l&&d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex justify-between mb-1",children:[d.jsx("span",{className:`text-sm ${r?"text-white":"text-gray-300"}`,children:"Uploading..."}),d.jsxs("span",{className:`text-sm ${r?"text-white":"text-gray-300"}`,children:[h,"%"]})]}),d.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full ${r?"bg-white":"bg-blue-500"} transition-all duration-300 ease-in-out`,style:{width:`${h}%`},role:"progressbar","aria-valuenow":h,"aria-valuemin":0,"aria-valuemax":100})})]}),d.jsxs("div",{className:"flex justify-end space-x-4",children:[d.jsx("button",{type:"button",onClick:()=>y("/dashboard"),className:`px-4 py-2 rounded-md ${r?"bg-gray-900 text-white border border-white hover:bg-gray-800":"bg-gray-700 text-white hover:bg-gray-600"} font-medium transition-colors duration-200`,disabled:l,onMouseEnter:()=>x("Cancel"),children:"Cancel"}),d.jsx("button",{type:"button",onClick:j,disabled:l||i.length===0,className:`px-6 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200 disabled:bg-gray-500 disabled:text-gray-800":"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-500/50 disabled:text-gray-300"} font-medium transition-colors duration-200 flex items-center`,onMouseEnter:()=>x(l?"Uploading...":"Upload Document"),children:l?d.jsxs(d.Fragment,{children:[d.jsx(za,{className:"animate-spin h-5 w-5 mr-2","aria-hidden":"true"}),"Uploading..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Es,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"Upload Document"]})})]})]})]})},tk=C.createContext(void 0),_F=({children:t})=>{const[e,n]=C.useState(null),r=C.useMemo(()=>({activeDocumentId:e,setActiveDocumentId:n}),[e]);return d.jsx(tk.Provider,{value:r,children:t})},nk=()=>{const t=C.useContext(tk);if(t===void 0)throw new Error("useDocument must be used within a DocumentProvider");return t},EF=({text:t,className:e="",preferPremiumTts:n=!0,onMouseEnter:r,onMouseLeave:i,nodeType:s="paragraph"})=>{const o=C.useRef(!1),{speakText:a,speakLongText:l,uiTtsEnabled:c,cloudTtsEnabled:h}=On(),f=()=>{if(!c)return;o.current=!0,r&&r();const w=t.length>100;n&&h&&w?l(t):a(t)},m=()=>{o.current=!1,i&&i()},g=s==="heading"?"h3":s==="list-item"?"li":"div";return d.jsx(g,{className:e,children:d.jsx("span",{className:"speakable-content cursor-default",onMouseEnter:f,onMouseLeave:m,"aria-label":t,children:t})})},bF=()=>{const{id:t}=TR(),{currentUser:e}=wr(),{speakText:n,speakLongText:r,cloudTtsEnabled:i,uiTtsEnabled:s,highContrast:o,toggleUiTts:a,toggleCloudTts:l,cancelSpeech:c,isSpeaking:h,ttsLoading:f,audioProgress:m}=On(),[g,w]=C.useState(null),[b,T]=C.useState(!0),[y,x]=C.useState(""),[_,A]=C.useState("read"),[M,P]=C.useState(16),[S,E]=C.useState(1.5),[k]=C.useState(0),[N]=C.useState("Open Sans"),[j]=C.useState(!1),[O,D]=C.useState(0),[B,X]=C.useState(!1),ve=Qr(),he=Jn(),{setActiveDocumentId:K}=nk(),te=pe=>{s&&n(pe)};C.useEffect(()=>{(async()=>{if(!(!e||!t))try{T(!0);const re=await e.getIdToken();if(!re)throw new Error("Authentication token not available");const Q=await De.get(`http://localhost:5000/api/documents/${t}?include_content=true`,{headers:{Authorization:`Bearer ${re}`}});w(Q.data)}catch(re){console.error("Error fetching document:",re),x("Failed to load document. Please try again.")}finally{T(!1)}})()},[e,t]),C.useEffect(()=>{t&&K(t)},[t,K]),C.useEffect(()=>{const re=new URLSearchParams(he.search).get("tab");re==="quiz"?A("quiz"):re==="chat"?A("chat"):_!=="chat"&&_!=="quiz"&&A("read")},[he.search]);const R=async()=>{if(!(!e||!t))try{const pe=await e.getIdToken();if(!pe)throw new Error("Authentication token not available");const je=`http://localhost:5000/api/documents/${t}/download`;window.open(`${je}?token=${pe}`,"_blank")}catch(pe){console.error("Error downloading document:",pe),x("Failed to download document. Please try again.")}},J=()=>{if(console.log("[DocumentView] Toggle read aloud, current state:",B),console.log("[DocumentView] Cloud TTS enabled:",i),console.log("[DocumentView] TTS loading state:",f),f){console.log("[DocumentView] Ignoring read aloud toggle during loading");return}if(B)c(),X(!1);else if(g!=null&&g.full_content){const pe=g.full_content.substring(O);console.log("[DocumentView] Starting text-to-speech with",i?"cloud TTS":"browser TTS","text length:",pe.length),i?(console.log("[DocumentView] Using speakLongText for Cloud TTS"),r(pe)):(console.log("[DocumentView] Using speakText for Browser TTS"),n(pe)),X(!0)}};C.useEffect(()=>{X(h)},[h]);const ne=pe=>{const re=pe.currentTarget,je=re.scrollTop/(re.scrollHeight-re.clientHeight);if(g!=null&&g.full_content){const Q=Math.floor(g.full_content.length*je);D(Q)}},L=pe=>{const re=new Date(pe);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(re)},Fe=()=>{if(b)return d.jsxs("div",{className:"flex flex-col items-center justify-center p-16",children:[d.jsx(za,{className:`h-12 w-12 animate-spin mb-4 ${o?"text-white":"text-blue-400"}`}),d.jsx("p",{className:`text-lg ${o?"text-white":"text-gray-300"}`,children:"Loading document..."})]});if(y)return d.jsxs("div",{className:"flex flex-col items-center justify-center p-16",children:[d.jsx(_s,{className:`h-12 w-12 mb-4 ${o?"text-white":"text-red-400"}`}),d.jsx("p",{className:`text-lg mb-2 ${o?"text-white":"text-gray-300"}`,children:y}),d.jsx("button",{onClick:()=>ve("/dashboard"),className:`px-4 py-2 mt-4 rounded-md ${o?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors duration-200`,children:"Return to Dashboard"})]});if(!g)return d.jsxs("div",{className:"flex flex-col items-center justify-center p-16",children:[d.jsx(_s,{className:`h-12 w-12 mb-4 ${o?"text-white":"text-yellow-400"}`}),d.jsx("p",{className:`text-lg ${o?"text-white":"text-gray-300"}`,children:"Document not found"})]});switch(_){case"read":return d.jsxs("div",{className:`p-6 ${o?"bg-black":"bg-gray-900"} rounded-md`,style:{overflowY:"auto",height:"calc(100vh - 240px)",lineHeight:`${S}`,fontSize:`${M}px`},onScroll:ne,children:[(B||f)&&i&&d.jsx("div",{className:"fixed top-20 left-0 right-0 mx-auto max-w-screen-lg px-4 z-50",children:d.jsxs("div",{className:"bg-gray-800 rounded-md p-2 shadow-lg border border-gray-700",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("span",{className:"text-xs text-gray-300 font-medium flex items-center",children:f?d.jsxs(d.Fragment,{children:[d.jsx(za,{className:"h-3 w-3 mr-1 animate-spin"}),d.jsx("span",{children:"Preparing audio..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(Jp,{className:"h-3 w-3 mr-1"}),d.jsx("span",{children:"Reading document"})]})}),d.jsxs("span",{className:"text-xs text-gray-400",children:[Math.round(m*100),"% complete"]})]}),d.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full transition-all duration-300 ease-in-out ${f?"bg-gray-500 animate-pulse":"bg-blue-500"}`,style:{width:f?"100%":`${m*100}%`}})})]})}),d.jsx("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow font-dyslexic",children:g.content.split(`
`).map((pe,re)=>d.jsx("div",{className:`mb-4 ${M===1?"text-sm":M===2?"text-base":M===3?"text-lg":M===4?"text-xl":"text-2xl"} ${S===1?"leading-normal":S===2?"leading-relaxed":"leading-loose"} ${o?"text-white":"text-gray-900 dark:text-gray-100"}`,style:{wordSpacing:`${k*.25}rem`,fontFamily:N},children:pe?d.jsx(EF,{text:pe,nodeType:"paragraph",preferPremiumTts:i}):""},re))})]});case"chat":return d.jsxs("div",{className:"p-6 h-full flex flex-col items-center justify-center",children:[d.jsx(ho,{className:`h-16 w-16 mb-4 ${o?"text-white":"text-blue-400"}`}),d.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"Ask Questions About This Document"}),d.jsx("p",{className:`text-center max-w-lg mb-6 ${o?"text-gray-200":"text-gray-300"}`,children:"Chat with AI Tutor about this document. Ask questions, get summaries, or request explanations of difficult concepts."}),d.jsxs("button",{className:`px-6 py-3 rounded-md ${o?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} font-medium transition-colors duration-200 flex items-center`,onClick:()=>ve(`/dashboard/chat?document=${t}`),children:[d.jsx(ho,{className:"h-5 w-5 mr-2"}),"Start Chat About This Document"]})]});case"quiz":return d.jsxs("div",{className:"p-6 h-full flex flex-col items-center justify-center",children:[d.jsx(lc,{className:`h-16 w-16 mb-4 ${o?"text-white":"text-green-400"}`}),d.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"Test Your Knowledge"}),d.jsx("p",{className:`text-center max-w-lg mb-6 ${o?"text-gray-200":"text-gray-300"}`,children:"AI Tutor can generate quizzes based on this document to help you test your understanding of the material."}),d.jsxs("button",{className:`px-6 py-3 rounded-md ${o?"bg-white text-black hover:bg-gray-200":"bg-green-600 text-white hover:bg-green-700"} font-medium transition-colors duration-200 flex items-center`,onClick:()=>ve(`/dashboard/chat?document=${t}&start_quiz=true`),children:[d.jsx(lc,{className:"h-5 w-5 mr-2"}),"Generate Quiz"]})]});default:return null}};return d.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[d.jsx("button",{onClick:()=>ve("/dashboard"),className:`p-2 rounded-full mr-3 ${o?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-800 text-gray-300 hover:bg-gray-700"} transition-colors duration-200`,"aria-label":"Back to dashboard",onMouseEnter:()=>te("Back to dashboard"),children:d.jsx(JV,{className:"h-5 w-5"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-white",onMouseEnter:()=>te((g==null?void 0:g.name)||"Document"),children:(g==null?void 0:g.name)||"Document"}),g&&d.jsxs("p",{className:`text-sm ${o?"text-gray-300":"text-gray-400"}`,children:["Uploaded on ",L(g.created_at),"  ",g.file_type.toUpperCase()]})]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("button",{onClick:R,className:`p-2 rounded-md ${o?"bg-gray-900 text-white hover:bg-gray-800 border border-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"} transition-colors duration-200 flex items-center`,"aria-label":"Download original document",onMouseEnter:()=>te("Download original document"),children:[d.jsx(eF,{className:"h-5 w-5 mr-1"}),d.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),d.jsx("button",{onClick:J,className:`ml-4 px-3 py-1 rounded-md transition-colors duration-200 flex items-center ${B?"bg-red-600 hover:bg-red-700":f?"bg-gray-500 cursor-wait":o?"bg-white text-black hover:bg-gray-200":"bg-blue-600 hover:bg-blue-700"}`,title:B?"Stop reading":f?"Preparing audio...":"Read aloud",disabled:f,children:B?d.jsxs(d.Fragment,{children:[d.jsx(sF,{className:"h-4 w-4 mr-1"}),d.jsx("span",{children:"Stop"})]}):f?d.jsxs(d.Fragment,{children:[d.jsx(za,{className:"h-4 w-4 mr-1 animate-spin"}),d.jsx("span",{children:"Loading..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(Jp,{className:"h-4 w-4 mr-1"}),d.jsx("span",{children:"Read Aloud"})]})}),d.jsxs("button",{onClick:l,className:`ml-2 px-2 py-1 rounded-md transition-colors duration-200 flex items-center text-xs ${i?o?"bg-white text-black":"bg-green-600 text-white":o?"bg-gray-700 text-white":"bg-gray-700 text-gray-300"}`,title:i?"Using Google Cloud premium voices":"Using browser standard voices",disabled:B||f,children:[d.jsx(ZV,{className:`h-3 w-3 ${i?"text-white":"text-gray-400"}`}),d.jsx("span",{className:"ml-1",children:i?"Premium":"Standard"})]})]})]}),j&&d.jsxs("div",{className:`mb-6 p-4 rounded-lg ${o?"bg-gray-900 border border-white":"bg-gray-800"}`,children:[d.jsx("h2",{className:"text-lg font-semibold mb-3 text-white",children:"Reading Settings"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"font-size",className:`block text-sm font-medium mb-1 ${o?"text-white":"text-gray-300"}`,children:["Font Size: ",M,"px"]}),d.jsx("input",{id:"font-size",type:"range",min:"12",max:"28",step:"1",value:M,onChange:pe=>P(Number(pe.target.value)),className:"w-full"})]}),d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"line-spacing",className:`block text-sm font-medium mb-1 ${o?"text-white":"text-gray-300"}`,children:["Line Spacing: ",S]}),d.jsx("input",{id:"line-spacing",type:"range",min:"1",max:"3",step:"0.1",value:S,onChange:pe=>E(Number(pe.target.value)),className:"w-full"})]}),d.jsx("div",{className:"flex items-center",children:d.jsxs("button",{onClick:a,className:`flex items-center px-4 py-2 rounded-md ${s?o?"bg-white text-black":"bg-blue-600 text-white":o?"bg-gray-900 text-white border border-white":"bg-gray-700 text-gray-300"} transition-colors duration-200`,children:[d.jsx(xn,{className:"h-5 w-5 mr-2"}),s?"Text-to-Speech: On":"Text-to-Speech: Off"]})})]})]}),d.jsx("div",{className:"mb-6 border-b border-gray-700",children:d.jsxs("nav",{className:"flex space-x-8","aria-label":"Document navigation",children:[d.jsxs("button",{className:`py-3 px-1 relative ${_==="read"?o?"text-white":"text-blue-400 border-b-2 border-blue-400":o?"text-gray-300 hover:text-white":"text-gray-400 hover:text-white"}`,onClick:()=>A("read"),onMouseEnter:()=>te("Read document content"),"aria-current":_==="read"?"page":void 0,children:[d.jsx(Jt,{className:"h-5 w-5 mr-2 inline-block"}),"Read document"]}),d.jsxs("button",{className:`py-3 px-1 relative ${_==="chat"?o?"text-white":"text-blue-400 border-b-2 border-blue-400":o?"text-gray-300 hover:text-white":"text-gray-400 hover:text-white"}`,onClick:()=>A("chat"),onMouseEnter:()=>te("Chat with the document"),"aria-current":_==="chat"?"page":void 0,children:[d.jsx(ho,{className:"h-5 w-5 mr-2 inline-block"}),"Chat with the document"]}),d.jsxs("button",{className:`py-3 px-1 relative ${_==="quiz"?o?"text-white":"text-blue-400 border-b-2 border-blue-400":o?"text-gray-300 hover:text-white":"text-gray-400 hover:text-white"}`,onClick:()=>A("quiz"),onMouseEnter:()=>te("Test your knowledge with a quiz"),"aria-current":_==="quiz"?"page":void 0,children:[d.jsx(lc,{className:"h-5 w-5 mr-2 inline-block"}),"Quiz"]})]})}),d.jsx("div",{className:`${o?"bg-gray-900 border border-white":"bg-gray-800/50"} rounded-lg overflow-hidden`,children:Fe()})]})},TF=()=>{var D;const{currentUser:t}=wr(),{speakText:e,uiTtsEnabled:n,highContrast:r}=On(),[i,s]=C.useState([]),[o,a]=C.useState(!0),[l,c]=C.useState(""),[h,f]=C.useState(""),[m,g]=C.useState("date"),[w,b]=C.useState("desc"),[T,y]=C.useState(!1),[x,_]=C.useState(null),A=B=>{n&&e(B)};C.useEffect(()=>{(async()=>{if(t)try{a(!0);const X=await t.getIdToken();if(!X)throw new Error("Authentication token not available");const he=await De.get("http://localhost:5000/api/documents",{headers:{Authorization:`Bearer ${X}`}});s(he.data||[])}catch(X){console.error("Error fetching documents:",X),c("Failed to load documents. Please try again.")}finally{a(!1)}})()},[t]);const P=[...i.filter(B=>B.name.toLowerCase().includes(h.toLowerCase())||B.original_filename.toLowerCase().includes(h.toLowerCase()))].sort((B,X)=>{if(m==="date"){const ve=new Date(w==="asc"?B.created_at:X.created_at).getTime(),he=new Date(w==="asc"?X.created_at:B.created_at).getTime();return ve-he}else return m==="name"?w==="asc"?B.name.localeCompare(X.name):X.name.localeCompare(B.name):w==="asc"?B.file_type.localeCompare(X.file_type):X.file_type.localeCompare(B.file_type)}),S=B=>{const X=new Date(B);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(X)},E=B=>{switch(B.toLowerCase()){case"pdf":return d.jsx(Jt,{className:r?"text-white":"text-red-400"});case"png":case"jpg":case"jpeg":return d.jsx(Jt,{className:r?"text-white":"text-blue-400"});case"txt":return d.jsx(Jt,{className:r?"text-white":"text-gray-400"});case"doc":case"docx":return d.jsx(Jt,{className:r?"text-white":"text-blue-500"});default:return d.jsx(Jt,{className:r?"text-white":"text-gray-400"})}},k=B=>{n&&e("Delete document. Confirm action."),_(B),y(!0)},N=async()=>{if(!(!x||!t))try{const B=await t.getIdToken();if(!B)throw new Error("Authentication token not available");await De.delete(`http://localhost:5000/api/documents/${x}`,{headers:{Authorization:`Bearer ${B}`}}),s(ve=>ve.filter(he=>he.id!==x)),n&&e("Document deleted successfully.")}catch(B){console.error("Error deleting document:",B),c("Failed to delete document. Please try again."),n&&e("Failed to delete document.")}finally{y(!1),_(null)}},j=()=>{y(!1),_(null),n&&e("Deletion cancelled.")},O=B=>{m===B?b(w==="asc"?"desc":"asc"):(g(B),b(B==="date"?"desc":"asc"))};return d.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-white",onMouseEnter:()=>A("My Documents"),children:"My Documents"}),d.jsxs(Ce,{to:"/dashboard/upload",className:`flex items-center px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors duration-200`,onMouseEnter:()=>A("Upload New Document"),children:[d.jsx(Es,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload New Document"]})]}),d.jsx("div",{className:`p-4 mb-6 rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsxs("div",{className:"relative flex-grow",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(iF,{className:`h-5 w-5 ${r?"text-white":"text-gray-400"}`,"aria-hidden":"true"})}),d.jsx("input",{type:"text",placeholder:"Search documents...",value:h,onChange:B=>f(B.target.value),className:`pl-10 pr-4 py-2 w-full rounded-md ${r?"bg-black border border-white text-white placeholder-gray-400":"bg-gray-700 border border-gray-600 text-white placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Search documents"})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("button",{onClick:()=>O("date"),className:`px-3 py-2 rounded-md flex items-center ${m==="date"?r?"bg-white text-black":"bg-blue-600 text-white":r?"bg-gray-900 border border-white text-white hover:bg-gray-800":"bg-gray-700 text-gray-300 hover:bg-gray-600"} transition-colors duration-200`,"aria-pressed":m==="date",onMouseEnter:()=>A("Sort by date"),children:[d.jsx(Qp,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Date",m==="date"&&d.jsx("span",{className:"ml-1",children:w==="asc"?"":""})]}),d.jsxs("button",{onClick:()=>O("name"),className:`px-3 py-2 rounded-md flex items-center ${m==="name"?r?"bg-white text-black":"bg-blue-600 text-white":r?"bg-gray-900 border border-white text-white hover:bg-gray-800":"bg-gray-700 text-gray-300 hover:bg-gray-600"} transition-colors duration-200`,"aria-pressed":m==="name",onMouseEnter:()=>A("Sort by name"),children:[d.jsx(oF,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Name",m==="name"&&d.jsx("span",{className:"ml-1",children:w==="asc"?"":""})]}),d.jsxs("button",{onClick:()=>O("type"),className:`px-3 py-2 rounded-md flex items-center ${m==="type"?r?"bg-white text-black":"bg-blue-600 text-white":r?"bg-gray-900 border border-white text-white hover:bg-gray-800":"bg-gray-700 text-gray-300 hover:bg-gray-600"} transition-colors duration-200`,"aria-pressed":m==="type",onMouseEnter:()=>A("Sort by file type"),children:[d.jsx(JS,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Type",m==="type"&&d.jsx("span",{className:"ml-1",children:w==="asc"?"":""})]})]})]})}),o?d.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[d.jsx(za,{className:`h-12 w-12 animate-spin mb-4 ${r?"text-white":"text-blue-400"}`}),d.jsx("p",{className:`text-lg ${r?"text-white":"text-gray-300"}`,children:"Loading your documents..."})]}):l?d.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[d.jsx(_s,{className:`h-12 w-12 mb-4 ${r?"text-white":"text-red-400"}`}),d.jsx("p",{className:`text-lg mb-2 ${r?"text-white":"text-gray-300"}`,children:l}),d.jsx("button",{onClick:()=>window.location.reload(),className:`px-4 py-2 mt-4 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors duration-200`,children:"Try Again"})]}):P.length===0?d.jsx("div",{className:`rounded-lg ${r?"bg-gray-900 border border-white":"bg-gray-800/50"} p-8 text-center`,children:h?d.jsxs("div",{children:[d.jsx("p",{className:`mb-4 ${r?"text-white":"text-gray-300"}`,children:"No documents match your search query."}),d.jsx("button",{onClick:()=>f(""),className:`px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors duration-200`,children:"Clear Search"})]}):d.jsxs("div",{children:[d.jsx("p",{className:`mb-4 ${r?"text-white":"text-gray-300"}`,children:"You haven't uploaded any documents yet."}),d.jsxs(Ce,{to:"/dashboard/upload",className:`inline-flex items-center px-4 py-2 rounded-md ${r?"bg-white text-black hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"} font-medium transition-colors duration-200`,onMouseEnter:()=>A("Upload your first document"),children:[d.jsx(Es,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload your first document"]})]})}):d.jsx("div",{className:"grid grid-cols-1 gap-4",children:P.map(B=>d.jsx(Ce,{to:`/dashboard/documents/${B.id}`,className:`block p-4 rounded-lg ${r?"bg-gray-900 border border-white hover:bg-gray-800":"bg-gray-800/50 hover:bg-gray-700/50"} transition-colors duration-200`,onMouseEnter:()=>A(B.name),children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:`p-3 rounded-md mr-4 ${r?"bg-black":"bg-gray-700"}`,children:E(B.file_type)}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium text-white mb-1",children:B.name}),d.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[d.jsxs("span",{className:`flex items-center text-xs ${r?"text-gray-300":"text-gray-400"}`,children:[d.jsx(Qp,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),S(B.created_at)]}),d.jsxs("span",{className:`flex items-center text-xs ${r?"text-gray-300":"text-gray-400"}`,children:[d.jsx(Jt,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),B.file_type.toUpperCase()]}),d.jsxs("span",{className:`flex items-center text-xs ${r?"text-gray-300":"text-gray-400"}`,children:[d.jsx(gy,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),Math.round(B.content_length/1e3),"K characters"]})]})]})]}),d.jsxs("div",{className:"flex items-center",children:[B.processing_status==="pending"&&d.jsx("span",{className:"text-xs bg-yellow-700/30 text-yellow-300 px-2 py-1 rounded mr-2",children:"Processing"}),B.processing_status==="completed"&&d.jsx("span",{className:"text-xs bg-green-700/30 text-green-300 px-2 py-1 rounded mr-2",children:"Ready"}),B.processing_status==="error"&&d.jsx("span",{className:"text-xs bg-red-700/30 text-red-300 px-2 py-1 rounded mr-2",children:"Error"}),d.jsx(XS,{className:`h-5 w-5 ${r?"text-white":"text-gray-400"}`,"aria-hidden":"true"}),d.jsx("button",{onClick:X=>{X.preventDefault(),X.stopPropagation(),k(B.id)},className:`p-1.5 rounded-full transition-colors duration-200 ${r?"text-red-400 hover:bg-red-700 hover:text-white focus:bg-red-700 focus:text-white":"text-gray-400 hover:bg-red-100 hover:text-red-500 dark:hover:bg-red-700 dark:hover:text-white focus:bg-red-100 focus:text-red-500"}`,"aria-label":"Delete document",onMouseEnter:()=>A("Delete this document"),title:"Delete Document",children:d.jsx(aF,{className:"h-4 w-4"})})]})]})},B.id))}),T&&x&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:d.jsxs("div",{className:`p-6 rounded-lg shadow-xl w-full max-w-md ${r?"bg-black border-2 border-white":"bg-gray-800"}`,children:[d.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Confirm Deletion"}),d.jsxs("p",{className:`mb-6 ${r?"text-gray-200":"text-gray-300"}`,children:["Are you sure you want to delete the document: ",d.jsx("br",{}),d.jsx("strong",{className:`font-medium ${r?"text-blue-300":"text-blue-400"}`,children:((D=i.find(B=>B.id===x))==null?void 0:D.name)||"this document"}),"?",d.jsx("br",{}),d.jsx("br",{}),"This action cannot be undone."]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{onClick:j,className:`px-4 py-2 rounded-md font-medium ${r?"bg-gray-600 text-white hover:bg-gray-500 focus:ring-2 focus:ring-gray-400":"bg-gray-600 text-white hover:bg-gray-500 focus:ring-2 focus:ring-gray-500"} transition-colors`,onMouseEnter:()=>A("Cancel deletion"),children:"Cancel"}),d.jsx("button",{onClick:N,className:`px-4 py-2 rounded-md font-medium ${r?"bg-red-500 text-white hover:bg-red-400 focus:ring-2 focus:ring-red-300":"bg-red-600 text-white hover:bg-red-500 focus:ring-2 focus:ring-red-500"} transition-colors`,onMouseEnter:()=>A("Confirm delete document"),children:"Delete"})]})]})})]})},SF=()=>{const t=Qr(),{uiTtsEnabled:e,toggleUiTts:n,highContrast:r,toggleHighContrast:i,fontSize:s,setFontSize:o,fontFamily:a,setFontFamily:l,lineSpacing:c,setLineSpacing:h,wordSpacing:f,setWordSpacing:m,cloudTtsEnabled:g,toggleCloudTts:w,ttsDelay:b,setTtsDelay:T,speakText:y}=On(),x=P=>{e&&y(P)},_=P=>{T(P)},A=(P,S)=>{const E=b===P;return d.jsx("button",{onClick:()=>_(P),className:`px-4 py-2 rounded-md transition-colors ${E?r?"bg-white text-black font-semibold":"bg-blue-600 text-white font-semibold":r?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,"aria-pressed":E,onMouseEnter:()=>x(S),children:S})},M=P=>{switch(P){case Sr.Off:return"Off";case Sr.Short:return"0.5 seconds";case Sr.Medium:return"1 second";case Sr.Long:return"1.5 seconds";default:return`${P}ms`}};return d.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[d.jsxs("div",{className:"mb-6 flex items-center",children:[d.jsx("button",{onClick:()=>t(-1),className:`mr-3 p-2 rounded-full ${r?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,"aria-label":"Go back",onMouseEnter:()=>x("Go back"),children:d.jsx(my,{className:"w-5 h-5"})}),d.jsxs("h1",{className:"text-2xl font-bold flex items-center",onMouseEnter:()=>x("Settings"),children:[d.jsx(ek,{className:"w-6 h-6 mr-2"}),"Settings"]})]}),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("section",{className:`p-6 rounded-lg ${r?"bg-gray-900":"bg-gray-800"}`,onMouseEnter:()=>x("Accessibility Settings"),children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(uo,{className:"w-5 h-5 mr-2"}),"Accessibility Settings"]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>x("UI Text-to-Speech"),children:"UI Text-to-Speech"}),d.jsx("p",{className:"text-sm text-gray-400 mb-2",onMouseEnter:()=>x("Enable or disable text-to-speech for UI elements when you hover over them"),children:"Enable or disable text-to-speech for UI elements when you hover over them"}),d.jsxs("button",{onClick:n,className:`flex items-center px-4 py-2 rounded-md w-fit ${e?r?"bg-white text-black":"bg-blue-600 text-white":r?"bg-gray-800 text-white":"bg-gray-700 text-gray-200"}`,"aria-pressed":e,onMouseEnter:()=>x(e?"Disable UI Text-to-Speech":"Enable UI Text-to-Speech"),children:[d.jsx(uo,{className:"w-5 h-5 mr-2"}),e?"Enabled":"Disabled"]})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>x("Text-to-Speech Delay"),children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(gy,{className:"w-5 h-5 mr-2"}),"Text-to-Speech Delay"]})}),d.jsx("p",{className:"text-sm text-gray-400 mb-2",onMouseEnter:()=>x("Set how long to wait before speaking text when you hover over an element"),children:"Set how long to wait before speaking text when you hover over an element. This helps prevent overlapping speech when moving quickly across the page."}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[A(Sr.Off,"Off"),A(Sr.Short,"0.5 seconds"),A(Sr.Medium,"1 second"),A(Sr.Long,"1.5 seconds")]}),d.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Current delay: ",d.jsx("span",{className:"font-medium",children:M(b)})]})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>x("High Contrast Mode"),children:"High Contrast Mode"}),d.jsx("p",{className:"text-sm text-gray-400 mb-2",onMouseEnter:()=>x("Enable or disable high contrast display for better visibility"),children:"Enable or disable high contrast display for better visibility"}),d.jsxs("button",{onClick:i,className:`flex items-center px-4 py-2 rounded-md w-fit ${r?"bg-white text-black":"bg-gray-700 text-gray-200"}`,"aria-pressed":r,onMouseEnter:()=>x(r?"Disable High Contrast Mode":"Enable High Contrast Mode"),children:[r?d.jsx(em,{className:"w-5 h-5 mr-2"}):d.jsx(ad,{className:"w-5 h-5 mr-2"}),r?"Enabled":"Disabled"]})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>x("Premium Text-to-Speech"),children:"Premium Text-to-Speech"}),d.jsx("p",{className:"text-sm text-gray-400 mb-2",onMouseEnter:()=>x("Use high-quality cloud text-to-speech for document reading"),children:"Use high-quality cloud text-to-speech for document reading (not for UI elements)"}),d.jsxs("button",{onClick:w,className:`flex items-center px-4 py-2 rounded-md w-fit ${g?r?"bg-white text-black":"bg-blue-600 text-white":r?"bg-gray-800 text-white":"bg-gray-700 text-gray-200"}`,"aria-pressed":g,onMouseEnter:()=>x(g?"Disable Premium Text-to-Speech":"Enable Premium Text-to-Speech"),children:[d.jsx(uo,{className:"w-5 h-5 mr-2"}),g?"Enabled":"Disabled"]})]})]})]}),d.jsxs("section",{className:`p-6 rounded-lg ${r?"bg-gray-900":"bg-gray-800"}`,onMouseEnter:()=>x("Text Display Settings"),children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(lF,{className:"w-5 h-5 mr-2"}),"Text Display Settings"]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>x("Font Size"),children:"Font Size"}),d.jsx("input",{type:"range",min:"12",max:"24",step:"1",value:s,onChange:P=>o(parseInt(P.target.value)),className:`w-full max-w-md ${r?"accent-white":"accent-blue-500"}`,onMouseEnter:()=>x(`Font size: ${s} pixels`)}),d.jsxs("p",{className:"text-sm font-medium",children:[s,"px"]})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>x("Line Spacing"),children:"Line Spacing"}),d.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:c,onChange:P=>h(parseFloat(P.target.value)),className:`w-full max-w-md ${r?"accent-white":"accent-blue-500"}`,onMouseEnter:()=>x(`Line spacing: ${c}`)}),d.jsxs("p",{className:"text-sm font-medium",children:[c.toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>x("Word Spacing"),children:"Word Spacing"}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:f,onChange:P=>m(parseFloat(P.target.value)),className:`w-full max-w-md ${r?"accent-white":"accent-blue-500"}`,onMouseEnter:()=>x(`Word spacing: ${f} ems`)}),d.jsxs("p",{className:"text-sm font-medium",children:[f.toFixed(2)," em"]})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("h3",{className:"text-md font-medium",onMouseEnter:()=>x("Font Family"),children:"Font Family"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:["Inter","OpenDyslexic","Arial","Verdana"].map(P=>d.jsx("button",{onClick:()=>l(P),className:`px-4 py-2 rounded-md transition-colors ${a===P?r?"bg-white text-black font-semibold":"bg-blue-600 text-white font-semibold":r?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,style:{fontFamily:P},"aria-pressed":a===P,onMouseEnter:()=>x(P),children:P},P))})]})]})]})]})]})};let kF={data:""},IF=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||kF,CF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,AF=/\/\*[^]*?\*\/|  +/g,jw=/\n+/g,pi=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?pi(o,s):s+"{"+pi(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=pi(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=pi.p?pi.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Tr={},rk=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+rk(t[n]);return e}return t},RF=(t,e,n,r,i)=>{let s=rk(t),o=Tr[s]||(Tr[s]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(s));if(!Tr[o]){let l=s!==t?t:(c=>{let h,f,m=[{}];for(;h=CF.exec(c.replace(AF,""));)h[4]?m.shift():h[3]?(f=h[3].replace(jw," ").trim(),m.unshift(m[0][f]=m[0][f]||{})):m[0][h[1]]=h[2].replace(jw," ").trim();return m[0]})(t);Tr[o]=pi(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Tr.g?Tr.g:null;return n&&(Tr.g=Tr[o]),((l,c,h,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(Tr[o],e,r,a),o},NF=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":pi(a,""):a===!1?"":a}return r+i+(o??"")},"");function Jd(t){let e=this||{},n=t.call?t(e.p):t;return RF(n.unshift?n.raw?NF(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,IF(e.target),e.g,e.o,e.k)}let ik,nm,rm;Jd.bind({g:1});let Kr=Jd.bind({k:1});function PF(t,e,n,r){pi.p=e,ik=t,nm=n,rm=r}function $i(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:nm&&nm()},a),n.o=/ *go\d+/.test(l),a.className=Jd.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),rm&&c[0]&&rm(a),ik(c,a)}return i}}var DF=t=>typeof t=="function",im=(t,e)=>DF(t)?t(e):t,jF=(()=>{let t=0;return()=>(++t).toString()})(),OF=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),LF=20,sk=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,LF)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return sk(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},MF=[],cf={toasts:[],pausedAt:void 0},vy=t=>{cf=sk(cf,t),MF.forEach(e=>{e(cf)})},VF=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||jF()}),zl=t=>(e,n)=>{let r=VF(e,t,n);return vy({type:2,toast:r}),r.id},Be=(t,e)=>zl("blank")(t,e);Be.error=zl("error");Be.success=zl("success");Be.loading=zl("loading");Be.custom=zl("custom");Be.dismiss=t=>{vy({type:3,toastId:t})};Be.remove=t=>vy({type:4,toastId:t});Be.promise=(t,e,n)=>{let r=Be.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?im(e.success,i):void 0;return s?Be.success(s,{id:r,...n,...n==null?void 0:n.success}):Be.dismiss(r),i}).catch(i=>{let s=e.error?im(e.error,i):void 0;s?Be.error(s,{id:r,...n,...n==null?void 0:n.error}):Be.dismiss(r)}),t};var FF=Kr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,UF=Kr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zF=Kr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,$F=$i("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${FF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${UF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${zF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,BF=Kr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,HF=$i("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${BF} 1s linear infinite;
`,qF=Kr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,WF=Kr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,KF=$i("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${WF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,GF=$i("div")`
  position: absolute;
`,QF=$i("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,YF=Kr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,XF=$i("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${YF} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,JF=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?C.createElement(XF,null,e):e:n==="blank"?null:C.createElement(QF,null,C.createElement(HF,{...r}),n!=="loading"&&C.createElement(GF,null,n==="error"?C.createElement($F,{...r}):C.createElement(KF,{...r})))},ZF=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,eU=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,tU="0%{opacity:0;} 100%{opacity:1;}",nU="0%{opacity:1;} 100%{opacity:0;}",rU=$i("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,iU=$i("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,sU=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=OF()?[tU,nU]:[ZF(n),eU(n)];return{animation:e?`${Kr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Kr(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};C.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?sU(t.position||e||"top-center",t.visible):{opacity:0},s=C.createElement(JF,{toast:t}),o=C.createElement(iU,{...t.ariaProps},im(t.message,t));return C.createElement(rU,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):C.createElement(C.Fragment,null,s,o))});PF(C.createElement);Jd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const Fn=De.create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json"}});Fn.interceptors.request.use(async t=>{const e=Cr.currentUser;if(e)try{const n=await e.getIdToken();n&&(t.headers.Authorization=`Bearer ${n}`)}catch(n){console.error("Error getting ID token in API interceptor:",n)}return t},t=>Promise.reject(t));const oU=async()=>{try{const t=Cr.currentUser;return t?await t.getIdToken():null}catch(t){return console.error("Error getting auth token:",t),null}},fo={async getAuthToken(){try{const t=Cr.currentUser;return t?await t.getIdToken():null}catch(t){return console.error("Error getting auth token:",t),null}},async uploadAudioMessage(t,e={}){try{e.sttProcessingMode&&t.append("stt_processing_mode",e.sttProcessingMode);const n=await fetch("http://localhost:5000/api/v2/agent/chat",{method:"POST",headers:{Authorization:`Bearer ${await this.getAuthToken()}`},body:t});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||"Failed to process audio message")}const r=await n.json();return e.sttProcessingMode==="review"?{...r,transcript:r.transcript||r.text,processing_mode:"review"}:r}catch(n){return console.error("Error uploading audio message:",n),{error:n instanceof Error?n.message:"Failed to upload audio message"}}},async chat(t,e,n){const r=await Fn.post("/api/v2/agent/chat",{query:t,documentId:e,thread_id:n});return{agent_response:r.data.response||r.data.question_text||"No response from AI",thread_id:r.data.active_quiz_thread_id||r.data.thread_id,is_quiz:r.data.quiz_active||!1,options:r.data.options||void 0,quiz_complete:r.data.quiz_complete||!1,quiz_cancelled:r.data.quiz_cancelled||!1,error_detail:r.data.error_detail,audio_content_base64:r.data.audio_content_base64||null}},async getDocument(t){return(await Fn.get(`/api/documents/${t}?include_content=true`)).data},async listDocuments(){return(await Fn.get("/api/documents")).data.data||[]},async uploadDocument(t,e){const n=new FormData;return n.append("file",t),e&&n.append("metadata",JSON.stringify(e)),(await Fn.post("/api/documents",n,{headers:{"Content-Type":"multipart/form-data"}})).data},async deleteDocument(t){await Fn.delete(`/api/documents/${t}`)},async cancelQuiz(t){await Fn.post("/api/v2/agent/chat",{query:"/cancel_quiz",thread_id:t})},async getUserProfile(){return(await Fn.get("/api/users/profile")).data.data||{}},async updateUserProfile(t){await Fn.patch("/api/users/profile",t)},async startQuiz(t,e){const n=await Fn.post("/api/v2/agent/chat",{query:`Start a quiz for document ${t}`,documentId:t,thread_id:e});return console.log("[apiService.startQuiz] Raw response.data from backend:",JSON.stringify(n.data,null,2)),{agent_response:n.data.final_agent_response||n.data.response||"No response from AI",thread_id:n.data.active_quiz_thread_id||n.data.thread_id,is_quiz:n.data.quiz_active||!1,quiz_complete:n.data.quiz_complete||!1,quiz_cancelled:n.data.quiz_cancelled||!1,error_detail:n.data.error_detail,audio_content_base64:n.data.audio_content_base64||null}},async continueQuiz(t,e,n){const r=await Fn.post("/api/v2/agent/chat",{query:e,documentId:n,thread_id:t});return{agent_response:r.data.response||r.data.agent_response||"No response from AI",thread_id:r.data.thread_id,is_quiz:r.data.quiz_active||!1,quiz_completed:r.data.quiz_complete||!1}}};function aU(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const lU=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uU=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cU={};function Ow(t,e){return(cU.jsx?uU:lU).test(t)}const dU=/[ \t\n\f\r]/g;function hU(t){return typeof t=="object"?t.type==="text"?Lw(t.value):!1:Lw(t)}function Lw(t){return t.replace(dU,"")===""}class $l{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}$l.prototype.normal={};$l.prototype.property={};$l.prototype.space=void 0;function ok(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new $l(n,r,e)}function sm(t){return t.toLowerCase()}class ln{constructor(e,n){this.attribute=n,this.property=e}}ln.prototype.attribute="";ln.prototype.booleanish=!1;ln.prototype.boolean=!1;ln.prototype.commaOrSpaceSeparated=!1;ln.prototype.commaSeparated=!1;ln.prototype.defined=!1;ln.prototype.mustUseProperty=!1;ln.prototype.number=!1;ln.prototype.overloadedBoolean=!1;ln.prototype.property="";ln.prototype.spaceSeparated=!1;ln.prototype.space=void 0;let fU=0;const ye=Rs(),st=Rs(),om=Rs(),G=Rs(),Le=Rs(),po=Rs(),pn=Rs();function Rs(){return 2**++fU}const am=Object.freeze(Object.defineProperty({__proto__:null,boolean:ye,booleanish:st,commaOrSpaceSeparated:pn,commaSeparated:po,number:G,overloadedBoolean:om,spaceSeparated:Le},Symbol.toStringTag,{value:"Module"})),df=Object.keys(am);class xy extends ln{constructor(e,n,r,i){let s=-1;if(super(e,n),Mw(this,"space",i),typeof r=="number")for(;++s<df.length;){const o=df[s];Mw(this,df[s],(r&am[o])===am[o])}}}xy.prototype.defined=!0;function Mw(t,e,n){n&&(t[e]=n)}function Ho(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new xy(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[sm(r)]=r,n[sm(s.attribute)]=r}return new $l(e,n,t.space)}const ak=Ho({properties:{ariaActiveDescendant:null,ariaAtomic:st,ariaAutoComplete:null,ariaBusy:st,ariaChecked:st,ariaColCount:G,ariaColIndex:G,ariaColSpan:G,ariaControls:Le,ariaCurrent:null,ariaDescribedBy:Le,ariaDetails:null,ariaDisabled:st,ariaDropEffect:Le,ariaErrorMessage:null,ariaExpanded:st,ariaFlowTo:Le,ariaGrabbed:st,ariaHasPopup:null,ariaHidden:st,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Le,ariaLevel:G,ariaLive:null,ariaModal:st,ariaMultiLine:st,ariaMultiSelectable:st,ariaOrientation:null,ariaOwns:Le,ariaPlaceholder:null,ariaPosInSet:G,ariaPressed:st,ariaReadOnly:st,ariaRelevant:null,ariaRequired:st,ariaRoleDescription:Le,ariaRowCount:G,ariaRowIndex:G,ariaRowSpan:G,ariaSelected:st,ariaSetSize:G,ariaSort:null,ariaValueMax:G,ariaValueMin:G,ariaValueNow:G,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function lk(t,e){return e in t?t[e]:e}function uk(t,e){return lk(t,e.toLowerCase())}const pU=Ho({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:po,acceptCharset:Le,accessKey:Le,action:null,allow:null,allowFullScreen:ye,allowPaymentRequest:ye,allowUserMedia:ye,alt:null,as:null,async:ye,autoCapitalize:null,autoComplete:Le,autoFocus:ye,autoPlay:ye,blocking:Le,capture:null,charSet:null,checked:ye,cite:null,className:Le,cols:G,colSpan:null,content:null,contentEditable:st,controls:ye,controlsList:Le,coords:G|po,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ye,defer:ye,dir:null,dirName:null,disabled:ye,download:om,draggable:st,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ye,formTarget:null,headers:Le,height:G,hidden:om,high:G,href:null,hrefLang:null,htmlFor:Le,httpEquiv:Le,id:null,imageSizes:null,imageSrcSet:null,inert:ye,inputMode:null,integrity:null,is:null,isMap:ye,itemId:null,itemProp:Le,itemRef:Le,itemScope:ye,itemType:Le,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ye,low:G,manifest:null,max:null,maxLength:G,media:null,method:null,min:null,minLength:G,multiple:ye,muted:ye,name:null,nonce:null,noModule:ye,noValidate:ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ye,optimum:G,pattern:null,ping:Le,placeholder:null,playsInline:ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ye,referrerPolicy:null,rel:Le,required:ye,reversed:ye,rows:G,rowSpan:G,sandbox:Le,scope:null,scoped:ye,seamless:ye,selected:ye,shadowRootClonable:ye,shadowRootDelegatesFocus:ye,shadowRootMode:null,shape:null,size:G,sizes:null,slot:null,span:G,spellCheck:st,src:null,srcDoc:null,srcLang:null,srcSet:null,start:G,step:null,style:null,tabIndex:G,target:null,title:null,translate:null,type:null,typeMustMatch:ye,useMap:null,value:st,width:G,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Le,axis:null,background:null,bgColor:null,border:G,borderColor:null,bottomMargin:G,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ye,declare:ye,event:null,face:null,frame:null,frameBorder:null,hSpace:G,leftMargin:G,link:null,longDesc:null,lowSrc:null,marginHeight:G,marginWidth:G,noResize:ye,noHref:ye,noShade:ye,noWrap:ye,object:null,profile:null,prompt:null,rev:null,rightMargin:G,rules:null,scheme:null,scrolling:st,standby:null,summary:null,text:null,topMargin:G,valueType:null,version:null,vAlign:null,vLink:null,vSpace:G,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ye,disableRemotePlayback:ye,prefix:null,property:null,results:G,security:null,unselectable:null},space:"html",transform:uk}),mU=Ho({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:pn,accentHeight:G,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:G,amplitude:G,arabicForm:null,ascent:G,attributeName:null,attributeType:null,azimuth:G,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:G,by:null,calcMode:null,capHeight:G,className:Le,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:G,diffuseConstant:G,direction:null,display:null,dur:null,divisor:G,dominantBaseline:null,download:ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:G,enableBackground:null,end:null,event:null,exponent:G,externalResourcesRequired:null,fill:null,fillOpacity:G,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:po,g2:po,glyphName:po,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:G,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:G,horizOriginX:G,horizOriginY:G,id:null,ideographic:G,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:G,k:G,k1:G,k2:G,k3:G,k4:G,kernelMatrix:pn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:G,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:G,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:G,overlineThickness:G,paintOrder:null,panose1:null,path:null,pathLength:G,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Le,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:G,pointsAtY:G,pointsAtZ:G,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:pn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:pn,rev:pn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:pn,requiredFeatures:pn,requiredFonts:pn,requiredFormats:pn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:G,specularExponent:G,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:G,strikethroughThickness:G,string:null,stroke:null,strokeDashArray:pn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:G,strokeOpacity:G,strokeWidth:null,style:null,surfaceScale:G,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:pn,tabIndex:G,tableValues:null,target:null,targetX:G,targetY:G,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:pn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:G,underlineThickness:G,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:G,values:null,vAlphabetic:G,vMathematical:G,vectorEffect:null,vHanging:G,vIdeographic:G,version:null,vertAdvY:G,vertOriginX:G,vertOriginY:G,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:G,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:lk}),ck=Ho({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),dk=Ho({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:uk}),hk=Ho({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),gU={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},yU=/[A-Z]/g,Vw=/-[a-z]/g,vU=/^data[-\w.:]+$/i;function xU(t,e){const n=sm(e);let r=e,i=ln;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&vU.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Vw,_U);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Vw.test(s)){let o=s.replace(yU,wU);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=xy}return new i(r,e)}function wU(t){return"-"+t.toLowerCase()}function _U(t){return t.charAt(1).toUpperCase()}const EU=ok([ak,pU,ck,dk,hk],"html"),wy=ok([ak,mU,ck,dk,hk],"svg");function bU(t){return t.join(" ").trim()}var _y={},Fw=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,TU=/\n/g,SU=/^\s*/,kU=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,IU=/^:\s*/,CU=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,AU=/^[;\s]*/,RU=/^\s+|\s+$/g,NU=`
`,Uw="/",zw="*",Ji="",PU="comment",DU="declaration",jU=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(w){var b=w.match(TU);b&&(n+=b.length);var T=w.lastIndexOf(NU);r=~T?w.length-T:r+w.length}function s(){var w={line:n,column:r};return function(b){return b.position=new o(w),c(),b}}function o(w){this.start=w,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(w){var b=new Error(e.source+":"+n+":"+r+": "+w);if(b.reason=w,b.filename=e.source,b.line=n,b.column=r,b.source=t,!e.silent)throw b}function l(w){var b=w.exec(t);if(b){var T=b[0];return i(T),t=t.slice(T.length),b}}function c(){l(SU)}function h(w){var b;for(w=w||[];b=f();)b!==!1&&w.push(b);return w}function f(){var w=s();if(!(Uw!=t.charAt(0)||zw!=t.charAt(1))){for(var b=2;Ji!=t.charAt(b)&&(zw!=t.charAt(b)||Uw!=t.charAt(b+1));)++b;if(b+=2,Ji===t.charAt(b-1))return a("End of comment missing");var T=t.slice(2,b-2);return r+=2,i(T),t=t.slice(b),r+=2,w({type:PU,comment:T})}}function m(){var w=s(),b=l(kU);if(b){if(f(),!l(IU))return a("property missing ':'");var T=l(CU),y=w({type:DU,property:$w(b[0].replace(Fw,Ji)),value:T?$w(T[0].replace(Fw,Ji)):Ji});return l(AU),y}}function g(){var w=[];h(w);for(var b;b=m();)b!==!1&&(w.push(b),h(w));return w}return c(),g()};function $w(t){return t?t.replace(RU,Ji):Ji}var OU=dc&&dc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_y,"__esModule",{value:!0});_y.default=MU;var LU=OU(jU);function MU(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,LU.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.camelCase=void 0;var VU=/^--[a-zA-Z0-9_-]+$/,FU=/-([a-z])/g,UU=/^[^-]+$/,zU=/^-(webkit|moz|ms|o|khtml)-/,$U=/^-(ms)-/,BU=function(t){return!t||UU.test(t)||VU.test(t)},HU=function(t,e){return e.toUpperCase()},Bw=function(t,e){return"".concat(e,"-")},qU=function(t,e){return e===void 0&&(e={}),BU(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace($U,Bw):t=t.replace(zU,Bw),t.replace(FU,HU))};Zd.camelCase=qU;var WU=dc&&dc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},KU=WU(_y),GU=Zd;function lm(t,e){var n={};return!t||typeof t!="string"||(0,KU.default)(t,function(r,i){r&&i&&(n[(0,GU.camelCase)(r,e)]=i)}),n}lm.default=lm;var QU=lm;const YU=k_(QU),fk=pk("end"),Ey=pk("start");function pk(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function XU(t){const e=Ey(t),n=fk(t);if(e&&n)return{start:e,end:n}}function $a(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Hw(t.position):"start"in t||"end"in t?Hw(t):"line"in t||"column"in t?um(t):""}function um(t){return qw(t&&t.line)+":"+qw(t&&t.column)}function Hw(t){return um(t&&t.start)+"-"+um(t&&t.end)}function qw(t){return t&&typeof t=="number"?t:1}class jt extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=$a(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}jt.prototype.file="";jt.prototype.name="";jt.prototype.reason="";jt.prototype.message="";jt.prototype.stack="";jt.prototype.column=void 0;jt.prototype.line=void 0;jt.prototype.ancestors=void 0;jt.prototype.cause=void 0;jt.prototype.fatal=void 0;jt.prototype.place=void 0;jt.prototype.ruleId=void 0;jt.prototype.source=void 0;const by={}.hasOwnProperty,JU=new Map,ZU=/[A-Z]/g,e3=new Set(["table","tbody","thead","tfoot","tr"]),t3=new Set(["td","th"]),mk="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function n3(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=c3(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=u3(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?wy:EU,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=gk(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function gk(t,e,n){if(e.type==="element")return r3(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return i3(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return o3(t,e,n);if(e.type==="mdxjsEsm")return s3(t,e);if(e.type==="root")return a3(t,e,n);if(e.type==="text")return l3(t,e)}function r3(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=wy,t.schema=i),t.ancestors.push(e);const s=vk(t,e.tagName,!1),o=d3(t,e);let a=Sy(t,e);return e3.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!hU(l):!0})),yk(t,o,s,e),Ty(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function i3(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}_l(t,e.position)}function s3(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);_l(t,e.position)}function o3(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=wy,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:vk(t,e.name,!0),o=h3(t,e),a=Sy(t,e);return yk(t,o,s,e),Ty(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function a3(t,e,n){const r={};return Ty(r,Sy(t,e)),t.create(e,t.Fragment,r,n)}function l3(t,e){return e.value}function yk(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Ty(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function u3(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function c3(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=Ey(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function d3(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&by.call(e.properties,i)){const s=f3(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&t3.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function h3(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else _l(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else _l(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Sy(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:JU;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=gk(t,s,o);a!==void 0&&n.push(a)}return n}function f3(t,e,n){const r=xU(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?aU(n):bU(n)),r.property==="style"){let i=typeof n=="object"?n:p3(t,String(n));return t.stylePropertyNameCase==="css"&&(i=m3(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?gU[r.property]||r.property:r.attribute,n]}}function p3(t,e){try{return YU(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new jt("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=mk+"#cannot-parse-style-attribute",i}}function vk(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Ow(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Ow(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return by.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);_l(t)}function _l(t,e){const n=new jt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=mk+"#cannot-handle-mdx-estrees-without-createevaluater",n}function m3(t){const e={};let n;for(n in t)by.call(t,n)&&(e[g3(n)]=t[n]);return e}function g3(t){let e=t.replace(ZU,y3);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function y3(t){return"-"+t.toLowerCase()}const hf={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},v3={};function x3(t,e){const n=v3,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return xk(t,r,i)}function xk(t,e,n){if(w3(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Ww(t.children,e,n)}return Array.isArray(t)?Ww(t,e,n):""}function Ww(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=xk(t[i],e,n);return r.join("")}function w3(t){return!!(t&&typeof t=="object")}const Kw=document.createElement("i");function ky(t){const e="&"+t+";";Kw.innerHTML=e;const n=Kw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function gr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function kn(t,e){return t.length>0?(gr(t,t.length,0,e),t):e}const Gw={}.hasOwnProperty;function _3(t){const e={};let n=-1;for(;++n<t.length;)E3(e,t[n]);return e}function E3(t,e){let n;for(n in e){const i=(Gw.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Gw.call(i,o)||(i[o]=[]);const a=s[o];b3(i[o],Array.isArray(a)?a:a?[a]:[])}}}function b3(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);gr(t,0,0,r)}function wk(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function mo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const or=Bi(/[A-Za-z]/),yn=Bi(/[\dA-Za-z]/),T3=Bi(/[#-'*+\--9=?A-Z^-~]/);function cm(t){return t!==null&&(t<32||t===127)}const dm=Bi(/\d/),S3=Bi(/[\dA-Fa-f]/),k3=Bi(/[!-/:-@[-`{-~]/);function ue(t){return t!==null&&t<-2}function an(t){return t!==null&&(t<0||t===32)}function Ae(t){return t===-2||t===-1||t===32}const I3=Bi(new RegExp("\\p{P}|\\p{S}","u")),C3=Bi(/\s/);function Bi(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function qo(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&yn(t.charCodeAt(n+1))&&yn(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Ve(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Ae(l)?(t.enter(n),a(l)):e(l)}function a(l){return Ae(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const A3={tokenize:R3};function R3(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ve(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return ue(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const N3={tokenize:P3},Qw={tokenize:D3};function P3(t){const e=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const A=n[r];return e.containerState=A[1],t.attempt(A[0].continuation,l,c)(_)}return c(_)}function l(_){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&x();const A=e.events.length;let M=A,P;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){P=e.events[M][1].end;break}y(r);let S=A;for(;S<e.events.length;)e.events[S][1].end={...P},S++;return gr(e.events,M+1,0,e.events.slice(A)),e.events.length=S,c(_)}return a(_)}function c(_){if(r===n.length){if(!i)return m(_);if(i.currentConstruct&&i.currentConstruct.concrete)return w(_);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Qw,h,f)(_)}function h(_){return i&&x(),y(r),m(_)}function f(_){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,w(_)}function m(_){return e.containerState={},t.attempt(Qw,g,w)(_)}function g(_){return r++,n.push([e.currentConstruct,e.containerState]),m(_)}function w(_){if(_===null){i&&x(),y(0),t.consume(_);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),b(_)}function b(_){if(_===null){T(t.exit("chunkFlow"),!0),y(0),t.consume(_);return}return ue(_)?(t.consume(_),T(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(_),b)}function T(_,A){const M=e.sliceStream(_);if(A&&M.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(M),e.parser.lazy[_.start.line]){let P=i.events.length;for(;P--;)if(i.events[P][1].start.offset<o&&(!i.events[P][1].end||i.events[P][1].end.offset>o))return;const S=e.events.length;let E=S,k,N;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){if(k){N=e.events[E][1].end;break}k=!0}for(y(r),P=S;P<e.events.length;)e.events[P][1].end={...N},P++;gr(e.events,E+1,0,e.events.slice(S)),e.events.length=P}}function y(_){let A=n.length;for(;A-- >_;){const M=n[A];e.containerState=M[1],M[0].exit.call(e,t)}n.length=_}function x(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function D3(t,e,n){return Ve(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Yw(t){if(t===null||an(t)||C3(t))return 1;if(I3(t))return 2}function Iy(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const hm={name:"attention",resolveAll:j3,tokenize:O3};function j3(t,e){let n=-1,r,i,s,o,a,l,c,h;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},m={...t[n][1].start};Xw(f,-l),Xw(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=kn(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=kn(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=kn(c,Iy(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=kn(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(h=2,c=kn(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):h=0,gr(t,r-1,n-r+3,c),n=r+c.length-h-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function O3(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Yw(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),h=Yw(l),f=!h||h===2&&i||n.includes(l),m=!i||i===2&&h||n.includes(r);return c._open=!!(s===42?f:f&&(i||!m)),c._close=!!(s===42?m:m&&(h||!f)),e(l)}}function Xw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const L3={name:"autolink",tokenize:M3};function M3(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return or(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||yn(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||yn(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||cm(g)?n(g):(t.consume(g),l)}function c(g){return g===64?(t.consume(g),h):T3(g)?(t.consume(g),c):n(g)}function h(g){return yn(g)?f(g):n(g)}function f(g){return g===46?(t.consume(g),r=0,h):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||yn(g))&&r++<63){const w=g===45?m:f;return t.consume(g),w}return n(g)}}const eh={partial:!0,tokenize:V3};function V3(t,e,n){return r;function r(s){return Ae(s)?Ve(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||ue(s)?e(s):n(s)}}const _k={continuation:{tokenize:U3},exit:z3,name:"blockQuote",tokenize:F3};function F3(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ae(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function U3(t,e,n){const r=this;return i;function i(o){return Ae(o)?Ve(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(_k,e,n)(o)}}function z3(t){t.exit("blockQuote")}const Ek={name:"characterEscape",tokenize:$3};function $3(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return k3(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const bk={name:"characterReference",tokenize:B3};function B3(t,e,n){const r=this;let i=0,s,o;return a;function a(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=yn,h(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=S3,h):(t.enter("characterReferenceValue"),s=7,o=dm,h(f))}function h(f){if(f===59&&i){const m=t.exit("characterReferenceValue");return o===yn&&!ky(r.sliceSerialize(m))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(f)&&i++<s?(t.consume(f),h):n(f)}}const Jw={partial:!0,tokenize:q3},Zw={concrete:!0,name:"codeFenced",tokenize:H3};function H3(t,e,n){const r=this,i={partial:!0,tokenize:M};let s=0,o=0,a;return l;function l(P){return c(P)}function c(P){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=P,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),h(P)}function h(P){return P===a?(o++,t.consume(P),h):o<3?n(P):(t.exit("codeFencedFenceSequence"),Ae(P)?Ve(t,f,"whitespace")(P):f(P))}function f(P){return P===null||ue(P)?(t.exit("codeFencedFence"),r.interrupt?e(P):t.check(Jw,b,A)(P)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(P))}function m(P){return P===null||ue(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(P)):Ae(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ve(t,g,"whitespace")(P)):P===96&&P===a?n(P):(t.consume(P),m)}function g(P){return P===null||ue(P)?f(P):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),w(P))}function w(P){return P===null||ue(P)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(P)):P===96&&P===a?n(P):(t.consume(P),w)}function b(P){return t.attempt(i,A,T)(P)}function T(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),y}function y(P){return s>0&&Ae(P)?Ve(t,x,"linePrefix",s+1)(P):x(P)}function x(P){return P===null||ue(P)?t.check(Jw,b,A)(P):(t.enter("codeFlowValue"),_(P))}function _(P){return P===null||ue(P)?(t.exit("codeFlowValue"),x(P)):(t.consume(P),_)}function A(P){return t.exit("codeFenced"),e(P)}function M(P,S,E){let k=0;return N;function N(X){return P.enter("lineEnding"),P.consume(X),P.exit("lineEnding"),j}function j(X){return P.enter("codeFencedFence"),Ae(X)?Ve(P,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):O(X)}function O(X){return X===a?(P.enter("codeFencedFenceSequence"),D(X)):E(X)}function D(X){return X===a?(k++,P.consume(X),D):k>=o?(P.exit("codeFencedFenceSequence"),Ae(X)?Ve(P,B,"whitespace")(X):B(X)):E(X)}function B(X){return X===null||ue(X)?(P.exit("codeFencedFence"),S(X)):E(X)}}}function q3(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const ff={name:"codeIndented",tokenize:K3},W3={partial:!0,tokenize:G3};function K3(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),Ve(t,s,"linePrefix",5)(c)}function s(c){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):ue(c)?t.attempt(W3,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||ue(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function G3(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):ue(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Ve(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):ue(o)?i(o):n(o)}}const Q3={name:"codeText",previous:X3,resolve:Y3,tokenize:J3};function Y3(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function X3(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function J3(t,e,n){let r=0,i,s;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),a(f)}function a(f){return f===96?(t.consume(f),r++,a):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(s=t.enter("codeTextSequence"),i=0,h(f)):ue(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||ue(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),c)}function h(f){return f===96?(t.consume(f),i++,h):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",c(f))}}class Z3{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ga(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ga(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ga(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);ga(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ga(this.left,n.reverse())}}}function ga(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Tk(t){const e={};let n=-1,r,i,s,o,a,l,c;const h=new Z3(t);for(;++n<h.length;){for(;n in e;)n=e[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,e5(h,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=h.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},a=h.slice(i,n),a.unshift(r),h.splice(i,n-i+1,a))}}return gr(t,0,Number.POSITIVE_INFINITY,h.slice(0)),!c}function e5(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let h,f,m=-1,g=n,w=0,b=0;const T=[b];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(h=r.sliceStream(g),g.next||h.push(null),f&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(b=m+1,T.push(b),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):T.pop(),m=T.length;m--;){const y=a.slice(T[m],T[m+1]),x=s.pop();l.push([x,x+y.length-1]),t.splice(x,2,y)}for(l.reverse(),m=-1;++m<l.length;)c[w+l[m][0]]=w+l[m][1],w+=l[m][1]-l[m][0]-1;return c}const t5={resolve:r5,tokenize:i5},n5={partial:!0,tokenize:s5};function r5(t){return Tk(t),t}function i5(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):ue(a)?t.check(n5,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function s5(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Ve(t,s,"linePrefix")}function s(o){if(o===null||ue(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function Sk(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let h=0;return f;function f(y){return y===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(y),t.exit(s),m):y===null||y===32||y===41||cm(y)?n(y):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),b(y))}function m(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===62?(t.exit("chunkString"),t.exit(a),m(y)):y===null||y===60||ue(y)?n(y):(t.consume(y),y===92?w:g)}function w(y){return y===60||y===62||y===92?(t.consume(y),g):g(y)}function b(y){return!h&&(y===null||y===41||an(y))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(y)):h<c&&y===40?(t.consume(y),h++,b):y===41?(t.consume(y),h--,b):y===null||y===32||y===40||cm(y)?n(y):(t.consume(y),y===92?T:b)}function T(y){return y===40||y===41||y===92?(t.consume(y),b):b(y)}}function kk(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),h}function h(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):ue(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),h):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||ue(g)||a++>999?(t.exit("chunkString"),h(g)):(t.consume(g),l||(l=!Ae(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,f):f(g)}}function Ik(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),l(o)):m===null?n(m):ue(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),Ve(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===o||m===null||ue(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?f:h)}function f(m){return m===o||m===92?(t.consume(m),h):h(m)}}function Ba(t,e){let n;return r;function r(i){return ue(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Ae(i)?Ve(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const o5={name:"definition",tokenize:l5},a5={partial:!0,tokenize:u5};function l5(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return kk.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=mo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return an(g)?Ba(t,c)(g):c(g)}function c(g){return Sk(t,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function h(g){return t.attempt(a5,f,f)(g)}function f(g){return Ae(g)?Ve(t,m,"whitespace")(g):m(g)}function m(g){return g===null||ue(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function u5(t,e,n){return r;function r(a){return an(a)?Ba(t,i)(a):n(a)}function i(a){return Ik(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ae(a)?Ve(t,o,"whitespace")(a):o(a)}function o(a){return a===null||ue(a)?e(a):n(a)}}const c5={name:"hardBreakEscape",tokenize:d5};function d5(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return ue(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const h5={name:"headingAtx",resolve:f5,tokenize:p5};function f5(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},gr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function p5(t,e,n){let r=0;return i;function i(h){return t.enter("atxHeading"),s(h)}function s(h){return t.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&r++<6?(t.consume(h),o):h===null||an(h)?(t.exit("atxHeadingSequence"),a(h)):n(h)}function a(h){return h===35?(t.enter("atxHeadingSequence"),l(h)):h===null||ue(h)?(t.exit("atxHeading"),e(h)):Ae(h)?Ve(t,a,"whitespace")(h):(t.enter("atxHeadingText"),c(h))}function l(h){return h===35?(t.consume(h),l):(t.exit("atxHeadingSequence"),a(h))}function c(h){return h===null||h===35||an(h)?(t.exit("atxHeadingText"),a(h)):(t.consume(h),c)}}const m5=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],e_=["pre","script","style","textarea"],g5={concrete:!0,name:"htmlFlow",resolveTo:x5,tokenize:w5},y5={partial:!0,tokenize:E5},v5={partial:!0,tokenize:_5};function x5(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function w5(t,e,n){const r=this;let i,s,o,a,l;return c;function c(L){return h(L)}function h(L){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(L),f}function f(L){return L===33?(t.consume(L),m):L===47?(t.consume(L),s=!0,b):L===63?(t.consume(L),i=3,r.interrupt?e:R):or(L)?(t.consume(L),o=String.fromCharCode(L),T):n(L)}function m(L){return L===45?(t.consume(L),i=2,g):L===91?(t.consume(L),i=5,a=0,w):or(L)?(t.consume(L),i=4,r.interrupt?e:R):n(L)}function g(L){return L===45?(t.consume(L),r.interrupt?e:R):n(L)}function w(L){const Fe="CDATA[";return L===Fe.charCodeAt(a++)?(t.consume(L),a===Fe.length?r.interrupt?e:O:w):n(L)}function b(L){return or(L)?(t.consume(L),o=String.fromCharCode(L),T):n(L)}function T(L){if(L===null||L===47||L===62||an(L)){const Fe=L===47,pe=o.toLowerCase();return!Fe&&!s&&e_.includes(pe)?(i=1,r.interrupt?e(L):O(L)):m5.includes(o.toLowerCase())?(i=6,Fe?(t.consume(L),y):r.interrupt?e(L):O(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(L):s?x(L):_(L))}return L===45||yn(L)?(t.consume(L),o+=String.fromCharCode(L),T):n(L)}function y(L){return L===62?(t.consume(L),r.interrupt?e:O):n(L)}function x(L){return Ae(L)?(t.consume(L),x):N(L)}function _(L){return L===47?(t.consume(L),N):L===58||L===95||or(L)?(t.consume(L),A):Ae(L)?(t.consume(L),_):N(L)}function A(L){return L===45||L===46||L===58||L===95||yn(L)?(t.consume(L),A):M(L)}function M(L){return L===61?(t.consume(L),P):Ae(L)?(t.consume(L),M):_(L)}function P(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),l=L,S):Ae(L)?(t.consume(L),P):E(L)}function S(L){return L===l?(t.consume(L),l=null,k):L===null||ue(L)?n(L):(t.consume(L),S)}function E(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||an(L)?M(L):(t.consume(L),E)}function k(L){return L===47||L===62||Ae(L)?_(L):n(L)}function N(L){return L===62?(t.consume(L),j):n(L)}function j(L){return L===null||ue(L)?O(L):Ae(L)?(t.consume(L),j):n(L)}function O(L){return L===45&&i===2?(t.consume(L),ve):L===60&&i===1?(t.consume(L),he):L===62&&i===4?(t.consume(L),J):L===63&&i===3?(t.consume(L),R):L===93&&i===5?(t.consume(L),te):ue(L)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(y5,ne,D)(L)):L===null||ue(L)?(t.exit("htmlFlowData"),D(L)):(t.consume(L),O)}function D(L){return t.check(v5,B,ne)(L)}function B(L){return t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),X}function X(L){return L===null||ue(L)?D(L):(t.enter("htmlFlowData"),O(L))}function ve(L){return L===45?(t.consume(L),R):O(L)}function he(L){return L===47?(t.consume(L),o="",K):O(L)}function K(L){if(L===62){const Fe=o.toLowerCase();return e_.includes(Fe)?(t.consume(L),J):O(L)}return or(L)&&o.length<8?(t.consume(L),o+=String.fromCharCode(L),K):O(L)}function te(L){return L===93?(t.consume(L),R):O(L)}function R(L){return L===62?(t.consume(L),J):L===45&&i===2?(t.consume(L),R):O(L)}function J(L){return L===null||ue(L)?(t.exit("htmlFlowData"),ne(L)):(t.consume(L),J)}function ne(L){return t.exit("htmlFlow"),e(L)}}function _5(t,e,n){const r=this;return i;function i(o){return ue(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function E5(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(eh,e,n)}}const b5={name:"htmlText",tokenize:T5};function T5(t,e,n){const r=this;let i,s,o;return a;function a(R){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(R),l}function l(R){return R===33?(t.consume(R),c):R===47?(t.consume(R),M):R===63?(t.consume(R),_):or(R)?(t.consume(R),E):n(R)}function c(R){return R===45?(t.consume(R),h):R===91?(t.consume(R),s=0,w):or(R)?(t.consume(R),x):n(R)}function h(R){return R===45?(t.consume(R),g):n(R)}function f(R){return R===null?n(R):R===45?(t.consume(R),m):ue(R)?(o=f,he(R)):(t.consume(R),f)}function m(R){return R===45?(t.consume(R),g):f(R)}function g(R){return R===62?ve(R):R===45?m(R):f(R)}function w(R){const J="CDATA[";return R===J.charCodeAt(s++)?(t.consume(R),s===J.length?b:w):n(R)}function b(R){return R===null?n(R):R===93?(t.consume(R),T):ue(R)?(o=b,he(R)):(t.consume(R),b)}function T(R){return R===93?(t.consume(R),y):b(R)}function y(R){return R===62?ve(R):R===93?(t.consume(R),y):b(R)}function x(R){return R===null||R===62?ve(R):ue(R)?(o=x,he(R)):(t.consume(R),x)}function _(R){return R===null?n(R):R===63?(t.consume(R),A):ue(R)?(o=_,he(R)):(t.consume(R),_)}function A(R){return R===62?ve(R):_(R)}function M(R){return or(R)?(t.consume(R),P):n(R)}function P(R){return R===45||yn(R)?(t.consume(R),P):S(R)}function S(R){return ue(R)?(o=S,he(R)):Ae(R)?(t.consume(R),S):ve(R)}function E(R){return R===45||yn(R)?(t.consume(R),E):R===47||R===62||an(R)?k(R):n(R)}function k(R){return R===47?(t.consume(R),ve):R===58||R===95||or(R)?(t.consume(R),N):ue(R)?(o=k,he(R)):Ae(R)?(t.consume(R),k):ve(R)}function N(R){return R===45||R===46||R===58||R===95||yn(R)?(t.consume(R),N):j(R)}function j(R){return R===61?(t.consume(R),O):ue(R)?(o=j,he(R)):Ae(R)?(t.consume(R),j):k(R)}function O(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),i=R,D):ue(R)?(o=O,he(R)):Ae(R)?(t.consume(R),O):(t.consume(R),B)}function D(R){return R===i?(t.consume(R),i=void 0,X):R===null?n(R):ue(R)?(o=D,he(R)):(t.consume(R),D)}function B(R){return R===null||R===34||R===39||R===60||R===61||R===96?n(R):R===47||R===62||an(R)?k(R):(t.consume(R),B)}function X(R){return R===47||R===62||an(R)?k(R):n(R)}function ve(R){return R===62?(t.consume(R),t.exit("htmlTextData"),t.exit("htmlText"),e):n(R)}function he(R){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),K}function K(R){return Ae(R)?Ve(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):te(R)}function te(R){return t.enter("htmlTextData"),o(R)}}const Cy={name:"labelEnd",resolveAll:C5,resolveTo:A5,tokenize:R5},S5={tokenize:N5},k5={tokenize:P5},I5={tokenize:D5};function C5(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&gr(t,0,t.length,n),t}function A5(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},h={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=kn(a,t.slice(s+1,s+r+3)),a=kn(a,[["enter",h,e]]),a=kn(a,Iy(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=kn(a,[["exit",h,e],t[o-2],t[o-1],["exit",c,e]]),a=kn(a,t.slice(o+1)),a=kn(a,[["exit",l,e]]),gr(t,s,t.length,a),t}function R5(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?f(m):(o=r.parser.defined.includes(mo(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(S5,h,o?h:f)(m):m===91?t.attempt(k5,h,o?c:f)(m):o?h(m):f(m)}function c(m){return t.attempt(I5,h,f)(m)}function h(m){return e(m)}function f(m){return s._balanced=!0,n(m)}}function N5(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return an(f)?Ba(t,s)(f):s(f)}function s(f){return f===41?h(f):Sk(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return an(f)?Ba(t,l)(f):h(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?Ik(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):h(f)}function c(f){return an(f)?Ba(t,h)(f):h(f)}function h(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function P5(t,e,n){const r=this;return i;function i(a){return kk.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(mo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function D5(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const j5={name:"labelStartImage",resolveAll:Cy.resolveAll,tokenize:O5};function O5(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const L5={name:"labelStartLink",resolveAll:Cy.resolveAll,tokenize:M5};function M5(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const pf={name:"lineEnding",tokenize:V5};function V5(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ve(t,e,"linePrefix")}}const uc={name:"thematicBreak",tokenize:F5};function F5(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||ue(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Ae(c)?Ve(t,a,"whitespace")(c):a(c))}}const Gt={continuation:{tokenize:B5},exit:q5,name:"list",tokenize:$5},U5={partial:!0,tokenize:W5},z5={partial:!0,tokenize:H5};function $5(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const w=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:dm(g)){if(r.containerState.type||(r.containerState.type=w,t.enter(w,{_container:!0})),w==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(uc,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return dm(g)&&++o<10?(t.consume(g),l):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(eh,r.interrupt?n:h,t.attempt(U5,m,f))}function h(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function f(g){return Ae(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function B5(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(eh,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ve(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ae(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(z5,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ve(t,t.attempt(Gt,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function H5(t,e,n){const r=this;return Ve(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function q5(t){t.exit(this.containerState.type)}function W5(t,e,n){const r=this;return Ve(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ae(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const t_={name:"setextUnderline",resolveTo:K5,tokenize:G5};function K5(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function G5(t,e,n){const r=this;let i;return s;function s(c){let h=r.events.length,f;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){f=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Ae(c)?Ve(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||ue(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const Q5={tokenize:Y5};function Y5(t){const e=this,n=t.attempt(eh,r,t.attempt(this.parser.constructs.flowInitial,i,Ve(t,t.attempt(this.parser.constructs.flow,i,t.attempt(t5,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const X5={resolveAll:Ak()},J5=Ck("string"),Z5=Ck("text");function Ck(t){return{resolveAll:Ak(t==="text"?e6:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(h){return c(h)?s(h):a(h)}function a(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),l}function l(h){return c(h)?(n.exit("data"),s(h)):(n.consume(h),l)}function c(h){if(h===null)return!0;const f=i[h];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function Ak(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function e6(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const t6={42:Gt,43:Gt,45:Gt,48:Gt,49:Gt,50:Gt,51:Gt,52:Gt,53:Gt,54:Gt,55:Gt,56:Gt,57:Gt,62:_k},n6={91:o5},r6={[-2]:ff,[-1]:ff,32:ff},i6={35:h5,42:uc,45:[t_,uc],60:g5,61:t_,95:uc,96:Zw,126:Zw},s6={38:bk,92:Ek},o6={[-5]:pf,[-4]:pf,[-3]:pf,33:j5,38:bk,42:hm,60:[L3,b5],91:L5,92:[c5,Ek],93:Cy,95:hm,96:Q3},a6={null:[hm,X5]},l6={null:[42,95]},u6={null:[]},c6=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:l6,contentInitial:n6,disable:u6,document:t6,flow:i6,flowInitial:r6,insideSpan:a6,string:s6,text:o6},Symbol.toStringTag,{value:"Module"}));function d6(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:S(M),check:S(P),consume:x,enter:_,exit:A,interrupt:S(P,{interrupt:!0})},c={code:null,containerState:{},defineSkip:b,events:[],now:w,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:f};let h=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function f(j){return o=kn(o,j),T(),o[o.length-1]!==null?[]:(E(e,0),c.events=Iy(s,c.events,c),c.events)}function m(j,O){return f6(g(j),O)}function g(j){return h6(o,j)}function w(){const{_bufferIndex:j,_index:O,line:D,column:B,offset:X}=r;return{_bufferIndex:j,_index:O,line:D,column:B,offset:X}}function b(j){i[j.line]=j.column,N()}function T(){let j;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(j){h=h(j)}function x(j){ue(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,N()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=j}function _(j,O){const D=O||{};return D.type=j,D.start=w(),c.events.push(["enter",D,c]),a.push(D),D}function A(j){const O=a.pop();return O.end=w(),c.events.push(["exit",O,c]),O}function M(j,O){E(j,O.from)}function P(j,O){O.restore()}function S(j,O){return D;function D(B,X,ve){let he,K,te,R;return Array.isArray(B)?ne(B):"tokenize"in B?ne([B]):J(B);function J(re){return je;function je(Q){const _e=Q!==null&&re[Q],qe=Q!==null&&re.null,at=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(qe)?qe:qe?[qe]:[]];return ne(at)(Q)}}function ne(re){return he=re,K=0,re.length===0?ve:L(re[K])}function L(re){return je;function je(Q){return R=k(),te=re,re.partial||(c.currentConstruct=re),re.name&&c.parser.constructs.disable.null.includes(re.name)?pe():re.tokenize.call(O?Object.assign(Object.create(c),O):c,l,Fe,pe)(Q)}}function Fe(re){return j(te,R),X}function pe(re){return R.restore(),++K<he.length?L(he[K]):ve}}}function E(j,O){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&gr(c.events,O,c.events.length-O,j.resolve(c.events.slice(O),c)),j.resolveTo&&(c.events=j.resolveTo(c.events,c))}function k(){const j=w(),O=c.previous,D=c.currentConstruct,B=c.events.length,X=Array.from(a);return{from:B,restore:ve};function ve(){r=j,c.previous=O,c.currentConstruct=D,c.events.length=B,a=X,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function h6(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function f6(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function p6(t){const r={constructs:_3([c6,...(t||{}).extensions||[]]),content:i(A3),defined:[],document:i(N3),flow:i(Q5),lazy:{},string:i(J5),text:i(Z5)};return r;function i(s){return o;function o(a){return d6(r,s,a)}}}function m6(t){for(;!Tk(t););return t}const n_=/[\0\t\n\r]/g;function g6(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,h,f,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,e="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(n_.lastIndex=f,c=n_.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(f);break}if(g===10&&f===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<m&&(l.push(s.slice(f,m)),t+=m-f),g){case 0:{l.push(65533),t++;break}case 9:{for(h=Math.ceil(t/4)*4,l.push(-2);t++<h;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const y6=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function v6(t){return t.replace(y6,x6)}function x6(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return wk(n.slice(s?2:1),s?16:10)}return ky(n)||t}const Rk={}.hasOwnProperty;function w6(t,e,n){return typeof e!="string"&&(n=e,e=void 0),_6(n)(m6(p6(n).document().write(g6()(t,e,!0))))}function _6(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Mt),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(Lt),blockQuote:s(qe),characterEscape:k,characterReference:k,codeFenced:s(at),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(at,o),codeText:s(tt,o),codeTextData:k,data:k,codeFlowValue:k,definition:s(Ot),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(un),hardBreakEscape:s(qt),hardBreakTrailing:s(qt),htmlFlow:s(me,o),htmlFlowData:k,htmlText:s(me,o),htmlTextData:k,image:s(Wt),label:o,link:s(Mt),listItem:s(Jr),listItemValue:m,listOrdered:s(Ln,f),listUnordered:s(Ln),paragraph:s(rh),reference:L,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Lt),strong:s(Wo),thematicBreak:s(Hl)},exit:{atxHeading:l(),atxHeadingSequence:M,autolink:l(),autolinkEmail:_e,autolinkProtocol:Q,blockQuote:l(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:pe,characterReferenceMarkerNumeric:pe,characterReferenceValue:re,characterReference:je,codeFenced:l(T),codeFencedFence:b,codeFencedFenceInfo:g,codeFencedFenceMeta:w,codeFlowValue:N,codeIndented:l(y),codeText:l(X),codeTextData:N,data:N,definition:l(),definitionDestinationString:A,definitionLabelString:x,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(O),hardBreakTrailing:l(O),htmlFlow:l(D),htmlFlowData:N,htmlText:l(B),htmlTextData:N,image:l(he),label:te,labelText:K,lineEnding:j,link:l(ve),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Fe,resourceDestinationString:R,resourceTitleString:J,resource:ne,setextHeading:l(E),setextHeadingLineSequence:S,setextHeadingText:P,strong:l(),thematicBreak:l()}};Nk(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(z){let H={type:"root",children:[]};const ae={stack:[H],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:h,data:n},we=[];let Re=-1;for(;++Re<z.length;)if(z[Re][1].type==="listOrdered"||z[Re][1].type==="listUnordered")if(z[Re][0]==="enter")we.push(Re);else{const cn=we.pop();Re=i(z,cn,Re)}for(Re=-1;++Re<z.length;){const cn=e[z[Re][0]];Rk.call(cn,z[Re][1].type)&&cn[z[Re][1].type].call(Object.assign({sliceSerialize:z[Re][2].sliceSerialize},ae),z[Re][1])}if(ae.tokenStack.length>0){const cn=ae.tokenStack[ae.tokenStack.length-1];(cn[1]||r_).call(ae,void 0,cn[0])}for(H.position={start:oi(z.length>0?z[0][1].start:{line:1,column:1,offset:0}),end:oi(z.length>0?z[z.length-2][1].end:{line:1,column:1,offset:0})},Re=-1;++Re<e.transforms.length;)H=e.transforms[Re](H)||H;return H}function i(z,H,ae){let we=H-1,Re=-1,cn=!1,dn,bn,Zr,_r;for(;++we<=ae;){const Vt=z[we];switch(Vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Vt[0]==="enter"?Re++:Re--,_r=void 0;break}case"lineEndingBlank":{Vt[0]==="enter"&&(dn&&!_r&&!Re&&!Zr&&(Zr=we),_r=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:_r=void 0}if(!Re&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Re===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(dn){let ei=we;for(bn=void 0;ei--;){const hn=z[ei];if(hn[1].type==="lineEnding"||hn[1].type==="lineEndingBlank"){if(hn[0]==="exit")continue;bn&&(z[bn][1].type="lineEndingBlank",cn=!0),hn[1].type="lineEnding",bn=ei}else if(!(hn[1].type==="linePrefix"||hn[1].type==="blockQuotePrefix"||hn[1].type==="blockQuotePrefixWhitespace"||hn[1].type==="blockQuoteMarker"||hn[1].type==="listItemIndent"))break}Zr&&(!bn||Zr<bn)&&(dn._spread=!0),dn.end=Object.assign({},bn?z[bn][1].start:Vt[1].end),z.splice(bn||we,0,["exit",dn,Vt[2]]),we++,ae++}if(Vt[1].type==="listItemPrefix"){const ei={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start),end:void 0};dn=ei,z.splice(we,0,["enter",ei,Vt[2]]),we++,ae++,Zr=void 0,_r=!0}}}return z[H][1]._spread=cn,ae}function s(z,H){return ae;function ae(we){a.call(this,z(we),we),H&&H.call(this,we)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(z,H,ae){this.stack[this.stack.length-1].children.push(z),this.stack.push(z),this.tokenStack.push([H,ae||void 0]),z.position={start:oi(H.start),end:void 0}}function l(z){return H;function H(ae){z&&z.call(this,ae),c.call(this,ae)}}function c(z,H){const ae=this.stack.pop(),we=this.tokenStack.pop();if(we)we[0].type!==z.type&&(H?H.call(this,z,we[0]):(we[1]||r_).call(this,z,we[0]));else throw new Error("Cannot close `"+z.type+"` ("+$a({start:z.start,end:z.end})+"): its not open");ae.position.end=oi(z.end)}function h(){return x3(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(z){if(this.data.expectingFirstListItemValue){const H=this.stack[this.stack.length-2];H.start=Number.parseInt(this.sliceSerialize(z),10),this.data.expectingFirstListItemValue=void 0}}function g(){const z=this.resume(),H=this.stack[this.stack.length-1];H.lang=z}function w(){const z=this.resume(),H=this.stack[this.stack.length-1];H.meta=z}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function T(){const z=this.resume(),H=this.stack[this.stack.length-1];H.value=z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const z=this.resume(),H=this.stack[this.stack.length-1];H.value=z.replace(/(\r?\n|\r)$/g,"")}function x(z){const H=this.resume(),ae=this.stack[this.stack.length-1];ae.label=H,ae.identifier=mo(this.sliceSerialize(z)).toLowerCase()}function _(){const z=this.resume(),H=this.stack[this.stack.length-1];H.title=z}function A(){const z=this.resume(),H=this.stack[this.stack.length-1];H.url=z}function M(z){const H=this.stack[this.stack.length-1];if(!H.depth){const ae=this.sliceSerialize(z).length;H.depth=ae}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function S(z){const H=this.stack[this.stack.length-1];H.depth=this.sliceSerialize(z).codePointAt(0)===61?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function k(z){const ae=this.stack[this.stack.length-1].children;let we=ae[ae.length-1];(!we||we.type!=="text")&&(we=Ko(),we.position={start:oi(z.start),end:void 0},ae.push(we)),this.stack.push(we)}function N(z){const H=this.stack.pop();H.value+=this.sliceSerialize(z),H.position.end=oi(z.end)}function j(z){const H=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ae=H.children[H.children.length-1];ae.position.end=oi(z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(H.type)&&(k.call(this,z),N.call(this,z))}function O(){this.data.atHardBreak=!0}function D(){const z=this.resume(),H=this.stack[this.stack.length-1];H.value=z}function B(){const z=this.resume(),H=this.stack[this.stack.length-1];H.value=z}function X(){const z=this.resume(),H=this.stack[this.stack.length-1];H.value=z}function ve(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const H=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=H,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function he(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const H=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=H,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function K(z){const H=this.sliceSerialize(z),ae=this.stack[this.stack.length-2];ae.label=v6(H),ae.identifier=mo(H).toLowerCase()}function te(){const z=this.stack[this.stack.length-1],H=this.resume(),ae=this.stack[this.stack.length-1];if(this.data.inReference=!0,ae.type==="link"){const we=z.children;ae.children=we}else ae.alt=H}function R(){const z=this.resume(),H=this.stack[this.stack.length-1];H.url=z}function J(){const z=this.resume(),H=this.stack[this.stack.length-1];H.title=z}function ne(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function Fe(z){const H=this.resume(),ae=this.stack[this.stack.length-1];ae.label=H,ae.identifier=mo(this.sliceSerialize(z)).toLowerCase(),this.data.referenceType="full"}function pe(z){this.data.characterReferenceType=z.type}function re(z){const H=this.sliceSerialize(z),ae=this.data.characterReferenceType;let we;ae?(we=wk(H,ae==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):we=ky(H);const Re=this.stack[this.stack.length-1];Re.value+=we}function je(z){const H=this.stack.pop();H.position.end=oi(z.end)}function Q(z){N.call(this,z);const H=this.stack[this.stack.length-1];H.url=this.sliceSerialize(z)}function _e(z){N.call(this,z);const H=this.stack[this.stack.length-1];H.url="mailto:"+this.sliceSerialize(z)}function qe(){return{type:"blockquote",children:[]}}function at(){return{type:"code",lang:null,meta:null,value:""}}function tt(){return{type:"inlineCode",value:""}}function Ot(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function un(){return{type:"emphasis",children:[]}}function Lt(){return{type:"heading",depth:0,children:[]}}function qt(){return{type:"break"}}function me(){return{type:"html",value:""}}function Wt(){return{type:"image",title:null,url:"",alt:null}}function Mt(){return{type:"link",title:null,url:"",children:[]}}function Ln(z){return{type:"list",ordered:z.type==="listOrdered",start:null,spread:z._spread,children:[]}}function Jr(z){return{type:"listItem",spread:z._spread,checked:null,children:[]}}function rh(){return{type:"paragraph",children:[]}}function Wo(){return{type:"strong",children:[]}}function Ko(){return{type:"text",value:""}}function Hl(){return{type:"thematicBreak"}}}function oi(t){return{line:t.line,column:t.column,offset:t.offset}}function Nk(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Nk(t,r):E6(t,r)}}function E6(t,e){let n;for(n in e)if(Rk.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function r_(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+$a({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+$a({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+$a({start:e.start,end:e.end})+") is still open")}function b6(t){const e=this;e.parser=n;function n(r){return w6(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function T6(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function S6(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function k6(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function I6(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function C6(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function A6(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=qo(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function R6(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function N6(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Pk(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function P6(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Pk(t,e);const i={src:qo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function D6(t,e){const n={src:qo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function j6(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function O6(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Pk(t,e);const i={href:qo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function L6(t,e){const n={href:qo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function M6(t,e,n){const r=t.all(e),i=n?V6(n):Dk(e),s={},o=[];if(typeof e.checked=="boolean"){const h=r[0];let f;h&&h.type==="element"&&h.tagName==="p"?f=h:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const h=r[a];(i||a!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?o.push(...h.children):o.push(h)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function V6(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=Dk(n[r])}return e}function Dk(t){const e=t.spread;return e??t.children.length>1}function F6(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function U6(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function z6(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function $6(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function B6(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=Ey(e.children[1]),l=fk(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function H6(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const f=e.children[l],m={},g=o?o[l]:void 0;g&&(m.align=g);let w={type:"element",tagName:s,properties:m,children:[]};f&&(w.children=t.all(f),t.patch(f,w),w=t.applyData(f,w)),c.push(w)}const h={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,h),t.applyData(e,h)}function q6(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const i_=9,s_=32;function W6(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(o_(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(o_(e.slice(i),i>0,!1)),s.join("")}function o_(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===i_||s===s_;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===i_||s===s_;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function K6(t,e){const n={type:"text",value:W6(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function G6(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Q6={blockquote:T6,break:S6,code:k6,delete:I6,emphasis:C6,footnoteReference:A6,heading:R6,html:N6,imageReference:P6,image:D6,inlineCode:j6,linkReference:O6,link:L6,listItem:M6,list:F6,paragraph:U6,root:z6,strong:$6,table:B6,tableCell:q6,tableRow:H6,text:K6,thematicBreak:G6,toml:Pu,yaml:Pu,definition:Pu,footnoteDefinition:Pu};function Pu(){}const jk=-1,th=0,Ha=1,ld=2,Ay=3,Ry=4,Ny=5,Py=6,Ok=7,Lk=8,a_=typeof self=="object"?self:globalThis,Y6=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case th:case jk:return n(o,i);case Ha:{const a=n([],i);for(const l of o)a.push(r(l));return a}case ld:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case Ay:return n(new Date(o),i);case Ry:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Ny:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case Py:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case Ok:{const{name:a,message:l}=o;return n(new a_[a](l),i)}case Lk:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new a_[s](o),i)};return r},l_=t=>Y6(new Map,t)(0),Ls="",{toString:X6}={},{keys:J6}=Object,ya=t=>{const e=typeof t;if(e!=="object"||!t)return[th,e];const n=X6.call(t).slice(8,-1);switch(n){case"Array":return[Ha,Ls];case"Object":return[ld,Ls];case"Date":return[Ay,Ls];case"RegExp":return[Ry,Ls];case"Map":return[Ny,Ls];case"Set":return[Py,Ls];case"DataView":return[Ha,n]}return n.includes("Array")?[Ha,n]:n.includes("Error")?[Ok,n]:[ld,n]},Du=([t,e])=>t===th&&(e==="function"||e==="symbol"),Z6=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=ya(o);switch(a){case th:{let h=o;switch(l){case"bigint":a=Lk,h=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);h=null;break;case"undefined":return i([jk],o)}return i([a,h],o)}case Ha:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const h=[],f=i([a,h],o);for(const m of o)h.push(s(m));return f}case ld:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const h=[],f=i([a,h],o);for(const m of J6(o))(t||!Du(ya(o[m])))&&h.push([s(m),s(o[m])]);return f}case Ay:return i([a,o.toISOString()],o);case Ry:{const{source:h,flags:f}=o;return i([a,{source:h,flags:f}],o)}case Ny:{const h=[],f=i([a,h],o);for(const[m,g]of o)(t||!(Du(ya(m))||Du(ya(g))))&&h.push([s(m),s(g)]);return f}case Py:{const h=[],f=i([a,h],o);for(const m of o)(t||!Du(ya(m)))&&h.push(s(m));return f}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},u_=(t,{json:e,lossy:n}={})=>{const r=[];return Z6(!(e||n),!!e,new Map,r)(t),r},ud=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?l_(u_(t,e)):structuredClone(t):(t,e)=>l_(u_(t,e));function ez(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function tz(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function nz(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||ez,r=t.options.footnoteBackLabel||tz,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const h=t.all(c),f=String(c.identifier).toUpperCase(),m=qo(f.toLowerCase());let g=0;const w=[],b=t.footnoteCounts.get(f);for(;b!==void 0&&++g<=b;){w.length>0&&w.push({type:"text",value:" "});let x=typeof n=="string"?n:n(l,g);typeof x=="string"&&(x={type:"text",value:x}),w.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const T=h[h.length-1];if(T&&T.type==="element"&&T.tagName==="p"){const x=T.children[T.children.length-1];x&&x.type==="text"?x.value+=" ":T.children.push({type:"text",value:" "}),T.children.push(...w)}else h.push(...w);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(h,!0)};t.patch(c,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...ud(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const Mk=function(t){if(t==null)return oz;if(typeof t=="function")return nh(t);if(typeof t=="object")return Array.isArray(t)?rz(t):iz(t);if(typeof t=="string")return sz(t);throw new Error("Expected function, string, or object as test")};function rz(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Mk(t[n]);return nh(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function iz(t){const e=t;return nh(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function sz(t){return nh(e);function e(n){return n&&n.type===t}}function nh(t){return e;function e(n,r,i){return!!(az(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function oz(){return!0}function az(t){return t!==null&&typeof t=="object"&&"type"in t}const Vk=[],lz=!0,c_=!1,uz="skip";function cz(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=Mk(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,h){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=Vk,w,b,T;if((!e||s(l,c,h[h.length-1]||void 0))&&(g=dz(n(l,h)),g[0]===c_))return g;if("children"in l&&l.children){const y=l;if(y.children&&g[0]!==uz)for(b=(r?y.children.length:-1)+o,T=h.concat(y);b>-1&&b<y.children.length;){const x=y.children[b];if(w=a(x,b,T)(),w[0]===c_)return w;b=typeof w[1]=="number"?w[1]:b+o}}return g}}}function dz(t){return Array.isArray(t)?t:typeof t=="number"?[lz,t]:t==null?Vk:[t]}function Fk(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),cz(t,s,a,i);function a(l,c){const h=c[c.length-1],f=h?h.children.indexOf(l):void 0;return o(l,f,h)}}const fm={}.hasOwnProperty,hz={};function fz(t,e){const n=e||hz,r=new Map,i=new Map,s=new Map,o={...Q6,...n.handlers},a={all:c,applyData:mz,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:pz,wrap:yz};return Fk(t,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const f=h.type==="definition"?r:i,m=String(h.identifier).toUpperCase();f.has(m)||f.set(m,h)}}),a;function l(h,f){const m=h.type,g=a.handlers[m];if(fm.call(a.handlers,m)&&g)return g(a,h,f);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in h){const{children:b,...T}=h,y=ud(T);return y.children=a.all(h),y}return ud(h)}return(a.options.unknownHandler||gz)(a,h,f)}function c(h){const f=[];if("children"in h){const m=h.children;let g=-1;for(;++g<m.length;){const w=a.one(m[g],h);if(w){if(g&&m[g-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=d_(w.value)),!Array.isArray(w)&&w.type==="element")){const b=w.children[0];b&&b.type==="text"&&(b.value=d_(b.value))}Array.isArray(w)?f.push(...w):f.push(w)}}}return f}}function pz(t,e){t.position&&(e.position=XU(t))}function mz(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,ud(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function gz(t,e){const n=e.data||{},r="value"in e&&!(fm.call(n,"hProperties")||fm.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function yz(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function d_(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function h_(t,e){const n=fz(t,e),r=n.one(t,void 0),i=nz(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function vz(t,e){return t&&"run"in t?async function(n,r){const i=h_(n,{file:r,...e});await t.run(i,r)}:function(n,r){return h_(n,{file:r,...t||e})}}function f_(t){if(t)throw t}var cc=Object.prototype.hasOwnProperty,Uk=Object.prototype.toString,p_=Object.defineProperty,m_=Object.getOwnPropertyDescriptor,g_=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Uk.call(e)==="[object Array]"},y_=function(e){if(!e||Uk.call(e)!=="[object Object]")return!1;var n=cc.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&cc.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||cc.call(e,i)},v_=function(e,n){p_&&n.name==="__proto__"?p_(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},x_=function(e,n){if(n==="__proto__")if(cc.call(e,n)){if(m_)return m_(e,n).value}else return;return e[n]},xz=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,h=!1;for(typeof a=="boolean"&&(h=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=x_(a,n),i=x_(e,n),a!==i&&(h&&i&&(y_(i)||(s=g_(i)))?(s?(s=!1,o=r&&g_(r)?r:[]):o=r&&y_(r)?r:{},v_(a,{name:n,newValue:t(h,o,i)})):typeof i<"u"&&v_(a,{name:n,newValue:i}));return a};const mf=k_(xz);function pm(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function wz(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const h=t[++s];let f=-1;if(l){o(l);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,h?_z(h,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function _z(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const h=c;if(a&&n)throw h;return i(h)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const rr={basename:Ez,dirname:bz,extname:Tz,join:Sz,sep:"/"};function Ez(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Bl(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function bz(t){if(Bl(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Tz(t){Bl(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Sz(...t){let e=-1,n;for(;++e<t.length;)Bl(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":kz(n)}function kz(t){Bl(t);const e=t.codePointAt(0)===47;let n=Iz(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Iz(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Bl(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Cz={cwd:Az};function Az(){return"/"}function mm(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Rz(t){if(typeof t=="string")t=new URL(t);else if(!mm(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Nz(t)}function Nz(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const gf=["history","path","basename","stem","extname","dirname"];class zk{constructor(e){let n;e?mm(e)?n={path:e}:typeof e=="string"||Pz(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Cz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<gf.length;){const s=gf[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)gf.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?rr.basename(this.path):void 0}set basename(e){vf(e,"basename"),yf(e,"basename"),this.path=rr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?rr.dirname(this.path):void 0}set dirname(e){w_(this.basename,"dirname"),this.path=rr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?rr.extname(this.path):void 0}set extname(e){if(yf(e,"extname"),w_(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=rr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){mm(e)&&(e=Rz(e)),vf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?rr.basename(this.path,this.extname):void 0}set stem(e){vf(e,"stem"),yf(e,"stem"),this.path=rr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new jt(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function yf(t,e){if(t&&t.includes(rr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+rr.sep+"`")}function vf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function w_(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Pz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Dz=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},jz={}.hasOwnProperty;class Dy extends Dz{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=wz()}copy(){const e=new Dy;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(mf(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(_f("data",this.frozen),this.namespace[e]=n,this):jz.call(this.namespace,e)&&this.namespace[e]||void 0:e?(_f("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=ju(e),r=this.parser||this.Parser;return xf("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),xf("process",this.parser||this.Parser),wf("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=ju(e),l=r.parse(a);r.run(l,a,function(h,f,m){if(h||!f||!m)return c(h);const g=f,w=r.stringify(g,m);Mz(w)?m.value=w:m.result=w,c(h,m)});function c(h,f){h||!f?o(h):s?s(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),xf("processSync",this.parser||this.Parser),wf("processSync",this.compiler||this.Compiler),this.process(e,i),E_("processSync","process",n),r;function i(s,o){n=!0,f_(s),r=o}}run(e,n,r){__(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=ju(n);i.run(e,l,c);function c(h,f,m){const g=f||e;h?a(h):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),E_("runSync","run",r),i;function s(o,a){f_(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=ju(n),i=this.compiler||this.Compiler;return wf("stringify",i),__(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(_f("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[h,...f]=c;l(h,f)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=mf(!0,i.settings,c.settings))}function a(c){let h=-1;if(c!=null)if(Array.isArray(c))for(;++h<c.length;){const f=c[h];s(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,h){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===c){m=f;break}if(m===-1)r.push([c,...h]);else if(h.length>0){let[g,...w]=h;const b=r[m][1];pm(b)&&pm(g)&&(g=mf(!0,b,g)),r[m]=[c,g,...w]}}}}const Oz=new Dy().freeze();function xf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function wf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function _f(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function __(t){if(!pm(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function E_(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function ju(t){return Lz(t)?t:new zk(t)}function Lz(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Mz(t){return typeof t=="string"||Vz(t)}function Vz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Fz="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",b_=[],T_={allowDangerousHtml:!0},Uz=/^(https?|ircs?|mailto|xmpp)$/i,zz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function $z(t){const e=Bz(t),n=Hz(t);return qz(e.runSync(e.parse(n),n),t)}function Bz(t){const e=t.rehypePlugins||b_,n=t.remarkPlugins||b_,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...T_}:T_;return Oz().use(b6).use(n).use(vz,r).use(e)}function Hz(t){const e=t.children||"",n=new zk;return typeof e=="string"&&(n.value=e),n}function qz(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||Wz;for(const h of zz)Object.hasOwn(e,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+Fz+h.id,void 0);return Fk(t,c),n3(t,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function c(h,f,m){if(h.type==="raw"&&m&&typeof f=="number")return o?m.children.splice(f,1):m.children[f]={type:"text",value:h.value},f;if(h.type==="element"){let g;for(g in hf)if(Object.hasOwn(hf,g)&&Object.hasOwn(h.properties,g)){const w=h.properties[g],b=hf[g];(b===null||b.includes(h.tagName))&&(h.properties[g]=l(String(w||""),g,h))}}if(h.type==="element"){let g=n?!n.includes(h.tagName):s?s.includes(h.tagName):!1;if(!g&&r&&typeof f=="number"&&(g=!r(h,f,m)),g&&m&&typeof f=="number")return a&&h.children?m.children.splice(f,1,...h.children):m.children.splice(f,1),f}}}function Wz(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Uz.test(t.slice(0,e))?t:""}const Kz=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(null),[i,s]=C.useState(null),[o,a]=C.useState(null),l=C.useRef(null),c=C.useRef(null),h=C.useRef([]);return C.useEffect(()=>()=>{o&&URL.revokeObjectURL(o),c.current&&c.current.getTracks().forEach(w=>w.stop())},[o]),{isRecording:t,startRecording:async()=>{try{r(null),h.current=[];const w=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:16e3}});c.current=w;const b=new MediaRecorder(w,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});l.current=b,b.ondataavailable=T=>{T.data.size>0&&h.current.push(T.data)},b.onstop=()=>{c.current&&(c.current.getTracks().forEach(T=>T.stop()),c.current=null)},b.start(1e3),e(!0)}catch(w){console.error("Error accessing microphone:",w),r("Could not access microphone. Please ensure you have granted microphone permissions."),e(!1),c.current&&(c.current.getTracks().forEach(b=>b.stop()),c.current=null)}},stopRecording:()=>new Promise(w=>{if(!l.current||!t){console.log("No active recording to stop"),w(null);return}console.log("Stopping media recorder...");const b=()=>{if(console.log("MediaRecorder onstop event fired"),h.current.length>0){const T=new Blob(h.current,{type:"audio/webm;codecs=opus"}),y=URL.createObjectURL(T);console.log("Audio blob created, size:",T.size,"bytes"),s(T),a(y),l.current&&(l.current.stream.getTracks().forEach(x=>x.stop()),l.current=null),w(T)}else console.warn("No audio data was recorded"),r("No audio data was recorded."),l.current&&(l.current.stream.getTracks().forEach(T=>T.stop()),l.current=null),w(null);e(!1)};l.current.onstop=b;try{l.current.state!=="inactive"&&l.current.stream.getTracks().forEach(T=>T.stop()),l.current.state==="recording"?(console.log("Calling MediaRecorder.stop()"),l.current.stop()):(console.log("MediaRecorder not in recording state, state:",l.current.state),b())}catch(T){console.error("Error stopping recording:",T),r("Failed to stop recording. Please try again."),l.current&&(l.current.stream.getTracks().forEach(y=>y.stop()),l.current=null),e(!1),w(null)}}),error:n,audioBlob:i,audioUrl:o,clearAudio:()=>{o&&(URL.revokeObjectURL(o),a(null)),s(null),h.current=[]},hasAudio:!!i}},S_=({audioBlob:t,audioUrl:e,onSend:n,onReRecord:r,onClose:i,transcript:s="",isProcessing:o=!1})=>{const a=C.useRef(null),[l,c]=C.useState(!1),[h,f]=C.useState(0),[m,g]=C.useState(0),[w,b]=C.useState(s),T=C.useRef(null);C.useEffect(()=>{b(s)},[s]);const y=()=>{a.current&&(l?a.current.pause():a.current.play().catch(S=>{console.error("Error playing audio:",S),Be.error("Error playing audio")}),c(!l))},x=()=>{a.current&&f(a.current.currentTime)},_=()=>{a.current&&g(a.current.duration)},A=S=>{if(!a.current||!T.current)return;const E=T.current.getBoundingClientRect(),k=(S.clientX-E.left)/E.width,N=Math.max(0,Math.min(1,k))*m;a.current.currentTime=N,f(N)},M=S=>{const E=Math.floor(S/60),k=Math.floor(S%60);return`${E}:${k<10?"0":""}${k}`},P=()=>{n(w.trim())};return d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Review Your Recording"}),d.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300","aria-label":"Close",children:d.jsx(wl,{className:"h-5 w-5"})})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("div",{className:"flex items-center justify-center mb-2",children:d.jsx("button",{onClick:y,className:"p-3 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-800/50",disabled:o,"aria-label":l?"Pause":"Play",children:l?d.jsx(rF,{className:"h-6 w-6"}):d.jsx(Jp,{className:"h-6 w-6"})})}),d.jsx("div",{ref:T,onClick:A,className:"w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700 cursor-pointer",children:d.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${h/m*100}%`}})}),d.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[d.jsx("span",{children:M(h)}),d.jsx("span",{children:M(m)})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"transcript",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Transcript"}),d.jsx("textarea",{id:"transcript",value:w,onChange:S=>b(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:bg-gray-700 dark:text-white",rows:4,placeholder:"Review and edit your transcript...",disabled:o})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("button",{type:"button",onClick:r,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:o,children:[d.jsx(ZS,{className:"-ml-1 mr-2 h-4 w-4"}),"Re-record"]}),d.jsxs("div",{className:"space-x-2",children:[d.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:o,children:"Cancel"}),d.jsx("button",{type:"button",onClick:P,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:o||!w.trim(),children:o?d.jsxs(d.Fragment,{children:[d.jsx(co,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Sending..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Yp,{className:"-ml-1 mr-2 h-4 w-4"}),"Send"]})})]})]})]}),d.jsx("audio",{ref:a,src:e,onTimeUpdate:x,onLoadedMetadata:_,onEnded:()=>c(!1),className:"hidden"})]})},Gz=({onRecordingComplete:t,onError:e,onDirectSend:n,disabled:r=!1,className:i="",documentId:s,threadId:o})=>{const[a,l]=C.useState({status:"idle"}),[c,h]=C.useState(!1),[f,m]=C.useState(!1),[g,w]=C.useState(""),[b,T]=C.useState(!1),y=C.useRef(null),x=C.useRef(""),_=C.useRef(!1),A=C.useCallback(R=>{console.log("State transition:",{from:a.status,to:R.status}),l(J=>({...J,...R}))},[a.status]),{isRecording:M,startRecording:P,stopRecording:S,error:E,audioBlob:k,audioUrl:N,clearAudio:j,hasAudio:O}=Kz();C.useEffect(()=>{E&&(console.error("Audio recorder error:",E),e(E),A({status:"idle",error:E}),j())},[E,e,j,A]),C.useEffect(()=>{const R=a.status,J=k,ne=O,L=b;console.log("Effect Update:",{status:R,isStopping:L,hasAudio:ne,showControlsVal:f,audioBlobPresent:!!J,audioUrlPresent:!!N}),y.current=J,x.current=N||"",R==="processing"&&!L?J&&ne?(console.log("[Effect] Action: Processing finished, audio found. Show controls, go to idle."),m(!0),A({status:"idle"})):(console.log("[Effect] Action: Processing finished, NO audio. Hide controls, go to idle."),m(!1),A({status:"idle"})):R==="idle"?J&&ne?f||(console.log("[Effect] Action: Idle, audio present, but controls hidden. Showing controls."),m(!0)):f&&(console.log("[Effect] Action: Idle, NO audio, but controls shown. Hiding controls."),m(!1)):(R==="recording"||R==="requesting_permission")&&f&&(console.log("[Effect] Action: Active phase (recording/permission/stopping), but controls shown. Hiding controls."),m(!1))},[k,O,N,a.status,b,f,A]);const D=C.useCallback(async R=>{if(!R){console.error("[transcribeAudio] No blob provided to transcribe."),e("Cannot transcribe, no audio data found.");return}console.log("[transcribeAudio] Initiating transcription for review mode..."),A({status:"processing"});try{const J=new FormData;J.append("audio_file",R,"recording.webm"),s&&(J.append("document_id",s),console.log("[transcribeAudio] Appended document_id to FormData:",s)),o&&(J.append("thread_id",o),console.log("[transcribeAudio] Appended thread_id to FormData:",o)),console.log("[transcribeAudio] Calling apiService.uploadAudioMessage with FormData and options:",{sttProcessingMode:"review"});const ne=await fo.uploadAudioMessage(J,{sttProcessingMode:"review"});console.log("[transcribeAudio] API response received:",ne),ne.error?(console.error("[transcribeAudio] API returned an error:",ne.error),e(`Transcription failed: ${ne.error}`),w("")):ne&&typeof ne.transcript=="string"?(console.log("[transcribeAudio] Transcription successful. Transcript:",ne.transcript),w(ne.transcript)):(console.warn("[transcribeAudio] Transcription response did not contain expected transcript string. Response:",ne),w(""),e("Transcription completed, but no valid text was returned."))}catch(J){console.error("[transcribeAudio] Exception during transcription API call:",J),e(`Error transcribing audio: ${J instanceof Error?J.message:String(J)}`),w("")}finally{console.log("[transcribeAudio] Transcription attempt finished. Setting status to review."),A({status:"review"})}},[s,o,e,A]),B=C.useCallback(()=>{console.log("Resetting MicrophoneButton state"),a.status==="recording"&&(console.log("Stopping active recording during reset"),S().catch(R=>{console.error("Error stopping recording during reset:",R)})),h(!1),m(!1),w(""),x.current&&(URL.revokeObjectURL(x.current),x.current=""),y.current=null,j(),A({status:"idle"}),console.log("MicrophoneButton state reset complete")},[j,a.status,A,S]),X=C.useCallback(async()=>{if(console.log("[handleAudioReview] CLICKED - Function Entry Point"),!y.current){e("No audio to review."),console.error("[handleAudioReview] No audio blob available to review.");return}console.log("[handleAudioReview] Initiating audio review. Setting showReview=true."),h(!0),console.log("[handleAudioReview] Calling transcribeAudio..."),await D(y.current)},[e,D]),ve=C.useCallback(R=>{!R.trim()||!y.current||(t(y.current,R),B())},[t,B]),he=C.useCallback(async()=>{if(y.current){console.log("Initiating direct send"),A({status:"processing"});try{const R=new FormData;R.append("audio_file",y.current,"recording.webm"),s&&R.append("document_id",s),o&&R.append("thread_id",o);const J=await fo.uploadAudioMessage(R,{sttProcessingMode:"direct_send"});if(J.error)throw new Error(J.error);console.log("Direct send successful"),n?await n(y.current):t&&await t(y.current,J.text),B()}catch(R){console.error("Error sending audio:",R),e("Failed to send audio. Please try again."),A({status:"idle"})}}},[s,n,e,t,B,o,A]),K=C.useCallback(async()=>{if(console.log("Record button clicked, current state:",a.status),a.status==="processing"||a.status==="requesting_permission"){console.log("Operation already in progress, ignoring click");return}if(M){console.log("Stopping recording");try{A({status:"processing"}),T(!0);try{await S()}finally{T(!1)}}catch(R){console.error("Error stopping recording:",R);const J=R instanceof Error?R.message:"Failed to stop recording";e(J),A({status:"idle"}),j()}}else{console.log("Starting recording");try{if(h(!1),m(!1),w(""),j(),!_.current){console.log("Requesting microphone permission..."),A({status:"requesting_permission"});try{(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:16e3}})).getTracks().forEach(J=>J.stop()),_.current=!0,console.log("Microphone permission granted")}catch(R){throw console.error("Microphone permission denied:",R),new Error("Microphone access was denied. Please allow microphone access to record audio.")}}console.log("Starting recording..."),A({status:"recording"}),await P(),console.log("Recording started successfully")}catch(R){console.error("Error starting recording:",R);const J=R instanceof Error?R.message:"Could not access microphone";e(J),A({status:"idle"}),j()}}},[M,P,S,e,j,a.status,A]);return c&&y.current&&x.current?(console.log("[renderButtonContent] Rendering AudioReview. Props:",{audioBlobExists:!!y.current,audioUrl:x.current,transcriptToPass:g,isProcessing:a.status==="processing",currentStatus:a.status}),d.jsx(S_,{audioBlob:y.current,audioUrl:x.current,transcript:g,isProcessing:a.status==="processing",onSend:ve,onReRecord:B,onClose:B})):f&&y.current?(console.log("Rendering post-recording controls"),d.jsxs("div",{className:`flex items-center space-x-2 ${i}`,children:[d.jsx("button",{type:"button",onClick:B,className:"p-2 rounded-full text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors","aria-label":"Cancel recording",disabled:a.status==="processing",title:"Cancel",children:d.jsx(wl,{className:"h-5 w-5"})}),d.jsx("button",{type:"button",onClick:X,className:"p-2 rounded-full text-blue-500 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors","aria-label":"Review and send",disabled:a.status==="processing",title:"Review & Send",children:a.status==="processing"?d.jsx(co,{className:"h-5 w-5 animate-spin"}):d.jsx(Yp,{className:"h-5 w-5"})}),n&&d.jsx("button",{type:"button",onClick:he,className:"p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-colors",disabled:a.status==="processing",title:"Send Directly",children:d.jsx(Zp,{className:"h-4 w-4"})}),!1]})):(()=>{if(console.log("Rendering button content, state:",a.status),c&&y.current&&x.current)return console.log("[renderButtonContent] Rendering AudioReview. Props:",{audioBlobExists:!!y.current,audioUrl:x.current,transcriptToPass:g,isProcessing:a.status==="processing",currentMicrophoneButtonStatus:a.status}),d.jsx(S_,{audioBlob:y.current,audioUrl:x.current,transcript:g,isProcessing:a.status==="processing",onSend:ve,onReRecord:B,onClose:B});if(f&&y.current)return console.log("Rendering post-recording controls (from renderButtonContent)"),d.jsxs("div",{className:`flex items-center space-x-2 ${i}`,children:[d.jsx("button",{type:"button",onClick:B,className:"p-2 rounded-full text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors","aria-label":"Cancel recording",disabled:a.status==="processing",title:"Cancel",children:d.jsx(wl,{className:"h-5 w-5"})}),d.jsx("button",{type:"button",onClick:X,className:"p-2 rounded-full text-blue-500 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors","aria-label":"Review and send",disabled:a.status==="processing",title:"Review & Send",children:a.status==="processing"?d.jsx(co,{className:"h-5 w-5 animate-spin"}):d.jsx(Yp,{className:"h-5 w-5"})}),n&&d.jsx("button",{type:"button",onClick:he,className:"p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-colors",disabled:a.status==="processing",title:"Send Directly",children:d.jsx(Zp,{className:"h-4 w-4"})}),!1]});const R=a.status==="processing"||a.status==="requesting_permission",J=a.status==="recording";return d.jsxs("div",{className:"relative",children:[d.jsx("button",{type:"button",onClick:K,disabled:r||R,className:`p-2 rounded-full transition-colors ${J?"bg-red-500 text-white animate-pulse":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 ${i}`,"aria-label":J?"Stop recording":"Start recording",children:R?d.jsx(co,{className:"h-5 w-5 animate-spin"}):J?d.jsx("div",{className:"h-5 w-5 rounded-sm bg-white"}):d.jsx(ZS,{className:"h-5 w-5"})}),J&&d.jsx("div",{className:"absolute -top-2 -right-2 flex items-center justify-center h-5 w-5 bg-red-500 text-white text-xs font-bold rounded-full",children:""}),!1]})})()},Qz="_chatContainer_1bdaw_2",Yz="_messagesArea_1bdaw_14",Xz="_messageBubbleBase_1bdaw_25",Jz="_userMessage_1bdaw_36",Zz="_agentMessage_1bdaw_43",e$="_markdownContent_1bdaw_50",t$="_speakerIconContainer_1bdaw_57",n$="_chatInputBar_1bdaw_78",r$="_inputTextArea_1bdaw_86",i$="_actionButton_1bdaw_106",s$="_quizButton_1bdaw_130",o$="_quizOptionsContainer_1bdaw_151",a$="_quizOptionButton_1bdaw_159",Yt={chatContainer:Qz,messagesArea:Yz,messageBubbleBase:Xz,userMessage:Jz,agentMessage:Zz,markdownContent:e$,speakerIconContainer:t$,chatInputBar:n$,inputTextArea:r$,actionButton:i$,quizButton:s$,quizOptionsContainer:o$,quizOptionButton:a$},l$=()=>{const[t,e]=C.useState(null),[n,r]=C.useState(null),[i,s]=C.useState(null),o=C.useRef(null),a=C.useCallback(async(c,h)=>{try{o.current&&(o.current.pause(),o.current=null),r(h),s(null);const f=await oU();if(!f)throw new Error("Not authenticated");const g=await fetch("http://localhost:5000/api/tts/synthesize",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({text:c,voice_name:"en-US-Standard-C",speaking_rate:1,pitch:0})});if(!g.ok){const y=await g.json().catch(()=>({}));throw new Error(y.message||"Failed to generate speech")}const w=await g.blob(),b=URL.createObjectURL(w),T=new Audio(b);o.current=T,T.onended=()=>{e(null),URL.revokeObjectURL(b)},T.onerror=()=>{s("Failed to play audio"),e(null),URL.revokeObjectURL(b)},await T.play(),e(h),r(null)}catch(f){console.error("TTS playback error:",f),s(f instanceof Error?f.message:"Failed to play message"),r(null),e(null)}},[]),l=C.useCallback(()=>{o.current&&(o.current.pause(),o.current=null,e(null))},[]);return C.useEffect(()=>()=>{o.current&&(o.current.pause(),o.current.src&&URL.revokeObjectURL(o.current.src))},[]),{playAudio:a,stopAudio:l,isPlaying:t,isLoading:n,error:i}},u$=({message:t,onRetrySend:e,onSendMessage:n,playAudio:r,stopAudio:i,isPlayingMessageId:s,isLoadingMessageId:o})=>{const a=()=>{e&&t.text&&t.id&&e(t.text,t.id)},l=C.useCallback(()=>{!t.text||!t.id||o!==t.id&&(s===t.id?i():r(t.text,t.id))},[t.id,t.text,o,s,r,i]);return d.jsxs("div",{className:`
        ${Yt.messageBubbleBase}
        ${t.sender==="user"?Yt.userMessage:Yt.agentMessage}
      `,children:[t.text&&d.jsx("div",{className:`${Yt.speakerIconContainer} ${o===t.id||s===t.id?Yt.speakerIconActive:""}`,title:s===t.id?"Stop audio":"Play audio",onClick:l,role:"button",tabIndex:0,onKeyPress:c=>{(c.key==="Enter"||c.key===" ")&&l()},children:o===t.id?d.jsx(co,{size:20,className:"animate-spin"}):s===t.id?d.jsx(cF,{size:20}):d.jsx(uF,{size:20})}),d.jsxs("div",{className:Yt.markdownContent,children:[d.jsx($z,{children:t.text||""}),t.isError&&t.sender==="user"&&e&&d.jsx("button",{onClick:a,className:"text-xs text-red-400 hover:text-red-300 mt-1",title:"Retry sending message",children:"Failed to send. Retry?"}),t.isQuizQuestion&&t.options&&t.options.length>0&&d.jsx("div",{className:Yt.quizOptionsContainer,children:t.options.map((c,h)=>d.jsx("button",{className:Yt.quizOptionButton,onClick:()=>n(c),children:c},h))})]})]})},c$=({onSendMessage:t,isSendingMessage:e,onAudioSend:n,onAudioError:r,currentDocumentId:i,currentThreadId:s})=>{const[o,a]=C.useState(""),l=C.useRef(null),c=()=>{l.current&&(l.current.style.height="auto",l.current.style.height=`${l.current.scrollHeight}px`)};C.useEffect(()=>{c()},[o]);const h=()=>{o.trim()&&(t(o.trim()),a(""),l.current&&(l.current.style.height="auto"))},f=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),h())};return d.jsxs("div",{className:Yt.chatInputBar,children:[d.jsx("textarea",{ref:l,className:Yt.inputTextArea,value:o,onChange:m=>a(m.target.value),onKeyPress:f,placeholder:"Type your message... (Shift+Enter for new line)",rows:1}),d.jsx(Gz,{onRecordingComplete:(m,g)=>n(m,g),onError:r,documentId:i||void 0,threadId:s||void 0,disabled:e,className:Yt.actionButton}),d.jsx("button",{onClick:h,className:Yt.actionButton,disabled:e||!o.trim(),title:"Send message",children:e?d.jsx(co,{size:20,className:"animate-spin"}):d.jsx(Zp,{size:20})})]})},d$=({messages:t,isSendingMessage:e,onSendMessage:n,onAudioSend:r,onAudioError:i,currentDocumentId:s,currentThreadId:o})=>{const a=C.useRef(null),{playAudio:l,stopAudio:c,isPlaying:h,isLoading:f,error:m}=l$(),g=()=>{var b;(b=a.current)==null||b.scrollIntoView({behavior:"smooth"})};C.useEffect(()=>{g()},[t]),C.useEffect(()=>{m&&console.error("TTS Playback Error:",m)},[m]);const w=(b,T)=>{n(b,!0,T)};return d.jsxs("div",{className:Yt.chatContainer,children:[d.jsxs("div",{className:Yt.messagesArea,children:[t.map(b=>d.jsx(u$,{message:b,onRetrySend:b.sender==="user"?w:void 0,onSendMessage:n,playAudio:l,stopAudio:c,isPlayingMessageId:h,isLoadingMessageId:f},b.id)),d.jsx("div",{ref:a})]}),d.jsx(c$,{onSendMessage:b=>n(b),isSendingMessage:e,onAudioSend:r,onAudioError:i,currentDocumentId:s,currentThreadId:o})]})},h$=()=>{On();const t=Jn(),e=Qr(),n=C.useMemo(()=>new URLSearchParams(t.search).get("document")||void 0,[t.search]),[r,i]=C.useState([]),[s,o]=C.useState(!1),[a,l]=C.useState(void 0),[c,h]=C.useState(null),[f,m]=C.useState(!1),g=C.useRef(!1);C.useEffect(()=>{(()=>{if(n)try{h({id:n,name:`Document ${n.substring(0,8)}...`})}catch(x){console.error("Error setting document details:",x),h(null)}else h(null)})()},[n]);const w=C.useCallback(async()=>{if(!n){Be.error("A document must be loaded to start a quiz.");return}if(!g.current){o(!0),m(!0),g.current=!0;try{const y=await fo.chat("/start_quiz",n,void 0);y.thread_id&&l(y.thread_id);const x={id:`ai-quiz-start-${Date.now()}`,text:y.agent_response,sender:"agent",timestamp:new Date().toISOString(),isQuizQuestion:y.is_quiz||!1,options:y.options||void 0,document_id:n,thread_id:y.thread_id,audio_content_base64:y.audio_content_base64||null};i(_=>[..._,x])}catch(y){console.error("Error starting quiz:",y),Be.error(y.message||"Failed to start quiz."),m(!1),g.current=!1}finally{o(!1)}}},[n]);C.useEffect(()=>{new URLSearchParams(t.search).get("start_quiz")==="true"&&n&&!g.current&&w()},[t.search,n,w]);const b=C.useCallback((y,x)=>{const _=`user-audio-${Date.now()}`,A=x||"Processing audio input...",M={id:_,text:A,sender:"user",timestamp:new Date().toISOString(),isQuizQuestion:f,isPending:!0,document_id:n||void 0,thread_id:a||void 0};i(S=>[...S,M]),o(!0),(async()=>{try{const S=new FormData;S.append("audio_file",y,"recording.webm"),n&&S.append("document_id",n),a&&S.append("thread_id",a),x&&S.append("transcript",x);const E=await fo.uploadAudioMessage(S);if(E.error)throw new Error(E.error);E.thread_id&&!a&&l(E.thread_id);const k=E.transcript||A;i(O=>O.map(D=>D.id===_?{...D,isPending:!1,text:k,thread_id:E.thread_id||a}:D));const N=E.response||E.text||"Sorry, I couldn't process that.",j={id:`ai-audio-response-${Date.now()}`,text:N,sender:"agent",timestamp:new Date().toISOString(),isQuizQuestion:E.quiz_active||!1,document_id:n||void 0,thread_id:E.thread_id||a||void 0};i(O=>[...O,j]),E.quiz_active&&m(!0)}catch(S){console.error("Error sending audio message:",S),Be.error(S.message||"Failed to send audio message."),i(E=>E.map(k=>k.id===_?{...k,isPending:!1,isError:!0,text:A}:k))}finally{o(!1)}})().catch(S=>{console.error("Error in sendAudioAsync execution:",S),o(!1),i(E=>E.map(k=>k.id===_&&k.isPending?{...k,isPending:!1,isError:!0,text:A}:k))})},[n,a,f,i,o,l,m,Be]),T=C.useCallback(async y=>{const x=`user-text-${Date.now()}`,_={id:x,text:y,sender:"user",timestamp:new Date().toISOString(),isQuizQuestion:f,isPending:!0,document_id:n||void 0,thread_id:a||void 0};i(A=>[...A,_]),o(!0);try{const A=await fo.chat(y,n||void 0,a||void 0);A.thread_id&&!a&&l(A.thread_id),i(P=>P.map(S=>S.id===x?{...S,isPending:!1,isError:!1,thread_id:A.thread_id||a}:S));const M={id:`ai-text-response-${Date.now()}`,text:A.agent_response,sender:"agent",timestamp:new Date().toISOString(),isQuizQuestion:A.is_quiz||!1,citations:[],audio_content_base64:A.audio_content_base64||null,options:A.options||void 0,document_id:n||void 0,thread_id:A.thread_id||a||void 0};i(P=>[...P,M]),A.is_quiz&&m(!0)}catch(A){console.error("Error sending message:",A),Be.error(A.message||"Failed to send message."),i(M=>M.map(P=>P.id===x?{...P,isPending:!1,isError:!0}:P))}finally{o(!1)}},[n,a,f]);return d.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[d.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm py-4 px-6 flex items-center",children:[d.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 mr-4","aria-label":"Go back",children:d.jsx(my,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f?"Quiz Mode":"Chat with AI Tutor"}),n&&d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Document: ",c?c.name:`ID: ${n.substring(0,8)}...`]})]})]}),d.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:d.jsx(d$,{messages:r,isSendingMessage:s,onSendMessage:T,onAudioSend:b,onAudioError:y=>Be.error(y),onStartQuiz:w,currentDocumentId:n,currentThreadId:a})})]})},$k=C.createContext(void 0),f$=({children:t})=>{const[e,n]=C.useState(null),[r,i]=C.useState(!1),s=l=>{n(l)},o=C.useCallback(async()=>{if(e){i(!0);try{await fo.cancelQuiz(e),Be.success("Quiz session ended."),n(null)}catch(l){console.error("Failed to cancel quiz session:",l),Be.error("Could not end the quiz session. Please try again.")}finally{i(!1)}}},[e]),a={quizThreadId:e,startQuizSession:s,cancelQuizSession:o,isCancelling:r};return d.jsx($k.Provider,{value:a,children:t})},p$=()=>{const t=C.useContext($k);if(t===void 0)throw new Error("useQuiz must be used within a QuizProvider");return t},m$=()=>{const{currentUser:t,signOut:e}=wr(),{toggleUiTts:n,uiTtsEnabled:r,highContrast:i,toggleHighContrast:s,speakText:o}=On(),a=Qr(),l=Jn(),[c,h]=C.useState(!1),{activeDocumentId:f}=nk(),{quizThreadId:m,cancelQuizSession:g,isCancelling:w}=p$();C.useEffect(()=>{document.documentElement.classList.toggle("high-contrast",i)},[i]);const b=async()=>{try{await e(),a("/")}catch(M){console.error("Failed to log out:",M)}},T=M=>{r&&o(M)},y=C.useCallback(()=>{f?a(`/dashboard/documents/${f}`):(Be.error("Please select a document first to read."),a("/dashboard/documents"))},[f,a]),x=C.useCallback(async()=>{if(w){Be("Please wait, ending quiz session...");return}m&&await g(),f?a(`/dashboard/chat?document=${f}`):(Be.error("Please select a document first."),a("/dashboard/documents"))},[f,a,m,w,g]),_=C.useCallback(()=>{f?a(`/dashboard/documents/${f}?tab=quiz`):(Be.error("Please select a document first to start a quiz."),a("/dashboard/documents"))},[f,a]),A=[{to:"/dashboard",text:"Dashboard",icon:d.jsx(Jt,{className:"w-5 h-5"})},{to:"/dashboard/documents",text:"My Documents",icon:d.jsx(JS,{className:"w-5 h-5"})},{to:"/dashboard/study",text:"Study Mode",icon:d.jsx(xn,{className:"w-5 h-5"})},{text:"Read document",icon:d.jsx(XV,{className:"w-5 h-5"}),onClick:y},{text:"Chat with the document",icon:d.jsx(ho,{className:"w-5 h-5"}),onClick:x},{text:"Quiz",icon:d.jsx(lc,{className:"w-5 h-5"}),onClick:_},{to:"/dashboard/upload",text:"Upload Document",icon:d.jsx(Es,{className:"w-5 h-5"})},{to:"/dashboard/progress",text:"My Progress",icon:d.jsx(YV,{className:"w-5 h-5"})},{to:"/dashboard/settings",text:"Settings",icon:d.jsx(ek,{className:"w-5 h-5"})}];return d.jsxs("div",{className:`min-h-screen flex flex-col ${i?"bg-black text-white":"bg-gradient-to-b from-gray-900 to-gray-800 text-gray-100"}`,children:[d.jsxs("header",{className:`lg:hidden flex items-center justify-between p-4 ${i?"bg-black border-b border-white":"bg-gray-800"}`,children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("button",{onClick:()=>h(!0),className:`p-2 rounded-md ${i?"bg-gray-900 text-white":"bg-gray-700 text-gray-200"}`,"aria-label":"Open sidebar menu",children:d.jsx(nF,{className:"w-6 h-6"})}),d.jsxs(Ce,{to:"/dashboard",className:"flex items-center ml-4",onMouseEnter:()=>T("AI Tutor Dashboard"),children:[d.jsx(xn,{className:`mr-2 h-6 w-6 ${i?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),d.jsx("span",{className:`text-xl font-semibold ${i?"text-white":"text-blue-400"}`,children:"AI Tutor"})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:n,className:`p-2 rounded-full ${r?"bg-blue-600":i?"bg-gray-900":"bg-gray-700"}`,"aria-label":r?"Disable UI text-to-speech":"Enable UI text-to-speech","aria-pressed":r,onMouseEnter:()=>T(r?"Disable UI text-to-speech":"Enable UI text-to-speech"),children:d.jsx(uo,{className:"w-5 h-5"})}),d.jsx("button",{onClick:s,className:`p-2 rounded-full ${i?"bg-white text-black":"bg-gray-700 text-gray-200"}`,"aria-label":i?"Disable high contrast":"Enable high contrast","aria-pressed":i,onMouseEnter:()=>T(i?"Disable high contrast":"Enable high contrast"),children:i?d.jsx(em,{className:"w-5 h-5"}):d.jsx(ad,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:`fixed inset-0 flex z-40 lg:hidden ${c?"opacity-100":"opacity-0 pointer-events-none"} transition-opacity duration-300 ease-in-out`,children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70",onClick:()=>h(!1),"aria-hidden":"true"}),d.jsxs("div",{className:`relative flex flex-col w-80 max-w-xs ${i?"bg-black border-r border-white":"bg-gray-800"} pb-4 flex-1 flex flex-col`,children:[d.jsx("div",{className:"absolute top-0 right-0 pt-2 pr-2",children:d.jsx("button",{className:`p-2 rounded-md ${i?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>h(!1),"aria-label":"Close sidebar",children:d.jsx(wl,{className:"w-5 h-5"})})}),d.jsxs("div",{className:"flex-1 h-0 pt-16 pb-4 overflow-y-auto",children:[d.jsxs("div",{className:"px-4 pb-6 flex items-center",children:[d.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"}`,children:d.jsx(tm,{className:"w-6 h-6"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium",children:t==null?void 0:t.email}),d.jsx("p",{className:`text-xs ${i?"text-gray-200":"text-gray-400"}`,children:"Student"})]})]}),d.jsxs("nav",{className:"mt-4 px-2 space-y-1",children:[A.map(M=>{const P=typeof M.to=="string"&&l.pathname===M.to,S=`group flex items-center px-3 py-2 text-sm font-medium rounded-md ${P?i?"bg-white text-black":"bg-blue-600 text-white":i?"text-gray-900 hover:bg-gray-700":"text-gray-200 hover:bg-gray-700"} transition-colors duration-200 w-full text-left`;return typeof M.onClick=="function"?d.jsxs("button",{onClick:M.onClick,className:S,onMouseEnter:()=>T(M.text),"aria-label":M.text,children:[M.icon,d.jsx("span",{className:"ml-3",children:M.text})]},M.text):d.jsxs(Ce,{to:M.to,className:S,onMouseEnter:()=>T(M.text),"aria-current":P?"page":void 0,children:[M.icon,d.jsx("span",{className:"ml-3",children:M.text})]},M.to)}),d.jsxs("button",{onClick:b,className:`w-full group flex items-center px-4 py-3 text-base font-medium rounded-md ${i?"text-white hover:bg-gray-900":"text-gray-200 hover:bg-gray-700"} transition-colors duration-200`,onMouseEnter:()=>T("Sign out"),children:[d.jsx(Pw,{className:"w-5 h-5"}),d.jsx("span",{className:"ml-4",children:"Sign out"})]})]})]})]})]}),d.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[d.jsx("div",{className:"hidden lg:block lg:flex-shrink-0 lg:w-64",children:d.jsxs("div",{className:`h-full flex flex-col ${i?"bg-black border-r border-white":"bg-gray-800"}`,children:[d.jsx("div",{className:"flex items-center h-16 flex-shrink-0 px-6",children:d.jsxs(Ce,{to:"/dashboard",className:"flex items-center",onMouseEnter:()=>T("AI Tutor Dashboard"),children:[d.jsx(xn,{className:`mr-2 h-6 w-6 ${i?"text-white":"text-blue-400"}`,"aria-hidden":"true"}),d.jsx("span",{className:`text-xl font-semibold ${i?"text-white":"text-blue-400"}`,children:"AI Tutor"})]})}),d.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-700",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${i?"bg-white text-black":"bg-blue-600 text-white"}`,children:d.jsx(tm,{className:"w-6 h-6"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium truncate max-w-[140px]",children:t==null?void 0:t.email}),d.jsx("p",{className:`text-xs ${i?"text-gray-200":"text-gray-400"}`,children:"Student"})]})]})}),d.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1",children:A.map(M=>{const P=M.to&&l.pathname===M.to,S=`group flex items-center px-4 py-3 text-base font-medium rounded-md ${P?i?"bg-white text-black":"bg-blue-600 text-white":i?"text-white hover:bg-gray-900":"text-gray-200 hover:bg-gray-700"} transition-colors duration-200 w-full text-left`;return typeof M.onClick=="function"?d.jsxs("button",{onClick:M.onClick,className:S,onMouseEnter:()=>T(M.text),"aria-label":M.text,children:[M.icon,d.jsx("span",{className:"ml-4",children:M.text})]},M.text):d.jsxs(Ce,{to:M.to,className:S,onMouseEnter:()=>T(M.text),"aria-current":P?"page":void 0,children:[M.icon,d.jsx("span",{className:"ml-4",children:M.text})]},M.to)})}),d.jsxs("div",{className:"px-4 py-4 border-t border-gray-700 space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("button",{onClick:n,className:`p-2 rounded-md flex items-center ${r?i?"bg-white text-black":"bg-blue-600 text-white":i?"bg-gray-900 text-white":"bg-gray-700 text-gray-200"}`,"aria-label":r?"Disable UI text-to-speech":"Enable UI text-to-speech","aria-pressed":r,onMouseEnter:()=>T(r?"Disable UI text-to-speech":"Enable UI text-to-speech"),children:[d.jsx(uo,{className:"w-5 h-5"}),d.jsx("span",{className:"ml-2 text-sm",children:r?"TTS ON":"TTS OFF"})]}),d.jsxs("button",{onClick:s,className:`p-2 rounded-md flex items-center ${i?"bg-white text-black":"bg-gray-700 text-gray-200"}`,"aria-label":i?"Disable high contrast":"Enable high contrast","aria-pressed":i,onMouseEnter:()=>T(i?"Disable high contrast":"Enable high contrast"),children:[i?d.jsx(em,{className:"w-5 h-5"}):d.jsx(ad,{className:"w-5 h-5"}),d.jsx("span",{className:"ml-2 text-sm",children:i?"High contrast":"Normal contrast"})]})]}),d.jsxs("button",{onClick:b,className:`w-full group flex items-center px-4 py-3 text-base font-medium rounded-md ${i?"text-white bg-gray-900 hover:bg-gray-800":"text-gray-200 bg-gray-700 hover:bg-gray-600"} transition-colors duration-200`,onMouseEnter:()=>T("Sign out"),children:[d.jsx(Pw,{className:"w-5 h-5"}),d.jsx("span",{className:"ml-4",children:"Sign out"})]})]})]})]})}),d.jsx("div",{className:"flex-1 overflow-auto",children:d.jsx("main",{className:"h-full",children:d.jsx("div",{className:"h-full py-2 px-4",children:d.jsx(VR,{})})})})]})]})},g$=({onInteractionComplete:t})=>(C.useEffect(()=>{const e=()=>{console.log("User interaction detected - initializing audio capabilities");try{const n=window.AudioContext||window.webkitAudioContext,r=new n,i=r.createOscillator();if(i.connect(r.destination),i.start(0),i.stop(.001),"speechSynthesis"in window){const s=new SpeechSynthesisUtterance("");window.speechSynthesis.speak(s),window.speechSynthesis.cancel()}document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e),t()}catch(n){console.error("Error initializing audio:",n),t()}};return document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0}),()=>{document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e)}},[t]),d.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-70 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg max-w-md text-center",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Welcome to AI Tutor"}),d.jsx("p",{className:"mb-6",children:"Click or tap anywhere to enable all features including text-to-speech."}),d.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",onClick:t,children:"Click to Continue"})]})})),y$=({children:t})=>{const{currentUser:e,loading:n}=wr();return n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800",children:d.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-blue-500 border-t-transparent rounded-full"})}):e?d.jsx(d.Fragment,{children:t}):d.jsx(mp,{to:"/auth/signin",replace:!0})},v$=()=>d.jsxs(UR,{children:[d.jsx(Kt,{path:"/",element:d.jsx(dF,{})}),d.jsx(Kt,{path:"/auth/signin",element:d.jsx(hF,{})}),d.jsx(Kt,{path:"/auth/signup",element:d.jsx(fF,{})}),d.jsx(Kt,{path:"/auth/reset-password",element:d.jsx(pF,{})}),d.jsxs(Kt,{path:"/dashboard",element:d.jsx(y$,{children:d.jsx(_F,{children:d.jsx(f$,{children:d.jsx(m$,{})})})}),children:[d.jsx(Kt,{index:!0,element:d.jsx(mF,{})}),d.jsx(Kt,{path:"upload",element:d.jsx(wF,{})}),d.jsx(Kt,{path:"documents",element:d.jsx(TF,{})}),d.jsx(Kt,{path:"documents/:id",element:d.jsx(bF,{})}),d.jsx(Kt,{path:"chat",element:d.jsx(h$,{})}),d.jsx(Kt,{path:"settings",element:d.jsx(SF,{})}),d.jsx(Kt,{path:"*",element:d.jsx(mp,{to:"/dashboard",replace:!0})})]}),d.jsx(Kt,{path:"*",element:d.jsx(mp,{to:"/",replace:!0})})]});function x$(){const[t,e]=C.useState(!1),n=()=>{console.log("User interaction complete - audio features unlocked"),e(!0)};return d.jsx(cN,{children:d.jsx(gM,{children:d.jsxs(WV,{children:[!t&&d.jsx(g$,{onInteractionComplete:n}),d.jsx(v$,{})]})})})}F1(document.getElementById("root")).render(d.jsx(C.StrictMode,{children:d.jsx(x$,{})}));
