# Deprecation Candidates

## Methodology
This analysis traces all active code paths from frontend entry points through backend APIs to identify truly unused files. A file is considered deprecated only if:
1. It is not imported by any active file
2. OR it is imported but no functions/classes from it are actually called
3. AND it is not a test file or documentation

## Deprecated Backend Files

### 1. `backend/agent/system_prompt_ai_tutor_v2.md`
- **Type**: Documentation/Prompt
- **Status**: ❌ DEPRECATED
- **Reason**: 
  - AiTutorAgent (ReAct-based) is no longer used
  - Comment in app.py confirms: "AiTutorAgent... is no longer used by the application"
  - Supervisor architecture replaced it
- **Safe to Delete**: YES
- **Impact**: None (documentation only)

### 2. `backend/tools/__init__.py` (and all tool files)
- **Type**: Tool definitions
- **Status**: ⚠️ PARTIALLY DEPRECATED
- **Current State**:
  - `backend/tools/` directory exists with only `__init__.py`
  - No actual tool files present (already removed)
  - `__init__.py` exports empty list
- **Referenced By**: 
  - `document_routes.py` line 279: `ocr_tool = current_app.config['TOOLS'].get('OCRTool')`
  - But OCRTool is never initialized in app.py
- **Safe to Delete**: YES (directory and __init__.py)
- **Impact**: Remove OCRTool reference from document_routes.py

### 3. `backend/services/doc_ai_service.py`
- **Type**: Service
- **Status**: ⚠️ INITIALIZED BUT UNUSED
- **Reason**:
  - Initialized in app.py line 132
  - Never called by any active code
  - DUA uses Vertex AI directly, not DocAIService
  - OCR functionality deprecated
- **Safe to Delete**: MAYBE (currently initialized, needs verification)
- **Impact**: Remove initialization from app.py

### 4. `backend/file_usage_tracker.py`
- **Type**: Diagnostic tool
- **Status**: ❌ DEPRECATED
- **Reason**:
  - Lines 22-24 in app.py show it's commented out
  - "Disabled for Production" comment
  - Diagnostic/debugging tool only
- **Safe to Delete**: YES
- **Impact**: None (already disabled)

### 5. `backend/used_python_files_log.txt`
- **Type**: Log file
- **Status**: ❌ DEPRECATED
- **Reason**: Generated by file_usage_tracker.py (which is disabled)
- **Safe to Delete**: YES
- **Impact**: None

### 6. `backend/firestore_schema.js`
- **Type**: Schema definition
- **Status**: ⚠️ REFERENCE ONLY
- **Reason**: JavaScript file in Python backend (likely documentation)
- **Usage**: Not imported or executed
- **Safe to Delete**: MAYBE (could be useful documentation)
- **Impact**: None if deleted

### 7. Test Files in `backend/tests/deprecation/`
- **Type**: Test files
- **Status**: ❌ DEPRECATED (if testing deprecated code)
- **File**: `test_deprecation_candidates.py`
- **Reason**: Tests deprecated OCRTool
- **Safe to Delete**: YES (if OCRTool is removed)
- **Impact**: None

## Deprecated Frontend Files

### 1. `src/pages/dev/DeprecationShowcase.tsx`
- **Type**: Dev-only component
- **Status**: ✅ ACTIVE (but dev-only)
- **Reason**: 
  - Lazy-loaded in App.tsx (lines 21-23)
  - Only available in DEV mode (`import.meta.env.DEV`)
  - Route: `/dev/deprecation-showcase`
- **Safe to Delete**: NO (intentionally kept for dev)
- **Impact**: None (dev tool)

### 2. `src/__mocks__/lucide-react/`
- **Type**: Test mocks
- **Status**: ✅ ACTIVE
- **Reason**: Used by test suite
- **Safe to Delete**: NO
- **Impact**: Tests would fail

## Potentially Unused Backend Files (Require Deep Analysis)

### 1. `backend/graphs/document_understanding_agent/utils/` (subdirectory)
- **Status**: ⚠️ UNKNOWN
- **Reason**: Not analyzed in detail
- **Action**: Check if DUA graph uses these utilities

### 2. `backend/graphs/document_understanding_agent/docs/`
- **Type**: Documentation
- **Status**: ✅ KEEP
- **Reason**: Documentation for active DUA feature

### 3. `backend/static/` directory
- **Type**: Static files
- **Status**: ⚠️ UNKNOWN
- **Reason**: Flask static files, may be served
- **Action**: Check if any static files are referenced

### 4. `backend/uploads/` directory
- **Type**: Temporary upload directory
- **Status**: ✅ ACTIVE
- **Reason**: May be used for temporary file storage
- **Safe to Delete**: NO (runtime directory)

## Database Files (Not Code)

### SQLite Checkpoint Databases
- `backend/quiz_checkpoints.db` ✅ ACTIVE
- `backend/general_query_checkpoints.db` ✅ ACTIVE
- `backend/supervisor_checkpoints.db` ✅ ACTIVE
- `backend/document_understanding_checkpoints.db` ✅ ACTIVE
- **Status**: All active, used by LangGraph
- **Safe to Delete**: NO (runtime state)

## Configuration Files (Keep)

### Backend
- `backend/.env` ✅ ACTIVE
- `backend/requirements.txt` ✅ ACTIVE
- `backend/pytest.ini` ✅ ACTIVE
- `backend/Dockerfile` ✅ ACTIVE

### Frontend
- All config files in root (package.json, vite.config.ts, etc.) ✅ ACTIVE

## Summary of Safe Deletions

### Confirmed Safe to Delete

#### Backend Files
1. ✅ `backend/agent/system_prompt_ai_tutor_v2.md` - Deprecated agent prompt
2. ✅ `backend/tools/` - Empty directory (OCRTool removed)
3. ✅ `backend/file_usage_tracker.py` - Disabled diagnostic tool
4. ✅ `backend/used_python_files_log.txt` - Log from disabled tool
5. ✅ `backend/tests/deprecation/test_deprecation_candidates.py` - Tests deprecated code

#### Backend Files (Requires Code Change First)
6. ⚠️ `backend/services/doc_ai_service.py` - Remove initialization from app.py first
7. ⚠️ `backend/firestore_schema.js` - Verify not used for deployment

### Files to Keep

#### Active Code
- All files in `backend/services/` (except doc_ai_service.py)
- All files in `backend/graphs/` (all graphs active)
- All files in `backend/routes/` (all blueprints active)
- All files in `backend/utils/` (used by services)
- All frontend files (all components/pages/hooks active)

#### Documentation
- `backend/graphs/document_understanding_agent/docs/`
- All markdown files in `docs/`

#### Configuration & Runtime
- All `.env`, `requirements.txt`, config files
- All checkpoint databases
- `backend/uploads/`, `backend/static/` directories

## Deprecation Impact Analysis

### If OCRTool is Fully Removed:
**Files to Delete**:
- `backend/tools/` (entire directory)
- References in `document_routes.py` (lines 279-305)

**Code Changes Required**:
```python
# In document_routes.py, replace OCR block with:
if should_run_ocr:
    current_app.logger.warning("OCR functionality has been deprecated. Document will be marked as 'ocr_unavailable'.")
    final_fs_update_payload['status'] = 'ocr_unavailable'
    final_fs_update_payload['processing_error'] = 'OCR processing is no longer supported. Please use DUA-eligible formats (PDF, PNG, JPG).'
```

### If DocAIService is Removed:
**Files to Delete**:
- `backend/services/doc_ai_service.py`

**Code Changes Required**:
```python
# In app.py, remove lines 132-134:
# docai_service = initialize_component(DocAIService, 'DocAIService', 'SERVICES')
# if docai_service:
#     app.config['DOCAI_SERVICE'] = docai_service
```

## Recommendation

### Immediate Safe Deletions (No Code Changes)
1. Delete `backend/agent/system_prompt_ai_tutor_v2.md`
2. Delete `backend/file_usage_tracker.py`
3. Delete `backend/used_python_files_log.txt`
4. Delete `backend/tests/deprecation/` (if exists)

### Deletions Requiring Minor Code Changes
1. Remove OCRTool references from `document_routes.py`
2. Delete `backend/tools/` directory
3. Remove DocAIService initialization from `app.py`
4. Delete `backend/services/doc_ai_service.py`

### Total Files for Deletion: 5-7 files
### Total Lines of Code to Remove: ~150-200 lines
### Risk Level: LOW (all deprecated code, no active dependencies)
